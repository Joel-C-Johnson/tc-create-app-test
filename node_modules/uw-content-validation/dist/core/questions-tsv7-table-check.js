"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _typeof = require("@babel/runtime/helpers/typeof");Object.defineProperty(exports, "__esModule", { value: true });exports.checkQuestionsTSV7Table = checkQuestionsTSV7Table;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var books = _interopRequireWildcard(require("./books/books"));
var _defaults = require("./defaults");
var _questionsTsv7RowCheck = require("./questions-tsv7-row-check");
var _disabledNotices = require("./disabled-notices");

var _utilities = require("./utilities");function _getRequireWildcardCache(nodeInterop) {if (typeof WeakMap !== "function") return null;var cacheBabelInterop = new WeakMap();var cacheNodeInterop = new WeakMap();return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {return nodeInterop ? cacheNodeInterop : cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj, nodeInterop) {if (!nodeInterop && obj && obj.__esModule) {return obj;}if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache(nodeInterop);if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _createForOfIteratorHelper(o, allowArrayLike) {var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];if (!it) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = it.call(o);}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it.return != null) it.return();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) {symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});}keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {(0, _defineProperty2.default)(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}


var QUESTIONS_TABLE_VALIDATOR_VERSION_STRING = '0.2.3';

var NUM_EXPECTED_QUESTIONS_TSV_FIELDS = 7; // so expects 6 tabs per line
var EXPECTED_QUESTIONS_HEADING_LINE = 'Reference\tID\tTags\tQuote\tOccurrence\tQuestion\tResponse';


/**
 *
 * @param {string} languageCode
 * @param {string} repoCode -- 'TQ' or 'SQ'
 * @param {string} bookID
 * @param {string} filename
 * @param {string} tableText
 * @param {string} givenLocation
 * @param {Object} checkingOptions
 */function
checkQuestionsTSV7Table(_x, _x2, _x3, _x4, _x5, _x6, _x7) {return _checkQuestionsTSV7Table.apply(this, arguments);}



















































































































































































































































// end of checkQuestionsTSV7Table function
function _checkQuestionsTSV7Table() {_checkQuestionsTSV7Table = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(languageCode, repoCode, bookID, filename, tableText, givenLocation, checkingOptions) {var ourLocation, carResult, addSuccessMessage, addNoticePartial, excerptLength, lowercaseBookID, numChaptersThisBook, lines, lastC, lastV, rowIDListForVerse, uniqueRowListForVerse, numVersesThisChapter, n, fields, _fields, reference, rowID, tags, quote, occurrence, question, answer, _reference$split, _reference$split2, C, V, drResultObject, _iterator, _step, drNoticeEntry, _iterator2, _step2, checkedRepoName, _iterator3, _step3, checkedFilenameExtension, uniqueID, intC, lastintC, intV, lastintV, _reference, _C, _V, _rowID, _reference$split3, _reference$split4;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:addNoticePartial = function _addNoticePartial(noticeObject) {// functionLog(`checkQuestionsTSV7Table notice: (priority=${priority}) ${message}${characterIndex > 0 ? ` (at character ${characterIndex})` : ""}${excerpt ? ` ${excerpt}` : ""}${location}`);
              //parameterAssert(noticeObject.priority !== undefined, "ATSV addNoticePartial: 'priority' parameter should be defined");
              //parameterAssert(typeof noticeObject.priority === 'number', `TSV addNoticePartial: 'priority' parameter should be a number not a '${typeof noticeObject.priority}': ${noticeObject.priority}`);
              //parameterAssert(noticeObject.message !== undefined, "ATSV addNoticePartial: 'message' parameter should be defined");
              //parameterAssert(typeof noticeObject.message === 'string', `TSV addNoticePartial: 'message' parameter should be a string not a '${typeof noticeObject.message}': ${noticeObject.message}`);
              // //parameterAssert(C !== undefined, "ATSV addNoticePartial: 'C' parameter should be defined");
              if (noticeObject.C) {//parameterAssert(typeof noticeObject.C === 'string', `TSV addNoticePartial: 'C' parameter should be a string not a '${typeof noticeObject.C}': ${noticeObject.C}`);
              } // //parameterAssert(V !== undefined, "ATSV addNoticePartial: 'V' parameter should be defined");
              if (noticeObject.V) {//parameterAssert(typeof noticeObject.V === 'string', `TSV addNoticePartial: 'V' parameter should be a string not a '${typeof noticeObject.V}': ${noticeObject.V}`);
              } // //parameterAssert(characterIndex !== undefined, "ATSV addNoticePartial: 'characterIndex' parameter should be defined");
              if (noticeObject.characterIndex) {//parameterAssert(typeof noticeObject.characterIndex === 'number', `TSV addNoticePartial: 'characterIndex' parameter should be a number not a '${typeof noticeObject.characterIndex}': ${noticeObject.characterIndex}`);
              } // //parameterAssert(excerpt !== undefined, "ATSV addNoticePartial: 'excerpt' parameter should be defined");
              if (noticeObject.excerpt) {//parameterAssert(typeof noticeObject.excerpt === 'string', `TSV addNoticePartial: 'excerpt' parameter should be a string not a '${typeof noticeObject.excerpt}': ${noticeObject.excerpt}`);
              } //parameterAssert(noticeObject.location !== undefined, "ATSV addNoticePartial: 'location' parameter should be defined");
              //parameterAssert(typeof noticeObject.location === 'string', `TSV addNoticePartial: 'location' parameter should be a string not a '${typeof noticeObject.location}': ${noticeObject.location}`);
              if (noticeObject.debugChain) noticeObject.debugChain = "checkQuestionsTSV7Table ".concat(noticeObject.debugChain);carResult.noticeList.push(_objectSpread(_objectSpread({}, noticeObject), {}, { bookID: bookID, filename: filename, repoCode: repoCode }));};addSuccessMessage = function _addSuccessMessage(successString) {// functionLog(`checkQuestionsTSV7Table success: ${successString}`);
              carResult.successList.push(successString);}; /* This function is optimised for checking the entire file, i.e., all rows.
               It also has the advantage of being able to compare one row with the previous one.
              bookID is a three-character UPPERCASE USFM book identifier or 'OBS'.
              Returns a result object containing a successList and a noticeList
             */ // functionLog(`checkQuestionsTSV7Table(${languageCode}, ${repoCode}, ${bookID}, ${filename}, ${tableText.length}, ${givenLocation},${JSON.stringify(checkingOptions)})â€¦`);
            //parameterAssert(languageCode !== undefined, "checkQuestionsTSV7Table: 'languageCode' parameter should be defined");
            //parameterAssert(typeof languageCode === 'string', `checkQuestionsTSV7Table: 'languageCode' parameter should be a string not a '${typeof languageCode}'`);
            //parameterAssert(repoCode.endsWith('TQ') || repoCode.endsWith('TQ2') || repoCode.endsWith('SQ'), `checkQuestionsTSV7Table: repoCode expected to end with 'TQ', 'TQ2', or 'SQ' not '${repoCode}'`);
            //parameterAssert(bookID !== undefined, "checkQuestionsTSV7Table: 'bookID' parameter should be defined");
            //parameterAssert(typeof bookID === 'string', `checkQuestionsTSV7Table: 'bookID' parameter should be a string not a '${typeof bookID}'`);
            //parameterAssert(bookID.length === 3, `checkQuestionsTSV7Table: 'bookID' parameter should be three characters long not ${bookID.length}`);
            //parameterAssert(bookID.toUpperCase() === bookID, `checkQuestionsTSV7Table: 'bookID' parameter should be UPPERCASE not '${bookID}'`);
            //parameterAssert(bookID === 'OBS' || books.isValidBookID(bookID), `checkQuestionsTSV7Table: '${bookID}' is not a valid USFM book identifier`);
            //parameterAssert(givenLocation !== undefined, "checkQuestionsTSV7Table: 'givenLocation' parameter should be defined");
            //parameterAssert(typeof givenLocation === 'string', `checkQuestionsTSV7Table: 'givenLocation' parameter should be a string not a '${typeof givenLocation}'`);
            ourLocation = givenLocation;if (ourLocation && ourLocation[0] !== ' ') ourLocation = " ".concat(ourLocation);carResult = { successList: [], noticeList: [] };try {excerptLength = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.excerptLength;} catch (ttcError) {}if (typeof excerptLength !== 'number' || isNaN(excerptLength)) {excerptLength = _defaults.DEFAULT_EXCERPT_LENGTH; // debugLog(`Using default excerptLength=${excerptLength}`);
            } // else
            // debugLog(`Using supplied excerptLength=${excerptLength}`, `cf. default=${DEFAULT_EXCERPT_LENGTH}`);
            // const excerptHalfLength = Math.floor(excerptLength / 2); // rounded down
            // const excerptHalfLengthPlus = Math.floor((excerptLength + 1) / 2); // rounded up
            // debugLog(`Using excerptHalfLength=${excerptHalfLength}`, `excerptHalfLengthPlus=${excerptHalfLengthPlus}`);
            lowercaseBookID = bookID.toLowerCase();numChaptersThisBook = 0;if (bookID === 'OBS') numChaptersThisBook = 50; // There's 50 Open Bible Stories
            else {//parameterAssert(lowercaseBookID !== 'obs', "Shouldnâ€™t happen in checkQuestionsTSV7Table");
                try {numChaptersThisBook = books.chaptersInBook(bookID);} catch (_unused) {if (!books.isValidBookID(bookID)) // must not be in FRT, BAK, etc.
                    addNoticePartial({ priority: 747, message: "Bad function call: should be given a valid book abbreviation", excerpt: bookID, location: " (not '".concat(bookID, "')").concat(ourLocation) });}}lines = tableText.split('\n'); // debugLog(`  '${location}' has ${lines.length.toLocaleString()} total lines (expecting ${NUM_EXPECTED_TN_FIELDS} fields in each line)`);
            lastC = '', lastV = '';rowIDListForVerse = [], uniqueRowListForVerse = [];numVersesThisChapter = 0;n = 0;case 15:if (!(n < lines.length)) {_context.next = 47;break;}if (!(n === 0)) {_context.next = 20;break;}if (lines[0] === EXPECTED_QUESTIONS_HEADING_LINE) addSuccessMessage("Checked TSV header ".concat(ourLocation));else addNoticePartial({ priority: 988, message: "Bad TSV header", details: "expected '".concat(EXPECTED_QUESTIONS_HEADING_LINE, "'"), excerpt: lines[0], lineNumber: 1, location: ourLocation });_context.next = 44;break;case 20:fields = lines[n].split('\t');if (!(fields.length === NUM_EXPECTED_QUESTIONS_TSV_FIELDS)) {_context.next = 43;break;} // eslint-disable-next-line no-unused-vars
            _fields = (0, _slicedToArray2.default)(fields, 7), reference = _fields[0], rowID = _fields[1], tags = _fields[2], quote = _fields[3], occurrence = _fields[4], question = _fields[5], answer = _fields[6];_reference$split = reference.split(':'), _reference$split2 = (0, _slicedToArray2.default)(_reference$split, 2), C = _reference$split2[0], V = _reference$split2[1]; // Use the row check to do most basic checks
            _context.next = 26;return (0, _questionsTsv7RowCheck.checkQuestionsTSV7DataRow)(languageCode, repoCode, lines[n], bookID, C, V, ourLocation, checkingOptions);case 26:drResultObject = _context.sent; // Choose only ONE of the following
            // This is the fast way of append the results from this field
            // result.noticeList = result.noticeList.concat(firstResult.noticeList);
            // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
            //  process results line by line
            _iterator = _createForOfIteratorHelper(drResultObject.noticeList);try {for (_iterator.s(); !(_step = _iterator.n()).done;) {drNoticeEntry = _step.value;if (drNoticeEntry.extra) // it must be an indirect check on a TA or TW article from a TN2 check
                  carResult.noticeList.push(drNoticeEntry); // Just copy the complete notice as is
                else if (drNoticeEntry.priority !== 931) // We already caught Missing row ID
                    addNoticePartial(_objectSpread(_objectSpread({}, drNoticeEntry), {}, { lineNumber: n + 1 }));} // The following is needed coz we might be checking the linked TA and/or TW articles
            } catch (err) {_iterator.e(err);} finally {_iterator.f();}if (drResultObject.checkedFileCount && drResultObject.checkedFileCount > 0) if (typeof carResult.checkedFileCount === 'number') carResult.checkedFileCount += drResultObject.checkedFileCount;else carResult.checkedFileCount = drResultObject.checkedFileCount;if (drResultObject.checkedFilesizes && drResultObject.checkedFilesizes > 0) if (typeof carResult.checkedFilesizes === 'number') carResult.checkedFilesizes += drResultObject.checkedFilesizes;else carResult.checkedFilesizes = drResultObject.checkedFilesizes;if (drResultObject.checkedRepoNames && drResultObject.checkedRepoNames.length > 0) {_iterator2 = _createForOfIteratorHelper(drResultObject.checkedRepoNames);try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {checkedRepoName = _step2.value;try {if (carResult.checkedRepoNames.indexOf(checkedRepoName) < 0) carResult.checkedRepoNames.push(checkedRepoName);} catch (_unused2) {carResult.checkedRepoNames = [checkedRepoName];}}} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}}if (drResultObject.checkedFilenameExtensions && drResultObject.checkedFilenameExtensions.length > 0) {_iterator3 = _createForOfIteratorHelper(drResultObject.checkedFilenameExtensions);try {for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {checkedFilenameExtension = _step3.value;try {if (carResult.checkedFilenameExtensions.indexOf(checkedFilenameExtension) < 0) carResult.checkedFilenameExtensions.push(checkedFilenameExtension);} catch (_unused3) {carResult.checkedFilenameExtensions = [checkedFilenameExtension];}}} catch (err) {_iterator3.e(err);} finally {_iterator3.f();}} // if (ttResult.checkedFilenameExtensions) userLog("ttResult", JSON.stringify(ttResult));
            // So here we only have to check against the previous and next fields for out-of-order problems and duplicate problems
            if (C !== lastC || V !== lastV) {rowIDListForVerse = []; // ID's only need to be unique within each verse
              uniqueRowListForVerse = []; // Same for these
            } // TODO: Check if we need this at all (even though tC 3.0 canâ€™t display these "duplicate" notes)
            // Check for duplicate notes
            uniqueID = C + V + question + answer; // This combination should not be repeated
            // if (uniqueRowListForVerse.includes(uniqueID))
            //     addNoticePartial({ priority: 880, C, V, message: `Duplicate note`, rowID, lineNumber: n + 1, location: ourLocation });
            // if (uniqueRowListForVerse.includes(uniqueID))
            //     addNoticePartial({ priority: 80, C, V, message: `Note: tC 3.0 wonâ€™t display duplicate note`, rowID, lineNumber: n + 1, location: ourLocation });
            uniqueRowListForVerse.push(uniqueID);if (C) {if (C === 'front') {} else if (/^\d+$/.test(C)) {intC = Number(C);if (C !== lastC) if (lowercaseBookID === 'obs') numVersesThisChapter = 99; // Set to maximum expected number of frames
                else numVersesThisChapter = books.versesInChapter(lowercaseBookID, intC);if (intC === 0) addNoticePartial({ priority: 551, C: C, V: V, message: "Invalid zero chapter number", rowID: rowID, lineNumber: n + 1, excerpt: C, location: ourLocation });if (intC > numChaptersThisBook) addNoticePartial({ priority: 737, C: C, V: V, message: "Invalid large chapter number", rowID: rowID, lineNumber: n + 1, excerpt: C, location: ourLocation });if (/^\d+$/.test(lastC)) {lastintC = Number(lastC);if (intC < lastintC) addNoticePartial({ priority: 736, C: C, V: V, message: "Receding chapter number", details: "'".concat(C, "' after '").concat(lastC, "'"), rowID: rowID, lineNumber: n + 1, location: ourLocation });else if (intC > lastintC + 1) addNoticePartial({ priority: 735, C: C, V: V, message: "Advancing chapter number", details: "'".concat(C, "' after '").concat(lastC, "'").rowID, lineNumber: n + 1, location: ourLocation });}} else addNoticePartial({ priority: 734, C: C, V: V, message: "Bad chapter number", rowID: rowID, lineNumber: n + 1, location: ourLocation });} else addNoticePartial({ priority: 739, C: C, V: V, message: "Missing chapter number", rowID: rowID, lineNumber: n + 1, location: " after ".concat(lastC, ":").concat(V).concat(ourLocation) });if (V) {if (V === 'intro') {} else if (/^\d+$/.test(V)) {intV = Number(V);if (intV === 0 && bookID !== 'PSA') // Psalms have \d titles
                  addNoticePartial({ priority: 552, C: C, V: V, message: "Invalid zero verse number", details: "for chapter ".concat(C), rowID: rowID, lineNumber: n + 1, excerpt: V, location: ourLocation });if (intV > numVersesThisChapter) addNoticePartial({ priority: 734, C: C, V: V, message: "Invalid large verse number", details: "for chapter ".concat(C), rowID: rowID, lineNumber: n + 1, excerpt: V, location: ourLocation });if (/^\d+$/.test(lastV)) {lastintV = Number(lastV);if (C === lastC && intV < lastintV) addNoticePartial({ priority: 733, C: C, V: V, message: "Receding verse number", details: "'".concat(V, "' after '").concat(lastV, " for chapter ").concat(C), rowID: rowID, lineNumber: n + 1, excerpt: V, location: ourLocation }); // else if (intV > lastintV + 1)
                  //   addNoticePartial({priority:556, `Skipped verses with '${V}' verse number after '${lastV}'${withString}`);
                }} else addNoticePartial({ priority: 738, C: C, V: V, message: "Bad verse number", rowID: rowID, lineNumber: n + 1, location: ourLocation });} else addNoticePartial({ priority: 790, C: C, V: V, message: "Missing verse number", rowID: rowID, lineNumber: n + 1, location: " after ".concat(C, ":").concat(lastV).concat(ourLocation) });if (rowID) {if (rowIDListForVerse.includes(rowID)) addNoticePartial({ priority: 831, C: C, V: V, message: "Duplicate '".concat(rowID, "' ID"), fieldName: 'ID', rowID: rowID, lineNumber: n + 1, location: ourLocation });rowIDListForVerse.push(rowID);} else addNoticePartial({ priority: 932, C: C, V: V, message: "Missing row ID", fieldName: 'ID', lineNumber: n + 1, location: ourLocation });lastC = C;lastV = V;_context.next = 44;break;case 43: // wrong number of fields in the row
            // if (n === lines.length - 1) // itâ€™s the last line
            //     userLog(`  Line ${n}: Has ${fields.length} field(s) instead of ${NUM_EXPECTED_TN_FIELDS}: ${EXPECTED_QUESTIONS_HEADING_LINE.replace(/\t/g, ', ')}`);
            // else
            if (n !== lines.length - 1) {// itâ€™s not the last line
              // Have a go at getting some of the first fields out of the line
              _reference = '?:?', _C = '?', _V = '?', _rowID = '????';try {_reference = fields[0];} catch (_unused4) {}try {_rowID = fields[1];} catch (_unused5) {}try {_reference$split3 = _reference.split(':');_reference$split4 = (0, _slicedToArray2.default)(_reference$split3, 2);_C = _reference$split4[0];_V = _reference$split4[1];} catch (_unused6) {}addNoticePartial({ priority: 983, message: "Wrong number of tabbed fields (expected ".concat(NUM_EXPECTED_QUESTIONS_TSV_FIELDS, ")"), excerpt: "Found ".concat(fields.length, " field").concat(fields.length === 1 ? '' : 's'), C: _C, V: _V, rowID: _rowID, lineNumber: n + 1, location: ourLocation });}case 44:n++;_context.next = 15;break;case 47:if (!(checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.suppressNoticeDisablingFlag)) {// functionLog(`checkQuestionsTSV7Table: calling removeDisabledNotices(${carResult.noticeList.length}) having ${JSON.stringify(checkingOptions)}`);
              carResult.noticeList = (0, _disabledNotices.removeDisabledNotices)(carResult.noticeList);}if ((!(checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.cutoffPriorityLevel) || (checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.cutoffPriorityLevel) < 20) && checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.disableAllLinkFetchingFlag) addNoticePartial({ priority: 20, message: "Note that 'disableAllLinkFetchingFlag' was set so link targets were not checked", location: ourLocation });addSuccessMessage("Checked all ".concat((lines.length - 1).toLocaleString(), " data line").concat(lines.length - 1 === 1 ? '' : 's').concat(ourLocation, "."));if (carResult.noticeList.length) addSuccessMessage("checkQuestionsTSV7Table v".concat(QUESTIONS_TABLE_VALIDATOR_VERSION_STRING, " finished with ").concat(carResult.noticeList.length ? carResult.noticeList.length.toLocaleString() : "zero", " notice").concat(carResult.noticeList.length === 1 ? '' : 's'));else addSuccessMessage("No errors or warnings found by checkQuestionsTSV7Table v".concat(QUESTIONS_TABLE_VALIDATOR_VERSION_STRING)); // debugLog(`  checkQuestionsTSV7Table returning with ${result.successList.length.toLocaleString()} success(es), ${result.noticeList.length.toLocaleString()} notice(s).`);
            // debugLog("checkQuestionsTSV7Table result is", JSON.stringify(carResult));
            return _context.abrupt("return", carResult);case 52:case "end":return _context.stop();}}}, _callee);}));return _checkQuestionsTSV7Table.apply(this, arguments);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL3F1ZXN0aW9ucy10c3Y3LXRhYmxlLWNoZWNrLmpzIl0sIm5hbWVzIjpbIlFVRVNUSU9OU19UQUJMRV9WQUxJREFUT1JfVkVSU0lPTl9TVFJJTkciLCJOVU1fRVhQRUNURURfUVVFU1RJT05TX1RTVl9GSUVMRFMiLCJFWFBFQ1RFRF9RVUVTVElPTlNfSEVBRElOR19MSU5FIiwiY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGUiLCJsYW5ndWFnZUNvZGUiLCJyZXBvQ29kZSIsImJvb2tJRCIsImZpbGVuYW1lIiwidGFibGVUZXh0IiwiZ2l2ZW5Mb2NhdGlvbiIsImNoZWNraW5nT3B0aW9ucyIsImFkZFN1Y2Nlc3NNZXNzYWdlIiwiYWRkTm90aWNlUGFydGlhbCIsIm5vdGljZU9iamVjdCIsIkMiLCJWIiwiY2hhcmFjdGVySW5kZXgiLCJleGNlcnB0IiwiZGVidWdDaGFpbiIsImNhclJlc3VsdCIsIm5vdGljZUxpc3QiLCJwdXNoIiwic3VjY2Vzc1N0cmluZyIsInN1Y2Nlc3NMaXN0Iiwib3VyTG9jYXRpb24iLCJleGNlcnB0TGVuZ3RoIiwidHRjRXJyb3IiLCJpc05hTiIsIkRFRkFVTFRfRVhDRVJQVF9MRU5HVEgiLCJsb3dlcmNhc2VCb29rSUQiLCJ0b0xvd2VyQ2FzZSIsIm51bUNoYXB0ZXJzVGhpc0Jvb2siLCJib29rcyIsImNoYXB0ZXJzSW5Cb29rIiwiaXNWYWxpZEJvb2tJRCIsInByaW9yaXR5IiwibWVzc2FnZSIsImxvY2F0aW9uIiwibGluZXMiLCJzcGxpdCIsImxhc3RDIiwibGFzdFYiLCJyb3dJRExpc3RGb3JWZXJzZSIsInVuaXF1ZVJvd0xpc3RGb3JWZXJzZSIsIm51bVZlcnNlc1RoaXNDaGFwdGVyIiwibiIsImxlbmd0aCIsImRldGFpbHMiLCJsaW5lTnVtYmVyIiwiZmllbGRzIiwicmVmZXJlbmNlIiwicm93SUQiLCJ0YWdzIiwicXVvdGUiLCJvY2N1cnJlbmNlIiwicXVlc3Rpb24iLCJhbnN3ZXIiLCJkclJlc3VsdE9iamVjdCIsImRyTm90aWNlRW50cnkiLCJleHRyYSIsImNoZWNrZWRGaWxlQ291bnQiLCJjaGVja2VkRmlsZXNpemVzIiwiY2hlY2tlZFJlcG9OYW1lcyIsImNoZWNrZWRSZXBvTmFtZSIsImluZGV4T2YiLCJjaGVja2VkRmlsZW5hbWVFeHRlbnNpb25zIiwiY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9uIiwidW5pcXVlSUQiLCJ0ZXN0IiwiaW50QyIsIk51bWJlciIsInZlcnNlc0luQ2hhcHRlciIsImxhc3RpbnRDIiwiaW50ViIsImxhc3RpbnRWIiwiaW5jbHVkZXMiLCJmaWVsZE5hbWUiLCJzdXBwcmVzc05vdGljZURpc2FibGluZ0ZsYWciLCJjdXRvZmZQcmlvcml0eUxldmVsIiwiZGlzYWJsZUFsbExpbmtGZXRjaGluZ0ZsYWciLCJ0b0xvY2FsZVN0cmluZyJdLCJtYXBwaW5ncyI6Im9vQkFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Qzs7O0FBR0EsSUFBTUEsd0NBQXdDLEdBQUcsT0FBakQ7O0FBRUEsSUFBTUMsaUNBQWlDLEdBQUcsQ0FBMUMsQyxDQUE2QztBQUM3QyxJQUFNQywrQkFBK0IsR0FBRyw0REFBeEM7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7QUFDc0JDLHVCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb1B0Qjt3SUFwUE8saUJBQXVDQyxZQUF2QyxFQUFxREMsUUFBckQsRUFBK0RDLE1BQS9ELEVBQXVFQyxRQUF2RSxFQUFpRkMsU0FB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akIsSUFBdUMsRUFBakYsS0FDR3BFLGVBREgsYUFDR0EsZUFESCxlQUNHQSxlQUFlLENBQUVxRSwwQkFEeEIsRUFFSW5FLGdCQUFnQixDQUFDLEVBQUV1QixRQUFRLEVBQUUsRUFBWixFQUFnQkMsT0FBTyxFQUFFLGlGQUF6QixFQUE0R0MsUUFBUSxFQUFFYixXQUF0SCxFQUFELENBQWhCLENBRUpiLGlCQUFpQix1QkFBZ0IsQ0FBQzJCLEtBQUssQ0FBQ1EsTUFBTixHQUFlLENBQWhCLEVBQW1Ca0MsY0FBbkIsRUFBaEIsdUJBQWdFMUMsS0FBSyxDQUFDUSxNQUFOLEdBQWUsQ0FBZixLQUFxQixDQUFyQixHQUF5QixFQUF6QixHQUE4QixHQUE5RixTQUFvR3RCLFdBQXBHLE9BQWpCLENBQ0EsSUFBSUwsU0FBUyxDQUFDQyxVQUFWLENBQXFCMEIsTUFBekIsRUFDSW5DLGlCQUFpQixvQ0FBNkJYLHdDQUE3Qiw0QkFBdUZtQixTQUFTLENBQUNDLFVBQVYsQ0FBcUIwQixNQUFyQixHQUE4QjNCLFNBQVMsQ0FBQ0MsVUFBVixDQUFxQjBCLE1BQXJCLENBQTRCa0MsY0FBNUIsRUFBOUIsR0FBNkUsTUFBcEssb0JBQW9MN0QsU0FBUyxDQUFDQyxVQUFWLENBQXFCMEIsTUFBckIsS0FBZ0MsQ0FBaEMsR0FBb0MsRUFBcEMsR0FBeUMsR0FBN04sRUFBakIsQ0FESixLQUdJbkMsaUJBQWlCLG1FQUE0RFgsd0NBQTVELEVBQWpCLENBL09ELENBZ1BIO0FBQ0E7QUFqUEcsNkNBa1BJbUIsU0FsUEosMkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBib29rcyBmcm9tICcuL2Jvb2tzL2Jvb2tzJztcbmltcG9ydCB7IERFRkFVTFRfRVhDRVJQVF9MRU5HVEggfSBmcm9tICcuL2RlZmF1bHRzJ1xuaW1wb3J0IHsgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyB9IGZyb20gJy4vcXVlc3Rpb25zLXRzdjctcm93LWNoZWNrJztcbmltcG9ydCB7IHJlbW92ZURpc2FibGVkTm90aWNlcyB9IGZyb20gJy4vZGlzYWJsZWQtbm90aWNlcyc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbmltcG9ydCB7IHBhcmFtZXRlckFzc2VydCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuXG5jb25zdCBRVUVTVElPTlNfVEFCTEVfVkFMSURBVE9SX1ZFUlNJT05fU1RSSU5HID0gJzAuMi4zJztcblxuY29uc3QgTlVNX0VYUEVDVEVEX1FVRVNUSU9OU19UU1ZfRklFTERTID0gNzsgLy8gc28gZXhwZWN0cyA2IHRhYnMgcGVyIGxpbmVcbmNvbnN0IEVYUEVDVEVEX1FVRVNUSU9OU19IRUFESU5HX0xJTkUgPSAnUmVmZXJlbmNlXFx0SURcXHRUYWdzXFx0UXVvdGVcXHRPY2N1cnJlbmNlXFx0UXVlc3Rpb25cXHRSZXNwb25zZSc7XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlQ29kZVxuICogQHBhcmFtIHtzdHJpbmd9IHJlcG9Db2RlIC0tICdUUScgb3IgJ1NRJ1xuICogQHBhcmFtIHtzdHJpbmd9IGJvb2tJRFxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFibGVUZXh0XG4gKiBAcGFyYW0ge3N0cmluZ30gZ2l2ZW5Mb2NhdGlvblxuICogQHBhcmFtIHtPYmplY3R9IGNoZWNraW5nT3B0aW9uc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGUobGFuZ3VhZ2VDb2RlLCByZXBvQ29kZSwgYm9va0lELCBmaWxlbmFtZSwgdGFibGVUZXh0LCBnaXZlbkxvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpIHtcbiAgICAvKiBUaGlzIGZ1bmN0aW9uIGlzIG9wdGltaXNlZCBmb3IgY2hlY2tpbmcgdGhlIGVudGlyZSBmaWxlLCBpLmUuLCBhbGwgcm93cy5cblxuICAgICAgSXQgYWxzbyBoYXMgdGhlIGFkdmFudGFnZSBvZiBiZWluZyBhYmxlIHRvIGNvbXBhcmUgb25lIHJvdyB3aXRoIHRoZSBwcmV2aW91cyBvbmUuXG5cbiAgICAgYm9va0lEIGlzIGEgdGhyZWUtY2hhcmFjdGVyIFVQUEVSQ0FTRSBVU0ZNIGJvb2sgaWRlbnRpZmllciBvciAnT0JTJy5cblxuICAgICBSZXR1cm5zIGEgcmVzdWx0IG9iamVjdCBjb250YWluaW5nIGEgc3VjY2Vzc0xpc3QgYW5kIGEgbm90aWNlTGlzdFxuICAgICAqL1xuICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZSgke2xhbmd1YWdlQ29kZX0sICR7cmVwb0NvZGV9LCAke2Jvb2tJRH0sICR7ZmlsZW5hbWV9LCAke3RhYmxlVGV4dC5sZW5ndGh9LCAke2dpdmVuTG9jYXRpb259LCR7SlNPTi5zdHJpbmdpZnkoY2hlY2tpbmdPcHRpb25zKX0p4oCmYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQobGFuZ3VhZ2VDb2RlICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGU6ICdsYW5ndWFnZUNvZGUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbGFuZ3VhZ2VDb2RlID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlOiAnbGFuZ3VhZ2VDb2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBsYW5ndWFnZUNvZGV9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHJlcG9Db2RlLmVuZHNXaXRoKCdUUScpIHx8IHJlcG9Db2RlLmVuZHNXaXRoKCdUUTInKSB8fCByZXBvQ29kZS5lbmRzV2l0aCgnU1EnKSwgYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlOiByZXBvQ29kZSBleHBlY3RlZCB0byBlbmQgd2l0aCAnVFEnLCAnVFEyJywgb3IgJ1NRJyBub3QgJyR7cmVwb0NvZGV9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGJvb2tJRCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlOiAnYm9va0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGJvb2tJRCA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZTogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgYm9va0lEfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQubGVuZ3RoID09PSAzLCBgY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGU6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgdGhyZWUgY2hhcmFjdGVycyBsb25nIG5vdCAke2Jvb2tJRC5sZW5ndGh9YCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va0lELnRvVXBwZXJDYXNlKCkgPT09IGJvb2tJRCwgYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlOiAnYm9va0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIFVQUEVSQ0FTRSBub3QgJyR7Ym9va0lEfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQgPT09ICdPQlMnIHx8IGJvb2tzLmlzVmFsaWRCb29rSUQoYm9va0lEKSwgYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlOiAnJHtib29rSUR9JyBpcyBub3QgYSB2YWxpZCBVU0ZNIGJvb2sgaWRlbnRpZmllcmApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGdpdmVuTG9jYXRpb24gIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZTogJ2dpdmVuTG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZ2l2ZW5Mb2NhdGlvbiA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZTogJ2dpdmVuTG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGdpdmVuTG9jYXRpb259J2ApO1xuXG4gICAgbGV0IG91ckxvY2F0aW9uID0gZ2l2ZW5Mb2NhdGlvbjtcbiAgICBpZiAob3VyTG9jYXRpb24gJiYgb3VyTG9jYXRpb25bMF0gIT09ICcgJykgb3VyTG9jYXRpb24gPSBgICR7b3VyTG9jYXRpb259YDtcblxuICAgIGNvbnN0IGNhclJlc3VsdCA9IHsgc3VjY2Vzc0xpc3Q6IFtdLCBub3RpY2VMaXN0OiBbXSB9O1xuXG4gICAgZnVuY3Rpb24gYWRkU3VjY2Vzc01lc3NhZ2Uoc3VjY2Vzc1N0cmluZykge1xuICAgICAgICAvLyBmdW5jdGlvbkxvZyhgY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGUgc3VjY2VzczogJHtzdWNjZXNzU3RyaW5nfWApO1xuICAgICAgICBjYXJSZXN1bHQuc3VjY2Vzc0xpc3QucHVzaChzdWNjZXNzU3RyaW5nKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkTm90aWNlUGFydGlhbChub3RpY2VPYmplY3QpIHtcbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlIG5vdGljZTogKHByaW9yaXR5PSR7cHJpb3JpdHl9KSAke21lc3NhZ2V9JHtjaGFyYWN0ZXJJbmRleCA+IDAgPyBgIChhdCBjaGFyYWN0ZXIgJHtjaGFyYWN0ZXJJbmRleH0pYCA6IFwiXCJ9JHtleGNlcnB0ID8gYCAke2V4Y2VycHR9YCA6IFwiXCJ9JHtsb2NhdGlvbn1gKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LnByaW9yaXR5ICE9PSB1bmRlZmluZWQsIFwiQVRTViBhZGROb3RpY2VQYXJ0aWFsOiAncHJpb3JpdHknIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5wcmlvcml0eSA9PT0gJ251bWJlcicsIGBUU1YgYWRkTm90aWNlUGFydGlhbDogJ3ByaW9yaXR5JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgbnVtYmVyIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QucHJpb3JpdHl9JzogJHtub3RpY2VPYmplY3QucHJpb3JpdHl9YCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KG5vdGljZU9iamVjdC5tZXNzYWdlICE9PSB1bmRlZmluZWQsIFwiQVRTViBhZGROb3RpY2VQYXJ0aWFsOiAnbWVzc2FnZScgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0Lm1lc3NhZ2UgPT09ICdzdHJpbmcnLCBgVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdtZXNzYWdlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QubWVzc2FnZX0nOiAke25vdGljZU9iamVjdC5tZXNzYWdlfWApO1xuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChDICE9PSB1bmRlZmluZWQsIFwiQVRTViBhZGROb3RpY2VQYXJ0aWFsOiAnQycgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICBpZiAobm90aWNlT2JqZWN0LkMpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5DID09PSAnc3RyaW5nJywgYFRTViBhZGROb3RpY2VQYXJ0aWFsOiAnQycgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LkN9JzogJHtub3RpY2VPYmplY3QuQ31gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChWICE9PSB1bmRlZmluZWQsIFwiQVRTViBhZGROb3RpY2VQYXJ0aWFsOiAnVicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICBpZiAobm90aWNlT2JqZWN0LlYpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5WID09PSAnc3RyaW5nJywgYFRTViBhZGROb3RpY2VQYXJ0aWFsOiAnVicgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LlZ9JzogJHtub3RpY2VPYmplY3QuVn1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChjaGFyYWN0ZXJJbmRleCAhPT0gdW5kZWZpbmVkLCBcIkFUU1YgYWRkTm90aWNlUGFydGlhbDogJ2NoYXJhY3RlckluZGV4JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIGlmIChub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXgpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleCA9PT0gJ251bWJlcicsIGBUU1YgYWRkTm90aWNlUGFydGlhbDogJ2NoYXJhY3RlckluZGV4JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgbnVtYmVyIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXh9JzogJHtub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoZXhjZXJwdCAhPT0gdW5kZWZpbmVkLCBcIkFUU1YgYWRkTm90aWNlUGFydGlhbDogJ2V4Y2VycHQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgaWYgKG5vdGljZU9iamVjdC5leGNlcnB0KSB7IC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QuZXhjZXJwdCA9PT0gJ3N0cmluZycsIGBUU1YgYWRkTm90aWNlUGFydGlhbDogJ2V4Y2VycHQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5leGNlcnB0fSc6ICR7bm90aWNlT2JqZWN0LmV4Y2VycHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LmxvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiQVRTViBhZGROb3RpY2VQYXJ0aWFsOiAnbG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5sb2NhdGlvbiA9PT0gJ3N0cmluZycsIGBUU1YgYWRkTm90aWNlUGFydGlhbDogJ2xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QubG9jYXRpb259JzogJHtub3RpY2VPYmplY3QubG9jYXRpb259YCk7XG5cbiAgICAgICAgaWYgKG5vdGljZU9iamVjdC5kZWJ1Z0NoYWluKSBub3RpY2VPYmplY3QuZGVidWdDaGFpbiA9IGBjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZSAke25vdGljZU9iamVjdC5kZWJ1Z0NoYWlufWA7XG4gICAgICAgIGNhclJlc3VsdC5ub3RpY2VMaXN0LnB1c2goeyAuLi5ub3RpY2VPYmplY3QsIGJvb2tJRCwgZmlsZW5hbWUsIHJlcG9Db2RlIH0pO1xuICAgIH1cblxuXG4gICAgbGV0IGV4Y2VycHRMZW5ndGg7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhjZXJwdExlbmd0aCA9IGNoZWNraW5nT3B0aW9ucz8uZXhjZXJwdExlbmd0aDtcbiAgICB9IGNhdGNoICh0dGNFcnJvcikgeyB9XG4gICAgaWYgKHR5cGVvZiBleGNlcnB0TGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc05hTihleGNlcnB0TGVuZ3RoKSkge1xuICAgICAgICBleGNlcnB0TGVuZ3RoID0gREVGQVVMVF9FWENFUlBUX0xFTkdUSDtcbiAgICAgICAgLy8gZGVidWdMb2coYFVzaW5nIGRlZmF1bHQgZXhjZXJwdExlbmd0aD0ke2V4Y2VycHRMZW5ndGh9YCk7XG4gICAgfVxuICAgIC8vIGVsc2VcbiAgICAvLyBkZWJ1Z0xvZyhgVXNpbmcgc3VwcGxpZWQgZXhjZXJwdExlbmd0aD0ke2V4Y2VycHRMZW5ndGh9YCwgYGNmLiBkZWZhdWx0PSR7REVGQVVMVF9FWENFUlBUX0xFTkdUSH1gKTtcbiAgICAvLyBjb25zdCBleGNlcnB0SGFsZkxlbmd0aCA9IE1hdGguZmxvb3IoZXhjZXJwdExlbmd0aCAvIDIpOyAvLyByb3VuZGVkIGRvd25cbiAgICAvLyBjb25zdCBleGNlcnB0SGFsZkxlbmd0aFBsdXMgPSBNYXRoLmZsb29yKChleGNlcnB0TGVuZ3RoICsgMSkgLyAyKTsgLy8gcm91bmRlZCB1cFxuICAgIC8vIGRlYnVnTG9nKGBVc2luZyBleGNlcnB0SGFsZkxlbmd0aD0ke2V4Y2VycHRIYWxmTGVuZ3RofWAsIGBleGNlcnB0SGFsZkxlbmd0aFBsdXM9JHtleGNlcnB0SGFsZkxlbmd0aFBsdXN9YCk7XG5cbiAgICBsZXQgbG93ZXJjYXNlQm9va0lEID0gYm9va0lELnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IG51bUNoYXB0ZXJzVGhpc0Jvb2sgPSAwO1xuICAgIGlmIChib29rSUQgPT09ICdPQlMnKVxuICAgICAgICBudW1DaGFwdGVyc1RoaXNCb29rID0gNTA7IC8vIFRoZXJlJ3MgNTAgT3BlbiBCaWJsZSBTdG9yaWVzXG4gICAgZWxzZSB7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGxvd2VyY2FzZUJvb2tJRCAhPT0gJ29icycsIFwiU2hvdWxkbuKAmXQgaGFwcGVuIGluIGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbnVtQ2hhcHRlcnNUaGlzQm9vayA9IGJvb2tzLmNoYXB0ZXJzSW5Cb29rKGJvb2tJRCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgaWYgKCFib29rcy5pc1ZhbGlkQm9va0lEKGJvb2tJRCkpIC8vIG11c3Qgbm90IGJlIGluIEZSVCwgQkFLLCBldGMuXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3NDcsIG1lc3NhZ2U6IFwiQmFkIGZ1bmN0aW9uIGNhbGw6IHNob3VsZCBiZSBnaXZlbiBhIHZhbGlkIGJvb2sgYWJicmV2aWF0aW9uXCIsIGV4Y2VycHQ6IGJvb2tJRCwgbG9jYXRpb246IGAgKG5vdCAnJHtib29rSUR9Jykke291ckxvY2F0aW9ufWAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbGluZXMgPSB0YWJsZVRleHQuc3BsaXQoJ1xcbicpO1xuICAgIC8vIGRlYnVnTG9nKGAgICcke2xvY2F0aW9ufScgaGFzICR7bGluZXMubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IHRvdGFsIGxpbmVzIChleHBlY3RpbmcgJHtOVU1fRVhQRUNURURfVE5fRklFTERTfSBmaWVsZHMgaW4gZWFjaCBsaW5lKWApO1xuXG4gICAgbGV0IGxhc3RDID0gJycsIGxhc3RWID0gJyc7XG4gICAgbGV0IHJvd0lETGlzdEZvclZlcnNlID0gW10sIHVuaXF1ZVJvd0xpc3RGb3JWZXJzZSA9IFtdO1xuICAgIGxldCBudW1WZXJzZXNUaGlzQ2hhcHRlciA9IDA7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBsaW5lcy5sZW5ndGg7IG4rKykge1xuICAgICAgICAvLyBmdW5jdGlvbkxvZyhgY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGUgY2hlY2tpbmcgbGluZSAke259OiAke0pTT04uc3RyaW5naWZ5KGxpbmVzW25dKX1gKTtcbiAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICAgIGlmIChsaW5lc1swXSA9PT0gRVhQRUNURURfUVVFU1RJT05TX0hFQURJTkdfTElORSlcbiAgICAgICAgICAgICAgICBhZGRTdWNjZXNzTWVzc2FnZShgQ2hlY2tlZCBUU1YgaGVhZGVyICR7b3VyTG9jYXRpb259YCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5ODgsIG1lc3NhZ2U6IFwiQmFkIFRTViBoZWFkZXJcIiwgZGV0YWlsczogYGV4cGVjdGVkICcke0VYUEVDVEVEX1FVRVNUSU9OU19IRUFESU5HX0xJTkV9J2AsIGV4Y2VycHQ6IGxpbmVzWzBdLCBsaW5lTnVtYmVyOiAxLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSAvLyBub3QgdGhlIGhlYWRlclxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgZmllbGRzID0gbGluZXNbbl0uc3BsaXQoJ1xcdCcpO1xuICAgICAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IE5VTV9FWFBFQ1RFRF9RVUVTVElPTlNfVFNWX0ZJRUxEUykge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyZWZlcmVuY2UsIHJvd0lELCB0YWdzLCBxdW90ZSwgb2NjdXJyZW5jZSwgcXVlc3Rpb24sIGFuc3dlcl0gPSBmaWVsZHM7XG4gICAgICAgICAgICAgICAgY29uc3QgW0MsIFZdID0gcmVmZXJlbmNlLnNwbGl0KCc6JylcblxuICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgcm93IGNoZWNrIHRvIGRvIG1vc3QgYmFzaWMgY2hlY2tzXG4gICAgICAgICAgICAgICAgY29uc3QgZHJSZXN1bHRPYmplY3QgPSBhd2FpdCBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93KGxhbmd1YWdlQ29kZSwgcmVwb0NvZGUsIGxpbmVzW25dLCBib29rSUQsIEMsIFYsIG91ckxvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIC8vIENob29zZSBvbmx5IE9ORSBvZiB0aGUgZm9sbG93aW5nXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmFzdCB3YXkgb2YgYXBwZW5kIHRoZSByZXN1bHRzIGZyb20gdGhpcyBmaWVsZFxuICAgICAgICAgICAgICAgIC8vIHJlc3VsdC5ub3RpY2VMaXN0ID0gcmVzdWx0Lm5vdGljZUxpc3QuY29uY2F0KGZpcnN0UmVzdWx0Lm5vdGljZUxpc3QpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIG5lZWQgdG8gcHV0IGV2ZXJ5dGhpbmcgdGhyb3VnaCBhZGROb3RpY2VQYXJ0aWFsLCBlLmcuLCBmb3IgZGVidWdnaW5nIG9yIGZpbHRlcmluZ1xuICAgICAgICAgICAgICAgIC8vICBwcm9jZXNzIHJlc3VsdHMgbGluZSBieSBsaW5lXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkck5vdGljZUVudHJ5IG9mIGRyUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgIGlmIChkck5vdGljZUVudHJ5LmV4dHJhKSAvLyBpdCBtdXN0IGJlIGFuIGluZGlyZWN0IGNoZWNrIG9uIGEgVEEgb3IgVFcgYXJ0aWNsZSBmcm9tIGEgVE4yIGNoZWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJSZXN1bHQubm90aWNlTGlzdC5wdXNoKGRyTm90aWNlRW50cnkpOyAvLyBKdXN0IGNvcHkgdGhlIGNvbXBsZXRlIG5vdGljZSBhcyBpc1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkck5vdGljZUVudHJ5LnByaW9yaXR5ICE9PSA5MzEpIC8vIFdlIGFscmVhZHkgY2F1Z2h0IE1pc3Npbmcgcm93IElEXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgLi4uZHJOb3RpY2VFbnRyeSwgbGluZU51bWJlcjogbiArIDEgfSk7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBpcyBuZWVkZWQgY296IHdlIG1pZ2h0IGJlIGNoZWNraW5nIHRoZSBsaW5rZWQgVEEgYW5kL29yIFRXIGFydGljbGVzXG4gICAgICAgICAgICAgICAgaWYgKGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRGaWxlQ291bnQgJiYgZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVDb3VudCA+IDApXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FyUmVzdWx0LmNoZWNrZWRGaWxlQ291bnQgPT09ICdudW1iZXInKSBjYXJSZXN1bHQuY2hlY2tlZEZpbGVDb3VudCArPSBkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZUNvdW50O1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGNhclJlc3VsdC5jaGVja2VkRmlsZUNvdW50ID0gZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVDb3VudDtcbiAgICAgICAgICAgICAgICBpZiAoZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVzaXplcyAmJiBkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZXNpemVzID4gMClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYXJSZXN1bHQuY2hlY2tlZEZpbGVzaXplcyA9PT0gJ251bWJlcicpIGNhclJlc3VsdC5jaGVja2VkRmlsZXNpemVzICs9IGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRGaWxlc2l6ZXM7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgY2FyUmVzdWx0LmNoZWNrZWRGaWxlc2l6ZXMgPSBkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZXNpemVzO1xuICAgICAgICAgICAgICAgIGlmIChkclJlc3VsdE9iamVjdC5jaGVja2VkUmVwb05hbWVzICYmIGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRSZXBvTmFtZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2VkUmVwb05hbWUgb2YgZHJSZXN1bHRPYmplY3QuY2hlY2tlZFJlcG9OYW1lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IGlmIChjYXJSZXN1bHQuY2hlY2tlZFJlcG9OYW1lcy5pbmRleE9mKGNoZWNrZWRSZXBvTmFtZSkgPCAwKSBjYXJSZXN1bHQuY2hlY2tlZFJlcG9OYW1lcy5wdXNoKGNoZWNrZWRSZXBvTmFtZSk7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgY2FyUmVzdWx0LmNoZWNrZWRSZXBvTmFtZXMgPSBbY2hlY2tlZFJlcG9OYW1lXTsgfVxuICAgICAgICAgICAgICAgIGlmIChkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZW5hbWVFeHRlbnNpb25zICYmIGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbnMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2VkRmlsZW5hbWVFeHRlbnNpb24gb2YgZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IGlmIChjYXJSZXN1bHQuY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9ucy5pbmRleE9mKGNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbikgPCAwKSBjYXJSZXN1bHQuY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9ucy5wdXNoKGNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbik7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHsgY2FyUmVzdWx0LmNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbnMgPSBbY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9uXTsgfVxuICAgICAgICAgICAgICAgIC8vIGlmICh0dFJlc3VsdC5jaGVja2VkRmlsZW5hbWVFeHRlbnNpb25zKSB1c2VyTG9nKFwidHRSZXN1bHRcIiwgSlNPTi5zdHJpbmdpZnkodHRSZXN1bHQpKTtcblxuICAgICAgICAgICAgICAgIC8vIFNvIGhlcmUgd2Ugb25seSBoYXZlIHRvIGNoZWNrIGFnYWluc3QgdGhlIHByZXZpb3VzIGFuZCBuZXh0IGZpZWxkcyBmb3Igb3V0LW9mLW9yZGVyIHByb2JsZW1zIGFuZCBkdXBsaWNhdGUgcHJvYmxlbXNcbiAgICAgICAgICAgICAgICBpZiAoQyAhPT0gbGFzdEMgfHwgViAhPT0gbGFzdFYpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93SURMaXN0Rm9yVmVyc2UgPSBbXTsgLy8gSUQncyBvbmx5IG5lZWQgdG8gYmUgdW5pcXVlIHdpdGhpbiBlYWNoIHZlcnNlXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZVJvd0xpc3RGb3JWZXJzZSA9IFtdOyAvLyBTYW1lIGZvciB0aGVzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRPRE86IENoZWNrIGlmIHdlIG5lZWQgdGhpcyBhdCBhbGwgKGV2ZW4gdGhvdWdoIHRDIDMuMCBjYW7igJl0IGRpc3BsYXkgdGhlc2UgXCJkdXBsaWNhdGVcIiBub3RlcylcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIG5vdGVzXG4gICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlSUQgPSBDICsgViArIHF1ZXN0aW9uICsgYW5zd2VyOyAvLyBUaGlzIGNvbWJpbmF0aW9uIHNob3VsZCBub3QgYmUgcmVwZWF0ZWRcbiAgICAgICAgICAgICAgICAvLyBpZiAodW5pcXVlUm93TGlzdEZvclZlcnNlLmluY2x1ZGVzKHVuaXF1ZUlEKSlcbiAgICAgICAgICAgICAgICAvLyAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4ODAsIEMsIFYsIG1lc3NhZ2U6IGBEdXBsaWNhdGUgbm90ZWAsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIC8vIGlmICh1bmlxdWVSb3dMaXN0Rm9yVmVyc2UuaW5jbHVkZXModW5pcXVlSUQpKVxuICAgICAgICAgICAgICAgIC8vICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgwLCBDLCBWLCBtZXNzYWdlOiBgTm90ZTogdEMgMy4wIHdvbuKAmXQgZGlzcGxheSBkdXBsaWNhdGUgbm90ZWAsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIHVuaXF1ZVJvd0xpc3RGb3JWZXJzZS5wdXNoKHVuaXF1ZUlEKTtcblxuICAgICAgICAgICAgICAgIGlmIChDKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChDID09PSAnZnJvbnQnKSB7IH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoL15cXGQrJC8udGVzdChDKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGludEMgPSBOdW1iZXIoQyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQyAhPT0gbGFzdEMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VyY2FzZUJvb2tJRCA9PT0gJ29icycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVZlcnNlc1RoaXNDaGFwdGVyID0gOTk7IC8vIFNldCB0byBtYXhpbXVtIGV4cGVjdGVkIG51bWJlciBvZiBmcmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVZlcnNlc1RoaXNDaGFwdGVyID0gYm9va3MudmVyc2VzSW5DaGFwdGVyKGxvd2VyY2FzZUJvb2tJRCwgaW50Qyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50QyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDU1MSwgQywgViwgbWVzc2FnZTogYEludmFsaWQgemVybyBjaGFwdGVyIG51bWJlcmAsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgZXhjZXJwdDogQywgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludEMgPiBudW1DaGFwdGVyc1RoaXNCb29rKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzM3LCBDLCBWLCBtZXNzYWdlOiBcIkludmFsaWQgbGFyZ2UgY2hhcHRlciBudW1iZXJcIiwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBleGNlcnB0OiBDLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL15cXGQrJC8udGVzdChsYXN0QykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdGludEMgPSBOdW1iZXIobGFzdEMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRDIDwgbGFzdGludEMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzM2LCBDLCBWLCBtZXNzYWdlOiBcIlJlY2VkaW5nIGNoYXB0ZXIgbnVtYmVyXCIsIGRldGFpbHM6IGAnJHtDfScgYWZ0ZXIgJyR7bGFzdEN9J2AsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGludEMgPiBsYXN0aW50QyArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzM1LCBDLCBWLCBtZXNzYWdlOiBcIkFkdmFuY2luZyBjaGFwdGVyIG51bWJlclwiLCBkZXRhaWxzOiBgJyR7Q30nIGFmdGVyICcke2xhc3RDfSdgLnJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzM0LCBDLCBWLCBtZXNzYWdlOiBcIkJhZCBjaGFwdGVyIG51bWJlclwiLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDczOSwgQywgViwgbWVzc2FnZTogXCJNaXNzaW5nIGNoYXB0ZXIgbnVtYmVyXCIsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IGAgYWZ0ZXIgJHtsYXN0Q306JHtWfSR7b3VyTG9jYXRpb259YCB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChWKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChWID09PSAnaW50cm8nKSB7IH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoL15cXGQrJC8udGVzdChWKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGludFYgPSBOdW1iZXIoVik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ViA9PT0gMCAmJiBib29rSUQgIT09ICdQU0EnKSAvLyBQc2FsbXMgaGF2ZSBcXGQgdGl0bGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA1NTIsIEMsIFYsIG1lc3NhZ2U6IFwiSW52YWxpZCB6ZXJvIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgZm9yIGNoYXB0ZXIgJHtDfWAsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgZXhjZXJwdDogViwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludFYgPiBudW1WZXJzZXNUaGlzQ2hhcHRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDczNCwgQywgViwgbWVzc2FnZTogXCJJbnZhbGlkIGxhcmdlIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgZm9yIGNoYXB0ZXIgJHtDfWAsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgZXhjZXJwdDogViwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eXFxkKyQvLnRlc3QobGFzdFYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RpbnRWID0gTnVtYmVyKGxhc3RWKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQyA9PT0gbGFzdEMgJiYgaW50ViA8IGxhc3RpbnRWKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDczMywgQywgViwgbWVzc2FnZTogXCJSZWNlZGluZyB2ZXJzZSBudW1iZXJcIiwgZGV0YWlsczogYCcke1Z9JyBhZnRlciAnJHtsYXN0Vn0gZm9yIGNoYXB0ZXIgJHtDfWAsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgZXhjZXJwdDogViwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgaWYgKGludFYgPiBsYXN0aW50ViArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhZGROb3RpY2VQYXJ0aWFsKHtwcmlvcml0eTo1NTYsIGBTa2lwcGVkIHZlcnNlcyB3aXRoICcke1Z9JyB2ZXJzZSBudW1iZXIgYWZ0ZXIgJyR7bGFzdFZ9JyR7d2l0aFN0cmluZ31gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDczOCwgQywgViwgbWVzc2FnZTogXCJCYWQgdmVyc2UgbnVtYmVyXCIsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3OTAsIEMsIFYsIG1lc3NhZ2U6IFwiTWlzc2luZyB2ZXJzZSBudW1iZXJcIiwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBsb2NhdGlvbjogYCBhZnRlciAke0N9OiR7bGFzdFZ9JHtvdXJMb2NhdGlvbn1gIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJvd0lEKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dJRExpc3RGb3JWZXJzZS5pbmNsdWRlcyhyb3dJRCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgzMSwgQywgViwgbWVzc2FnZTogYER1cGxpY2F0ZSAnJHtyb3dJRH0nIElEYCwgZmllbGROYW1lOiAnSUQnLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93SURMaXN0Rm9yVmVyc2UucHVzaChyb3dJRCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTMyLCBDLCBWLCBtZXNzYWdlOiBcIk1pc3Npbmcgcm93IElEXCIsIGZpZWxkTmFtZTogJ0lEJywgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcblxuXG4gICAgICAgICAgICAgICAgbGFzdEMgPSBDOyBsYXN0ViA9IFY7XG5cbiAgICAgICAgICAgIH0gZWxzZSAvLyB3cm9uZyBudW1iZXIgb2YgZmllbGRzIGluIHRoZSByb3dcbiAgICAgICAgICAgICAgICAvLyBpZiAobiA9PT0gbGluZXMubGVuZ3RoIC0gMSkgLy8gaXTigJlzIHRoZSBsYXN0IGxpbmVcbiAgICAgICAgICAgICAgICAvLyAgICAgdXNlckxvZyhgICBMaW5lICR7bn06IEhhcyAke2ZpZWxkcy5sZW5ndGh9IGZpZWxkKHMpIGluc3RlYWQgb2YgJHtOVU1fRVhQRUNURURfVE5fRklFTERTfTogJHtFWFBFQ1RFRF9RVUVTVElPTlNfSEVBRElOR19MSU5FLnJlcGxhY2UoL1xcdC9nLCAnLCAnKX1gKTtcbiAgICAgICAgICAgICAgICAvLyBlbHNlXG4gICAgICAgICAgICAgICAgaWYgKG4gIT09IGxpbmVzLmxlbmd0aCAtIDEpIHsgLy8gaXTigJlzIG5vdCB0aGUgbGFzdCBsaW5lXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhdmUgYSBnbyBhdCBnZXR0aW5nIHNvbWUgb2YgdGhlIGZpcnN0IGZpZWxkcyBvdXQgb2YgdGhlIGxpbmVcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlZmVyZW5jZSA9ICc/Oj8nLCBDID0gJz8nLCBWID0gJz8nLCByb3dJRCA9ICc/Pz8/JztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgcmVmZXJlbmNlID0gZmllbGRzWzBdOyB9IGNhdGNoIHsgfVxuICAgICAgICAgICAgICAgICAgICB0cnkgeyByb3dJRCA9IGZpZWxkc1sxXTsgfSBjYXRjaCB7IH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgW0MsIFZdID0gcmVmZXJlbmNlLnNwbGl0KCc6Jyk7IH0gY2F0Y2ggeyB9XG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTgzLCBtZXNzYWdlOiBgV3JvbmcgbnVtYmVyIG9mIHRhYmJlZCBmaWVsZHMgKGV4cGVjdGVkICR7TlVNX0VYUEVDVEVEX1FVRVNUSU9OU19UU1ZfRklFTERTfSlgLCBleGNlcnB0OiBgRm91bmQgJHtmaWVsZHMubGVuZ3RofSBmaWVsZCR7ZmllbGRzLmxlbmd0aCA9PT0gMSA/ICcnIDogJ3MnfWAsIEMsIFYsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2hlY2tpbmdPcHRpb25zPy5zdXBwcmVzc05vdGljZURpc2FibGluZ0ZsYWcpIHtcbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlOiBjYWxsaW5nIHJlbW92ZURpc2FibGVkTm90aWNlcygke2NhclJlc3VsdC5ub3RpY2VMaXN0Lmxlbmd0aH0pIGhhdmluZyAke0pTT04uc3RyaW5naWZ5KGNoZWNraW5nT3B0aW9ucyl9YCk7XG4gICAgICAgIGNhclJlc3VsdC5ub3RpY2VMaXN0ID0gcmVtb3ZlRGlzYWJsZWROb3RpY2VzKGNhclJlc3VsdC5ub3RpY2VMaXN0KTtcbiAgICB9XG5cbiAgICBpZiAoKCFjaGVja2luZ09wdGlvbnM/LmN1dG9mZlByaW9yaXR5TGV2ZWwgfHwgY2hlY2tpbmdPcHRpb25zPy5jdXRvZmZQcmlvcml0eUxldmVsIDwgMjApXG4gICAgICAgICYmIGNoZWNraW5nT3B0aW9ucz8uZGlzYWJsZUFsbExpbmtGZXRjaGluZ0ZsYWcpXG4gICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMjAsIG1lc3NhZ2U6IFwiTm90ZSB0aGF0ICdkaXNhYmxlQWxsTGlua0ZldGNoaW5nRmxhZycgd2FzIHNldCBzbyBsaW5rIHRhcmdldHMgd2VyZSBub3QgY2hlY2tlZFwiLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG5cbiAgICBhZGRTdWNjZXNzTWVzc2FnZShgQ2hlY2tlZCBhbGwgJHsobGluZXMubGVuZ3RoIC0gMSkudG9Mb2NhbGVTdHJpbmcoKX0gZGF0YSBsaW5lJHtsaW5lcy5sZW5ndGggLSAxID09PSAxID8gJycgOiAncyd9JHtvdXJMb2NhdGlvbn0uYCk7XG4gICAgaWYgKGNhclJlc3VsdC5ub3RpY2VMaXN0Lmxlbmd0aClcbiAgICAgICAgYWRkU3VjY2Vzc01lc3NhZ2UoYGNoZWNrUXVlc3Rpb25zVFNWN1RhYmxlIHYke1FVRVNUSU9OU19UQUJMRV9WQUxJREFUT1JfVkVSU0lPTl9TVFJJTkd9IGZpbmlzaGVkIHdpdGggJHtjYXJSZXN1bHQubm90aWNlTGlzdC5sZW5ndGggPyBjYXJSZXN1bHQubm90aWNlTGlzdC5sZW5ndGgudG9Mb2NhbGVTdHJpbmcoKSA6IFwiemVyb1wifSBub3RpY2Uke2NhclJlc3VsdC5ub3RpY2VMaXN0Lmxlbmd0aCA9PT0gMSA/ICcnIDogJ3MnfWApO1xuICAgIGVsc2VcbiAgICAgICAgYWRkU3VjY2Vzc01lc3NhZ2UoYE5vIGVycm9ycyBvciB3YXJuaW5ncyBmb3VuZCBieSBjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZSB2JHtRVUVTVElPTlNfVEFCTEVfVkFMSURBVE9SX1ZFUlNJT05fU1RSSU5HfWApXG4gICAgLy8gZGVidWdMb2coYCAgY2hlY2tRdWVzdGlvbnNUU1Y3VGFibGUgcmV0dXJuaW5nIHdpdGggJHtyZXN1bHQuc3VjY2Vzc0xpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IHN1Y2Nlc3MoZXMpLCAke3Jlc3VsdC5ub3RpY2VMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSBub3RpY2UocykuYCk7XG4gICAgLy8gZGVidWdMb2coXCJjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZSByZXN1bHQgaXNcIiwgSlNPTi5zdHJpbmdpZnkoY2FyUmVzdWx0KSk7XG4gICAgcmV0dXJuIGNhclJlc3VsdDtcbn1cbi8vIGVuZCBvZiBjaGVja1F1ZXN0aW9uc1RTVjdUYWJsZSBmdW5jdGlvblxuIl19