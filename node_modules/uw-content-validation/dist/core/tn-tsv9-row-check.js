"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _typeof = require("@babel/runtime/helpers/typeof");Object.defineProperty(exports, "__esModule", { value: true });exports.checkTN_TSV9DataRow = checkTN_TSV9DataRow;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _defaults = require("./defaults");
var _textHandlingFunctions = require("./text-handling-functions");
var books = _interopRequireWildcard(require("./books/books"));
var _fieldTextCheck = require("./field-text-check");
var _markdownTextCheck = require("./markdown-text-check");
var _taReferenceCheck = require("./ta-reference-check");

var _origQuoteCheck = require("./orig-quote-check");

var _utilities = require("./utilities");function _getRequireWildcardCache(nodeInterop) {if (typeof WeakMap !== "function") return null;var cacheBabelInterop = new WeakMap();var cacheNodeInterop = new WeakMap();return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {return nodeInterop ? cacheNodeInterop : cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj, nodeInterop) {if (!nodeInterop && obj && obj.__esModule) {return obj;}if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache(nodeInterop);if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _createForOfIteratorHelper(o, allowArrayLike) {var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];if (!it) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = it.call(o);}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it.return != null) it.return();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) {symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});}keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {(0, _defineProperty2.default)(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}


// const TN_TABLE_ROW_VALIDATOR_VERSION_STRING = '0.7.2';

var NUM_EXPECTED_TN_TSV_FIELDS = 9; // so expects 8 tabs per line
var EXPECTED_TN_HEADING_LINE = 'Book\tChapter\tVerse\tID\tSupportReference\tOrigQuote\tOccurrence\tGLQuote\tOccurrenceNote';

var LC_ALPHABET = 'abcdefghijklmnopqrstuvwxyz';
var LC_ALPHABET_PLUS_DIGITS = 'abcdefghijklmnopqrstuvwxyz0123456789';
var LC_ALPHABET_PLUS_DIGITS_PLUS_HYPHEN = 'abcdefghijklmnopqrstuvwxyz0123456789-';

var TA_REGEX = new RegExp('\\[\\[rc://[^ /]+?/ta/man/[^ /]+?/([^ \\]]+?)\\]\\]', 'g');


/**
 *
 * @description - Checks one TSV data row of translation notes (TN)
 * @param {string} languageCode - the language code, e.g., 'en'
 * @param {string} repoCode - 'TN'
 * @param {string} line - the TSV line to be checked
 * @param {string} bookID - 3-character UPPERCASE USFM book identifier or 'OBS'
 * @param {string} givenC - chapter number or (for OBS) story number string
 * @param {string} givenV - verse number or (for OBS) frame number string
 * @param {string} givenRowLocation - description of where the line is located
 * @param {Object} checkingOptions - may contain excerptLength, twRepoUsername, twRepoBranch (or tag), disableLinkedTWArticlesCheckFlag parameters
 * @return {Object} - containing noticeList
 */function
checkTN_TSV9DataRow(_x, _x2, _x3, _x4, _x5, _x6, _x7, _x8) {return _checkTN_TSV9DataRow.apply(this, arguments);}






























































































































































































































































































































































































































































































// end of checkTN_TSV9DataRow function
function _checkTN_TSV9DataRow() {_checkTN_TSV9DataRow = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(languageCode, repoCode, line, bookID, givenC, givenV, givenRowLocation, checkingOptions) {var ourRowLocation, linkCheckingOptions, drResult, addNoticePartial, ourMarkdownTextChecks, _ourMarkdownTextChecks, ourCheckTextField, ourCheckSupportReferenceInTA, _ourCheckSupportReferenceInTA, ourCheckTNOriginalLanguageQuoteAndOccurrence, _ourCheckTNOriginalLanguageQuoteAndOccurrence, excerptLength, lowercaseBookID, numChaptersThisBook, haveGoodBookID, fields, RIDSuggestion, SRSuggestion, GLQSuggestion, OQSuggestion, OSuggestion, ONSuggestion, _fields, B, C, V, rowID, supportReference, quote, occurrence, GLQuote, occurrenceNote, numVersesThisChapter, haveGoodChapterNumber, intC, intV, charCount, _charCount, _charCount2, adjustedOccurrenceNote, regexResultArray, linksList, foundSR, details, excerpt, suggestion, _rowID;return _regenerator.default.wrap(function _callee4$(_context4) {while (1) {switch (_context4.prev = _context4.next) {case 0:_ourCheckTNOriginalLanguageQuoteAndOccurrence = function _ourCheckTNOriginalLa2() {_ourCheckTNOriginalLanguageQuoteAndOccurrence = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(rowID, fieldName, fieldText, occurrence, rowLocation, checkingOptions) {var coqResultObject, _iterator4, _step4, noticeEntry;return _regenerator.default.wrap(function _callee3$(_context3) {while (1) {switch (_context3.prev = _context3.next) {case 0:_context3.next = 2;return (0, _origQuoteCheck.checkOriginalLanguageQuoteAndOccurrence)(languageCode, repoCode, fieldName, fieldText, occurrence, bookID, givenC, givenV, rowLocation, checkingOptions);case 2:coqResultObject = _context3.sent; // Choose only ONE of the following
                        // This is the fast way of append the results from this field
                        // result.noticeList = result.noticeList.concat(coqResultObject.noticeList);
                        // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
                        //  process results line by line
                        _iterator4 = _createForOfIteratorHelper(coqResultObject.noticeList);try {for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {noticeEntry = _step4.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourCheckTNOriginalLanguageQuoteAndOccurrence notice length=${Object.keys(noticeEntry).length}`);
                            addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator4.e(err);} finally {_iterator4.f();}case 5:case "end":return _context3.stop();}}}, _callee3);}));return _ourCheckTNOriginalLanguageQuoteAndOccurrence.apply(this, arguments);};ourCheckTNOriginalLanguageQuoteAndOccurrence = function _ourCheckTNOriginalLa(_x20, _x21, _x22, _x23, _x24, _x25) {return _ourCheckTNOriginalLanguageQuoteAndOccurrence.apply(this, arguments);};_ourCheckSupportReferenceInTA = function _ourCheckSupportRefer2() {_ourCheckSupportReferenceInTA = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(rowID, fieldName, taLinkText, rowLocation, checkingOptions) {var coqResultObject, _iterator3, _step3, noticeEntry;return _regenerator.default.wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:_context2.next = 2;return (0, _taReferenceCheck.checkSupportReferenceInTA)(fieldName, taLinkText, rowLocation, _objectSpread(_objectSpread({}, checkingOptions), {}, { taRepoLanguageCode: languageCode }));case 2:coqResultObject = _context2.sent; // Choose only ONE of the following
                        // This is the fast way of append the results from this field
                        // result.noticeList = result.noticeList.concat(coqResultObject.noticeList);
                        // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
                        //  process results line by line
                        _iterator3 = _createForOfIteratorHelper(coqResultObject.noticeList);try {for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {noticeEntry = _step3.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourCheckSupportReferenceInTA notice length=${Object.keys(noticeEntry).length}`);
                            addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator3.e(err);} finally {_iterator3.f();}case 5:case "end":return _context2.stop();}}}, _callee2);}));return _ourCheckSupportReferenceInTA.apply(this, arguments);};ourCheckSupportReferenceInTA = function _ourCheckSupportRefer(_x15, _x16, _x17, _x18, _x19) {return _ourCheckSupportReferenceInTA.apply(this, arguments);};ourCheckTextField = function _ourCheckTextField(rowID, fieldName, fieldText, allowedLinks, rowLocation, checkingOptions) {// Does basic checks for small errors like leading/trailing spaces, etc.
              // We assume that checking for compulsory fields is done elsewhere
              // Updates the global list of notices
              // functionLog(`checkTN_TSV9DataRow ourCheckTextField(${fieldName}, (${fieldText.length}), ${allowedLinks}, ${rowLocation}, …)`);
              //parameterAssert(rowID !== undefined, "checkTN_TSV9DataRow ourCheckTextField: 'rowID' parameter should be defined");
              //parameterAssert(typeof rowID === 'string', `checkTN_TSV9DataRow ourCheckTextField: 'rowID' parameter should be a string not a '${typeof rowID}'`);
              //parameterAssert(fieldName !== undefined, "checkTN_TSV9DataRow ourCheckTextField: 'fieldName' parameter should be defined");
              //parameterAssert(typeof fieldName === 'string', `checkTN_TSV9DataRow ourCheckTextField: 'fieldName' parameter should be a string not a '${typeof fieldName}'`);
              //parameterAssert(fieldText !== undefined, "checkTN_TSV9DataRow ourCheckTextField: 'fieldText' parameter should be defined");
              //parameterAssert(typeof fieldText === 'string', `checkTN_TSV9DataRow ourCheckTextField: 'fieldText' parameter should be a string not a '${typeof fieldText}'`);
              //parameterAssert(allowedLinks === true || allowedLinks === false, "checkTN_TSV9DataRow ourCheckTextField: allowedLinks parameter must be either true or false");
              //parameterAssert(rowLocation !== undefined, "checkTN_TSV9DataRow ourCheckTextField: 'rowLocation' parameter should be defined");
              //parameterAssert(typeof rowLocation === 'string', `checkTN_TSV9DataRow ourCheckTextField: 'rowLocation' parameter should be a string not a '${typeof rowLocation}'`);
              //parameterAssert(rowLocation.indexOf(fieldName) < 0, `checkTN_TSV9DataRow ourCheckTextField: 'rowLocation' parameter should be not contain fieldName=${fieldName}`);
              var fieldType = fieldName === 'OccurrenceNote' ? 'markdown' : 'raw';var octfResultObject = (0, _fieldTextCheck.checkTextField)(languageCode, repoCode, fieldType, fieldName, fieldText, allowedLinks, rowLocation, checkingOptions); // Choose only ONE of the following
              // This is the fast way of append the results from this field
              // result.noticeList = result.noticeList.concat(dbtcResultObject.noticeList);
              // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
              //  process results line by line
              var _iterator = _createForOfIteratorHelper(octfResultObject.noticeList),_step;try {for (_iterator.s(); !(_step = _iterator.n()).done;) {var noticeEntry = _step.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourCheckTextField notice length=${Object.keys(noticeEntry).length}`);
                  addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator.e(err);} finally {_iterator.f();}return octfResultObject.suggestion; // There may or may not be one!
            };_ourMarkdownTextChecks = function _ourMarkdownTextCheck2() {_ourMarkdownTextChecks = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(rowID, fieldName, fieldText, allowedLinks, rowLocation, checkingOptions) {var omtcResultObject, _iterator2, _step2, noticeEntry;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:_context.next = 2;return (0, _markdownTextCheck.checkMarkdownText)(languageCode, repoCode, fieldName, fieldText, rowLocation, checkingOptions);case 2:omtcResultObject = _context.sent; // Choose only ONE of the following
                        // This is the fast way of append the results from this field
                        // result.noticeList = result.noticeList.concat(cmtResultObject.noticeList);
                        // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
                        //  process results line by line
                        _iterator2 = _createForOfIteratorHelper(omtcResultObject.noticeList);try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {noticeEntry = _step2.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourMarkdownTextChecks notice length=${Object.keys(noticeEntry).length}`);
                            // NOTE: Ellipses in OccurrenceNote have the normal meaning
                            //          not like the specialised meaning in the snippet fields Quote and GLQuote
                            if (noticeEntry.priority !== 178 && noticeEntry.priority !== 179 // unexpected space after ellipse, ellipse after space
                            && !noticeEntry.message.startsWith("Unexpected … character after space") // 191
                            ) addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}return _context.abrupt("return", omtcResultObject.suggestion);case 6:case "end":return _context.stop();}}}, _callee);}));return _ourMarkdownTextChecks.apply(this, arguments);};ourMarkdownTextChecks = function _ourMarkdownTextCheck(_x9, _x10, _x11, _x12, _x13, _x14) {return _ourMarkdownTextChecks.apply(this, arguments);};addNoticePartial = function _addNoticePartial(noticeObject) {// functionLog(`checkTN_TSV9DataRow addNoticePartial(priority=${noticeObject.priority}) ${noticeObject.message}, ${noticeObject.characterIndex}, ${noticeObject.excerpt}, ${noticeObject.location}`);
              //parameterAssert(noticeObject.priority !== undefined, "checkTN_TSV9DataRow addNoticePartial: 'priority' parameter should be defined");
              //parameterAssert(typeof noticeObject.priority === 'number', `checkTN_TSV9DataRow addNoticePartial: 'priority' parameter should be a number not a '${typeof noticeObject.priority}': ${noticeObject.priority}`);
              //parameterAssert(noticeObject.message !== undefined, "checkTN_TSV9DataRow addNoticePartial: 'message' parameter should be defined");
              //parameterAssert(typeof noticeObject.message === 'string', `checkTN_TSV9DataRow addNoticePartial: 'message' parameter should be a string not a '${typeof noticeObject.message}': ${noticeObject.message}`);
              // //parameterAssert(lineNumber !== undefined, "checkTN_TSV9DataRow addNoticePartial: 'lineNumber' parameter should be defined");
              // //parameterAssert(typeof lineNumber === 'number', `checkTN_TSV9DataRow addNoticePartial: 'lineNumber' parameter should be a number not a '${typeof lineNumber}': ${lineNumber}`);
              // //parameterAssert(characterIndex !== undefined, "checkTN_TSV9DataRow addNoticePartial: 'characterIndex' parameter should be defined");
              if (noticeObject.characterIndex) {//parameterAssert(typeof noticeObject.characterIndex === 'number', `checkTN_TSV9DataRow addNoticePartial: 'characterIndex' parameter should be a number not a '${typeof noticeObject.characterIndex}': ${noticeObject.characterIndex}`);
              } // //parameterAssert(excerpt !== undefined, "checkTN_TSV9DataRow addNoticePartial: 'excerpt' parameter should be defined");
              if (noticeObject.excerpt) {//parameterAssert(typeof noticeObject.excerpt === 'string', `checkTN_TSV9DataRow addNoticePartial: 'excerpt' parameter should be a string not a '${typeof noticeObject.excerpt}': ${noticeObject.excerpt}`);
              } //parameterAssert(noticeObject.location !== undefined, "checkTN_TSV9DataRow addNoticePartial: 'location' parameter should be defined");
              //parameterAssert(typeof noticeObject.location === 'string', `checkTN_TSV9DataRow addNoticePartial: 'location' parameter should be a string not a '${typeof noticeObject.location}': ${noticeObject.location}`);
              // noticeObject.debugChain = noticeObject.debugChain ? `checkTN_TSV9DataRow ${noticeObject.debugChain}` : 'checkTN_TSV9DataRow';
              // Also uses the given bookID,C,V, parameters from the main function call
              drResult.noticeList.push(_objectSpread(_objectSpread({}, noticeObject), {}, { bookID: bookID, C: givenC, V: givenV }));}; /* This function is only for checking one data row
                  and the function doesn’t assume that it has any previous context.
                 It’s designed to be able to quickly show errors for a single row being displayed/edited.
                 Returns an object containing the noticeList.
            */ // functionLog(`checkTN_TSV9DataRow(${languageCode}, ${repoCode}, ${line}, ${bookID}, ${givenRowLocation}, ${JSON.stringify(checkingOptions)})…`);
            //parameterAssert(languageCode !== undefined, "checkTN_TSV9DataRow: 'languageCode' parameter should be defined");
            //parameterAssert(typeof languageCode === 'string', `checkTN_TSV9DataRow: 'languageCode' parameter should be a string not a '${typeof languageCode}'`);
            //parameterAssert(repoCode === 'TN', `checkTN_TSV9DataRow: repoCode expected 'TN' not '${repoCode}'`);
            //parameterAssert(line !== undefined, "checkTN_TSV9DataRow: 'line' parameter should be defined");
            //parameterAssert(typeof line === 'string', `checkTN_TSV9DataRow: 'line' parameter should be a string not a '${typeof line}'`);
            //parameterAssert(bookID !== undefined, "checkTN_TSV9DataRow: 'bookID' parameter should be defined");
            //parameterAssert(typeof bookID === 'string', `checkTN_TSV9DataRow: 'bookID' parameter should be a string not a '${typeof bookID}'`);
            //parameterAssert(bookID.length === 3, `checkTN_TSV9DataRow: 'bookID' parameter should be three characters long not ${bookID.length}`);
            //parameterAssert(bookID.toUpperCase() === bookID, `checkTN_TSV9DataRow: 'bookID' parameter should be UPPERCASE not '${bookID}'`);
            //parameterAssert(books.isValidBookID(bookID), `checkTN_TSV9DataRow: '${bookID}' is not a valid USFM book identifier`);
            // //parameterAssert(givenC !== undefined, "checkTN_TSV9DataRow: 'givenC' parameter should be defined");
            if (givenC) {//parameterAssert(typeof givenC === 'string', `checkTN_TSV9DataRow: 'givenC' parameter should be a string not a '${typeof givenC}'`);
            } // //parameterAssert(givenV !== undefined, "checkTN_TSV9DataRow: 'givenV' parameter should be defined");
            if (givenV) {//parameterAssert(typeof givenV === 'string', `checkTN_TSV9DataRow: 'givenV' parameter should be a string not a '${typeof givenV}'`);
            } //parameterAssert(givenRowLocation !== undefined, "checkTN_TSV9DataRow: 'givenRowLocation' parameter should be defined");
            //parameterAssert(typeof givenRowLocation === 'string', `checkTN_TSV9DataRow: 'givenRowLocation' parameter should be a string not a '${typeof givenRowLocation}'`);
            ourRowLocation = givenRowLocation;if (ourRowLocation && ourRowLocation[0] !== ' ') ourRowLocation = " ".concat(ourRowLocation);linkCheckingOptions = _objectSpread({}, checkingOptions);linkCheckingOptions.taRepoLanguageCode = languageCode;drResult = { noticeList: [] }; /**
            * @description - adds a new notice entry, adding bookID,C,V to the given fields
            * @param {Number} priority - notice priority from 1 (lowest) to 999 (highest)
            * @param {string} message - the text of the notice message
            * @param {string} rowID - 4-character row ID field
            * @param {Number} lineNumber - one-based line number
            * @param {Number} characterIndex - zero-based index of where the issue occurs in the line
            * @param {string} excerpt - short excerpt from the line centred on the problem (if available)
            * @param {string} location - description of where the issue is located
            */if (!(line === EXPECTED_TN_HEADING_LINE)) {_context4.next = 17;break;}return _context4.abrupt("return", drResult);case 17:try {excerptLength = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.excerptLength;} catch (tlcELerror) {}if (typeof excerptLength !== 'number' || isNaN(excerptLength)) {excerptLength = _defaults.DEFAULT_EXCERPT_LENGTH; // debugLog(`Using default excerptLength=${excerptLength}`);
            } // else
            // debugLog(`Using supplied excerptLength=${excerptLength}`, `cf. default=${DEFAULT_EXCERPT_LENGTH}`);
            // const excerptHalfLength = Math.floor(excerptLength / 2); // rounded down
            // const excerptHalfLengthPlus = Math.floor((excerptLength + 1) / 2); // rounded up
            // debugLog(`Using excerptHalfLength=${excerptHalfLength}`, `excerptHalfLengthPlus=${excerptHalfLengthPlus}`);
            lowercaseBookID = bookID.toLowerCase();try {//parameterAssert(lowercaseBookID !== 'obs', "Shouldn’t happen in tn_table-row-check");
              numChaptersThisBook = books.chaptersInBook(bookID);} catch (tlcNCerror) {addNoticePartial({ priority: 979, message: "Invalid book identifier passed to checkTN_TSV9DataRow", location: " '".concat(bookID, "' in first parameter: ").concat(tlcNCerror) });}haveGoodBookID = numChaptersThisBook !== undefined;fields = line.split('\t');if (!(fields.length === NUM_EXPECTED_TN_TSV_FIELDS)) {_context4.next = 74;break;}_fields = (0, _slicedToArray2.default)(fields, 9), B = _fields[0], C = _fields[1], V = _fields[2], rowID = _fields[3], supportReference = _fields[4], quote = _fields[5], occurrence = _fields[6], GLQuote = _fields[7], occurrenceNote = _fields[8]; // Check the fields one-by-one
            if (B.length) {if (B !== bookID) addNoticePartial({ priority: 978, message: "Wrong book identifier", details: "expected '".concat(bookID, "'"), fieldName: 'Book', rowID: rowID, excerpt: B, location: ourRowLocation });} else addNoticePartial({ priority: 977, message: "Missing book identifier", characterIndex: 0, rowID: rowID, location: ourRowLocation });if (C.length) {if (C !== givenC) addNoticePartial({ priority: 976, message: "Wrong chapter number", details: "expected '".concat(givenC, "'"), fieldName: 'Chapter', rowID: rowID, excerpt: C, location: ourRowLocation });if (C === 'front') {} else if (/^\d+$/.test(C)) {intC = Number(C);if (intC === 0) {addNoticePartial({ priority: 824, message: "Invalid zero chapter number", excerpt: C, rowID: rowID, fieldName: 'Chapter', location: ourRowLocation });haveGoodChapterNumber = false;} // TODO: Does this next section need rewriting (see verse check below)???
                else if (intC > numChaptersThisBook) {addNoticePartial({ priority: 823, message: "Invalid large chapter number", excerpt: C, rowID: rowID, fieldName: 'Chapter', location: ourRowLocation });haveGoodChapterNumber = false;}try {numVersesThisChapter = books.versesInChapter(lowercaseBookID, intC);haveGoodChapterNumber = true;} catch (tlcNVerror) {if (!haveGoodBookID) // addNoticePartial({priority:500, "Invalid chapter number", rowLocation);
                    // else
                    addNoticePartial({ priority: 822, message: "Unable to check chapter number", excerpt: C, rowID: rowID, fieldName: 'Chapter', location: ourRowLocation });haveGoodChapterNumber = false;}} else addNoticePartial({ priority: 821, message: "Bad chapter number", excerpt: C, rowID: rowID, fieldName: 'Chapter', location: ourRowLocation });} else addNoticePartial({ priority: 820, message: "Missing chapter number", rowID: rowID, fieldName: 'Chapter', location: " ?:".concat(V).concat(ourRowLocation) });if (V.length) {if (V !== givenV) addNoticePartial({ priority: 975, message: "Wrong verse number", details: "expected '".concat(givenV, "'"), rowID: rowID, fieldName: 'Verse', excerpt: V, location: ourRowLocation });if (bookID === 'OBS' || V === 'intro') {} else if (/^\d+$/.test(V)) {intV = Number(V);if (intV === 0 && bookID !== 'PSA') // Psalms have \d as verse zero
                  addNoticePartial({ priority: 814, message: "Invalid zero verse number", rowID: rowID, fieldName: 'Verse', excerpt: V, location: ourRowLocation });else {if (haveGoodChapterNumber) {if (intV > numVersesThisChapter) addNoticePartial({ priority: 813, message: "Invalid large verse number", details: "".concat(bookID, " chapter ").concat(C, " only has ").concat(numVersesThisChapter, " verses"), rowID: rowID, fieldName: 'Verse', excerpt: V, location: ourRowLocation });} else addNoticePartial({ priority: 812, message: "Unable to check verse number", rowID: rowID, fieldName: 'Verse', location: ourRowLocation });}} else addNoticePartial({ priority: 811, message: "Bad verse number", rowID: rowID, fieldName: 'Verse', location: " '".concat(V, "'").concat(ourRowLocation) });} else addNoticePartial({ priority: 810, message: "Missing verse number", rowID: rowID, fieldName: 'Verse', location: " after ".concat(C, ":?").concat(ourRowLocation) });if (!rowID.length) addNoticePartial({ priority: 931, message: "Missing row ID field", fieldName: 'Verse', location: ourRowLocation });else {if (rowID.length !== 4) {addNoticePartial({ priority: 778, message: "Row ID should be exactly 4 characters", details: "not ".concat(rowID.length), rowID: rowID, fieldName: 'ID', excerpt: rowID, location: ourRowLocation });if (rowID.length > 4) RIDSuggestion = rowID.substring(0, 5);else {// must be < 4
                  RIDSuggestion = rowID;while (RIDSuggestion.length < 4) {RIDSuggestion += LC_ALPHABET_PLUS_DIGITS[Math.floor(Math.random() * LC_ALPHABET_PLUS_DIGITS.length)];};}} else if (LC_ALPHABET.indexOf(rowID[0]) < 0) addNoticePartial({ priority: 176, message: "Row ID should start with a lowercase letter", characterIndex: 0, rowID: rowID, fieldName: 'ID', excerpt: rowID, location: ourRowLocation });else if (LC_ALPHABET_PLUS_DIGITS.indexOf(rowID[3]) < 0) addNoticePartial({ priority: 175, message: "Row ID should end with a lowercase letter or digit", characterIndex: 3, rowID: rowID, fieldName: 'ID', excerpt: rowID, location: ourRowLocation });else if (LC_ALPHABET_PLUS_DIGITS_PLUS_HYPHEN.indexOf(rowID[1]) < 0) addNoticePartial({ priority: 174, message: "Row ID characters should only be lowercase letters, digits, or hypen", fieldName: 'ID', characterIndex: 1, rowID: rowID, excerpt: rowID, location: ourRowLocation });else if (LC_ALPHABET_PLUS_DIGITS_PLUS_HYPHEN.indexOf(rowID[2]) < 0) addNoticePartial({ priority: 173, message: "Row ID characters should only be lowercase letters, digits, or hypen", fieldName: 'ID', characterIndex: 2, rowID: rowID, excerpt: rowID, location: ourRowLocation });}if (!supportReference.length) {_context4.next = 41;break;}if (!(0, _textHandlingFunctions.isWhitespace)(supportReference)) {_context4.next = 34;break;}addNoticePartial({ priority: 373, message: "Field is only whitespace", fieldName: 'SupportReference', rowID: rowID, location: ourRowLocation });_context4.next = 40;break;case 34: // More than just whitespace
            if (!supportReference.startsWith('figs-') && !supportReference.startsWith('grammar-') && !supportReference.startsWith('translate-') && !supportReference.startsWith('writing-') && supportReference !== 'guidelines-sonofgodprinciples') addNoticePartial({ priority: 788, message: "Only 'Just-In-Time Training' TA articles allowed here", fieldName: 'SupportReference', excerpt: supportReference, rowID: rowID, location: ourRowLocation });SRSuggestion = ourCheckTextField(rowID, 'SupportReference', supportReference, true, ourRowLocation, checkingOptions);if (checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.disableAllLinkFetchingFlag) {_context4.next = 39;break;}_context4.next = 39;return ourCheckSupportReferenceInTA(rowID, 'SupportReference', supportReference, ourRowLocation, checkingOptions);case 39:if (occurrenceNote.indexOf(supportReference) < 0) // The full link is NOT in the note!
              addNoticePartial({ priority: 787, message: "Link to TA should also be in OccurrenceNote", fieldName: 'SupportReference', excerpt: supportReference, rowID: rowID, location: ourRowLocation });case 40:if (supportReference.indexOf("\u200B") >= 0) {charCount = (0, _textHandlingFunctions.countOccurrences)(supportReference, "\u200B");addNoticePartial({ priority: 374, message: "Field contains zero-width space(s)", details: "".concat(charCount, " occurrence").concat(charCount === 1 ? '' : 's', " found"), fieldName: 'SupportReference', rowID: rowID, location: ourRowLocation });}case 41:if (!quote.length) {_context4.next = 51;break;} // need to check UTN against UHB and UGNT
            OQSuggestion = ourCheckTextField(rowID, 'OrigQuote', quote, false, ourRowLocation, checkingOptions);if (!occurrence.length) {_context4.next = 48;break;}_context4.next = 46;return ourCheckTNOriginalLanguageQuoteAndOccurrence(rowID, 'OrigQuote', quote, occurrence, ourRowLocation, checkingOptions);case 46:_context4.next = 49;break;case 48:addNoticePartial({ priority: 750, message: "Missing occurrence field when we have an original quote", fieldName: 'Occurrence', rowID: rowID, location: ourRowLocation });case 49:_context4.next = 52;break;case 51: // TODO: Find more details about when these fields are really compulsory (and when they're not, e.g., for 'intro') ???
            if (V !== 'intro' && occurrence !== '0') addNoticePartial({ priority: 919, message: "Missing OrigQuote field", fieldName: 'OrigQuote', rowID: rowID, location: ourRowLocation });case 52:if (occurrence.length) {// This should usually be a digit
              if (occurrence === '0') {// zero means that it doesn’t occur
                if (quote.length) {addNoticePartial({ priority: 751, message: "Invalid zero occurrence field when we have an original quote", fieldName: 'Occurrence', rowID: rowID, excerpt: occurrence, location: ourRowLocation });OSuggestion = '1';} // if (V !== 'intro')
                //     addNoticePartial({priority:500, message:"Invalid zero occurrence field", rowID, location:rowLocation);
              } else if (occurrence === '-1') {} // TODO check the special conditions when this can occur???
              else if ('12345678'.indexOf(occurrence) < 0) {// it’s not one of these integers
                  addNoticePartial({ priority: 792, message: "Invalid occurrence field", fieldName: 'Occurrence', rowID: rowID, excerpt: occurrence, location: ourRowLocation });OSuggestion = '1';}} else if (quote.length) {addNoticePartial({ priority: 791, message: "Missing occurrence field", fieldName: 'Occurrence', rowID: rowID, location: ourRowLocation });OSuggestion = '1';}if (GLQuote.length) {// TODO: need to check UTN against ULT
              if (GLQuote.indexOf("\u200B") >= 0) {_charCount = (0, _textHandlingFunctions.countOccurrences)(GLQuote, "\u200B");addNoticePartial({ priority: 374, message: "Field contains zero-width space(s)", details: "".concat(_charCount, " occurrence").concat(_charCount === 1 ? '' : 's', " found"), fieldName: 'GLQuote', rowID: rowID, location: ourRowLocation });}if ((0, _textHandlingFunctions.isWhitespace)(GLQuote)) addNoticePartial({ priority: 373, message: "Field is only whitespace", fieldName: 'GLQuote', rowID: rowID, location: ourRowLocation });else // More than just whitespace
                if (V !== 'intro') GLQSuggestion = ourCheckTextField(rowID, 'GLQuote', GLQuote, false, ourRowLocation, checkingOptions);} // else // TODO: Find out if these fields are really compulsory (and when they're not, e.g., for 'intro') ???
            //     if (V !== 'intro')
            //         addNoticePartial({ priority: 275, message: "Missing GLQuote field", rowID, location: ourRowLocation });
            if (!occurrenceNote.length) {_context4.next = 69;break;}if (occurrenceNote.indexOf("\u200B") >= 0) {_charCount2 = (0, _textHandlingFunctions.countOccurrences)(occurrenceNote, "\u200B");addNoticePartial({ priority: 374, message: "Field contains zero-width space(s)", details: "".concat(_charCount2, " occurrence").concat(_charCount2 === 1 ? '' : 's', " found"), fieldName: 'OccurrenceNote', rowID: rowID, location: ourRowLocation });}if (!(0, _textHandlingFunctions.isWhitespace)(occurrenceNote)) {_context4.next = 60;break;}addNoticePartial({ priority: 373, message: "Field is only whitespace", fieldName: 'OccurrenceNote', rowID: rowID, location: ourRowLocation });_context4.next = 67;break;case 60: // More than just whitespace
            adjustedOccurrenceNote = occurrenceNote.replace(/<br>/g, '\n');_context4.next = 63;return ourMarkdownTextChecks(rowID, 'OccurrenceNote', adjustedOccurrenceNote, true, ourRowLocation, checkingOptions);case 63:ONSuggestion = _context4.sent; // await ourCheckNotesLinksToOutside(rowID, 'OccurrenceNote', adjustedOccurrenceNote, ourRowLocation, linkCheckingOptions);
            linksList = [], foundSR = false;while (regexResultArray = TA_REGEX.exec(adjustedOccurrenceNote)) {// debugLog("Got TA Regex in OccurrenceNote", JSON.stringify(regexResultArray));
              linksList.push(regexResultArray[1]);if (regexResultArray[1] === supportReference) foundSR = true;}if (linksList.length && V !== 'intro') {details = supportReference ? "SR='".concat(supportReference, "'") : "empty SR field";if (linksList.length > 1) details += "\u2014found ".concat(linksList.length, " TA links");excerpt = linksList.length > 1 ? JSON.stringify(linksList) : linksList[0];if (foundSR) {if (linksList.length > 1) addNoticePartial({ priority: 786, message: "Shouldn’t have multiple TA links in OccurrenceNote", details: details, rowID: rowID, fieldName: 'OccurrenceNote', excerpt: excerpt, location: ourRowLocation });} else // didn't find SR
                addNoticePartial({ priority: 789, message: "Should have a SupportReference when OccurrenceNote has a TA link", details: details, rowID: rowID, fieldName: 'OccurrenceNote', excerpt: excerpt, location: ourRowLocation });}case 67:_context4.next = 70;break;case 69: // TODO: Find out if these fields are really compulsory (and when they're not, e.g., for 'intro') ???
            addNoticePartial({ priority: 274, message: "Missing OccurrenceNote field", fieldName: 'OccurrenceNote', rowID: rowID, location: ourRowLocation });case 70: // 9 [B, C, V, rowID, supportReference, quote, occurrence, GLQuote, occurrenceNote]
            suggestion = "".concat(B, "\t").concat(C, "\t").concat(V, "\t").concat(RIDSuggestion === undefined ? rowID : RIDSuggestion, "\t").concat(SRSuggestion === undefined ? supportReference : SRSuggestion, "\t").concat(OQSuggestion === undefined ? quote : OQSuggestion, "\t").concat(OSuggestion === undefined ? occurrence : OSuggestion, "\t").concat(GLQSuggestion === undefined ? GLQuote : GLQSuggestion, "\t").concat(ONSuggestion === undefined ? occurrenceNote : ONSuggestion);if (suggestion !== line) {// debugLog(`Had TN ${line}`);
              // debugLog(`Sug TN ${suggestion}`);
              drResult.suggestion = suggestion;}_context4.next = 77;break;case 74: // wrong number of fields in the row
            // Have a go at getting some of the first fields out of the row
            _rowID = '????';try {_rowID = fields[3];} catch (_unused) {}addNoticePartial({ priority: 984, message: "Found wrong number of TSV fields (expected ".concat(NUM_EXPECTED_TN_TSV_FIELDS, ")"), details: "Found ".concat(fields.length, " field").concat(fields.length === 1 ? '' : 's'), rowID: _rowID, location: ourRowLocation });case 77:return _context4.abrupt("return", drResult);case 78:case "end":return _context4.stop();}}}, _callee4);}));return _checkTN_TSV9DataRow.apply(this, arguments);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL3RuLXRzdjktcm93LWNoZWNrLmpzIl0sIm5hbWVzIjpbIk5VTV9FWFBFQ1RFRF9UTl9UU1ZfRklFTERTIiwiRVhQRUNURURfVE5fSEVBRElOR19MSU5FIiwiTENfQUxQSEFCRVQiLCJMQ19BTFBIQUJFVF9QTFVTX0RJR0lUUyIsIkxDX0FMUEhBQkVUX1BMVVNfRElHSVRTX1BMVVNfSFlQSEVOIiwiVEFfUkVHRVgiLCJSZWdFeHAiLCJjaGVja1ROX1RTVjlEYXRhUm93IiwibGFuZ3VhZ2VDb2RlIiwicmVwb0NvZGUiLCJsaW5lIiwiYm9va0lEIiwiZ2l2ZW5DIiwiZ2l2ZW5WIiwiZ2l2ZW5Sb3dMb2NhdGlvbiIsImNoZWNraW5nT3B0aW9ucyIsImFkZE5vdGljZVBhcnRpYWwiLCJvdXJNYXJrZG93blRleHRDaGVja3MiLCJvdXJDaGVja1RleHRGaWVsZCIsIm91ckNoZWNrU3VwcG9ydFJlZmVyZW5jZUluVEEiLCJvdXJDaGVja1ROT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZSIsInJvd0lEIiwiZmllbGROYW1lIiwiZmllbGRUZXh0Iiwib2NjdXJyZW5jZSIsInJvd0xvY2F0aW9uIiwiY29xUmVzdWx0T2JqZWN0Iiwibm90aWNlTGlzdCIsIm5vdGljZUVudHJ5IiwidGFMaW5rVGV4dCIsInRhUmVwb0xhbmd1YWdlQ29kZSIsImFsbG93ZWRMaW5rcyIsImZpZWxkVHlwZSIsIm9jdGZSZXN1bHRPYmplY3QiLCJzdWdnZXN0aW9uIiwib210Y1Jlc3VsdE9iamVjdCIsInByaW9yaXR5IiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJub3RpY2VPYmplY3QiLCJjaGFyYWN0ZXJJbmRleCIsImV4Y2VycHQiLCJkclJlc3VsdCIsInB1c2giLCJDIiwiViIsIm91clJvd0xvY2F0aW9uIiwibGlua0NoZWNraW5nT3B0aW9ucyIsImV4Y2VycHRMZW5ndGgiLCJ0bGNFTGVycm9yIiwiaXNOYU4iLCJERUZBVUxUX0VYQ0VSUFRfTEVOR1RIIiwibG93ZXJjYXNlQm9va0lEIiwidG9Mb3dlckNhc2UiLCJudW1DaGFwdGVyc1RoaXNCb29rIiwiYm9va3MiLCJjaGFwdGVyc0luQm9vayIsInRsY05DZXJyb3IiLCJsb2NhdGlvbiIsImhhdmVHb29kQm9va0lEIiwidW5kZWZpbmVkIiwiZmllbGRzIiwic3BsaXQiLCJsZW5ndGgiLCJCIiwic3VwcG9ydFJlZmVyZW5jZSIsInF1b3RlIiwiR0xRdW90ZSIsIm9jY3VycmVuY2VOb3RlIiwiZGV0YWlscyIsInRlc3QiLCJpbnRDIiwiTnVtYmVyIiwiaGF2ZUdvb2RDaGFwdGVyTnVtYmVyIiwibnVtVmVyc2VzVGhpc0NoYXB0ZXIiLCJ2ZXJzZXNJbkNoYXB0ZXIiLCJ0bGNOVmVycm9yIiwiaW50ViIsIlJJRFN1Z2dlc3Rpb24iLCJzdWJzdHJpbmciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbmRleE9mIiwiU1JTdWdnZXN0aW9uIiwiZGlzYWJsZUFsbExpbmtGZXRjaGluZ0ZsYWciLCJjaGFyQ291bnQiLCJPUVN1Z2dlc3Rpb24iLCJPU3VnZ2VzdGlvbiIsIkdMUVN1Z2dlc3Rpb24iLCJhZGp1c3RlZE9jY3VycmVuY2VOb3RlIiwicmVwbGFjZSIsIk9OU3VnZ2VzdGlvbiIsImxpbmtzTGlzdCIsImZvdW5kU1IiLCJyZWdleFJlc3VsdEFycmF5IiwiZXhlYyIsIkpTT04iLCJzdHJpbmdpZnkiXSwibWFwcGluZ3MiOiI0bkJBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHdDOzs7QUFHQTs7QUFFQSxJQUFNQSwwQkFBMEIsR0FBRyxDQUFuQyxDLENBQXNDO0FBQ3RDLElBQU1DLHdCQUF3QixHQUFHLDRGQUFqQzs7QUFFQSxJQUFNQyxXQUFXLEdBQUcsNEJBQXBCO0FBQ0EsSUFBTUMsdUJBQXVCLEdBQUcsc0NBQWhDO0FBQ0EsSUFBTUMsbUNBQW1DLEdBQUcsdUNBQTVDOztBQUVBLElBQU1DLFFBQVEsR0FBRyxJQUFJQyxNQUFKLENBQVcscURBQVgsRUFBa0UsR0FBbEUs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LENBQ0gsQ0FsZEYsbUNBb2RNO0FBQ0w7QUFDSWIsWUFBQUEsTUF0ZEwsR0FzZGEsTUF0ZGIsQ0F1ZEMsSUFBSSxDQUFFQSxNQUFLLEdBQUd3QyxNQUFNLENBQUMsQ0FBRCxDQUFkLENBQW9CLENBQTFCLENBQTJCLGdCQUFNLENBQUcsQ0FDcEM3QyxnQkFBZ0IsQ0FBQyxFQUFFb0IsUUFBUSxFQUFFLEdBQVosRUFBaUJDLE9BQU8sdURBQWdEckMsMEJBQWhELE1BQXhCLEVBQXVHcUUsT0FBTyxrQkFBV1IsTUFBTSxDQUFDRSxNQUFsQixtQkFBaUNGLE1BQU0sQ0FBQ0UsTUFBUCxLQUFrQixDQUFsQixHQUFzQixFQUF0QixHQUEyQixHQUE1RCxDQUE5RyxFQUFpTDFDLEtBQUssRUFBTEEsTUFBakwsRUFBd0xxQyxRQUFRLEVBQUVaLGNBQWxNLEVBQUQsQ0FBaEIsQ0F4ZEQsMENBNmRJSixRQTdkSiw2RCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERFRkFVTFRfRVhDRVJQVF9MRU5HVEggfSBmcm9tICcuL2RlZmF1bHRzJztcbmltcG9ydCB7IGlzV2hpdGVzcGFjZSwgY291bnRPY2N1cnJlbmNlcyB9IGZyb20gJy4vdGV4dC1oYW5kbGluZy1mdW5jdGlvbnMnO1xuaW1wb3J0ICogYXMgYm9va3MgZnJvbSAnLi9ib29rcy9ib29rcyc7XG5pbXBvcnQgeyBjaGVja1RleHRGaWVsZCB9IGZyb20gJy4vZmllbGQtdGV4dC1jaGVjayc7XG5pbXBvcnQgeyBjaGVja01hcmtkb3duVGV4dCB9IGZyb20gJy4vbWFya2Rvd24tdGV4dC1jaGVjayc7XG5pbXBvcnQgeyBjaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBIH0gZnJvbSAnLi90YS1yZWZlcmVuY2UtY2hlY2snO1xuLy8gaW1wb3J0IHsgY2hlY2tOb3Rlc0xpbmtzVG9PdXRzaWRlIH0gZnJvbSAnLi9ub3Rlcy1saW5rcy1jaGVjayc7XG5pbXBvcnQgeyBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2UgfSBmcm9tICcuL29yaWctcXVvdGUtY2hlY2snO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBwYXJhbWV0ZXJBc3NlcnQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cblxuLy8gY29uc3QgVE5fVEFCTEVfUk9XX1ZBTElEQVRPUl9WRVJTSU9OX1NUUklORyA9ICcwLjcuMic7XG5cbmNvbnN0IE5VTV9FWFBFQ1RFRF9UTl9UU1ZfRklFTERTID0gOTsgLy8gc28gZXhwZWN0cyA4IHRhYnMgcGVyIGxpbmVcbmNvbnN0IEVYUEVDVEVEX1ROX0hFQURJTkdfTElORSA9ICdCb29rXFx0Q2hhcHRlclxcdFZlcnNlXFx0SURcXHRTdXBwb3J0UmVmZXJlbmNlXFx0T3JpZ1F1b3RlXFx0T2NjdXJyZW5jZVxcdEdMUXVvdGVcXHRPY2N1cnJlbmNlTm90ZSc7XG5cbmNvbnN0IExDX0FMUEhBQkVUID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JztcbmNvbnN0IExDX0FMUEhBQkVUX1BMVVNfRElHSVRTID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG5jb25zdCBMQ19BTFBIQUJFVF9QTFVTX0RJR0lUU19QTFVTX0hZUEhFTiA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODktJztcblxuY29uc3QgVEFfUkVHRVggPSBuZXcgUmVnRXhwKCdcXFxcW1xcXFxbcmM6Ly9bXiAvXSs/L3RhL21hbi9bXiAvXSs/LyhbXiBcXFxcXV0rPylcXFxcXVxcXFxdJywgJ2cnKTtcblxuXG4vKipcbiAqXG4gKiBAZGVzY3JpcHRpb24gLSBDaGVja3Mgb25lIFRTViBkYXRhIHJvdyBvZiB0cmFuc2xhdGlvbiBub3RlcyAoVE4pXG4gKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2VDb2RlIC0gdGhlIGxhbmd1YWdlIGNvZGUsIGUuZy4sICdlbidcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXBvQ29kZSAtICdUTidcbiAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lIC0gdGhlIFRTViBsaW5lIHRvIGJlIGNoZWNrZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBib29rSUQgLSAzLWNoYXJhY3RlciBVUFBFUkNBU0UgVVNGTSBib29rIGlkZW50aWZpZXIgb3IgJ09CUydcbiAqIEBwYXJhbSB7c3RyaW5nfSBnaXZlbkMgLSBjaGFwdGVyIG51bWJlciBvciAoZm9yIE9CUykgc3RvcnkgbnVtYmVyIHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IGdpdmVuViAtIHZlcnNlIG51bWJlciBvciAoZm9yIE9CUykgZnJhbWUgbnVtYmVyIHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IGdpdmVuUm93TG9jYXRpb24gLSBkZXNjcmlwdGlvbiBvZiB3aGVyZSB0aGUgbGluZSBpcyBsb2NhdGVkXG4gKiBAcGFyYW0ge09iamVjdH0gY2hlY2tpbmdPcHRpb25zIC0gbWF5IGNvbnRhaW4gZXhjZXJwdExlbmd0aCwgdHdSZXBvVXNlcm5hbWUsIHR3UmVwb0JyYW5jaCAob3IgdGFnKSwgZGlzYWJsZUxpbmtlZFRXQXJ0aWNsZXNDaGVja0ZsYWcgcGFyYW1ldGVyc1xuICogQHJldHVybiB7T2JqZWN0fSAtIGNvbnRhaW5pbmcgbm90aWNlTGlzdFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tUTl9UU1Y5RGF0YVJvdyhsYW5ndWFnZUNvZGUsIHJlcG9Db2RlLCBsaW5lLCBib29rSUQsIGdpdmVuQywgZ2l2ZW5WLCBnaXZlblJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpIHtcbiAgICAvKiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgZm9yIGNoZWNraW5nIG9uZSBkYXRhIHJvd1xuICAgICAgICAgIGFuZCB0aGUgZnVuY3Rpb24gZG9lc27igJl0IGFzc3VtZSB0aGF0IGl0IGhhcyBhbnkgcHJldmlvdXMgY29udGV4dC5cblxuICAgICAgICBJdOKAmXMgZGVzaWduZWQgdG8gYmUgYWJsZSB0byBxdWlja2x5IHNob3cgZXJyb3JzIGZvciBhIHNpbmdsZSByb3cgYmVpbmcgZGlzcGxheWVkL2VkaXRlZC5cblxuICAgICAgICBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBub3RpY2VMaXN0LlxuICAgICovXG4gICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrVE5fVFNWOURhdGFSb3coJHtsYW5ndWFnZUNvZGV9LCAke3JlcG9Db2RlfSwgJHtsaW5lfSwgJHtib29rSUR9LCAke2dpdmVuUm93TG9jYXRpb259LCAke0pTT04uc3RyaW5naWZ5KGNoZWNraW5nT3B0aW9ucyl9KeKApmApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGxhbmd1YWdlQ29kZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3c6ICdsYW5ndWFnZUNvZGUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbGFuZ3VhZ2VDb2RlID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICdsYW5ndWFnZUNvZGUnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGxhbmd1YWdlQ29kZX0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQocmVwb0NvZGUgPT09ICdUTicsIGBjaGVja1ROX1RTVjlEYXRhUm93OiByZXBvQ29kZSBleHBlY3RlZCAnVE4nIG5vdCAnJHtyZXBvQ29kZX0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQobGluZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3c6ICdsaW5lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGxpbmUgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdzogJ2xpbmUnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGxpbmV9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGJvb2tJRCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3c6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgYm9va0lEID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGJvb2tJRH0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va0lELmxlbmd0aCA9PT0gMywgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgdGhyZWUgY2hhcmFjdGVycyBsb25nIG5vdCAke2Jvb2tJRC5sZW5ndGh9YCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va0lELnRvVXBwZXJDYXNlKCkgPT09IGJvb2tJRCwgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgVVBQRVJDQVNFIG5vdCAnJHtib29rSUR9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGJvb2tzLmlzVmFsaWRCb29rSUQoYm9va0lEKSwgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICcke2Jvb2tJRH0nIGlzIG5vdCBhIHZhbGlkIFVTRk0gYm9vayBpZGVudGlmaWVyYCk7XG4gICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoZ2l2ZW5DICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdzogJ2dpdmVuQycgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIGlmIChnaXZlbkMpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGdpdmVuQyA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93OiAnZ2l2ZW5DJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBnaXZlbkN9J2ApO1xuICAgIH1cbiAgICAvLyAvL3BhcmFtZXRlckFzc2VydChnaXZlblYgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93OiAnZ2l2ZW5WJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgaWYgKGdpdmVuVikgeyAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZ2l2ZW5WID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICdnaXZlblYnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGdpdmVuVn0nYCk7XG4gICAgfVxuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGdpdmVuUm93TG9jYXRpb24gIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93OiAnZ2l2ZW5Sb3dMb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBnaXZlblJvd0xvY2F0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOURhdGFSb3c6ICdnaXZlblJvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBnaXZlblJvd0xvY2F0aW9ufSdgKTtcblxuICAgIGxldCBvdXJSb3dMb2NhdGlvbiA9IGdpdmVuUm93TG9jYXRpb247XG4gICAgaWYgKG91clJvd0xvY2F0aW9uICYmIG91clJvd0xvY2F0aW9uWzBdICE9PSAnICcpIG91clJvd0xvY2F0aW9uID0gYCAke291clJvd0xvY2F0aW9ufWA7XG5cbiAgICBjb25zdCBsaW5rQ2hlY2tpbmdPcHRpb25zID0geyAuLi5jaGVja2luZ09wdGlvbnMgfTtcbiAgICBsaW5rQ2hlY2tpbmdPcHRpb25zLnRhUmVwb0xhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcblxuICAgIGxldCBkclJlc3VsdCA9IHsgbm90aWNlTGlzdDogW10gfTtcblxuICAgIC8qKlxuICAgICogQGRlc2NyaXB0aW9uIC0gYWRkcyBhIG5ldyBub3RpY2UgZW50cnksIGFkZGluZyBib29rSUQsQyxWIHRvIHRoZSBnaXZlbiBmaWVsZHNcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcmlvcml0eSAtIG5vdGljZSBwcmlvcml0eSBmcm9tIDEgKGxvd2VzdCkgdG8gOTk5IChoaWdoZXN0KVxuICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSB0aGUgdGV4dCBvZiB0aGUgbm90aWNlIG1lc3NhZ2VcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSByb3dJRCAtIDQtY2hhcmFjdGVyIHJvdyBJRCBmaWVsZFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IGxpbmVOdW1iZXIgLSBvbmUtYmFzZWQgbGluZSBudW1iZXJcbiAgICAqIEBwYXJhbSB7TnVtYmVyfSBjaGFyYWN0ZXJJbmRleCAtIHplcm8tYmFzZWQgaW5kZXggb2Ygd2hlcmUgdGhlIGlzc3VlIG9jY3VycyBpbiB0aGUgbGluZVxuICAgICogQHBhcmFtIHtzdHJpbmd9IGV4Y2VycHQgLSBzaG9ydCBleGNlcnB0IGZyb20gdGhlIGxpbmUgY2VudHJlZCBvbiB0aGUgcHJvYmxlbSAoaWYgYXZhaWxhYmxlKVxuICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIC0gZGVzY3JpcHRpb24gb2Ygd2hlcmUgdGhlIGlzc3VlIGlzIGxvY2F0ZWRcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZE5vdGljZVBhcnRpYWwobm90aWNlT2JqZWN0KSB7XG4gICAgICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja1ROX1RTVjlEYXRhUm93IGFkZE5vdGljZVBhcnRpYWwocHJpb3JpdHk9JHtub3RpY2VPYmplY3QucHJpb3JpdHl9KSAke25vdGljZU9iamVjdC5tZXNzYWdlfSwgJHtub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXh9LCAke25vdGljZU9iamVjdC5leGNlcnB0fSwgJHtub3RpY2VPYmplY3QubG9jYXRpb259YCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KG5vdGljZU9iamVjdC5wcmlvcml0eSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ3ByaW9yaXR5JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QucHJpb3JpdHkgPT09ICdudW1iZXInLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAncHJpb3JpdHknIHBhcmFtZXRlciBzaG91bGQgYmUgYSBudW1iZXIgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5wcmlvcml0eX0nOiAke25vdGljZU9iamVjdC5wcmlvcml0eX1gKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdtZXNzYWdlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QubWVzc2FnZSA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdtZXNzYWdlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QubWVzc2FnZX0nOiAke25vdGljZU9iamVjdC5tZXNzYWdlfWApO1xuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChsaW5lTnVtYmVyICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAnbGluZU51bWJlcicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbGluZU51bWJlciA9PT0gJ251bWJlcicsIGBjaGVja1ROX1RTVjlEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdsaW5lTnVtYmVyJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgbnVtYmVyIG5vdCBhICcke3R5cGVvZiBsaW5lTnVtYmVyfSc6ICR7bGluZU51bWJlcn1gKTtcbiAgICAgICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoY2hhcmFjdGVySW5kZXggIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdjaGFyYWN0ZXJJbmRleCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICBpZiAobm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4KSB7IC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXggPT09ICdudW1iZXInLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAnY2hhcmFjdGVySW5kZXgnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBudW1iZXIgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleH0nOiAke25vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleH1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChleGNlcnB0ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAnZXhjZXJwdCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICBpZiAobm90aWNlT2JqZWN0LmV4Y2VycHQpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5leGNlcnB0ID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOURhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ2V4Y2VycHQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5leGNlcnB0fSc6ICR7bm90aWNlT2JqZWN0LmV4Y2VycHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LmxvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAnbG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5sb2NhdGlvbiA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdsb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LmxvY2F0aW9ufSc6ICR7bm90aWNlT2JqZWN0LmxvY2F0aW9ufWApO1xuICAgICAgICAvLyBub3RpY2VPYmplY3QuZGVidWdDaGFpbiA9IG5vdGljZU9iamVjdC5kZWJ1Z0NoYWluID8gYGNoZWNrVE5fVFNWOURhdGFSb3cgJHtub3RpY2VPYmplY3QuZGVidWdDaGFpbn1gIDogJ2NoZWNrVE5fVFNWOURhdGFSb3cnO1xuICAgICAgICAvLyBBbHNvIHVzZXMgdGhlIGdpdmVuIGJvb2tJRCxDLFYsIHBhcmFtZXRlcnMgZnJvbSB0aGUgbWFpbiBmdW5jdGlvbiBjYWxsXG4gICAgICAgIGRyUmVzdWx0Lm5vdGljZUxpc3QucHVzaCh7IC4uLm5vdGljZU9iamVjdCwgYm9va0lELCBDOiBnaXZlbkMsIFY6IGdpdmVuViB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIEBkZXNjcmlwdGlvbiAtIGNoZWNrcyB0aGUgZ2l2ZW4gbWFya2Rvd24gZmllbGQgYW5kIHByb2Nlc3NlcyB0aGUgcmV0dXJuZWQgcmVzdWx0c1xuICAgICogQHBhcmFtIHtzdHJpbmd9IHJvd0lEIC0gNC1jaGFyYWN0ZXIgcm93IElEIGZpZWxkXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lIC0gbmFtZSBvZiB0aGUgZmllbGQgYmVpbmcgY2hlY2tlZFxuICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkVGV4dCAtIHRoZSBhY3R1YWwgdGV4dCBvZiB0aGUgZmllbGQgYmVpbmcgY2hlY2tlZFxuICAgICogQHBhcmFtIHt9IGFsbG93ZWRMaW5rcyAtIHRydWUgaWYgbGlua3MgYXJlIGFsbG93ZWQgaW4gdGhlIGZpZWxkLCBvdGhlcndpc2UgZmFsc2VcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSByb3dMb2NhdGlvbiAtIGRlc2NyaXB0aW9uIG9mIHdoZXJlIHRoZSBsaW5lIGlzIGxvY2F0ZWRcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBjaGVja2luZ09wdGlvbnMgLSBwYXJhbWV0ZXJzIHRoYXQgbWlnaHQgYWZmZWN0IHRoZSBjaGVja1xuICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gb3VyTWFya2Rvd25UZXh0Q2hlY2tzKHJvd0lELCBmaWVsZE5hbWUsIGZpZWxkVGV4dCwgYWxsb3dlZExpbmtzLCByb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKSB7XG4gICAgICAgIC8vIERvZXMgbWFya2Rvd24gY2hlY2tzIGZvciBzbWFsbCBlcnJvcnMgbGlrZSBsZWFkaW5nL3RyYWlsaW5nIHNwYWNlcywgZXRjLlxuXG4gICAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IGNoZWNraW5nIGZvciBjb21wdWxzb3J5IGZpZWxkcyBpcyBkb25lIGVsc2V3aGVyZVxuXG4gICAgICAgIC8vIFVwZGF0ZXMgdGhlIGdsb2JhbCBsaXN0IG9mIG5vdGljZXNcblxuICAgICAgICAvLyBXZSBkb27igJl0IGN1cnJlbnRseSB1c2UgdGhlIGFsbG93ZWRMaW5rcyBwYXJhbWV0ZXJcblxuICAgICAgICAvLyBmdW5jdGlvbkxvZyhgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJNYXJrZG93blRleHRDaGVja3MoJHtmaWVsZE5hbWV9LCAoJHtmaWVsZFRleHQubGVuZ3RofSksICR7YWxsb3dlZExpbmtzfSwgJHtyb3dMb2NhdGlvbn0sIOKApilgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93SUQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ3Jvd0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiByb3dJRCA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ3Jvd0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiByb3dJRH0nYCk7XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KGZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBmaWVsZE5hbWUgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJNYXJrZG93blRleHRDaGVja3M6ICdmaWVsZE5hbWUnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGZpZWxkTmFtZX0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGZpZWxkTmFtZSA9PT0gJ09jY3VycmVuY2VOb3RlJywgYGNoZWNrVE5fVFNWOURhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiBPbmx5IHJ1biB0aGlzIGNoZWNrIG9uIE9jY3VycmVuY2VOb3RlcyBub3QgJyR7ZmllbGROYW1lfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGRUZXh0ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJNYXJrZG93blRleHRDaGVja3M6ICdmaWVsZFRleHQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkVGV4dCA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ2ZpZWxkVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGRUZXh0fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoYWxsb3dlZExpbmtzID09PSB0cnVlIHx8IGFsbG93ZWRMaW5rcyA9PT0gZmFsc2UsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJNYXJrZG93blRleHRDaGVja3M6IGFsbG93ZWRMaW5rcyBwYXJhbWV0ZXIgbXVzdCBiZSBlaXRoZXIgdHJ1ZSBvciBmYWxzZVwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93TG9jYXRpb24gIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ3Jvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiByb3dMb2NhdGlvbiA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ3Jvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiByb3dMb2NhdGlvbn0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHJvd0xvY2F0aW9uLmluZGV4T2YoZmllbGROYW1lKSA8IDAsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ3Jvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIG5vdCBjb250YWluIGZpZWxkTmFtZT0ke2ZpZWxkTmFtZX1gKTtcblxuICAgICAgICBjb25zdCBvbXRjUmVzdWx0T2JqZWN0ID0gYXdhaXQgY2hlY2tNYXJrZG93blRleHQobGFuZ3VhZ2VDb2RlLCByZXBvQ29kZSwgZmllbGROYW1lLCBmaWVsZFRleHQsIHJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpO1xuXG4gICAgICAgIC8vIENob29zZSBvbmx5IE9ORSBvZiB0aGUgZm9sbG93aW5nXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGZhc3Qgd2F5IG9mIGFwcGVuZCB0aGUgcmVzdWx0cyBmcm9tIHRoaXMgZmllbGRcbiAgICAgICAgLy8gcmVzdWx0Lm5vdGljZUxpc3QgPSByZXN1bHQubm90aWNlTGlzdC5jb25jYXQoY210UmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpO1xuICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIHB1dCBldmVyeXRoaW5nIHRocm91Z2ggYWRkTm90aWNlUGFydGlhbCwgZS5nLiwgZm9yIGRlYnVnZ2luZyBvciBmaWx0ZXJpbmdcbiAgICAgICAgLy8gIHByb2Nlc3MgcmVzdWx0cyBsaW5lIGJ5IGxpbmVcbiAgICAgICAgZm9yIChjb25zdCBub3RpY2VFbnRyeSBvZiBvbXRjUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpIHtcbiAgICAgICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KE9iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGggPT09IDUsIGBUTCBvdXJNYXJrZG93blRleHRDaGVja3Mgbm90aWNlIGxlbmd0aD0ke09iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGh9YCk7XG4gICAgICAgICAgICAvLyBOT1RFOiBFbGxpcHNlcyBpbiBPY2N1cnJlbmNlTm90ZSBoYXZlIHRoZSBub3JtYWwgbWVhbmluZ1xuICAgICAgICAgICAgLy8gICAgICAgICAgbm90IGxpa2UgdGhlIHNwZWNpYWxpc2VkIG1lYW5pbmcgaW4gdGhlIHNuaXBwZXQgZmllbGRzIFF1b3RlIGFuZCBHTFF1b3RlXG4gICAgICAgICAgICBpZiAobm90aWNlRW50cnkucHJpb3JpdHkgIT09IDE3OCAmJiBub3RpY2VFbnRyeS5wcmlvcml0eSAhPT0gMTc5IC8vIHVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgZWxsaXBzZSwgZWxsaXBzZSBhZnRlciBzcGFjZVxuICAgICAgICAgICAgICAgICYmICFub3RpY2VFbnRyeS5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJVbmV4cGVjdGVkIOKApiBjaGFyYWN0ZXIgYWZ0ZXIgc3BhY2VcIikgLy8gMTkxXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IC4uLm5vdGljZUVudHJ5LCByb3dJRCwgZmllbGROYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvbXRjUmVzdWx0T2JqZWN0LnN1Z2dlc3Rpb247IC8vIFRoZXJlIG1heSBvciBtYXkgbm90IGJlIG9uZSFcbiAgICB9XG4gICAgLy8gZW5kIG9mIG91ck1hcmtkb3duVGV4dENoZWNrcyBmdW5jdGlvblxuXG4gICAgLyoqXG4gICAgKiBAZGVzY3JpcHRpb24gLSBjaGVja3MgdGhlIGdpdmVuIHRleHQgZmllbGQgYW5kIHByb2Nlc3NlcyB0aGUgcmV0dXJuZWQgcmVzdWx0c1xuICAgICogQHBhcmFtIHtzdHJpbmd9IHJvd0lEIC0gNC1jaGFyYWN0ZXIgcm93IElEIGZpZWxkXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lIC0gbmFtZSBvZiB0aGUgZmllbGQgYmVpbmcgY2hlY2tlZFxuICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkVGV4dCAtIHRoZSBhY3R1YWwgdGV4dCBvZiB0aGUgZmllbGQgYmVpbmcgY2hlY2tlZFxuICAgICogQHBhcmFtIHtib29sZWFufSBhbGxvd2VkTGlua3MgLSB0cnVlIGlmIGxpbmtzIGFyZSBhbGxvd2VkIGluIHRoZSBmaWVsZCwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcm93TG9jYXRpb24gLSBkZXNjcmlwdGlvbiBvZiB3aGVyZSB0aGUgbGluZSBpcyBsb2NhdGVkXG4gICAgKiBAcGFyYW0ge09iamVjdH0gY2hlY2tpbmdPcHRpb25zIC0gcGFyYW1ldGVycyB0aGF0IG1pZ2h0IGFmZmVjdCB0aGUgY2hlY2tcbiAgICAqL1xuICAgIGZ1bmN0aW9uIG91ckNoZWNrVGV4dEZpZWxkKHJvd0lELCBmaWVsZE5hbWUsIGZpZWxkVGV4dCwgYWxsb3dlZExpbmtzLCByb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKSB7XG4gICAgICAgIC8vIERvZXMgYmFzaWMgY2hlY2tzIGZvciBzbWFsbCBlcnJvcnMgbGlrZSBsZWFkaW5nL3RyYWlsaW5nIHNwYWNlcywgZXRjLlxuXG4gICAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IGNoZWNraW5nIGZvciBjb21wdWxzb3J5IGZpZWxkcyBpcyBkb25lIGVsc2V3aGVyZVxuXG4gICAgICAgIC8vIFVwZGF0ZXMgdGhlIGdsb2JhbCBsaXN0IG9mIG5vdGljZXNcblxuICAgICAgICAvLyBmdW5jdGlvbkxvZyhgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZCgke2ZpZWxkTmFtZX0sICgke2ZpZWxkVGV4dC5sZW5ndGh9KSwgJHthbGxvd2VkTGlua3N9LCAke3Jvd0xvY2F0aW9ufSwg4oCmKWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dJRCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6ICdyb3dJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygcm93SUQgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogJ3Jvd0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiByb3dJRH0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6ICdmaWVsZE5hbWUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkTmFtZSA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrVGV4dEZpZWxkOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBmaWVsZE5hbWV9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChmaWVsZFRleHQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrVGV4dEZpZWxkOiAnZmllbGRUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBmaWVsZFRleHQgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogJ2ZpZWxkVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGRUZXh0fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoYWxsb3dlZExpbmtzID09PSB0cnVlIHx8IGFsbG93ZWRMaW5rcyA9PT0gZmFsc2UsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogYWxsb3dlZExpbmtzIHBhcmFtZXRlciBtdXN0IGJlIGVpdGhlciB0cnVlIG9yIGZhbHNlXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dMb2NhdGlvbiAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6ICdyb3dMb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygcm93TG9jYXRpb24gPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogJ3Jvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiByb3dMb2NhdGlvbn0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHJvd0xvY2F0aW9uLmluZGV4T2YoZmllbGROYW1lKSA8IDAsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrVGV4dEZpZWxkOiAncm93TG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgbm90IGNvbnRhaW4gZmllbGROYW1lPSR7ZmllbGROYW1lfWApO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IGZpZWxkTmFtZSA9PT0gJ09jY3VycmVuY2VOb3RlJyA/ICdtYXJrZG93bicgOiAncmF3JztcbiAgICAgICAgY29uc3Qgb2N0ZlJlc3VsdE9iamVjdCA9IGNoZWNrVGV4dEZpZWxkKGxhbmd1YWdlQ29kZSwgcmVwb0NvZGUsIGZpZWxkVHlwZSwgZmllbGROYW1lLCBmaWVsZFRleHQsIGFsbG93ZWRMaW5rcywgcm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQ2hvb3NlIG9ubHkgT05FIG9mIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmFzdCB3YXkgb2YgYXBwZW5kIHRoZSByZXN1bHRzIGZyb20gdGhpcyBmaWVsZFxuICAgICAgICAvLyByZXN1bHQubm90aWNlTGlzdCA9IHJlc3VsdC5ub3RpY2VMaXN0LmNvbmNhdChkYnRjUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpO1xuICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIHB1dCBldmVyeXRoaW5nIHRocm91Z2ggYWRkTm90aWNlUGFydGlhbCwgZS5nLiwgZm9yIGRlYnVnZ2luZyBvciBmaWx0ZXJpbmdcbiAgICAgICAgLy8gIHByb2Nlc3MgcmVzdWx0cyBsaW5lIGJ5IGxpbmVcbiAgICAgICAgZm9yIChjb25zdCBub3RpY2VFbnRyeSBvZiBvY3RmUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpIHtcbiAgICAgICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KE9iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGggPT09IDUsIGBUTCBvdXJDaGVja1RleHRGaWVsZCBub3RpY2UgbGVuZ3RoPSR7T2JqZWN0LmtleXMobm90aWNlRW50cnkpLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyAuLi5ub3RpY2VFbnRyeSwgcm93SUQsIGZpZWxkTmFtZSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2N0ZlJlc3VsdE9iamVjdC5zdWdnZXN0aW9uOyAvLyBUaGVyZSBtYXkgb3IgbWF5IG5vdCBiZSBvbmUhXG4gICAgfVxuICAgIC8vIGVuZCBvZiBvdXJDaGVja1RleHRGaWVsZCBmdW5jdGlvblxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcm93SURcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhTGlua1RleHRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcm93TG9jYXRpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2hlY2tpbmdPcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gb3VyQ2hlY2tTdXBwb3J0UmVmZXJlbmNlSW5UQShyb3dJRCwgZmllbGROYW1lLCB0YUxpbmtUZXh0LCByb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKSB7XG4gICAgICAgIC8vIENoZWNrcyB0aGF0IHRoZSBUQSByZWZlcmVuY2UgY2FuIGJlIGZvdW5kXG5cbiAgICAgICAgLy8gVXBkYXRlcyB0aGUgZ2xvYmFsIGxpc3Qgb2Ygbm90aWNlc1xuXG4gICAgICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrU3VwcG9ydFJlZmVyZW5jZUluVEEoJHtmaWVsZE5hbWV9LCAoJHt0YUxpbmtUZXh0Lmxlbmd0aH0pICcke3RhTGlua1RleHR9JywgJHtyb3dMb2NhdGlvbn0sIOKApilgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93SUQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrU3VwcG9ydFJlZmVyZW5jZUluVEE6ICdyb3dJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygcm93SUQgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBOiAncm93SUQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIHJvd0lEfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGROYW1lICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBmaWVsZE5hbWUgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBmaWVsZE5hbWV9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0YUxpbmtUZXh0ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBOiAndGFMaW5rVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgdGFMaW5rVGV4dCA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrU3VwcG9ydFJlZmVyZW5jZUluVEE6ICd0YUxpbmtUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiB0YUxpbmtUZXh0fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93TG9jYXRpb24uaW5kZXhPZihmaWVsZE5hbWUpIDwgMCwgYGNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tTdXBwb3J0UmVmZXJlbmNlSW5UQTogJ3Jvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIG5vdCBjb250YWluIGZpZWxkTmFtZT0ke2ZpZWxkTmFtZX1gKTtcblxuICAgICAgICBjb25zdCBjb3FSZXN1bHRPYmplY3QgPSBhd2FpdCBjaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBKGZpZWxkTmFtZSwgdGFMaW5rVGV4dCwgcm93TG9jYXRpb24sIHsgLi4uY2hlY2tpbmdPcHRpb25zLCB0YVJlcG9MYW5ndWFnZUNvZGU6IGxhbmd1YWdlQ29kZSB9KTtcblxuICAgICAgICAvLyBDaG9vc2Ugb25seSBPTkUgb2YgdGhlIGZvbGxvd2luZ1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmYXN0IHdheSBvZiBhcHBlbmQgdGhlIHJlc3VsdHMgZnJvbSB0aGlzIGZpZWxkXG4gICAgICAgIC8vIHJlc3VsdC5ub3RpY2VMaXN0ID0gcmVzdWx0Lm5vdGljZUxpc3QuY29uY2F0KGNvcVJlc3VsdE9iamVjdC5ub3RpY2VMaXN0KTtcbiAgICAgICAgLy8gSWYgd2UgbmVlZCB0byBwdXQgZXZlcnl0aGluZyB0aHJvdWdoIGFkZE5vdGljZVBhcnRpYWwsIGUuZy4sIGZvciBkZWJ1Z2dpbmcgb3IgZmlsdGVyaW5nXG4gICAgICAgIC8vICBwcm9jZXNzIHJlc3VsdHMgbGluZSBieSBsaW5lXG4gICAgICAgIGZvciAoY29uc3Qgbm90aWNlRW50cnkgb2YgY29xUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpIHtcbiAgICAgICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KE9iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGggPT09IDUsIGBUTCBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBIG5vdGljZSBsZW5ndGg9JHtPYmplY3Qua2V5cyhub3RpY2VFbnRyeSkubGVuZ3RofWApO1xuICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IC4uLm5vdGljZUVudHJ5LCByb3dJRCwgZmllbGROYW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVuZCBvZiBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBIGZ1bmN0aW9uXG5cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJvd0lEXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZFRleHRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2NjdXJyZW5jZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByb3dMb2NhdGlvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjaGVja2luZ09wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyBmdW5jdGlvbiBvdXJDaGVja1ROT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZShyb3dJRCwgZmllbGROYW1lLCBmaWVsZFRleHQsIG9jY3VycmVuY2UsIHJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpIHtcbiAgICAgICAgLy8gQ2hlY2tzIHRoYXQgdGhlIEhlYnJldy9HcmVlayBxdW90ZSBjYW4gYmUgZm91bmQgaW4gdGhlIG9yaWdpbmFsIHRleHRzXG5cbiAgICAgICAgLy8gVXNlcyB0aGUgYm9va0lELEMsViB2YWx1ZXMgZnJvbSB0aGUgbWFpbiBmdW5jdGlvbiBjYWxsXG5cbiAgICAgICAgLy8gVXBkYXRlcyB0aGUgZ2xvYmFsIGxpc3Qgb2Ygbm90aWNlc1xuXG4gICAgICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrVE5PcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlKCR7ZmllbGROYW1lfSwgKCR7ZmllbGRUZXh0Lmxlbmd0aH0pICcke2ZpZWxkVGV4dH0nLCAke3Jvd0xvY2F0aW9ufSwg4oCmKWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dJRCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUTk9yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdyb3dJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygcm93SUQgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1ROT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ3Jvd0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiByb3dJRH0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGZpZWxkTmFtZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUTk9yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdmaWVsZE5hbWUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkTmFtZSA9PT0gJ3N0cmluZycsIGBjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrVE5PcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBmaWVsZE5hbWV9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChmaWVsZFRleHQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlEYXRhUm93IG91ckNoZWNrVE5PcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnZmllbGRUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBmaWVsZFRleHQgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5RGF0YVJvdyBvdXJDaGVja1ROT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ2ZpZWxkVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGRUZXh0fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQob2NjdXJyZW5jZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUTk9yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdvY2N1cnJlbmNlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBvY2N1cnJlbmNlID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUTk9yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdvY2N1cnJlbmNlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBvY2N1cnJlbmNlfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93TG9jYXRpb24uaW5kZXhPZihmaWVsZE5hbWUpIDwgMCwgYGNoZWNrVE5fVFNWOURhdGFSb3cgb3VyQ2hlY2tUTk9yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdyb3dMb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBub3QgY29udGFpbiBmaWVsZE5hbWU9JHtmaWVsZE5hbWV9YCk7XG5cbiAgICAgICAgY29uc3QgY29xUmVzdWx0T2JqZWN0ID0gYXdhaXQgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlKGxhbmd1YWdlQ29kZSwgcmVwb0NvZGUsIGZpZWxkTmFtZSwgZmllbGRUZXh0LCBvY2N1cnJlbmNlLCBib29rSUQsIGdpdmVuQywgZ2l2ZW5WLCByb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKTtcblxuICAgICAgICAvLyBDaG9vc2Ugb25seSBPTkUgb2YgdGhlIGZvbGxvd2luZ1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmYXN0IHdheSBvZiBhcHBlbmQgdGhlIHJlc3VsdHMgZnJvbSB0aGlzIGZpZWxkXG4gICAgICAgIC8vIHJlc3VsdC5ub3RpY2VMaXN0ID0gcmVzdWx0Lm5vdGljZUxpc3QuY29uY2F0KGNvcVJlc3VsdE9iamVjdC5ub3RpY2VMaXN0KTtcbiAgICAgICAgLy8gSWYgd2UgbmVlZCB0byBwdXQgZXZlcnl0aGluZyB0aHJvdWdoIGFkZE5vdGljZVBhcnRpYWwsIGUuZy4sIGZvciBkZWJ1Z2dpbmcgb3IgZmlsdGVyaW5nXG4gICAgICAgIC8vICBwcm9jZXNzIHJlc3VsdHMgbGluZSBieSBsaW5lXG4gICAgICAgIGZvciAoY29uc3Qgbm90aWNlRW50cnkgb2YgY29xUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpIHtcbiAgICAgICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KE9iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGggPT09IDUsIGBUTCBvdXJDaGVja1ROT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZSBub3RpY2UgbGVuZ3RoPSR7T2JqZWN0LmtleXMobm90aWNlRW50cnkpLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyAuLi5ub3RpY2VFbnRyeSwgcm93SUQsIGZpZWxkTmFtZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlbmQgb2Ygb3VyQ2hlY2tUTk9yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2UgZnVuY3Rpb25cblxuXG4gICAgLy8gTWFpbiBjb2RlIGZvciBjaGVja1ROX1RTVjlEYXRhUm93IGZ1bmN0aW9uXG4gICAgaWYgKGxpbmUgPT09IEVYUEVDVEVEX1ROX0hFQURJTkdfTElORSkgLy8gQXNzdW1lIGl0IG11c3QgYmUgb2tcbiAgICAgICAgcmV0dXJuIGRyUmVzdWx0OyAvLyBXZSBjYW7igJl0IGRldGVjdCBpZiBpdOKAmXMgaW4gdGhlIHdyb25nIHBsYWNlXG5cbiAgICBsZXQgZXhjZXJwdExlbmd0aDtcbiAgICB0cnkge1xuICAgICAgICBleGNlcnB0TGVuZ3RoID0gY2hlY2tpbmdPcHRpb25zPy5leGNlcnB0TGVuZ3RoO1xuICAgIH0gY2F0Y2ggKHRsY0VMZXJyb3IpIHsgfVxuICAgIGlmICh0eXBlb2YgZXhjZXJwdExlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNOYU4oZXhjZXJwdExlbmd0aCkpIHtcbiAgICAgICAgZXhjZXJwdExlbmd0aCA9IERFRkFVTFRfRVhDRVJQVF9MRU5HVEg7XG4gICAgICAgIC8vIGRlYnVnTG9nKGBVc2luZyBkZWZhdWx0IGV4Y2VycHRMZW5ndGg9JHtleGNlcnB0TGVuZ3RofWApO1xuICAgIH1cbiAgICAvLyBlbHNlXG4gICAgLy8gZGVidWdMb2coYFVzaW5nIHN1cHBsaWVkIGV4Y2VycHRMZW5ndGg9JHtleGNlcnB0TGVuZ3RofWAsIGBjZi4gZGVmYXVsdD0ke0RFRkFVTFRfRVhDRVJQVF9MRU5HVEh9YCk7XG4gICAgLy8gY29uc3QgZXhjZXJwdEhhbGZMZW5ndGggPSBNYXRoLmZsb29yKGV4Y2VycHRMZW5ndGggLyAyKTsgLy8gcm91bmRlZCBkb3duXG4gICAgLy8gY29uc3QgZXhjZXJwdEhhbGZMZW5ndGhQbHVzID0gTWF0aC5mbG9vcigoZXhjZXJwdExlbmd0aCArIDEpIC8gMik7IC8vIHJvdW5kZWQgdXBcbiAgICAvLyBkZWJ1Z0xvZyhgVXNpbmcgZXhjZXJwdEhhbGZMZW5ndGg9JHtleGNlcnB0SGFsZkxlbmd0aH1gLCBgZXhjZXJwdEhhbGZMZW5ndGhQbHVzPSR7ZXhjZXJwdEhhbGZMZW5ndGhQbHVzfWApO1xuXG4gICAgY29uc3QgbG93ZXJjYXNlQm9va0lEID0gYm9va0lELnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IG51bUNoYXB0ZXJzVGhpc0Jvb2s7XG4gICAgdHJ5IHtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobG93ZXJjYXNlQm9va0lEICE9PSAnb2JzJywgXCJTaG91bGRu4oCZdCBoYXBwZW4gaW4gdG5fdGFibGUtcm93LWNoZWNrXCIpO1xuICAgICAgICBudW1DaGFwdGVyc1RoaXNCb29rID0gYm9va3MuY2hhcHRlcnNJbkJvb2soYm9va0lEKTtcbiAgICB9IGNhdGNoICh0bGNOQ2Vycm9yKSB7XG4gICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTc5LCBtZXNzYWdlOiBcIkludmFsaWQgYm9vayBpZGVudGlmaWVyIHBhc3NlZCB0byBjaGVja1ROX1RTVjlEYXRhUm93XCIsIGxvY2F0aW9uOiBgICcke2Jvb2tJRH0nIGluIGZpcnN0IHBhcmFtZXRlcjogJHt0bGNOQ2Vycm9yfWAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGhhdmVHb29kQm9va0lEID0gbnVtQ2hhcHRlcnNUaGlzQm9vayAhPT0gdW5kZWZpbmVkO1xuXG4gICAgbGV0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ1xcdCcpO1xuICAgIGxldCBSSURTdWdnZXN0aW9uLCBTUlN1Z2dlc3Rpb24sIEdMUVN1Z2dlc3Rpb24sIE9RU3VnZ2VzdGlvbiwgT1N1Z2dlc3Rpb24sIE9OU3VnZ2VzdGlvbjtcbiAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gTlVNX0VYUEVDVEVEX1ROX1RTVl9GSUVMRFMpIHtcbiAgICAgICAgY29uc3QgW0IsIEMsIFYsIHJvd0lELCBzdXBwb3J0UmVmZXJlbmNlLCBxdW90ZSwgb2NjdXJyZW5jZSwgR0xRdW90ZSwgb2NjdXJyZW5jZU5vdGVdID0gZmllbGRzO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBmaWVsZHMgb25lLWJ5LW9uZVxuICAgICAgICBpZiAoQi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChCICE9PSBib29rSUQpXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5NzgsIG1lc3NhZ2U6IFwiV3JvbmcgYm9vayBpZGVudGlmaWVyXCIsIGRldGFpbHM6IGBleHBlY3RlZCAnJHtib29rSUR9J2AsIGZpZWxkTmFtZTogJ0Jvb2snLCByb3dJRCwgZXhjZXJwdDogQiwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTc3LCBtZXNzYWdlOiBcIk1pc3NpbmcgYm9vayBpZGVudGlmaWVyXCIsIGNoYXJhY3RlckluZGV4OiAwLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuXG4gICAgICAgIGxldCBudW1WZXJzZXNUaGlzQ2hhcHRlciwgaGF2ZUdvb2RDaGFwdGVyTnVtYmVyO1xuICAgICAgICBpZiAoQy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChDICE9PSBnaXZlbkMpXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5NzYsIG1lc3NhZ2U6IFwiV3JvbmcgY2hhcHRlciBudW1iZXJcIiwgZGV0YWlsczogYGV4cGVjdGVkICcke2dpdmVuQ30nYCwgZmllbGROYW1lOiAnQ2hhcHRlcicsIHJvd0lELCBleGNlcnB0OiBDLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICBpZiAoQyA9PT0gJ2Zyb250JykgeyB9XG4gICAgICAgICAgICBlbHNlIGlmICgvXlxcZCskLy50ZXN0KEMpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGludEMgPSBOdW1iZXIoQyk7XG4gICAgICAgICAgICAgICAgaWYgKGludEMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MjQsIG1lc3NhZ2U6IGBJbnZhbGlkIHplcm8gY2hhcHRlciBudW1iZXJgLCBleGNlcnB0OiBDLCByb3dJRCwgZmllbGROYW1lOiAnQ2hhcHRlcicsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgaGF2ZUdvb2RDaGFwdGVyTnVtYmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRPRE86IERvZXMgdGhpcyBuZXh0IHNlY3Rpb24gbmVlZCByZXdyaXRpbmcgKHNlZSB2ZXJzZSBjaGVjayBiZWxvdyk/Pz9cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbnRDID4gbnVtQ2hhcHRlcnNUaGlzQm9vaykge1xuICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgyMywgbWVzc2FnZTogYEludmFsaWQgbGFyZ2UgY2hhcHRlciBudW1iZXJgLCBleGNlcnB0OiBDLCByb3dJRCwgZmllbGROYW1lOiAnQ2hhcHRlcicsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgaGF2ZUdvb2RDaGFwdGVyTnVtYmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG51bVZlcnNlc1RoaXNDaGFwdGVyID0gYm9va3MudmVyc2VzSW5DaGFwdGVyKGxvd2VyY2FzZUJvb2tJRCwgaW50Qyk7XG4gICAgICAgICAgICAgICAgICAgIGhhdmVHb29kQ2hhcHRlck51bWJlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAodGxjTlZlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhdmVHb29kQm9va0lEKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkTm90aWNlUGFydGlhbCh7cHJpb3JpdHk6NTAwLCBcIkludmFsaWQgY2hhcHRlciBudW1iZXJcIiwgcm93TG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MjIsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGNoZWNrIGNoYXB0ZXIgbnVtYmVyXCIsIGV4Y2VycHQ6IEMsIHJvd0lELCBmaWVsZE5hbWU6ICdDaGFwdGVyJywgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICBoYXZlR29vZENoYXB0ZXJOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MjEsIG1lc3NhZ2U6IFwiQmFkIGNoYXB0ZXIgbnVtYmVyXCIsIGV4Y2VycHQ6IEMsIHJvd0lELCBmaWVsZE5hbWU6ICdDaGFwdGVyJywgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODIwLCBtZXNzYWdlOiBcIk1pc3NpbmcgY2hhcHRlciBudW1iZXJcIiwgcm93SUQsIGZpZWxkTmFtZTogJ0NoYXB0ZXInLCBsb2NhdGlvbjogYCA/OiR7Vn0ke291clJvd0xvY2F0aW9ufWAgfSk7XG5cbiAgICAgICAgaWYgKFYubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoViAhPT0gZ2l2ZW5WKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTc1LCBtZXNzYWdlOiBcIldyb25nIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgZXhwZWN0ZWQgJyR7Z2l2ZW5WfSdgLCByb3dJRCwgZmllbGROYW1lOiAnVmVyc2UnLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICBpZiAoYm9va0lEID09PSAnT0JTJyB8fCBWID09PSAnaW50cm8nKSB7IH1cbiAgICAgICAgICAgIGVsc2UgaWYgKC9eXFxkKyQvLnRlc3QoVikpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW50ViA9IE51bWJlcihWKTtcbiAgICAgICAgICAgICAgICBpZiAoaW50ViA9PT0gMCAmJiBib29rSUQgIT09ICdQU0EnKSAvLyBQc2FsbXMgaGF2ZSBcXGQgYXMgdmVyc2UgemVyb1xuICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgxNCwgbWVzc2FnZTogXCJJbnZhbGlkIHplcm8gdmVyc2UgbnVtYmVyXCIsIHJvd0lELCBmaWVsZE5hbWU6ICdWZXJzZScsIGV4Y2VycHQ6IFYsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhdmVHb29kQ2hhcHRlck51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludFYgPiBudW1WZXJzZXNUaGlzQ2hhcHRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgxMywgbWVzc2FnZTogXCJJbnZhbGlkIGxhcmdlIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgJHtib29rSUR9IGNoYXB0ZXIgJHtDfSBvbmx5IGhhcyAke251bVZlcnNlc1RoaXNDaGFwdGVyfSB2ZXJzZXNgLCByb3dJRCwgZmllbGROYW1lOiAnVmVyc2UnLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MTIsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGNoZWNrIHZlcnNlIG51bWJlclwiLCByb3dJRCwgZmllbGROYW1lOiAnVmVyc2UnLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODExLCBtZXNzYWdlOiBcIkJhZCB2ZXJzZSBudW1iZXJcIiwgcm93SUQsIGZpZWxkTmFtZTogJ1ZlcnNlJywgbG9jYXRpb246IGAgJyR7Vn0nJHtvdXJSb3dMb2NhdGlvbn1gIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODEwLCBtZXNzYWdlOiBcIk1pc3NpbmcgdmVyc2UgbnVtYmVyXCIsIHJvd0lELCBmaWVsZE5hbWU6ICdWZXJzZScsIGxvY2F0aW9uOiBgIGFmdGVyICR7Q306PyR7b3VyUm93TG9jYXRpb259YCB9KTtcblxuICAgICAgICBpZiAoIXJvd0lELmxlbmd0aClcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTMxLCBtZXNzYWdlOiBcIk1pc3Npbmcgcm93IElEIGZpZWxkXCIsIGZpZWxkTmFtZTogJ1ZlcnNlJywgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyb3dJRC5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc3OCwgbWVzc2FnZTogXCJSb3cgSUQgc2hvdWxkIGJlIGV4YWN0bHkgNCBjaGFyYWN0ZXJzXCIsIGRldGFpbHM6IGBub3QgJHtyb3dJRC5sZW5ndGh9YCwgcm93SUQsIGZpZWxkTmFtZTogJ0lEJywgZXhjZXJwdDogcm93SUQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICBpZiAocm93SUQubGVuZ3RoID4gNCkgUklEU3VnZ2VzdGlvbiA9IHJvd0lELnN1YnN0cmluZygwLCA1KTtcbiAgICAgICAgICAgICAgICBlbHNlIHsgLy8gbXVzdCBiZSA8IDRcbiAgICAgICAgICAgICAgICAgICAgUklEU3VnZ2VzdGlvbiA9IHJvd0lEO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoUklEU3VnZ2VzdGlvbi5sZW5ndGggPCA0KSBSSURTdWdnZXN0aW9uICs9IExDX0FMUEhBQkVUX1BMVVNfRElHSVRTW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIExDX0FMUEhBQkVUX1BMVVNfRElHSVRTLmxlbmd0aCldOztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKExDX0FMUEhBQkVULmluZGV4T2Yocm93SURbMF0pIDwgMClcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDE3NiwgbWVzc2FnZTogXCJSb3cgSUQgc2hvdWxkIHN0YXJ0IHdpdGggYSBsb3dlcmNhc2UgbGV0dGVyXCIsIGNoYXJhY3RlckluZGV4OiAwLCByb3dJRCwgZmllbGROYW1lOiAnSUQnLCBleGNlcnB0OiByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoTENfQUxQSEFCRVRfUExVU19ESUdJVFMuaW5kZXhPZihyb3dJRFszXSkgPCAwKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMTc1LCBtZXNzYWdlOiBcIlJvdyBJRCBzaG91bGQgZW5kIHdpdGggYSBsb3dlcmNhc2UgbGV0dGVyIG9yIGRpZ2l0XCIsIGNoYXJhY3RlckluZGV4OiAzLCByb3dJRCwgZmllbGROYW1lOiAnSUQnLCBleGNlcnB0OiByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoTENfQUxQSEFCRVRfUExVU19ESUdJVFNfUExVU19IWVBIRU4uaW5kZXhPZihyb3dJRFsxXSkgPCAwKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMTc0LCBtZXNzYWdlOiBcIlJvdyBJRCBjaGFyYWN0ZXJzIHNob3VsZCBvbmx5IGJlIGxvd2VyY2FzZSBsZXR0ZXJzLCBkaWdpdHMsIG9yIGh5cGVuXCIsIGZpZWxkTmFtZTogJ0lEJywgY2hhcmFjdGVySW5kZXg6IDEsIHJvd0lELCBleGNlcnB0OiByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoTENfQUxQSEFCRVRfUExVU19ESUdJVFNfUExVU19IWVBIRU4uaW5kZXhPZihyb3dJRFsyXSkgPCAwKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMTczLCBtZXNzYWdlOiBcIlJvdyBJRCBjaGFyYWN0ZXJzIHNob3VsZCBvbmx5IGJlIGxvd2VyY2FzZSBsZXR0ZXJzLCBkaWdpdHMsIG9yIGh5cGVuXCIsIGZpZWxkTmFtZTogJ0lEJywgY2hhcmFjdGVySW5kZXg6IDIsIHJvd0lELCBleGNlcnB0OiByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1cHBvcnRSZWZlcmVuY2UubGVuZ3RoKSB7IC8vIG5lZWQgdG8gY2hlY2sgVE4gYWdhaW5zdCBUQVxuICAgICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShzdXBwb3J0UmVmZXJlbmNlKSlcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDM3MywgbWVzc2FnZTogXCJGaWVsZCBpcyBvbmx5IHdoaXRlc3BhY2VcIiwgZmllbGROYW1lOiAnU3VwcG9ydFJlZmVyZW5jZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICBlbHNlIHsgLy8gTW9yZSB0aGFuIGp1c3Qgd2hpdGVzcGFjZVxuICAgICAgICAgICAgICAgIGlmICghc3VwcG9ydFJlZmVyZW5jZS5zdGFydHNXaXRoKCdmaWdzLScpXG4gICAgICAgICAgICAgICAgICAgICYmICFzdXBwb3J0UmVmZXJlbmNlLnN0YXJ0c1dpdGgoJ2dyYW1tYXItJylcbiAgICAgICAgICAgICAgICAgICAgJiYgIXN1cHBvcnRSZWZlcmVuY2Uuc3RhcnRzV2l0aCgndHJhbnNsYXRlLScpXG4gICAgICAgICAgICAgICAgICAgICYmICFzdXBwb3J0UmVmZXJlbmNlLnN0YXJ0c1dpdGgoJ3dyaXRpbmctJylcbiAgICAgICAgICAgICAgICAgICAgJiYgc3VwcG9ydFJlZmVyZW5jZSAhPT0gJ2d1aWRlbGluZXMtc29ub2Znb2RwcmluY2lwbGVzJylcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3ODgsIG1lc3NhZ2U6IFwiT25seSAnSnVzdC1Jbi1UaW1lIFRyYWluaW5nJyBUQSBhcnRpY2xlcyBhbGxvd2VkIGhlcmVcIiwgZmllbGROYW1lOiAnU3VwcG9ydFJlZmVyZW5jZScsIGV4Y2VycHQ6IHN1cHBvcnRSZWZlcmVuY2UsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgU1JTdWdnZXN0aW9uID0gb3VyQ2hlY2tUZXh0RmllbGQocm93SUQsICdTdXBwb3J0UmVmZXJlbmNlJywgc3VwcG9ydFJlZmVyZW5jZSwgdHJ1ZSwgb3VyUm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZ09wdGlvbnM/LmRpc2FibGVBbGxMaW5rRmV0Y2hpbmdGbGFnKVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBvdXJDaGVja1N1cHBvcnRSZWZlcmVuY2VJblRBKHJvd0lELCAnU3VwcG9ydFJlZmVyZW5jZScsIHN1cHBvcnRSZWZlcmVuY2UsIG91clJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChvY2N1cnJlbmNlTm90ZS5pbmRleE9mKHN1cHBvcnRSZWZlcmVuY2UpIDwgMCkgLy8gVGhlIGZ1bGwgbGluayBpcyBOT1QgaW4gdGhlIG5vdGUhXG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzg3LCBtZXNzYWdlOiBcIkxpbmsgdG8gVEEgc2hvdWxkIGFsc28gYmUgaW4gT2NjdXJyZW5jZU5vdGVcIiwgZmllbGROYW1lOiAnU3VwcG9ydFJlZmVyZW5jZScsIGV4Y2VycHQ6IHN1cHBvcnRSZWZlcmVuY2UsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3VwcG9ydFJlZmVyZW5jZS5pbmRleE9mKCdcXHUyMDBCJykgPj0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJDb3VudCA9IGNvdW50T2NjdXJyZW5jZXMoc3VwcG9ydFJlZmVyZW5jZSwgJ1xcdTIwMEInKTtcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDM3NCwgbWVzc2FnZTogXCJGaWVsZCBjb250YWlucyB6ZXJvLXdpZHRoIHNwYWNlKHMpXCIsIGRldGFpbHM6IGAke2NoYXJDb3VudH0gb2NjdXJyZW5jZSR7Y2hhckNvdW50ID09PSAxID8gJycgOiAncyd9IGZvdW5kYCwgZmllbGROYW1lOiAnU3VwcG9ydFJlZmVyZW5jZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gLy8gVE9ETzogQ2hlY2sgaWYgdGhpcyBpcyByZWFsbHkgcmVxdWlyZWQ/Pz8/XG4gICAgICAgIC8vIGVsc2UgaWYgKC9eXFxkKyQvLnRlc3QoQykgJiYgL15cXGQrJC8udGVzdChWKSkgLy8gQzpWIGFyZSBib3RoIGRpZ2l0c1xuICAgICAgICAvLyAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4NzcsIG1lc3NhZ2U6IFwiTWlzc2luZyBTdXBwb3J0UmVmZXJlbmNlIGZpZWxkXCIsIGZpZWxkTmFtZTogJ1N1cHBvcnRSZWZlcmVuY2UnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuXG4gICAgICAgIGlmIChxdW90ZS5sZW5ndGgpIHsgLy8gbmVlZCB0byBjaGVjayBVVE4gYWdhaW5zdCBVSEIgYW5kIFVHTlRcbiAgICAgICAgICAgIE9RU3VnZ2VzdGlvbiA9IG91ckNoZWNrVGV4dEZpZWxkKHJvd0lELCAnT3JpZ1F1b3RlJywgcXVvdGUsIGZhbHNlLCBvdXJSb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChvY2N1cnJlbmNlLmxlbmd0aClcbiAgICAgICAgICAgICAgICBhd2FpdCBvdXJDaGVja1ROT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZShyb3dJRCwgJ09yaWdRdW90ZScsIHF1b3RlLCBvY2N1cnJlbmNlLCBvdXJSb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc1MCwgbWVzc2FnZTogXCJNaXNzaW5nIG9jY3VycmVuY2UgZmllbGQgd2hlbiB3ZSBoYXZlIGFuIG9yaWdpbmFsIHF1b3RlXCIsIGZpZWxkTmFtZTogJ09jY3VycmVuY2UnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgLy8gVE9ETzogRmluZCBtb3JlIGRldGFpbHMgYWJvdXQgd2hlbiB0aGVzZSBmaWVsZHMgYXJlIHJlYWxseSBjb21wdWxzb3J5IChhbmQgd2hlbiB0aGV5J3JlIG5vdCwgZS5nLiwgZm9yICdpbnRybycpID8/P1xuICAgICAgICAgICAgaWYgKFYgIT09ICdpbnRybycgJiYgb2NjdXJyZW5jZSAhPT0gJzAnKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTE5LCBtZXNzYWdlOiBcIk1pc3NpbmcgT3JpZ1F1b3RlIGZpZWxkXCIsIGZpZWxkTmFtZTogJ09yaWdRdW90ZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG5cbiAgICAgICAgaWYgKG9jY3VycmVuY2UubGVuZ3RoKSB7IC8vIFRoaXMgc2hvdWxkIHVzdWFsbHkgYmUgYSBkaWdpdFxuICAgICAgICAgICAgaWYgKG9jY3VycmVuY2UgPT09ICcwJykgeyAvLyB6ZXJvIG1lYW5zIHRoYXQgaXQgZG9lc27igJl0IG9jY3VyXG4gICAgICAgICAgICAgICAgaWYgKHF1b3RlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc1MSwgbWVzc2FnZTogXCJJbnZhbGlkIHplcm8gb2NjdXJyZW5jZSBmaWVsZCB3aGVuIHdlIGhhdmUgYW4gb3JpZ2luYWwgcXVvdGVcIiwgZmllbGROYW1lOiAnT2NjdXJyZW5jZScsIHJvd0lELCBleGNlcnB0OiBvY2N1cnJlbmNlLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIE9TdWdnZXN0aW9uID0gJzEnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiAoViAhPT0gJ2ludHJvJylcbiAgICAgICAgICAgICAgICAvLyAgICAgYWRkTm90aWNlUGFydGlhbCh7cHJpb3JpdHk6NTAwLCBtZXNzYWdlOlwiSW52YWxpZCB6ZXJvIG9jY3VycmVuY2UgZmllbGRcIiwgcm93SUQsIGxvY2F0aW9uOnJvd0xvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9jY3VycmVuY2UgPT09ICctMScpIHsgfSAvLyBUT0RPIGNoZWNrIHRoZSBzcGVjaWFsIGNvbmRpdGlvbnMgd2hlbiB0aGlzIGNhbiBvY2N1cj8/P1xuICAgICAgICAgICAgZWxzZSBpZiAoJzEyMzQ1Njc4Jy5pbmRleE9mKG9jY3VycmVuY2UpIDwgMCkgeyAvLyBpdOKAmXMgbm90IG9uZSBvZiB0aGVzZSBpbnRlZ2Vyc1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzkyLCBtZXNzYWdlOiBgSW52YWxpZCBvY2N1cnJlbmNlIGZpZWxkYCwgZmllbGROYW1lOiAnT2NjdXJyZW5jZScsIHJvd0lELCBleGNlcnB0OiBvY2N1cnJlbmNlLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgT1N1Z2dlc3Rpb24gPSAnMSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocXVvdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc5MSwgbWVzc2FnZTogYE1pc3Npbmcgb2NjdXJyZW5jZSBmaWVsZGAsIGZpZWxkTmFtZTogJ09jY3VycmVuY2UnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgT1N1Z2dlc3Rpb24gPSAnMSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoR0xRdW90ZS5sZW5ndGgpIHsgLy8gVE9ETzogbmVlZCB0byBjaGVjayBVVE4gYWdhaW5zdCBVTFRcbiAgICAgICAgICAgIGlmIChHTFF1b3RlLmluZGV4T2YoJ1xcdTIwMEInKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhckNvdW50ID0gY291bnRPY2N1cnJlbmNlcyhHTFF1b3RlLCAnXFx1MjAwQicpO1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMzc0LCBtZXNzYWdlOiBcIkZpZWxkIGNvbnRhaW5zIHplcm8td2lkdGggc3BhY2UocylcIiwgZGV0YWlsczogYCR7Y2hhckNvdW50fSBvY2N1cnJlbmNlJHtjaGFyQ291bnQgPT09IDEgPyAnJyA6ICdzJ30gZm91bmRgLCBmaWVsZE5hbWU6ICdHTFF1b3RlJywgcm93SUQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoR0xRdW90ZSkpXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAzNzMsIG1lc3NhZ2U6IFwiRmllbGQgaXMgb25seSB3aGl0ZXNwYWNlXCIsIGZpZWxkTmFtZTogJ0dMUXVvdGUnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgZWxzZSAvLyBNb3JlIHRoYW4ganVzdCB3aGl0ZXNwYWNlXG4gICAgICAgICAgICAgICAgaWYgKFYgIT09ICdpbnRybycpXG4gICAgICAgICAgICAgICAgICAgIEdMUVN1Z2dlc3Rpb24gPSBvdXJDaGVja1RleHRGaWVsZChyb3dJRCwgJ0dMUXVvdGUnLCBHTFF1b3RlLCBmYWxzZSwgb3VyUm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWxzZSAvLyBUT0RPOiBGaW5kIG91dCBpZiB0aGVzZSBmaWVsZHMgYXJlIHJlYWxseSBjb21wdWxzb3J5IChhbmQgd2hlbiB0aGV5J3JlIG5vdCwgZS5nLiwgZm9yICdpbnRybycpID8/P1xuICAgICAgICAvLyAgICAgaWYgKFYgIT09ICdpbnRybycpXG4gICAgICAgIC8vICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAyNzUsIG1lc3NhZ2U6IFwiTWlzc2luZyBHTFF1b3RlIGZpZWxkXCIsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG5cbiAgICAgICAgaWYgKG9jY3VycmVuY2VOb3RlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG9jY3VycmVuY2VOb3RlLmluZGV4T2YoJ1xcdTIwMEInKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhckNvdW50ID0gY291bnRPY2N1cnJlbmNlcyhvY2N1cnJlbmNlTm90ZSwgJ1xcdTIwMEInKTtcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDM3NCwgbWVzc2FnZTogXCJGaWVsZCBjb250YWlucyB6ZXJvLXdpZHRoIHNwYWNlKHMpXCIsIGRldGFpbHM6IGAke2NoYXJDb3VudH0gb2NjdXJyZW5jZSR7Y2hhckNvdW50ID09PSAxID8gJycgOiAncyd9IGZvdW5kYCwgZmllbGROYW1lOiAnT2NjdXJyZW5jZU5vdGUnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShvY2N1cnJlbmNlTm90ZSkpXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAzNzMsIG1lc3NhZ2U6IFwiRmllbGQgaXMgb25seSB3aGl0ZXNwYWNlXCIsIGZpZWxkTmFtZTogJ09jY3VycmVuY2VOb3RlJywgcm93SUQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgIGVsc2UgeyAvLyBNb3JlIHRoYW4ganVzdCB3aGl0ZXNwYWNlXG4gICAgICAgICAgICAgICAgY29uc3QgYWRqdXN0ZWRPY2N1cnJlbmNlTm90ZSA9IG9jY3VycmVuY2VOb3RlLnJlcGxhY2UoLzxicj4vZywgJ1xcbicpO1xuICAgICAgICAgICAgICAgIE9OU3VnZ2VzdGlvbiA9IGF3YWl0IG91ck1hcmtkb3duVGV4dENoZWNrcyhyb3dJRCwgJ09jY3VycmVuY2VOb3RlJywgYWRqdXN0ZWRPY2N1cnJlbmNlTm90ZSwgdHJ1ZSwgb3VyUm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgLy8gYXdhaXQgb3VyQ2hlY2tOb3Rlc0xpbmtzVG9PdXRzaWRlKHJvd0lELCAnT2NjdXJyZW5jZU5vdGUnLCBhZGp1c3RlZE9jY3VycmVuY2VOb3RlLCBvdXJSb3dMb2NhdGlvbiwgbGlua0NoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgbGV0IHJlZ2V4UmVzdWx0QXJyYXksIGxpbmtzTGlzdCA9IFtdLCBmb3VuZFNSID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgd2hpbGUgKChyZWdleFJlc3VsdEFycmF5ID0gVEFfUkVHRVguZXhlYyhhZGp1c3RlZE9jY3VycmVuY2VOb3RlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVidWdMb2coXCJHb3QgVEEgUmVnZXggaW4gT2NjdXJyZW5jZU5vdGVcIiwgSlNPTi5zdHJpbmdpZnkocmVnZXhSZXN1bHRBcnJheSkpO1xuICAgICAgICAgICAgICAgICAgICBsaW5rc0xpc3QucHVzaChyZWdleFJlc3VsdEFycmF5WzFdKVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhSZXN1bHRBcnJheVsxXSA9PT0gc3VwcG9ydFJlZmVyZW5jZSkgZm91bmRTUiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaW5rc0xpc3QubGVuZ3RoICYmIFYgIT09ICdpbnRybycpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRldGFpbHMgPSBzdXBwb3J0UmVmZXJlbmNlID8gYFNSPScke3N1cHBvcnRSZWZlcmVuY2V9J2AgOiBcImVtcHR5IFNSIGZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtzTGlzdC5sZW5ndGggPiAxKSBkZXRhaWxzICs9IGDigJRmb3VuZCAke2xpbmtzTGlzdC5sZW5ndGh9IFRBIGxpbmtzYDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjZXJwdCA9IGxpbmtzTGlzdC5sZW5ndGggPiAxID8gSlNPTi5zdHJpbmdpZnkobGlua3NMaXN0KSA6IGxpbmtzTGlzdFswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kU1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rc0xpc3QubGVuZ3RoID4gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc4NiwgbWVzc2FnZTogXCJTaG91bGRu4oCZdCBoYXZlIG11bHRpcGxlIFRBIGxpbmtzIGluIE9jY3VycmVuY2VOb3RlXCIsIGRldGFpbHMsIHJvd0lELCBmaWVsZE5hbWU6ICdPY2N1cnJlbmNlTm90ZScsIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIC8vIGRpZG4ndCBmaW5kIFNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc4OSwgbWVzc2FnZTogXCJTaG91bGQgaGF2ZSBhIFN1cHBvcnRSZWZlcmVuY2Ugd2hlbiBPY2N1cnJlbmNlTm90ZSBoYXMgYSBUQSBsaW5rXCIsIGRldGFpbHMsIHJvd0lELCBmaWVsZE5hbWU6ICdPY2N1cnJlbmNlTm90ZScsIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSAvLyBUT0RPOiBGaW5kIG91dCBpZiB0aGVzZSBmaWVsZHMgYXJlIHJlYWxseSBjb21wdWxzb3J5IChhbmQgd2hlbiB0aGV5J3JlIG5vdCwgZS5nLiwgZm9yICdpbnRybycpID8/P1xuICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAyNzQsIG1lc3NhZ2U6IFwiTWlzc2luZyBPY2N1cnJlbmNlTm90ZSBmaWVsZFwiLCBmaWVsZE5hbWU6ICdPY2N1cnJlbmNlTm90ZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG5cbiAgICAgICAgLy8gOSBbQiwgQywgViwgcm93SUQsIHN1cHBvcnRSZWZlcmVuY2UsIHF1b3RlLCBvY2N1cnJlbmNlLCBHTFF1b3RlLCBvY2N1cnJlbmNlTm90ZV1cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IGAke0J9XFx0JHtDfVxcdCR7Vn1cXHQke1JJRFN1Z2dlc3Rpb24gPT09IHVuZGVmaW5lZCA/IHJvd0lEIDogUklEU3VnZ2VzdGlvbn1cXHQke1NSU3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gc3VwcG9ydFJlZmVyZW5jZSA6IFNSU3VnZ2VzdGlvbn1cXHQke09RU3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gcXVvdGUgOiBPUVN1Z2dlc3Rpb259XFx0JHtPU3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gb2NjdXJyZW5jZSA6IE9TdWdnZXN0aW9ufVxcdCR7R0xRU3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gR0xRdW90ZSA6IEdMUVN1Z2dlc3Rpb259XFx0JHtPTlN1Z2dlc3Rpb24gPT09IHVuZGVmaW5lZCA/IG9jY3VycmVuY2VOb3RlIDogT05TdWdnZXN0aW9ufWA7XG4gICAgICAgIGlmIChzdWdnZXN0aW9uICE9PSBsaW5lKSB7XG4gICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgSGFkIFROICR7bGluZX1gKTtcbiAgICAgICAgICAgIC8vIGRlYnVnTG9nKGBTdWcgVE4gJHtzdWdnZXN0aW9ufWApO1xuICAgICAgICAgICAgZHJSZXN1bHQuc3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb247XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7IC8vIHdyb25nIG51bWJlciBvZiBmaWVsZHMgaW4gdGhlIHJvd1xuICAgICAgICAvLyBIYXZlIGEgZ28gYXQgZ2V0dGluZyBzb21lIG9mIHRoZSBmaXJzdCBmaWVsZHMgb3V0IG9mIHRoZSByb3dcbiAgICAgICAgbGV0IHJvd0lEID0gJz8/Pz8nO1xuICAgICAgICB0cnkgeyByb3dJRCA9IGZpZWxkc1szXTsgfSBjYXRjaCB7IH1cbiAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5ODQsIG1lc3NhZ2U6IGBGb3VuZCB3cm9uZyBudW1iZXIgb2YgVFNWIGZpZWxkcyAoZXhwZWN0ZWQgJHtOVU1fRVhQRUNURURfVE5fVFNWX0ZJRUxEU30pYCwgZGV0YWlsczogYEZvdW5kICR7ZmllbGRzLmxlbmd0aH0gZmllbGQke2ZpZWxkcy5sZW5ndGggPT09IDEgPyAnJyA6ICdzJ31gLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgIH1cblxuICAgIC8vIGRlYnVnTG9nKGAgIGNoZWNrVE5fVFNWOURhdGFSb3cgcmV0dXJuaW5nIHdpdGggJHtkclJlc3VsdC5ub3RpY2VMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSBub3RpY2UocykuYCk7XG4gICAgLy8gZGVidWdMb2coXCJjaGVja1ROX1RTVjlEYXRhUm93IHJlc3VsdCBpc1wiLCBKU09OLnN0cmluZ2lmeShkclJlc3VsdCkpO1xuICAgIHJldHVybiBkclJlc3VsdDsgLy8gb2JqZWN0IHdpdGggbm90aWNlTGlzdCBhbmQgcG9zc2libHkgc3VnZ2VzdGlvbiBvbmx5XG59XG4vLyBlbmQgb2YgY2hlY2tUTl9UU1Y5RGF0YVJvdyBmdW5jdGlvblxuIl19