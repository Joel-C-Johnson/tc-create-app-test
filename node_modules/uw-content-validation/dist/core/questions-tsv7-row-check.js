"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _typeof = require("@babel/runtime/helpers/typeof");Object.defineProperty(exports, "__esModule", { value: true });exports.checkQuestionsTSV7DataRow = checkQuestionsTSV7DataRow;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _defaults = require("./defaults");
var _textHandlingFunctions = require("./text-handling-functions");
var books = _interopRequireWildcard(require("./books/books"));
var _fieldTextCheck = require("./field-text-check");
var _markdownTextCheck = require("./markdown-text-check");
var _origQuoteCheck = require("./orig-quote-check");

var _utilities = require("./utilities");function _getRequireWildcardCache(nodeInterop) {if (typeof WeakMap !== "function") return null;var cacheBabelInterop = new WeakMap();var cacheNodeInterop = new WeakMap();return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {return nodeInterop ? cacheNodeInterop : cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj, nodeInterop) {if (!nodeInterop && obj && obj.__esModule) {return obj;}if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache(nodeInterop);if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _createForOfIteratorHelper(o, allowArrayLike) {var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];if (!it) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = it.call(o);}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it.return != null) it.return();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) {symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});}keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {(0, _defineProperty2.default)(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}


// const QUESTIONS_TABLE_ROW_VALIDATOR_VERSION_STRING = '0.2.6';

var NUM_EXPECTED_QUESTIONS_TSV_FIELDS = 7; // so expects 6 tabs per line
var EXPECTED_QUESTIONS_HEADING_LINE = 'Reference\tID\tTags\tQuote\tOccurrence\tQuestion\tResponse';

var LC_ALPHABET = 'abcdefghijklmnopqrstuvwxyz';
var LC_ALPHABET_PLUS_DIGITS = 'abcdefghijklmnopqrstuvwxyz0123456789';
var LC_ALPHABET_PLUS_DIGITS_PLUS_HYPHEN = 'abcdefghijklmnopqrstuvwxyz0123456789-';

// const TA_REGEX = new RegExp('\\[\\[rc://[^ /]+?/ta/man/[^ /]+?/([^ \\]]+?)\\]\\]', 'g');


/**
 *
 * @description - Checks one TSV data row of translation notes (TQ2)
 * @param {string} languageCode - the language code, e.g., 'en'
 * @param {string} repoCode - 'TQ2' or 'SQ'
 * @param {string} line - the TSV line to be checked
 * @param {string} bookID - 3-character UPPERCASE USFM book identifier or 'OBS'
 * @param {string} givenC - chapter number or (for OBS) story number string
 * @param {string} givenV - verse number or (for OBS) frame number string
 * @param {string} givenRowLocation - description of where the line is located
 * @param {Object} checkingOptions - may contain excerptLength parameter
 * @return {Object} - containing noticeList
 */function
checkQuestionsTSV7DataRow(_x, _x2, _x3, _x4, _x5, _x6, _x7, _x8) {return _checkQuestionsTSV7DataRow.apply(this, arguments);}
























































































































































































































































































































































































































































































// end of checkQuestionsTSV7DataRow function
function _checkQuestionsTSV7DataRow() {_checkQuestionsTSV7DataRow = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(languageCode, repoCode, line, bookID, givenC, givenV, givenRowLocation, checkingOptions) {var ourRowLocation, linkCheckingOptions, drResult, addNoticePartial, ourMarkdownTextChecks, _ourMarkdownTextChecks, ourCheckTextField, ourCheckQOriginalLanguageQuote, _ourCheckQOriginalLanguageQuote, excerptLength, lowercaseBookID, numChaptersThisBook, haveGoodBookID, fields, RIDSuggestion, OQSuggestion, OSuggestion, QuSuggestion, RSuggestion, _fields, reference, rowID, tags, quote, occurrence, question, response, _reference$split, _reference$split2, C, V, numVersesThisChapter, haveGoodChapterNumber, intC, intV, _V$split, _V$split2, V1, V2, intV1, intV2, intGivenV, tagsList, _iterator2, _step2, thisTag, charCount, _charCount, _charCount2, _charCount3, suggestion, _rowID;return _regenerator.default.wrap(function _callee3$(_context3) {while (1) {switch (_context3.prev = _context3.next) {case 0:_ourCheckQOriginalLanguageQuote = function _ourCheckQOriginalLan2() {_ourCheckQOriginalLanguageQuote = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(rowID, fieldName, fieldText, occurrence, rowLocation, checkingOptions) {var coqResultObject, _iterator4, _step4, noticeEntry;return _regenerator.default.wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:_context2.next = 2;return (0, _origQuoteCheck.checkOriginalLanguageQuoteAndOccurrence)(languageCode, repoCode, fieldName, fieldText, occurrence, bookID, givenC, givenV, rowLocation, checkingOptions);case 2:coqResultObject = _context2.sent; // Choose only ONE of the following
                        // This is the fast way of append the results from this field
                        // result.noticeList = result.noticeList.concat(coqResultObject.noticeList);
                        // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
                        //  process results line by line
                        _iterator4 = _createForOfIteratorHelper(coqResultObject.noticeList);try {for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {noticeEntry = _step4.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourCheckQOriginalLanguageQuote notice length=${Object.keys(noticeEntry).length}`);
                            addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator4.e(err);} finally {_iterator4.f();}case 5:case "end":return _context2.stop();}}}, _callee2);}));return _ourCheckQOriginalLanguageQuote.apply(this, arguments);};ourCheckQOriginalLanguageQuote = function _ourCheckQOriginalLan(_x15, _x16, _x17, _x18, _x19, _x20) {return _ourCheckQOriginalLanguageQuote.apply(this, arguments);};ourCheckTextField = function _ourCheckTextField(rowID, fieldName, fieldText, allowedLinks, rowLocation, checkingOptions) {/**
              * @description - checks the given text field and processes the returned results
              * @param {string} rowID - 4-character row ID field
              * @param {string} fieldName - name of the field being checked
              * @param {string} fieldText - the actual text of the field being checked
              * @param {boolean} allowedLinks - true if links are allowed in the field, otherwise false
              * @param {string} rowLocation - description of where the line is located
              * @param {Object} checkingOptions - parameters that might affect the check
              */ // Does basic checks for small errors like leading/trailing spaces, etc.
              // We assume that checking for compulsory fields is done elsewhere
              // Updates the global list of notices
              // functionLog(`checkQuestionsTSV7DataRow ourCheckTextField(${fieldName}, (${fieldText.length}), ${allowedLinks}, ${rowLocation}, …)`);
              //parameterAssert(rowID !== undefined, "checkQuestionsTSV7DataRow ourCheckTextField: 'rowID' parameter should be defined");
              //parameterAssert(typeof rowID === 'string', `checkQuestionsTSV7DataRow ourCheckTextField: 'rowID' parameter should be a string not a '${typeof rowID}'`);
              //parameterAssert(fieldName !== undefined, "checkQuestionsTSV7DataRow ourCheckTextField: 'fieldName' parameter should be defined");
              //parameterAssert(typeof fieldName === 'string', `checkQuestionsTSV7DataRow ourCheckTextField: 'fieldName' parameter should be a string not a '${typeof fieldName}'`);
              //parameterAssert(fieldText !== undefined, "checkQuestionsTSV7DataRow ourCheckTextField: 'fieldText' parameter should be defined");
              //parameterAssert(typeof fieldText === 'string', `checkQuestionsTSV7DataRow ourCheckTextField: 'fieldText' parameter should be a string not a '${typeof fieldText}'`);
              //parameterAssert(allowedLinks === true || allowedLinks === false, "checkQuestionsTSV7DataRow ourCheckTextField: allowedLinks parameter must be either true or false");
              //parameterAssert(rowLocation !== undefined, "checkQuestionsTSV7DataRow ourCheckTextField: 'rowLocation' parameter should be defined");
              //parameterAssert(typeof rowLocation === 'string', `checkQuestionsTSV7DataRow ourCheckTextField: 'rowLocation' parameter should be a string not a '${typeof rowLocation}'`);
              //parameterAssert(rowLocation.indexOf(fieldName) < 0, `checkQuestionsTSV7DataRow ourCheckTextField: 'rowLocation' parameter should be not contain fieldName=${fieldName}`);
              var fieldType = fieldName === 'Question' ? 'markdown' : 'raw';var octfResultObject = (0, _fieldTextCheck.checkTextField)(languageCode, repoCode, fieldType, fieldName, fieldText, allowedLinks, rowLocation, checkingOptions); // Choose only ONE of the following
              // This is the fast way of append the results from this field
              // result.noticeList = result.noticeList.concat(dbtcResultObject.noticeList);
              // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
              //  process results line by line
              var _iterator = _createForOfIteratorHelper(octfResultObject.noticeList),_step;try {for (_iterator.s(); !(_step = _iterator.n()).done;) {var noticeEntry = _step.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourCheckTextField notice length=${Object.keys(noticeEntry).length}`);
                  addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator.e(err);} finally {_iterator.f();}return octfResultObject.suggestion; // There may or may not be one!
            };_ourMarkdownTextChecks = function _ourMarkdownTextCheck2() {_ourMarkdownTextChecks = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(rowID, fieldName, fieldText, allowedLinks, rowLocation, checkingOptions) {var omtcResultObject, _iterator3, _step3, noticeEntry;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:_context.next = 2;return (0, _markdownTextCheck.checkMarkdownText)(languageCode, repoCode, fieldName, fieldText, rowLocation, checkingOptions);case 2:omtcResultObject = _context.sent; // Choose only ONE of the following
                        // This is the fast way of append the results from this field
                        // result.noticeList = result.noticeList.concat(cmtResultObject.noticeList);
                        // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
                        //  process results line by line
                        _iterator3 = _createForOfIteratorHelper(omtcResultObject.noticeList);try {for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {noticeEntry = _step3.value; // //parameterAssert(Object.keys(noticeEntry).length === 5, `TL ourMarkdownTextChecks notice length=${Object.keys(noticeEntry).length}`);
                            // NOTE: Ellipses in Question and Answer have the normal meaning
                            //          not like the specialised meaning in the Quote snippet fields
                            if (noticeEntry.priority !== 178 && noticeEntry.priority !== 179 // unexpected space after ellipse, ellipse after space
                            && !noticeEntry.message.startsWith("Unexpected … character after space") // 191
                            ) addNoticePartial(_objectSpread(_objectSpread({}, noticeEntry), {}, { rowID: rowID, fieldName: fieldName }));}} catch (err) {_iterator3.e(err);} finally {_iterator3.f();}return _context.abrupt("return", omtcResultObject.suggestion);case 6:case "end":return _context.stop();}}}, _callee);}));return _ourMarkdownTextChecks.apply(this, arguments);};ourMarkdownTextChecks = function _ourMarkdownTextCheck(_x9, _x10, _x11, _x12, _x13, _x14) {return _ourMarkdownTextChecks.apply(this, arguments);};addNoticePartial = function _addNoticePartial(noticeObject) {/**
              * @description - adds a new notice entry, adding bookID,C,V to the given fields
              * @param {Number} priority - notice priority from 1 (lowest) to 999 (highest)
              * @param {string} message - the text of the notice message
              * @param {string} rowID - 4-character row ID field
              * @param {Number} lineNumber - one-based line number
              * @param {Number} characterIndex - zero-based index of where the issue occurs in the line
              * @param {string} excerpt - short excerpt from the line centred on the problem (if available)
              * @param {string} location - description of where the issue is located
              */ // functionLog(`checkQuestionsTSV7DataRow addNoticePartial(priority=${noticeObject.priority}) ${noticeObject.message}, ${noticeObject.characterIndex}, ${noticeObject.excerpt}, ${noticeObject.location}`);
              //parameterAssert(noticeObject.priority !== undefined, "checkQuestionsTSV7DataRow addNoticePartial: 'priority' parameter should be defined");
              //parameterAssert(typeof noticeObject.priority === 'number', `checkQuestionsTSV7DataRow addNoticePartial: 'priority' parameter should be a number not a '${typeof noticeObject.priority}': ${noticeObject.priority}`);
              //parameterAssert(noticeObject.message !== undefined, "checkQuestionsTSV7DataRow addNoticePartial: 'message' parameter should be defined");
              //parameterAssert(typeof noticeObject.message === 'string', `checkQuestionsTSV7DataRow addNoticePartial: 'message' parameter should be a string not a '${typeof noticeObject.message}': ${noticeObject.message}`);
              // //parameterAssert(lineNumber !== undefined, "checkQuestionsTSV7DataRow addNoticePartial: 'lineNumber' parameter should be defined");
              // //parameterAssert(typeof lineNumber === 'number', `checkQuestionsTSV7DataRow addNoticePartial: 'lineNumber' parameter should be a number not a '${typeof lineNumber}': ${lineNumber}`);
              // //parameterAssert(characterIndex !== undefined, "checkQuestionsTSV7DataRow addNoticePartial: 'characterIndex' parameter should be defined");
              if (noticeObject.characterIndex) {//parameterAssert(typeof noticeObject.characterIndex === 'number', `checkQuestionsTSV7DataRow addNoticePartial: 'characterIndex' parameter should be a number not a '${typeof noticeObject.characterIndex}': ${noticeObject.characterIndex}`);
              } // //parameterAssert(excerpt !== undefined, "checkQuestionsTSV7DataRow addNoticePartial: 'excerpt' parameter should be defined");
              if (noticeObject.excerpt) {//parameterAssert(typeof noticeObject.excerpt === 'string', `checkQuestionsTSV7DataRow addNoticePartial: 'excerpt' parameter should be a string not a '${typeof noticeObject.excerpt}': ${noticeObject.excerpt}`);
              } //parameterAssert(noticeObject.location !== undefined, "checkQuestionsTSV7DataRow addNoticePartial: 'location' parameter should be defined");
              //parameterAssert(typeof noticeObject.location === 'string', `checkQuestionsTSV7DataRow addNoticePartial: 'location' parameter should be a string not a '${typeof noticeObject.location}': ${noticeObject.location}`);
              // Also uses the given bookID,C,V, parameters from the main function call
              // noticeObject.debugChain = noticeObject.debugChain ? `checkQuestionsTSV7DataRow ${noticeObject.debugChain}` : `checkQuestionsTSV7DataRow(${repoCode})`;
              drResult.noticeList.push(_objectSpread(_objectSpread({}, noticeObject), {}, { bookID: bookID, C: givenC, V: givenV }));}; /* This function is only for checking one data row
                  and the function doesn’t assume that it has any previous context.
                 TQ2 being translation or study questions.
                 bookID is a three-character UPPERCASE USFM book identifier or 'OBS'
                    so givenC and givenV are usually chapter number and verse number
                        but can be story number and frame number for OBS.
                 It’s designed to be able to quickly show errors for a single row being displayed/edited.
                 Returns an object containing the noticeList.
            */ // functionLog(`checkQuestionsTSV7DataRow(${languageCode}, ${repoCode}, ${line}, ${bookID}, ${givenRowLocation}, ${JSON.stringify(checkingOptions)})…`);
            //parameterAssert(languageCode !== undefined, "checkQuestionsTSV7DataRow: 'languageCode' parameter should be defined");
            //parameterAssert(typeof languageCode === 'string', `checkQuestionsTSV7DataRow: 'languageCode' parameter should be a string not a '${typeof languageCode}'`);
            //parameterAssert(repoCode !== undefined, "checkQuestionsTSV7DataRow: 'repoCode' parameter should be defined");
            //parameterAssert(typeof repoCode === 'string', `checkQuestionsTSV7DataRow: 'repoCode' parameter should be a string not a '${typeof repoCode}'`);
            //parameterAssert(REPO_CODES_LIST.includes(repoCode), `checkQuestionsTSV7DataRow: 'repoCode' parameter should not be '${repoCode}'`);
            //parameterAssert(line !== undefined, "checkQuestionsTSV7DataRow: 'line' parameter should be defined");
            //parameterAssert(typeof line === 'string', `checkQuestionsTSV7DataRow: 'line' parameter should be a string not a '${typeof line}'`);
            //parameterAssert(bookID !== undefined, "checkQuestionsTSV7DataRow: 'bookID' parameter should be defined");
            //parameterAssert(typeof bookID === 'string', `checkQuestionsTSV7DataRow: 'bookID' parameter should be a string not a '${typeof bookID}'`);
            //parameterAssert(bookID.length === 3, `checkQuestionsTSV7DataRow: 'bookID' parameter should be three characters long not ${bookID.length}`);
            //parameterAssert(bookID.toUpperCase() === bookID, `checkQuestionsTSV7DataRow: 'bookID' parameter should be UPPERCASE not '${bookID}'`);
            //parameterAssert(bookID === 'OBS' || books.isValidBookID(bookID), `checkQuestionsTSV7DataRow: '${bookID}' is not a valid USFM book identifier`);
            // //parameterAssert(givenC !== undefined, "checkQuestionsTSV7DataRow: 'givenC' parameter should be defined");
            if (givenC) {//parameterAssert(typeof givenC === 'string', `checkQuestionsTSV7DataRow: 'givenC' parameter should be a string not a '${typeof givenC}'`);
            } // //parameterAssert(givenV !== undefined, "checkQuestionsTSV7DataRow: 'givenV' parameter should be defined");
            if (givenV) {//parameterAssert(typeof givenV === 'string', `checkQuestionsTSV7DataRow: 'givenV' parameter should be a string not a '${typeof givenV}'`);
            } //parameterAssert(givenRowLocation !== undefined, "checkQuestionsTSV7DataRow: 'givenRowLocation' parameter should be defined");
            //parameterAssert(typeof givenRowLocation === 'string', `checkQuestionsTSV7DataRow: 'givenRowLocation' parameter should be a string not a '${typeof givenRowLocation}'`);
            //parameterAssert(givenRowLocation.indexOf('true') === -1, "checkQuestionsTSV7DataRow: 'givenRowLocation' parameter should not be 'true'");
            ourRowLocation = givenRowLocation;if (ourRowLocation && ourRowLocation[0] !== ' ') ourRowLocation = " ".concat(ourRowLocation);linkCheckingOptions = _objectSpread({}, checkingOptions);linkCheckingOptions.taRepoLanguageCode = languageCode;drResult = { noticeList: [] };if (!(line === EXPECTED_QUESTIONS_HEADING_LINE)) {_context3.next = 15;break;}return _context3.abrupt("return", drResult);case 15:try {excerptLength = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.excerptLength;} catch (tlcELerror) {}if (typeof excerptLength !== 'number' || isNaN(excerptLength)) {excerptLength = _defaults.DEFAULT_EXCERPT_LENGTH; // debugLog(`Using default excerptLength=${excerptLength}`);
            } // else
            // debugLog(`Using supplied excerptLength=${excerptLength}`, `cf. default=${DEFAULT_EXCERPT_LENGTH}`);
            // const excerptHalfLength = Math.floor(excerptLength / 2); // rounded down
            // const excerptHalfLengthPlus = Math.floor((excerptLength + 1) / 2); // rounded up
            // debugLog(`Using excerptHalfLength=${excerptHalfLength}`, `excerptHalfLengthPlus=${excerptHalfLengthPlus}`);
            lowercaseBookID = bookID.toLowerCase();if (bookID === 'OBS') numChaptersThisBook = 50; // There's 50 Open Bible Stories
            else {//parameterAssert(lowercaseBookID !== 'obs', "Shouldn’t happen in question-row-check");
                try {numChaptersThisBook = books.chaptersInBook(bookID);} catch (tlcNCerror) {addNoticePartial({ priority: 979, message: "Invalid book identifier passed to checkQuestionsTSV7DataRow", location: " '".concat(bookID, "' in first parameter: ").concat(tlcNCerror) });}}haveGoodBookID = numChaptersThisBook !== undefined;fields = line.split('\t');if (!(fields.length === NUM_EXPECTED_QUESTIONS_TSV_FIELDS)) {_context3.next = 71;break;}_fields = (0, _slicedToArray2.default)(fields, 7), reference = _fields[0], rowID = _fields[1], tags = _fields[2], quote = _fields[3], occurrence = _fields[4], question = _fields[5], response = _fields[6]; // let withString = ` with '${rowID}'${inString}`;
            // let CV_withString = ` ${C}:${V}${withString}`;
            // let atString = ` at ${B} ${C}:${V} (${rowID})${inString}`;
            // Check the fields one-by-one
            _reference$split = reference.split(':'), _reference$split2 = (0, _slicedToArray2.default)(_reference$split, 2), C = _reference$split2[0], V = _reference$split2[1];if (C === undefined || V === undefined) addNoticePartial({ priority: 901, message: "Unexpected reference field", details: "expected C:V", fieldName: 'Reference', rowID: rowID, excerpt: reference, location: ourRowLocation });if (C !== null && C !== void 0 && C.length) {if (C !== givenC) addNoticePartial({ priority: 976, message: "Wrong chapter number", details: "expected '".concat(givenC, "'"), fieldName: 'Reference', rowID: rowID, excerpt: C, location: ourRowLocation });if (C === 'front') {} else if (/^\d+$/.test(C)) {intC = Number(C);if (intC === 0) {addNoticePartial({ priority: 824, message: "Invalid zero chapter number", excerpt: C, rowID: rowID, fieldName: 'Reference', location: ourRowLocation });haveGoodChapterNumber = false;} // TODO: Does this next section need rewriting (see verse check below)???
                else if (intC > numChaptersThisBook) {addNoticePartial({ priority: 823, message: "Invalid large chapter number", excerpt: C, rowID: rowID, fieldName: 'Reference', location: ourRowLocation });haveGoodChapterNumber = false;}if (lowercaseBookID === 'obs') numVersesThisChapter = 99; // Set to maximum expected number of frames
                else {try {numVersesThisChapter = books.versesInChapter(lowercaseBookID, intC);haveGoodChapterNumber = true;} catch (tlcNVerror) {if (!haveGoodBookID) // addNoticePartial({priority:500, "Invalid chapter number", rowLocation);
                        // else
                        addNoticePartial({ priority: 822, message: "Unable to check chapter number", excerpt: C, rowID: rowID, fieldName: 'Reference', location: ourRowLocation });haveGoodChapterNumber = false;}}} else addNoticePartial({ priority: 821, message: "Bad chapter number", excerpt: C, rowID: rowID, fieldName: 'Reference', location: ourRowLocation });} else addNoticePartial({ priority: 820, message: "Missing chapter number", rowID: rowID, fieldName: 'Reference', excerpt: "?:".concat(V), location: ourRowLocation });if (V !== null && V !== void 0 && V.length) {// can be undefined if no colon at split above
              if (V.indexOf('-') === -1) {// Not a verse bridge
                if (V !== givenV) addNoticePartial({ priority: 975, message: "Wrong verse number", details: "expected '".concat(givenV, "'"), rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });if (bookID === 'OBS' || V === 'intro') {} else if (/^\d+$/.test(V)) {intV = Number(V);if (intV === 0 && bookID !== 'PSA') // Psalms have \d as verse zero
                    addNoticePartial({ priority: 814, message: "Invalid zero verse number", rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });else {if (haveGoodChapterNumber) {if (intV > numVersesThisChapter) addNoticePartial({ priority: 813, message: "Invalid large verse number", details: "".concat(bookID, " chapter ").concat(C, " only has ").concat(numVersesThisChapter, " verses"), rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });} else addNoticePartial({ priority: 812, message: "Unable to check verse number", rowID: rowID, fieldName: 'Reference', location: ourRowLocation });}} else addNoticePartial({ priority: 811, message: "Bad verse number", rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });} else {// it's a verse bridge
                if ((0, _textHandlingFunctions.countOccurrences)(V, '-') > 1) addNoticePartial({ priority: 808, message: "Bad verse range", details: "Too many hyphens", rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });_V$split = V.split('-'), _V$split2 = (0, _slicedToArray2.default)(_V$split, 2), V1 = _V$split2[0], V2 = _V$split2[1];if (/^\d+$/.test(V1) && /^\d+$/.test(V2)) {intV1 = Number(V1), intV2 = Number(V2), intGivenV = Number(givenV);if (intGivenV < intV1 || intGivenV > intV2) addNoticePartial({ priority: 975, message: "Wrong verse number", details: "expected '".concat(givenV, "' to be inside range"), rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });else if (intV1 >= intV2) addNoticePartial({ priority: 808, message: "Bad verse range", details: "Second digits should be greater", rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });else if (intV1 === 0 && bookID !== 'PSA') // Psalms have \d as verse zero
                    addNoticePartial({ priority: 814, message: "Invalid zero verse number", rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });else {if (haveGoodChapterNumber) {if (intV2 > numVersesThisChapter) addNoticePartial({ priority: 813, message: "Invalid large verse number", details: "".concat(bookID, " chapter ").concat(C, " only has ").concat(numVersesThisChapter, " verses"), rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });} else addNoticePartial({ priority: 812, message: "Unable to check verse number", rowID: rowID, fieldName: 'Reference', location: ourRowLocation });}} else addNoticePartial({ priority: 808, message: "Bad verse range", details: "Should be digits", rowID: rowID, fieldName: 'Reference', excerpt: V, location: ourRowLocation });}} else addNoticePartial({ priority: 810, message: "Missing verse number", rowID: rowID, fieldName: 'Reference', location: " after ".concat(C, ":?").concat(ourRowLocation) });if (!rowID.length) addNoticePartial({ priority: 931, message: "Missing row ID field", fieldName: 'Reference', location: ourRowLocation });else {if (rowID.length !== 4) {addNoticePartial({ priority: 778, message: "Row ID should be exactly 4 characters", details: "not ".concat(rowID.length), rowID: rowID, fieldName: 'ID', excerpt: rowID, location: ourRowLocation });if (rowID.length > 4) RIDSuggestion = rowID.substring(0, 5);else {// must be < 4
                  RIDSuggestion = rowID;while (RIDSuggestion.length < 4) {RIDSuggestion += LC_ALPHABET_PLUS_DIGITS[Math.floor(Math.random() * LC_ALPHABET_PLUS_DIGITS.length)];};}} else if (LC_ALPHABET.indexOf(rowID[0]) < 0) addNoticePartial({ priority: 176, message: "Row ID should start with a lowercase letter", characterIndex: 0, rowID: rowID, fieldName: 'ID', excerpt: rowID, location: ourRowLocation });else if (LC_ALPHABET_PLUS_DIGITS.indexOf(rowID[3]) < 0) addNoticePartial({ priority: 175, message: "Row ID should end with a lowercase letter or digit", characterIndex: 3, rowID: rowID, fieldName: 'ID', excerpt: rowID, location: ourRowLocation });else if (LC_ALPHABET_PLUS_DIGITS_PLUS_HYPHEN.indexOf(rowID[1]) < 0) addNoticePartial({ priority: 174, message: "Row ID characters should only be lowercase letters, digits, or hypen", fieldName: 'ID', characterIndex: 1, rowID: rowID, excerpt: rowID, location: ourRowLocation });else if (LC_ALPHABET_PLUS_DIGITS_PLUS_HYPHEN.indexOf(rowID[2]) < 0) addNoticePartial({ priority: 173, message: "Row ID characters should only be lowercase letters, digits, or hypen", fieldName: 'ID', characterIndex: 2, rowID: rowID, excerpt: rowID, location: ourRowLocation });}if (tags.length) {tagsList = tags.split('; ');_iterator2 = _createForOfIteratorHelper(tagsList);try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {thisTag = _step2.value; // No tags are yet defined for TQs or SQs
                  // if (thisTag !== 'keyterm' && thisTag !== 'name')
                  addNoticePartial({ priority: 746, message: "Unexpected tag", details: thisTag, excerpt: tags, fieldName: 'Tags', rowID: rowID, location: ourRowLocation });}} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}}if (!quote.length) {_context3.next = 39;break;} // need to check UTN against UHB and UGNT
            OQSuggestion = ourCheckTextField(rowID, 'Quote', quote, false, ourRowLocation, checkingOptions);if (!occurrence.length) {_context3.next = 36;break;}_context3.next = 34;return ourCheckQOriginalLanguageQuote(rowID, 'Quote', quote, occurrence, ourRowLocation, checkingOptions);case 34:_context3.next = 37;break;case 36:addNoticePartial({ priority: 750, message: "Missing occurrence field when we have an original quote", fieldName: 'Occurrence', rowID: rowID, location: ourRowLocation });case 37:_context3.next = 40;break;case 39: // TODO: Find more details about when these fields are really compulsory (and when they're not, e.g., for 'intro') ???
            if (bookID === 'OBS' && V !== 'intro' && occurrence !== '0') addNoticePartial({ priority: 919, message: "Missing Quote field", fieldName: 'Quote', rowID: rowID, location: ourRowLocation });case 40:if (occurrence.length) {// This should usually be a digit
              if (occurrence === '0') {// zero means that it doesn’t occur
                if (quote.length) {addNoticePartial({ priority: 751, message: "Invalid zero occurrence field when we have an original quote", fieldName: 'Occurrence', rowID: rowID, excerpt: occurrence, location: ourRowLocation });OSuggestion = '1';} // if (V !== 'intro')
                //     addNoticePartial({priority:500, message:"Invalid zero occurrence field", rowID, location:rowLocation);
              } else if (occurrence === '-1') {} // TODO check the special conditions when this can occur???
              else if ('12345678'.indexOf(occurrence) < 0) {// it’s not one of these integers
                  addNoticePartial({ priority: 792, message: "Invalid occurrence field", fieldName: 'Occurrence', rowID: rowID, excerpt: occurrence, location: ourRowLocation });OSuggestion = '1';}} else if (quote.length) {addNoticePartial({ priority: 791, message: "Missing occurrence field", fieldName: 'Occurrence', rowID: rowID, location: ourRowLocation });OSuggestion = '1';}if (!question.length) {_context3.next = 53;break;}if (question.indexOf('<br>') >= 0) {charCount = (0, _textHandlingFunctions.countOccurrences)(question, '<br>');addNoticePartial({ priority: 674, message: "Field contains HTML <br> field(s)", details: "".concat(charCount, " occurrence").concat(charCount === 1 ? '' : 's', " found\u2014should be '\\n' instead"), fieldName: 'Question', rowID: rowID, location: ourRowLocation });}if (question.indexOf("\u200B") >= 0) {_charCount = (0, _textHandlingFunctions.countOccurrences)(question, "\u200B");addNoticePartial({ priority: 374, message: "Field contains zero-width space(s)", details: "".concat(_charCount, " occurrence").concat(_charCount === 1 ? '' : 's', " found"), fieldName: 'Question', rowID: rowID, location: ourRowLocation });}if (!(0, _textHandlingFunctions.isWhitespace)(question)) {_context3.next = 48;break;}addNoticePartial({ priority: 373, message: "Field is only whitespace", fieldName: 'Question', rowID: rowID, location: ourRowLocation });_context3.next = 51;break;case 48:_context3.next = 50;return ourMarkdownTextChecks(rowID, 'Question', question, true, ourRowLocation, checkingOptions);case 50:RSuggestion = _context3.sent;case 51:_context3.next = 54;break;case 53: // TODO: Find out if these fields are really compulsory (and when they're not, e.g., for 'intro') ???
            if (repoCode === 'TQ2') addNoticePartial({ priority: 274, message: "Missing Question field", fieldName: 'Question', rowID: rowID, location: ourRowLocation });case 54:if (!response.length) {_context3.next = 66;break;}if (response.indexOf('<br>') >= 0) {_charCount2 = (0, _textHandlingFunctions.countOccurrences)(response, '<br>');addNoticePartial({ priority: 674, message: "Field contains HTML <br> field(s)", details: "".concat(_charCount2, " occurrence").concat(_charCount2 === 1 ? '' : 's', " found\u2014should be '\\n' instead"), fieldName: 'Response', rowID: rowID, location: ourRowLocation });}if (response.indexOf("\u200B") >= 0) {_charCount3 = (0, _textHandlingFunctions.countOccurrences)(response, "\u200B");addNoticePartial({ priority: 374, message: "Field contains zero-width space(s)", details: "".concat(_charCount3, " occurrence").concat(_charCount3 === 1 ? '' : 's', " found"), fieldName: 'Response', rowID: rowID, location: ourRowLocation });}if (!(0, _textHandlingFunctions.isWhitespace)(response)) {_context3.next = 61;break;}addNoticePartial({ priority: 373, message: "Field is only whitespace", fieldName: 'Response', rowID: rowID, location: ourRowLocation });_context3.next = 64;break;case 61:_context3.next = 63;return ourMarkdownTextChecks(rowID, 'Response', response, true, ourRowLocation, checkingOptions);case 63:RSuggestion = _context3.sent;case 64:_context3.next = 67;break;case 66: // TODO: Find out if these fields are really compulsory (and when they're not, e.g., for 'intro') ???
            if (repoCode === 'TQ2') addNoticePartial({ priority: 274, message: "Missing Response field", fieldName: 'Response', rowID: rowID, location: ourRowLocation });case 67: // 7 [reference, rowID, tags, question, answer]
            suggestion = "".concat(reference, "\t").concat(RIDSuggestion === undefined ? rowID : RIDSuggestion, "\t").concat(tags, "\t").concat(OQSuggestion === undefined ? quote : OQSuggestion, "\t").concat(OSuggestion === undefined ? occurrence : OSuggestion, "\t").concat(QuSuggestion === undefined ? question : QuSuggestion, "\t").concat(RSuggestion === undefined ? response : RSuggestion);if (suggestion !== line) {// debugLog(`Had question ${line}`);
              // debugLog(`Sug question ${suggestion}`);
              drResult.suggestion = suggestion;}_context3.next = 74;break;case 71: // wrong number of fields in the row
            // Have a go at getting some of the first fields out of the row
            _rowID = '????';try {_rowID = fields[1];} catch (_unused) {}addNoticePartial({ priority: 984, message: "Found wrong number of TSV fields (expected ".concat(NUM_EXPECTED_QUESTIONS_TSV_FIELDS, ")"), details: "Found ".concat(fields.length, " field").concat(fields.length === 1 ? '' : 's'), rowID: _rowID, location: ourRowLocation });case 74:return _context3.abrupt("return", drResult);case 75:case "end":return _context3.stop();}}}, _callee3);}));return _checkQuestionsTSV7DataRow.apply(this, arguments);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL3F1ZXN0aW9ucy10c3Y3LXJvdy1jaGVjay5qcyJdLCJuYW1lcyI6WyJOVU1fRVhQRUNURURfUVVFU1RJT05TX1RTVl9GSUVMRFMiLCJFWFBFQ1RFRF9RVUVTVElPTlNfSEVBRElOR19MSU5FIiwiTENfQUxQSEFCRVQiLCJMQ19BTFBIQUJFVF9QTFVTX0RJR0lUUyIsIkxDX0FMUEhBQkVUX1BMVVNfRElHSVRTX1BMVVNfSFlQSEVOIiwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyIsImxhbmd1YWdlQ29kZSIsInJlcG9Db2RlIiwibGluZSIsImJvb2tJRCIsImdpdmVuQyIsImdpdmVuViIsImdpdmVuUm93TG9jYXRpb24iLCJjaGVja2luZ09wdGlvbnMiLCJhZGROb3RpY2VQYXJ0aWFsIiwib3VyTWFya2Rvd25UZXh0Q2hlY2tzIiwib3VyQ2hlY2tUZXh0RmllbGQiLCJvdXJDaGVja1FPcmlnaW5hbExhbmd1YWdlUXVvdGUiLCJyb3dJRCIsImZpZWxkTmFtZSIsImZpZWxkVGV4dCIsIm9jY3VycmVuY2UiLCJyb3dMb2NhdGlvbiIsImNvcVJlc3VsdE9iamVjdCIsIm5vdGljZUxpc3QiLCJub3RpY2VFbnRyeSIsImFsbG93ZWRMaW5rcyIsImZpZWxkVHlwZSIsIm9jdGZSZXN1bHRPYmplY3QiLCJzdWdnZXN0aW9uIiwib210Y1Jlc3VsdE9iamVjdCIsInByaW9yaXR5IiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJub3RpY2VPYmplY3QiLCJjaGFyYWN0ZXJJbmRleCIsImV4Y2VycHQiLCJkclJlc3VsdCIsInB1c2giLCJDIiwiViIsIm91clJvd0xvY2F0aW9uIiwibGlua0NoZWNraW5nT3B0aW9ucyIsInRhUmVwb0xhbmd1YWdlQ29kZSIsImV4Y2VycHRMZW5ndGgiLCJ0bGNFTGVycm9yIiwiaXNOYU4iLCJERUZBVUxUX0VYQ0VSUFRfTEVOR1RIIiwibG93ZXJjYXNlQm9va0lEIiwidG9Mb3dlckNhc2UiLCJudW1DaGFwdGVyc1RoaXNCb29rIiwiYm9va3MiLCJjaGFwdGVyc0luQm9vayIsInRsY05DZXJyb3IiLCJsb2NhdGlvbiIsImhhdmVHb29kQm9va0lEIiwidW5kZWZpbmVkIiwiZmllbGRzIiwic3BsaXQiLCJsZW5ndGgiLCJyZWZlcmVuY2UiLCJ0YWdzIiwicXVvdGUiLCJxdWVzdGlvbiIsInJlc3BvbnNlIiwiZGV0YWlscyIsInRlc3QiLCJpbnRDIiwiTnVtYmVyIiwiaGF2ZUdvb2RDaGFwdGVyTnVtYmVyIiwibnVtVmVyc2VzVGhpc0NoYXB0ZXIiLCJ2ZXJzZXNJbkNoYXB0ZXIiLCJ0bGNOVmVycm9yIiwiaW5kZXhPZiIsImludFYiLCJWMSIsIlYyIiwiaW50VjEiLCJpbnRWMiIsImludEdpdmVuViIsIlJJRFN1Z2dlc3Rpb24iLCJzdWJzdHJpbmciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0YWdzTGlzdCIsInRoaXNUYWciLCJPUVN1Z2dlc3Rpb24iLCJPU3VnZ2VzdGlvbiIsImNoYXJDb3VudCIsIlJTdWdnZXN0aW9uIiwiUXVTdWdnZXN0aW9uIl0sIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDOzs7QUFHQTs7QUFFQSxJQUFNQSxpQ0FBaUMsR0FBRyxDQUExQyxDLENBQTZDO0FBQzdDLElBQU1DLCtCQUErQixHQUFHLDREQUF4Qzs7QUFFQSxJQUFNQyxXQUFXLEdBQUcsNEJBQXBCO0FBQ0EsSUFBTUMsdUJBQXVCLEdBQUcsc0NBQWhDO0FBQ0EsSUFBTUMsbUNBQW1DLEdBQUcsdUNBQTVDOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHO0FBQ3NCQyx5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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LElBQW5CLEVBQXlCLENBQ3JCO0FBQ0E7QUFDQTZCLGNBQUFBLFFBQVEsQ0FBQ1IsVUFBVCxHQUFzQkEsVUFBdEIsQ0FDSCxDQTVjRixtQ0E4Y007QUFDTDtBQUNJWCxZQUFBQSxNQWhkTCxHQWdkYSxNQWhkYixDQWlkQyxJQUFJLENBQUVBLE1BQUssR0FBR3VDLE1BQU0sQ0FBQyxDQUFELENBQWQsQ0FBb0IsQ0FBMUIsQ0FBMkIsZ0JBQU0sQ0FBRyxDQUNwQzNDLGdCQUFnQixDQUFDLEVBQUVpQixRQUFRLEVBQUUsR0FBWixFQUFpQkMsT0FBTyx1REFBZ0RoQyxpQ0FBaEQsTUFBeEIsRUFBOEdpRSxPQUFPLGtCQUFXUixNQUFNLENBQUNFLE1BQWxCLG1CQUFpQ0YsTUFBTSxDQUFDRSxNQUFQLEtBQWtCLENBQWxCLEdBQXNCLEVBQXRCLEdBQTJCLEdBQTVELENBQXJILEVBQXdMekMsS0FBSyxFQUFMQSxNQUF4TCxFQUErTG9DLFFBQVEsRUFBRWIsY0FBek0sRUFBRCxDQUFoQixDQWxkRCwwQ0F1ZElKLFFBdmRKLDZEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBERUZBVUxUX0VYQ0VSUFRfTEVOR1RILCBSRVBPX0NPREVTX0xJU1QgfSBmcm9tICcuL2RlZmF1bHRzJ1xuaW1wb3J0IHsgaXNXaGl0ZXNwYWNlLCBjb3VudE9jY3VycmVuY2VzIH0gZnJvbSAnLi90ZXh0LWhhbmRsaW5nLWZ1bmN0aW9ucydcbmltcG9ydCAqIGFzIGJvb2tzIGZyb20gJy4vYm9va3MvYm9va3MnO1xuaW1wb3J0IHsgY2hlY2tUZXh0RmllbGQgfSBmcm9tICcuL2ZpZWxkLXRleHQtY2hlY2snO1xuaW1wb3J0IHsgY2hlY2tNYXJrZG93blRleHQgfSBmcm9tICcuL21hcmtkb3duLXRleHQtY2hlY2snO1xuaW1wb3J0IHsgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlIH0gZnJvbSAnLi9vcmlnLXF1b3RlLWNoZWNrJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHsgZGVidWdMb2csIHBhcmFtZXRlckFzc2VydCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuXG4vLyBjb25zdCBRVUVTVElPTlNfVEFCTEVfUk9XX1ZBTElEQVRPUl9WRVJTSU9OX1NUUklORyA9ICcwLjIuNic7XG5cbmNvbnN0IE5VTV9FWFBFQ1RFRF9RVUVTVElPTlNfVFNWX0ZJRUxEUyA9IDc7IC8vIHNvIGV4cGVjdHMgNiB0YWJzIHBlciBsaW5lXG5jb25zdCBFWFBFQ1RFRF9RVUVTVElPTlNfSEVBRElOR19MSU5FID0gJ1JlZmVyZW5jZVxcdElEXFx0VGFnc1xcdFF1b3RlXFx0T2NjdXJyZW5jZVxcdFF1ZXN0aW9uXFx0UmVzcG9uc2UnO1xuXG5jb25zdCBMQ19BTFBIQUJFVCA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XG5jb25zdCBMQ19BTFBIQUJFVF9QTFVTX0RJR0lUUyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuY29uc3QgTENfQUxQSEFCRVRfUExVU19ESUdJVFNfUExVU19IWVBIRU4gPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LSc7XG5cbi8vIGNvbnN0IFRBX1JFR0VYID0gbmV3IFJlZ0V4cCgnXFxcXFtcXFxcW3JjOi8vW14gL10rPy90YS9tYW4vW14gL10rPy8oW14gXFxcXF1dKz8pXFxcXF1cXFxcXScsICdnJyk7XG5cblxuLyoqXG4gKlxuICogQGRlc2NyaXB0aW9uIC0gQ2hlY2tzIG9uZSBUU1YgZGF0YSByb3cgb2YgdHJhbnNsYXRpb24gbm90ZXMgKFRRMilcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZUNvZGUgLSB0aGUgbGFuZ3VhZ2UgY29kZSwgZS5nLiwgJ2VuJ1xuICogQHBhcmFtIHtzdHJpbmd9IHJlcG9Db2RlIC0gJ1RRMicgb3IgJ1NRJ1xuICogQHBhcmFtIHtzdHJpbmd9IGxpbmUgLSB0aGUgVFNWIGxpbmUgdG8gYmUgY2hlY2tlZFxuICogQHBhcmFtIHtzdHJpbmd9IGJvb2tJRCAtIDMtY2hhcmFjdGVyIFVQUEVSQ0FTRSBVU0ZNIGJvb2sgaWRlbnRpZmllciBvciAnT0JTJ1xuICogQHBhcmFtIHtzdHJpbmd9IGdpdmVuQyAtIGNoYXB0ZXIgbnVtYmVyIG9yIChmb3IgT0JTKSBzdG9yeSBudW1iZXIgc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gZ2l2ZW5WIC0gdmVyc2UgbnVtYmVyIG9yIChmb3IgT0JTKSBmcmFtZSBudW1iZXIgc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gZ2l2ZW5Sb3dMb2NhdGlvbiAtIGRlc2NyaXB0aW9uIG9mIHdoZXJlIHRoZSBsaW5lIGlzIGxvY2F0ZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjaGVja2luZ09wdGlvbnMgLSBtYXkgY29udGFpbiBleGNlcnB0TGVuZ3RoIHBhcmFtZXRlclxuICogQHJldHVybiB7T2JqZWN0fSAtIGNvbnRhaW5pbmcgbm90aWNlTGlzdFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyhsYW5ndWFnZUNvZGUsIHJlcG9Db2RlLCBsaW5lLCBib29rSUQsIGdpdmVuQywgZ2l2ZW5WLCBnaXZlblJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpIHtcbiAgICAvKiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgZm9yIGNoZWNraW5nIG9uZSBkYXRhIHJvd1xuICAgICAgICAgIGFuZCB0aGUgZnVuY3Rpb24gZG9lc27igJl0IGFzc3VtZSB0aGF0IGl0IGhhcyBhbnkgcHJldmlvdXMgY29udGV4dC5cblxuICAgICAgICBUUTIgYmVpbmcgdHJhbnNsYXRpb24gb3Igc3R1ZHkgcXVlc3Rpb25zLlxuXG4gICAgICAgIGJvb2tJRCBpcyBhIHRocmVlLWNoYXJhY3RlciBVUFBFUkNBU0UgVVNGTSBib29rIGlkZW50aWZpZXIgb3IgJ09CUydcbiAgICAgICAgICAgIHNvIGdpdmVuQyBhbmQgZ2l2ZW5WIGFyZSB1c3VhbGx5IGNoYXB0ZXIgbnVtYmVyIGFuZCB2ZXJzZSBudW1iZXJcbiAgICAgICAgICAgICAgICBidXQgY2FuIGJlIHN0b3J5IG51bWJlciBhbmQgZnJhbWUgbnVtYmVyIGZvciBPQlMuXG5cbiAgICAgICAgSXTigJlzIGRlc2lnbmVkIHRvIGJlIGFibGUgdG8gcXVpY2tseSBzaG93IGVycm9ycyBmb3IgYSBzaW5nbGUgcm93IGJlaW5nIGRpc3BsYXllZC9lZGl0ZWQuXG5cbiAgICAgICAgUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbm90aWNlTGlzdC5cbiAgICAqL1xuICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93KCR7bGFuZ3VhZ2VDb2RlfSwgJHtyZXBvQ29kZX0sICR7bGluZX0sICR7Ym9va0lEfSwgJHtnaXZlblJvd0xvY2F0aW9ufSwgJHtKU09OLnN0cmluZ2lmeShjaGVja2luZ09wdGlvbnMpfSnigKZgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChsYW5ndWFnZUNvZGUgIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAnbGFuZ3VhZ2VDb2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGxhbmd1YWdlQ29kZSA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAnbGFuZ3VhZ2VDb2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBsYW5ndWFnZUNvZGV9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHJlcG9Db2RlICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ3JlcG9Db2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJlcG9Db2RlID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3c6ICdyZXBvQ29kZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgcmVwb0NvZGV9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KFJFUE9fQ09ERVNfTElTVC5pbmNsdWRlcyhyZXBvQ29kZSksIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAncmVwb0NvZGUnIHBhcmFtZXRlciBzaG91bGQgbm90IGJlICcke3JlcG9Db2RlfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChsaW5lICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2xpbmUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbGluZSA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAnbGluZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgbGluZX0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va0lEICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBib29rSUQgPT09ICdzdHJpbmcnLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgYm9va0lEfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQubGVuZ3RoID09PSAzLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSB0aHJlZSBjaGFyYWN0ZXJzIGxvbmcgbm90ICR7Ym9va0lELmxlbmd0aH1gKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQudG9VcHBlckNhc2UoKSA9PT0gYm9va0lELCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBVUFBFUkNBU0Ugbm90ICcke2Jvb2tJRH0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va0lEID09PSAnT0JTJyB8fCBib29rcy5pc1ZhbGlkQm9va0lEKGJvb2tJRCksIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAnJHtib29rSUR9JyBpcyBub3QgYSB2YWxpZCBVU0ZNIGJvb2sgaWRlbnRpZmllcmApO1xuICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KGdpdmVuQyAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3c6ICdnaXZlbkMnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICBpZiAoZ2l2ZW5DKSB7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBnaXZlbkMgPT09ICdzdHJpbmcnLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2dpdmVuQycgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZ2l2ZW5DfSdgKTtcbiAgICB9XG4gICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoZ2l2ZW5WICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2dpdmVuVicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIGlmIChnaXZlblYpIHtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGdpdmVuViA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAnZ2l2ZW5WJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBnaXZlblZ9J2ApO1xuICAgIH1cbiAgICAvL3BhcmFtZXRlckFzc2VydChnaXZlblJvd0xvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdzogJ2dpdmVuUm93TG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZ2l2ZW5Sb3dMb2NhdGlvbiA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93OiAnZ2l2ZW5Sb3dMb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZ2l2ZW5Sb3dMb2NhdGlvbn0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoZ2l2ZW5Sb3dMb2NhdGlvbi5pbmRleE9mKCd0cnVlJykgPT09IC0xLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3c6ICdnaXZlblJvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIG5vdCBiZSAndHJ1ZSdcIik7XG5cbiAgICBsZXQgb3VyUm93TG9jYXRpb24gPSBnaXZlblJvd0xvY2F0aW9uO1xuICAgIGlmIChvdXJSb3dMb2NhdGlvbiAmJiBvdXJSb3dMb2NhdGlvblswXSAhPT0gJyAnKSBvdXJSb3dMb2NhdGlvbiA9IGAgJHtvdXJSb3dMb2NhdGlvbn1gO1xuXG4gICAgY29uc3QgbGlua0NoZWNraW5nT3B0aW9ucyA9IHsgLi4uY2hlY2tpbmdPcHRpb25zIH07XG4gICAgbGlua0NoZWNraW5nT3B0aW9ucy50YVJlcG9MYW5ndWFnZUNvZGUgPSBsYW5ndWFnZUNvZGU7XG5cbiAgICBsZXQgZHJSZXN1bHQgPSB7IG5vdGljZUxpc3Q6IFtdIH07XG5cbiAgICBmdW5jdGlvbiBhZGROb3RpY2VQYXJ0aWFsKG5vdGljZU9iamVjdCkge1xuICAgICAgICAvKipcbiAgICAgICAgKiBAZGVzY3JpcHRpb24gLSBhZGRzIGEgbmV3IG5vdGljZSBlbnRyeSwgYWRkaW5nIGJvb2tJRCxDLFYgdG8gdGhlIGdpdmVuIGZpZWxkc1xuICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcmlvcml0eSAtIG5vdGljZSBwcmlvcml0eSBmcm9tIDEgKGxvd2VzdCkgdG8gOTk5IChoaWdoZXN0KVxuICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gdGhlIHRleHQgb2YgdGhlIG5vdGljZSBtZXNzYWdlXG4gICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJvd0lEIC0gNC1jaGFyYWN0ZXIgcm93IElEIGZpZWxkXG4gICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGxpbmVOdW1iZXIgLSBvbmUtYmFzZWQgbGluZSBudW1iZXJcbiAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gY2hhcmFjdGVySW5kZXggLSB6ZXJvLWJhc2VkIGluZGV4IG9mIHdoZXJlIHRoZSBpc3N1ZSBvY2N1cnMgaW4gdGhlIGxpbmVcbiAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhjZXJwdCAtIHNob3J0IGV4Y2VycHQgZnJvbSB0aGUgbGluZSBjZW50cmVkIG9uIHRoZSBwcm9ibGVtIChpZiBhdmFpbGFibGUpXG4gICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIC0gZGVzY3JpcHRpb24gb2Ygd2hlcmUgdGhlIGlzc3VlIGlzIGxvY2F0ZWRcbiAgICAgICAgKi9cbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgYWRkTm90aWNlUGFydGlhbChwcmlvcml0eT0ke25vdGljZU9iamVjdC5wcmlvcml0eX0pICR7bm90aWNlT2JqZWN0Lm1lc3NhZ2V9LCAke25vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleH0sICR7bm90aWNlT2JqZWN0LmV4Y2VycHR9LCAke25vdGljZU9iamVjdC5sb2NhdGlvbn1gKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LnByaW9yaXR5ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAncHJpb3JpdHknIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5wcmlvcml0eSA9PT0gJ251bWJlcicsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdwcmlvcml0eScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIG51bWJlciBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LnByaW9yaXR5fSc6ICR7bm90aWNlT2JqZWN0LnByaW9yaXR5fWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChub3RpY2VPYmplY3QubWVzc2FnZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ21lc3NhZ2UnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5tZXNzYWdlID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ21lc3NhZ2UnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5tZXNzYWdlfSc6ICR7bm90aWNlT2JqZWN0Lm1lc3NhZ2V9YCk7XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KGxpbmVOdW1iZXIgIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdsaW5lTnVtYmVyJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBsaW5lTnVtYmVyID09PSAnbnVtYmVyJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ2xpbmVOdW1iZXInIHBhcmFtZXRlciBzaG91bGQgYmUgYSBudW1iZXIgbm90IGEgJyR7dHlwZW9mIGxpbmVOdW1iZXJ9JzogJHtsaW5lTnVtYmVyfWApO1xuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChjaGFyYWN0ZXJJbmRleCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ2NoYXJhY3RlckluZGV4JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIGlmIChub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXgpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleCA9PT0gJ251bWJlcicsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdjaGFyYWN0ZXJJbmRleCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIG51bWJlciBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4fSc6ICR7bm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4fWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KGV4Y2VycHQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdleGNlcnB0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIGlmIChub3RpY2VPYmplY3QuZXhjZXJwdCkgeyAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LmV4Y2VycHQgPT09ICdzdHJpbmcnLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBhZGROb3RpY2VQYXJ0aWFsOiAnZXhjZXJwdCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LmV4Y2VycHR9JzogJHtub3RpY2VPYmplY3QuZXhjZXJwdH1gKTtcbiAgICAgICAgfVxuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChub3RpY2VPYmplY3QubG9jYXRpb24gIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IGFkZE5vdGljZVBhcnRpYWw6ICdsb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LmxvY2F0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgYWRkTm90aWNlUGFydGlhbDogJ2xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QubG9jYXRpb259JzogJHtub3RpY2VPYmplY3QubG9jYXRpb259YCk7XG5cbiAgICAgICAgLy8gQWxzbyB1c2VzIHRoZSBnaXZlbiBib29rSUQsQyxWLCBwYXJhbWV0ZXJzIGZyb20gdGhlIG1haW4gZnVuY3Rpb24gY2FsbFxuICAgICAgICAvLyBub3RpY2VPYmplY3QuZGVidWdDaGFpbiA9IG5vdGljZU9iamVjdC5kZWJ1Z0NoYWluID8gYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgJHtub3RpY2VPYmplY3QuZGVidWdDaGFpbn1gIDogYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3coJHtyZXBvQ29kZX0pYDtcbiAgICAgICAgZHJSZXN1bHQubm90aWNlTGlzdC5wdXNoKHsgLi4ubm90aWNlT2JqZWN0LCBib29rSUQsIEM6IGdpdmVuQywgVjogZ2l2ZW5WIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIG91ck1hcmtkb3duVGV4dENoZWNrcyhyb3dJRCwgZmllbGROYW1lLCBmaWVsZFRleHQsIGFsbG93ZWRMaW5rcywgcm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgKiBAZGVzY3JpcHRpb24gLSBjaGVja3MgdGhlIGdpdmVuIG1hcmtkb3duIGZpZWxkIGFuZCBwcm9jZXNzZXMgdGhlIHJldHVybmVkIHJlc3VsdHNcbiAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcm93SUQgLSA0LWNoYXJhY3RlciByb3cgSUQgZmllbGRcbiAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lIC0gbmFtZSBvZiB0aGUgZmllbGQgYmVpbmcgY2hlY2tlZFxuICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZFRleHQgLSB0aGUgYWN0dWFsIHRleHQgb2YgdGhlIGZpZWxkIGJlaW5nIGNoZWNrZWRcbiAgICAgICAgKiBAcGFyYW0ge30gYWxsb3dlZExpbmtzIC0gdHJ1ZSBpZiBsaW5rcyBhcmUgYWxsb3dlZCBpbiB0aGUgZmllbGQsIG90aGVyd2lzZSBmYWxzZVxuICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByb3dMb2NhdGlvbiAtIGRlc2NyaXB0aW9uIG9mIHdoZXJlIHRoZSBsaW5lIGlzIGxvY2F0ZWRcbiAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gY2hlY2tpbmdPcHRpb25zIC0gcGFyYW1ldGVycyB0aGF0IG1pZ2h0IGFmZmVjdCB0aGUgY2hlY2tcbiAgICAgICAgKi9cbiAgICAgICAgLy8gRG9lcyBtYXJrZG93biBjaGVja3MgZm9yIHNtYWxsIGVycm9ycyBsaWtlIGxlYWRpbmcvdHJhaWxpbmcgc3BhY2VzLCBldGMuXG5cbiAgICAgICAgLy8gV2UgYXNzdW1lIHRoYXQgY2hlY2tpbmcgZm9yIGNvbXB1bHNvcnkgZmllbGRzIGlzIGRvbmUgZWxzZXdoZXJlXG5cbiAgICAgICAgLy8gVXBkYXRlcyB0aGUgZ2xvYmFsIGxpc3Qgb2Ygbm90aWNlc1xuXG4gICAgICAgIC8vIFdlIGRvbuKAmXQgY3VycmVudGx5IHVzZSB0aGUgYWxsb3dlZExpbmtzIHBhcmFtZXRlclxuXG4gICAgICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrcygke2ZpZWxkTmFtZX0sICgke2ZpZWxkVGV4dC5sZW5ndGh9KSwgJHthbGxvd2VkTGlua3N9LCAke3Jvd0xvY2F0aW9ufSwg4oCmKWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dJRCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAncm93SUQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJvd0lEID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAncm93SUQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIHJvd0lEfSdgKTtcbiAgICAgICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGROYW1lICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJNYXJrZG93blRleHRDaGVja3M6ICdmaWVsZE5hbWUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkTmFtZSA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ2ZpZWxkTmFtZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGROYW1lfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGROYW1lID09PSAnUXVlc3Rpb24nIHx8IGZpZWxkTmFtZSA9PT0gJ1Jlc3BvbnNlJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiBPbmx5IHJ1biB0aGlzIGNoZWNrIG9uIFF1ZXN0aW9ucyBhbmQgUmVzcG9uc2VzIG5vdCAnJHtmaWVsZE5hbWV9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChmaWVsZFRleHQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogJ2ZpZWxkVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZmllbGRUZXh0ID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAnZmllbGRUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBmaWVsZFRleHR9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChhbGxvd2VkTGlua3MgPT09IHRydWUgfHwgYWxsb3dlZExpbmtzID09PSBmYWxzZSwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ck1hcmtkb3duVGV4dENoZWNrczogYWxsb3dlZExpbmtzIHBhcmFtZXRlciBtdXN0IGJlIGVpdGhlciB0cnVlIG9yIGZhbHNlXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dMb2NhdGlvbiAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAncm93TG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJvd0xvY2F0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAncm93TG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIHJvd0xvY2F0aW9ufSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93TG9jYXRpb24uaW5kZXhPZihmaWVsZE5hbWUpIDwgMCwgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyTWFya2Rvd25UZXh0Q2hlY2tzOiAncm93TG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgbm90IGNvbnRhaW4gZmllbGROYW1lPSR7ZmllbGROYW1lfWApO1xuXG4gICAgICAgIGNvbnN0IG9tdGNSZXN1bHRPYmplY3QgPSBhd2FpdCBjaGVja01hcmtkb3duVGV4dChsYW5ndWFnZUNvZGUsIHJlcG9Db2RlLCBmaWVsZE5hbWUsIGZpZWxkVGV4dCwgcm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQ2hvb3NlIG9ubHkgT05FIG9mIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmFzdCB3YXkgb2YgYXBwZW5kIHRoZSByZXN1bHRzIGZyb20gdGhpcyBmaWVsZFxuICAgICAgICAvLyByZXN1bHQubm90aWNlTGlzdCA9IHJlc3VsdC5ub3RpY2VMaXN0LmNvbmNhdChjbXRSZXN1bHRPYmplY3Qubm90aWNlTGlzdCk7XG4gICAgICAgIC8vIElmIHdlIG5lZWQgdG8gcHV0IGV2ZXJ5dGhpbmcgdGhyb3VnaCBhZGROb3RpY2VQYXJ0aWFsLCBlLmcuLCBmb3IgZGVidWdnaW5nIG9yIGZpbHRlcmluZ1xuICAgICAgICAvLyAgcHJvY2VzcyByZXN1bHRzIGxpbmUgYnkgbGluZVxuICAgICAgICBmb3IgKGNvbnN0IG5vdGljZUVudHJ5IG9mIG9tdGNSZXN1bHRPYmplY3Qubm90aWNlTGlzdCkge1xuICAgICAgICAgICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoT2JqZWN0LmtleXMobm90aWNlRW50cnkpLmxlbmd0aCA9PT0gNSwgYFRMIG91ck1hcmtkb3duVGV4dENoZWNrcyBub3RpY2UgbGVuZ3RoPSR7T2JqZWN0LmtleXMobm90aWNlRW50cnkpLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIC8vIE5PVEU6IEVsbGlwc2VzIGluIFF1ZXN0aW9uIGFuZCBBbnN3ZXIgaGF2ZSB0aGUgbm9ybWFsIG1lYW5pbmdcbiAgICAgICAgICAgIC8vICAgICAgICAgIG5vdCBsaWtlIHRoZSBzcGVjaWFsaXNlZCBtZWFuaW5nIGluIHRoZSBRdW90ZSBzbmlwcGV0IGZpZWxkc1xuICAgICAgICAgICAgaWYgKG5vdGljZUVudHJ5LnByaW9yaXR5ICE9PSAxNzggJiYgbm90aWNlRW50cnkucHJpb3JpdHkgIT09IDE3OSAvLyB1bmV4cGVjdGVkIHNwYWNlIGFmdGVyIGVsbGlwc2UsIGVsbGlwc2UgYWZ0ZXIgc3BhY2VcbiAgICAgICAgICAgICAgICAmJiAhbm90aWNlRW50cnkubWVzc2FnZS5zdGFydHNXaXRoKFwiVW5leHBlY3RlZCDigKYgY2hhcmFjdGVyIGFmdGVyIHNwYWNlXCIpIC8vIDE5MVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyAuLi5ub3RpY2VFbnRyeSwgcm93SUQsIGZpZWxkTmFtZSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb210Y1Jlc3VsdE9iamVjdC5zdWdnZXN0aW9uOyAvLyBUaGVyZSBtYXkgb3IgbWF5IG5vdCBiZSBvbmUhXG4gICAgfVxuICAgIC8vIGVuZCBvZiBvdXJNYXJrZG93blRleHRDaGVja3MgZnVuY3Rpb25cblxuICAgIGZ1bmN0aW9uIG91ckNoZWNrVGV4dEZpZWxkKHJvd0lELCBmaWVsZE5hbWUsIGZpZWxkVGV4dCwgYWxsb3dlZExpbmtzLCByb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAqIEBkZXNjcmlwdGlvbiAtIGNoZWNrcyB0aGUgZ2l2ZW4gdGV4dCBmaWVsZCBhbmQgcHJvY2Vzc2VzIHRoZSByZXR1cm5lZCByZXN1bHRzXG4gICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJvd0lEIC0gNC1jaGFyYWN0ZXIgcm93IElEIGZpZWxkXG4gICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIG5hbWUgb2YgdGhlIGZpZWxkIGJlaW5nIGNoZWNrZWRcbiAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGRUZXh0IC0gdGhlIGFjdHVhbCB0ZXh0IG9mIHRoZSBmaWVsZCBiZWluZyBjaGVja2VkXG4gICAgICAgICogQHBhcmFtIHtib29sZWFufSBhbGxvd2VkTGlua3MgLSB0cnVlIGlmIGxpbmtzIGFyZSBhbGxvd2VkIGluIHRoZSBmaWVsZCwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJvd0xvY2F0aW9uIC0gZGVzY3JpcHRpb24gb2Ygd2hlcmUgdGhlIGxpbmUgaXMgbG9jYXRlZFxuICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjaGVja2luZ09wdGlvbnMgLSBwYXJhbWV0ZXJzIHRoYXQgbWlnaHQgYWZmZWN0IHRoZSBjaGVja1xuICAgICAgICAqL1xuICAgICAgICAvLyBEb2VzIGJhc2ljIGNoZWNrcyBmb3Igc21hbGwgZXJyb3JzIGxpa2UgbGVhZGluZy90cmFpbGluZyBzcGFjZXMsIGV0Yy5cblxuICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCBjaGVja2luZyBmb3IgY29tcHVsc29yeSBmaWVsZHMgaXMgZG9uZSBlbHNld2hlcmVcblxuICAgICAgICAvLyBVcGRhdGVzIHRoZSBnbG9iYWwgbGlzdCBvZiBub3RpY2VzXG5cbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQoJHtmaWVsZE5hbWV9LCAoJHtmaWVsZFRleHQubGVuZ3RofSksICR7YWxsb3dlZExpbmtzfSwgJHtyb3dMb2NhdGlvbn0sIOKApilgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93SUQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ckNoZWNrVGV4dEZpZWxkOiAncm93SUQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJvd0lEID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6ICdyb3dJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygcm93SUR9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChmaWVsZE5hbWUgIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ckNoZWNrVGV4dEZpZWxkOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBmaWVsZE5hbWUgPT09ICdzdHJpbmcnLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogJ2ZpZWxkTmFtZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGROYW1lfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGRUZXh0ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogJ2ZpZWxkVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZmllbGRUZXh0ID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6ICdmaWVsZFRleHQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGZpZWxkVGV4dH0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGFsbG93ZWRMaW5rcyA9PT0gdHJ1ZSB8fCBhbGxvd2VkTGlua3MgPT09IGZhbHNlLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6IGFsbG93ZWRMaW5rcyBwYXJhbWV0ZXIgbXVzdCBiZSBlaXRoZXIgdHJ1ZSBvciBmYWxzZVwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocm93TG9jYXRpb24gIT09IHVuZGVmaW5lZCwgXCJjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ckNoZWNrVGV4dEZpZWxkOiAncm93TG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJvd0xvY2F0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tUZXh0RmllbGQ6ICdyb3dMb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygcm93TG9jYXRpb259J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dMb2NhdGlvbi5pbmRleE9mKGZpZWxkTmFtZSkgPCAwLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJDaGVja1RleHRGaWVsZDogJ3Jvd0xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIG5vdCBjb250YWluIGZpZWxkTmFtZT0ke2ZpZWxkTmFtZX1gKTtcblxuICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSBmaWVsZE5hbWUgPT09ICdRdWVzdGlvbicgPyAnbWFya2Rvd24nIDogJ3Jhdyc7XG4gICAgICAgIGNvbnN0IG9jdGZSZXN1bHRPYmplY3QgPSBjaGVja1RleHRGaWVsZChsYW5ndWFnZUNvZGUsIHJlcG9Db2RlLCBmaWVsZFR5cGUsIGZpZWxkTmFtZSwgZmllbGRUZXh0LCBhbGxvd2VkTGlua3MsIHJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpO1xuXG4gICAgICAgIC8vIENob29zZSBvbmx5IE9ORSBvZiB0aGUgZm9sbG93aW5nXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGZhc3Qgd2F5IG9mIGFwcGVuZCB0aGUgcmVzdWx0cyBmcm9tIHRoaXMgZmllbGRcbiAgICAgICAgLy8gcmVzdWx0Lm5vdGljZUxpc3QgPSByZXN1bHQubm90aWNlTGlzdC5jb25jYXQoZGJ0Y1Jlc3VsdE9iamVjdC5ub3RpY2VMaXN0KTtcbiAgICAgICAgLy8gSWYgd2UgbmVlZCB0byBwdXQgZXZlcnl0aGluZyB0aHJvdWdoIGFkZE5vdGljZVBhcnRpYWwsIGUuZy4sIGZvciBkZWJ1Z2dpbmcgb3IgZmlsdGVyaW5nXG4gICAgICAgIC8vICBwcm9jZXNzIHJlc3VsdHMgbGluZSBieSBsaW5lXG4gICAgICAgIGZvciAoY29uc3Qgbm90aWNlRW50cnkgb2Ygb2N0ZlJlc3VsdE9iamVjdC5ub3RpY2VMaXN0KSB7XG4gICAgICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChPYmplY3Qua2V5cyhub3RpY2VFbnRyeSkubGVuZ3RoID09PSA1LCBgVEwgb3VyQ2hlY2tUZXh0RmllbGQgbm90aWNlIGxlbmd0aD0ke09iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGh9YCk7XG4gICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgLi4ubm90aWNlRW50cnksIHJvd0lELCBmaWVsZE5hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9jdGZSZXN1bHRPYmplY3Quc3VnZ2VzdGlvbjsgLy8gVGhlcmUgbWF5IG9yIG1heSBub3QgYmUgb25lIVxuICAgIH1cbiAgICAvLyBlbmQgb2Ygb3VyQ2hlY2tUZXh0RmllbGQgZnVuY3Rpb25cblxuXG4gICAgYXN5bmMgZnVuY3Rpb24gb3VyQ2hlY2tRT3JpZ2luYWxMYW5ndWFnZVF1b3RlKHJvd0lELCBmaWVsZE5hbWUsIGZpZWxkVGV4dCwgb2NjdXJyZW5jZSwgcm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucykge1xuICAgICAgICAvLyBDaGVja3MgdGhhdCB0aGUgSGVicmV3L0dyZWVrIHF1b3RlIGNhbiBiZSBmb3VuZCBpbiB0aGUgb3JpZ2luYWwgdGV4dHNcblxuICAgICAgICAvLyBVc2VzIHRoZSBib29rSUQsQyxWIHZhbHVlcyBmcm9tIHRoZSBtYWluIGZ1bmN0aW9uIGNhbGxcblxuICAgICAgICAvLyBVcGRhdGVzIHRoZSBnbG9iYWwgbGlzdCBvZiBub3RpY2VzXG5cbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tRT3JpZ2luYWxMYW5ndWFnZVF1b3RlKCR7ZmllbGROYW1lfSwgKCR7ZmllbGRUZXh0Lmxlbmd0aH0pICcke2ZpZWxkVGV4dH0nLCAke3Jvd0xvY2F0aW9ufSwg4oCmKWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dJRCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tRT3JpZ2luYWxMYW5ndWFnZVF1b3RlOiAncm93SUQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJvd0lEID09PSAnc3RyaW5nJywgYGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tRT3JpZ2luYWxMYW5ndWFnZVF1b3RlOiAncm93SUQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIHJvd0lEfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGROYW1lICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJDaGVja1FPcmlnaW5hbExhbmd1YWdlUXVvdGU6ICdmaWVsZE5hbWUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkTmFtZSA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ckNoZWNrUU9yaWdpbmFsTGFuZ3VhZ2VRdW90ZTogJ2ZpZWxkTmFtZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGROYW1lfSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGRUZXh0ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJDaGVja1FPcmlnaW5hbExhbmd1YWdlUXVvdGU6ICdmaWVsZFRleHQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkVGV4dCA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ckNoZWNrUU9yaWdpbmFsTGFuZ3VhZ2VRdW90ZTogJ2ZpZWxkVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZmllbGRUZXh0fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQob2NjdXJyZW5jZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgb3VyQ2hlY2tRT3JpZ2luYWxMYW5ndWFnZVF1b3RlOiAnb2NjdXJyZW5jZScgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygb2NjdXJyZW5jZSA9PT0gJ3N0cmluZycsIGBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IG91ckNoZWNrUU9yaWdpbmFsTGFuZ3VhZ2VRdW90ZTogJ29jY3VycmVuY2UnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG9jY3VycmVuY2V9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChyb3dMb2NhdGlvbi5pbmRleE9mKGZpZWxkTmFtZSkgPCAwLCBgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyBvdXJDaGVja1FPcmlnaW5hbExhbmd1YWdlUXVvdGU6ICdyb3dMb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBub3QgY29udGFpbiBmaWVsZE5hbWU9JHtmaWVsZE5hbWV9YCk7XG5cbiAgICAgICAgY29uc3QgY29xUmVzdWx0T2JqZWN0ID0gYXdhaXQgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlKGxhbmd1YWdlQ29kZSwgcmVwb0NvZGUsIGZpZWxkTmFtZSwgZmllbGRUZXh0LCBvY2N1cnJlbmNlLCBib29rSUQsIGdpdmVuQywgZ2l2ZW5WLCByb3dMb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKTtcblxuICAgICAgICAvLyBDaG9vc2Ugb25seSBPTkUgb2YgdGhlIGZvbGxvd2luZ1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmYXN0IHdheSBvZiBhcHBlbmQgdGhlIHJlc3VsdHMgZnJvbSB0aGlzIGZpZWxkXG4gICAgICAgIC8vIHJlc3VsdC5ub3RpY2VMaXN0ID0gcmVzdWx0Lm5vdGljZUxpc3QuY29uY2F0KGNvcVJlc3VsdE9iamVjdC5ub3RpY2VMaXN0KTtcbiAgICAgICAgLy8gSWYgd2UgbmVlZCB0byBwdXQgZXZlcnl0aGluZyB0aHJvdWdoIGFkZE5vdGljZVBhcnRpYWwsIGUuZy4sIGZvciBkZWJ1Z2dpbmcgb3IgZmlsdGVyaW5nXG4gICAgICAgIC8vICBwcm9jZXNzIHJlc3VsdHMgbGluZSBieSBsaW5lXG4gICAgICAgIGZvciAoY29uc3Qgbm90aWNlRW50cnkgb2YgY29xUmVzdWx0T2JqZWN0Lm5vdGljZUxpc3QpIHtcbiAgICAgICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KE9iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGggPT09IDUsIGBUTCBvdXJDaGVja1FPcmlnaW5hbExhbmd1YWdlUXVvdGUgbm90aWNlIGxlbmd0aD0ke09iamVjdC5rZXlzKG5vdGljZUVudHJ5KS5sZW5ndGh9YCk7XG4gICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgLi4ubm90aWNlRW50cnksIHJvd0lELCBmaWVsZE5hbWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5kIG9mIG91ckNoZWNrUU9yaWdpbmFsTGFuZ3VhZ2VRdW90ZSBmdW5jdGlvblxuXG5cbiAgICAvLyBNYWluIGNvZGUgZm9yIGNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgZnVuY3Rpb25cbiAgICBpZiAobGluZSA9PT0gRVhQRUNURURfUVVFU1RJT05TX0hFQURJTkdfTElORSkgLy8gQXNzdW1lIGl0IG11c3QgYmUgb2tcbiAgICAgICAgcmV0dXJuIGRyUmVzdWx0OyAvLyBXZSBjYW7igJl0IGRldGVjdCBpZiBpdOKAmXMgaW4gdGhlIHdyb25nIHBsYWNlXG5cbiAgICBsZXQgZXhjZXJwdExlbmd0aDtcbiAgICB0cnkge1xuICAgICAgICBleGNlcnB0TGVuZ3RoID0gY2hlY2tpbmdPcHRpb25zPy5leGNlcnB0TGVuZ3RoO1xuICAgIH0gY2F0Y2ggKHRsY0VMZXJyb3IpIHsgfVxuICAgIGlmICh0eXBlb2YgZXhjZXJwdExlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNOYU4oZXhjZXJwdExlbmd0aCkpIHtcbiAgICAgICAgZXhjZXJwdExlbmd0aCA9IERFRkFVTFRfRVhDRVJQVF9MRU5HVEg7XG4gICAgICAgIC8vIGRlYnVnTG9nKGBVc2luZyBkZWZhdWx0IGV4Y2VycHRMZW5ndGg9JHtleGNlcnB0TGVuZ3RofWApO1xuICAgIH1cbiAgICAvLyBlbHNlXG4gICAgLy8gZGVidWdMb2coYFVzaW5nIHN1cHBsaWVkIGV4Y2VycHRMZW5ndGg9JHtleGNlcnB0TGVuZ3RofWAsIGBjZi4gZGVmYXVsdD0ke0RFRkFVTFRfRVhDRVJQVF9MRU5HVEh9YCk7XG4gICAgLy8gY29uc3QgZXhjZXJwdEhhbGZMZW5ndGggPSBNYXRoLmZsb29yKGV4Y2VycHRMZW5ndGggLyAyKTsgLy8gcm91bmRlZCBkb3duXG4gICAgLy8gY29uc3QgZXhjZXJwdEhhbGZMZW5ndGhQbHVzID0gTWF0aC5mbG9vcigoZXhjZXJwdExlbmd0aCArIDEpIC8gMik7IC8vIHJvdW5kZWQgdXBcbiAgICAvLyBkZWJ1Z0xvZyhgVXNpbmcgZXhjZXJwdEhhbGZMZW5ndGg9JHtleGNlcnB0SGFsZkxlbmd0aH1gLCBgZXhjZXJwdEhhbGZMZW5ndGhQbHVzPSR7ZXhjZXJwdEhhbGZMZW5ndGhQbHVzfWApO1xuXG4gICAgY29uc3QgbG93ZXJjYXNlQm9va0lEID0gYm9va0lELnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IG51bUNoYXB0ZXJzVGhpc0Jvb2s7XG4gICAgaWYgKGJvb2tJRCA9PT0gJ09CUycpXG4gICAgICAgIG51bUNoYXB0ZXJzVGhpc0Jvb2sgPSA1MDsgLy8gVGhlcmUncyA1MCBPcGVuIEJpYmxlIFN0b3JpZXNcbiAgICBlbHNlIHtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobG93ZXJjYXNlQm9va0lEICE9PSAnb2JzJywgXCJTaG91bGRu4oCZdCBoYXBwZW4gaW4gcXVlc3Rpb24tcm93LWNoZWNrXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbnVtQ2hhcHRlcnNUaGlzQm9vayA9IGJvb2tzLmNoYXB0ZXJzSW5Cb29rKGJvb2tJRCk7XG4gICAgICAgIH0gY2F0Y2ggKHRsY05DZXJyb3IpIHtcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTc5LCBtZXNzYWdlOiBcIkludmFsaWQgYm9vayBpZGVudGlmaWVyIHBhc3NlZCB0byBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93XCIsIGxvY2F0aW9uOiBgICcke2Jvb2tJRH0nIGluIGZpcnN0IHBhcmFtZXRlcjogJHt0bGNOQ2Vycm9yfWAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGF2ZUdvb2RCb29rSUQgPSBudW1DaGFwdGVyc1RoaXNCb29rICE9PSB1bmRlZmluZWQ7XG5cbiAgICBsZXQgZmllbGRzID0gbGluZS5zcGxpdCgnXFx0Jyk7XG4gICAgbGV0IFJJRFN1Z2dlc3Rpb24sIE9RU3VnZ2VzdGlvbiwgT1N1Z2dlc3Rpb24sIFF1U3VnZ2VzdGlvbiwgUlN1Z2dlc3Rpb247XG4gICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IE5VTV9FWFBFQ1RFRF9RVUVTVElPTlNfVFNWX0ZJRUxEUykge1xuICAgICAgICBjb25zdCBbcmVmZXJlbmNlLCByb3dJRCwgdGFncywgcXVvdGUsIG9jY3VycmVuY2UsIHF1ZXN0aW9uLCByZXNwb25zZV0gPSBmaWVsZHM7XG4gICAgICAgIC8vIGxldCB3aXRoU3RyaW5nID0gYCB3aXRoICcke3Jvd0lEfScke2luU3RyaW5nfWA7XG4gICAgICAgIC8vIGxldCBDVl93aXRoU3RyaW5nID0gYCAke0N9OiR7Vn0ke3dpdGhTdHJpbmd9YDtcbiAgICAgICAgLy8gbGV0IGF0U3RyaW5nID0gYCBhdCAke0J9ICR7Q306JHtWfSAoJHtyb3dJRH0pJHtpblN0cmluZ31gO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBmaWVsZHMgb25lLWJ5LW9uZVxuICAgICAgICBjb25zdCBbQywgVl0gPSByZWZlcmVuY2Uuc3BsaXQoJzonKTtcbiAgICAgICAgaWYgKEMgPT09IHVuZGVmaW5lZCB8fCBWID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDkwMSwgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHJlZmVyZW5jZSBmaWVsZFwiLCBkZXRhaWxzOiBcImV4cGVjdGVkIEM6VlwiLCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCByb3dJRCwgZXhjZXJwdDogcmVmZXJlbmNlLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG5cbiAgICAgICAgbGV0IG51bVZlcnNlc1RoaXNDaGFwdGVyLCBoYXZlR29vZENoYXB0ZXJOdW1iZXI7XG4gICAgICAgIGlmIChDPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChDICE9PSBnaXZlbkMpXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5NzYsIG1lc3NhZ2U6IFwiV3JvbmcgY2hhcHRlciBudW1iZXJcIiwgZGV0YWlsczogYGV4cGVjdGVkICcke2dpdmVuQ30nYCwgZmllbGROYW1lOiAnUmVmZXJlbmNlJywgcm93SUQsIGV4Y2VycHQ6IEMsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgIGlmIChDID09PSAnZnJvbnQnKSB7IH1cbiAgICAgICAgICAgIGVsc2UgaWYgKC9eXFxkKyQvLnRlc3QoQykpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW50QyA9IE51bWJlcihDKTtcbiAgICAgICAgICAgICAgICBpZiAoaW50QyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgyNCwgbWVzc2FnZTogYEludmFsaWQgemVybyBjaGFwdGVyIG51bWJlcmAsIGV4Y2VycHQ6IEMsIHJvd0lELCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIGhhdmVHb29kQ2hhcHRlck51bWJlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBEb2VzIHRoaXMgbmV4dCBzZWN0aW9uIG5lZWQgcmV3cml0aW5nIChzZWUgdmVyc2UgY2hlY2sgYmVsb3cpPz8/XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW50QyA+IG51bUNoYXB0ZXJzVGhpc0Jvb2spIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MjMsIG1lc3NhZ2U6IGBJbnZhbGlkIGxhcmdlIGNoYXB0ZXIgbnVtYmVyYCwgZXhjZXJwdDogQywgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgaGF2ZUdvb2RDaGFwdGVyTnVtYmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsb3dlcmNhc2VCb29rSUQgPT09ICdvYnMnKVxuICAgICAgICAgICAgICAgICAgICBudW1WZXJzZXNUaGlzQ2hhcHRlciA9IDk5OyAvLyBTZXQgdG8gbWF4aW11bSBleHBlY3RlZCBudW1iZXIgb2YgZnJhbWVzXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1WZXJzZXNUaGlzQ2hhcHRlciA9IGJvb2tzLnZlcnNlc0luQ2hhcHRlcihsb3dlcmNhc2VCb29rSUQsIGludEMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGF2ZUdvb2RDaGFwdGVyTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodGxjTlZlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXZlR29vZEJvb2tJRClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGROb3RpY2VQYXJ0aWFsKHtwcmlvcml0eTo1MDAsIFwiSW52YWxpZCBjaGFwdGVyIG51bWJlclwiLCByb3dMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODIyLCBtZXNzYWdlOiBcIlVuYWJsZSB0byBjaGVjayBjaGFwdGVyIG51bWJlclwiLCBleGNlcnB0OiBDLCByb3dJRCwgZmllbGROYW1lOiAnUmVmZXJlbmNlJywgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGF2ZUdvb2RDaGFwdGVyTnVtYmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MjEsIG1lc3NhZ2U6IFwiQmFkIGNoYXB0ZXIgbnVtYmVyXCIsIGV4Y2VycHQ6IEMsIHJvd0lELCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MjAsIG1lc3NhZ2U6IFwiTWlzc2luZyBjaGFwdGVyIG51bWJlclwiLCByb3dJRCwgZmllbGROYW1lOiAnUmVmZXJlbmNlJywgZXhjZXJwdDogYD86JHtWfWAsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcblxuICAgICAgICBpZiAoVj8ubGVuZ3RoKSB7IC8vIGNhbiBiZSB1bmRlZmluZWQgaWYgbm8gY29sb24gYXQgc3BsaXQgYWJvdmVcbiAgICAgICAgICAgIGlmIChWLmluZGV4T2YoJy0nKSA9PT0gLTEpIHsgLy8gTm90IGEgdmVyc2UgYnJpZGdlXG4gICAgICAgICAgICAgICAgaWYgKFYgIT09IGdpdmVuVilcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5NzUsIG1lc3NhZ2U6IFwiV3JvbmcgdmVyc2UgbnVtYmVyXCIsIGRldGFpbHM6IGBleHBlY3RlZCAnJHtnaXZlblZ9J2AsIHJvd0lELCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgaWYgKGJvb2tJRCA9PT0gJ09CUycgfHwgViA9PT0gJ2ludHJvJykgeyB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoL15cXGQrJC8udGVzdChWKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW50ViA9IE51bWJlcihWKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludFYgPT09IDAgJiYgYm9va0lEICE9PSAnUFNBJykgLy8gUHNhbG1zIGhhdmUgXFxkIGFzIHZlcnNlIHplcm9cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODE0LCBtZXNzYWdlOiBcIkludmFsaWQgemVybyB2ZXJzZSBudW1iZXJcIiwgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGV4Y2VycHQ6IFYsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGF2ZUdvb2RDaGFwdGVyTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludFYgPiBudW1WZXJzZXNUaGlzQ2hhcHRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MTMsIG1lc3NhZ2U6IFwiSW52YWxpZCBsYXJnZSB2ZXJzZSBudW1iZXJcIiwgZGV0YWlsczogYCR7Ym9va0lEfSBjaGFwdGVyICR7Q30gb25seSBoYXMgJHtudW1WZXJzZXNUaGlzQ2hhcHRlcn0gdmVyc2VzYCwgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGV4Y2VycHQ6IFYsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODEyLCBtZXNzYWdlOiBcIlVuYWJsZSB0byBjaGVjayB2ZXJzZSBudW1iZXJcIiwgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODExLCBtZXNzYWdlOiBcIkJhZCB2ZXJzZSBudW1iZXJcIiwgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGV4Y2VycHQ6IFYsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGl0J3MgYSB2ZXJzZSBicmlkZ2VcbiAgICAgICAgICAgICAgICBpZiAoY291bnRPY2N1cnJlbmNlcyhWLCAnLScpID4gMSlcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MDgsIG1lc3NhZ2U6IFwiQmFkIHZlcnNlIHJhbmdlXCIsIGRldGFpbHM6IFwiVG9vIG1hbnkgaHlwaGVuc1wiLCByb3dJRCwgZmllbGROYW1lOiAnUmVmZXJlbmNlJywgZXhjZXJwdDogViwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IFtWMSwgVjJdID0gVi5zcGxpdCgnLScpO1xuICAgICAgICAgICAgICAgIGlmICgvXlxcZCskLy50ZXN0KFYxKSAmJiAvXlxcZCskLy50ZXN0KFYyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRWMSA9IE51bWJlcihWMSksIGludFYyID0gTnVtYmVyKFYyKSwgaW50R2l2ZW5WID0gTnVtYmVyKGdpdmVuVik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRHaXZlblYgPCBpbnRWMSB8fCBpbnRHaXZlblYgPiBpbnRWMilcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTc1LCBtZXNzYWdlOiBcIldyb25nIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgZXhwZWN0ZWQgJyR7Z2l2ZW5WfScgdG8gYmUgaW5zaWRlIHJhbmdlYCwgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGV4Y2VycHQ6IFYsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW50VjEgPj0gaW50VjIpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgwOCwgbWVzc2FnZTogXCJCYWQgdmVyc2UgcmFuZ2VcIiwgZGV0YWlsczogXCJTZWNvbmQgZGlnaXRzIHNob3VsZCBiZSBncmVhdGVyXCIsIHJvd0lELCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGludFYxID09PSAwICYmIGJvb2tJRCAhPT0gJ1BTQScpIC8vIFBzYWxtcyBoYXZlIFxcZCBhcyB2ZXJzZSB6ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgxNCwgbWVzc2FnZTogXCJJbnZhbGlkIHplcm8gdmVyc2UgbnVtYmVyXCIsIHJvd0lELCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhdmVHb29kQ2hhcHRlck51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRWMiA+IG51bVZlcnNlc1RoaXNDaGFwdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgxMywgbWVzc2FnZTogXCJJbnZhbGlkIGxhcmdlIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgJHtib29rSUR9IGNoYXB0ZXIgJHtDfSBvbmx5IGhhcyAke251bVZlcnNlc1RoaXNDaGFwdGVyfSB2ZXJzZXNgLCByb3dJRCwgZmllbGROYW1lOiAnUmVmZXJlbmNlJywgZXhjZXJwdDogViwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MTIsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGNoZWNrIHZlcnNlIG51bWJlclwiLCByb3dJRCwgZmllbGROYW1lOiAnUmVmZXJlbmNlJywgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODA4LCBtZXNzYWdlOiBcIkJhZCB2ZXJzZSByYW5nZVwiLCBkZXRhaWxzOiBcIlNob3VsZCBiZSBkaWdpdHNcIiwgcm93SUQsIGZpZWxkTmFtZTogJ1JlZmVyZW5jZScsIGV4Y2VycHQ6IFYsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODEwLCBtZXNzYWdlOiBcIk1pc3NpbmcgdmVyc2UgbnVtYmVyXCIsIHJvd0lELCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBsb2NhdGlvbjogYCBhZnRlciAke0N9Oj8ke291clJvd0xvY2F0aW9ufWAgfSk7XG5cbiAgICAgICAgaWYgKCFyb3dJRC5sZW5ndGgpXG4gICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDkzMSwgbWVzc2FnZTogXCJNaXNzaW5nIHJvdyBJRCBmaWVsZFwiLCBmaWVsZE5hbWU6ICdSZWZlcmVuY2UnLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJvd0lELmxlbmd0aCAhPT0gNCkge1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzc4LCBtZXNzYWdlOiBcIlJvdyBJRCBzaG91bGQgYmUgZXhhY3RseSA0IGNoYXJhY3RlcnNcIiwgZGV0YWlsczogYG5vdCAke3Jvd0lELmxlbmd0aH1gLCByb3dJRCwgZmllbGROYW1lOiAnSUQnLCBleGNlcnB0OiByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyb3dJRC5sZW5ndGggPiA0KSBSSURTdWdnZXN0aW9uID0gcm93SUQuc3Vic3RyaW5nKDAsIDUpO1xuICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBtdXN0IGJlIDwgNFxuICAgICAgICAgICAgICAgICAgICBSSURTdWdnZXN0aW9uID0gcm93SUQ7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChSSURTdWdnZXN0aW9uLmxlbmd0aCA8IDQpIFJJRFN1Z2dlc3Rpb24gKz0gTENfQUxQSEFCRVRfUExVU19ESUdJVFNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTENfQUxQSEFCRVRfUExVU19ESUdJVFMubGVuZ3RoKV07O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTENfQUxQSEFCRVQuaW5kZXhPZihyb3dJRFswXSkgPCAwKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMTc2LCBtZXNzYWdlOiBcIlJvdyBJRCBzaG91bGQgc3RhcnQgd2l0aCBhIGxvd2VyY2FzZSBsZXR0ZXJcIiwgY2hhcmFjdGVySW5kZXg6IDAsIHJvd0lELCBmaWVsZE5hbWU6ICdJRCcsIGV4Y2VycHQ6IHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChMQ19BTFBIQUJFVF9QTFVTX0RJR0lUUy5pbmRleE9mKHJvd0lEWzNdKSA8IDApXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAxNzUsIG1lc3NhZ2U6IFwiUm93IElEIHNob3VsZCBlbmQgd2l0aCBhIGxvd2VyY2FzZSBsZXR0ZXIgb3IgZGlnaXRcIiwgY2hhcmFjdGVySW5kZXg6IDMsIHJvd0lELCBmaWVsZE5hbWU6ICdJRCcsIGV4Y2VycHQ6IHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChMQ19BTFBIQUJFVF9QTFVTX0RJR0lUU19QTFVTX0hZUEhFTi5pbmRleE9mKHJvd0lEWzFdKSA8IDApXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAxNzQsIG1lc3NhZ2U6IFwiUm93IElEIGNoYXJhY3RlcnMgc2hvdWxkIG9ubHkgYmUgbG93ZXJjYXNlIGxldHRlcnMsIGRpZ2l0cywgb3IgaHlwZW5cIiwgZmllbGROYW1lOiAnSUQnLCBjaGFyYWN0ZXJJbmRleDogMSwgcm93SUQsIGV4Y2VycHQ6IHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChMQ19BTFBIQUJFVF9QTFVTX0RJR0lUU19QTFVTX0hZUEhFTi5pbmRleE9mKHJvd0lEWzJdKSA8IDApXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAxNzMsIG1lc3NhZ2U6IFwiUm93IElEIGNoYXJhY3RlcnMgc2hvdWxkIG9ubHkgYmUgbG93ZXJjYXNlIGxldHRlcnMsIGRpZ2l0cywgb3IgaHlwZW5cIiwgZmllbGROYW1lOiAnSUQnLCBjaGFyYWN0ZXJJbmRleDogMiwgcm93SUQsIGV4Y2VycHQ6IHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB0YWdzTGlzdCA9IHRhZ3Muc3BsaXQoJzsgJyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRoaXNUYWcgb2YgdGFnc0xpc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBObyB0YWdzIGFyZSB5ZXQgZGVmaW5lZCBmb3IgVFFzIG9yIFNRc1xuICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzVGFnICE9PSAna2V5dGVybScgJiYgdGhpc1RhZyAhPT0gJ25hbWUnKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzQ2LCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgdGFnXCIsIGRldGFpbHM6IHRoaXNUYWcsIGV4Y2VycHQ6IHRhZ3MsIGZpZWxkTmFtZTogJ1RhZ3MnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHF1b3RlLmxlbmd0aCkgeyAvLyBuZWVkIHRvIGNoZWNrIFVUTiBhZ2FpbnN0IFVIQiBhbmQgVUdOVFxuICAgICAgICAgICAgT1FTdWdnZXN0aW9uID0gb3VyQ2hlY2tUZXh0RmllbGQocm93SUQsICdRdW90ZScsIHF1b3RlLCBmYWxzZSwgb3VyUm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAob2NjdXJyZW5jZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgYXdhaXQgb3VyQ2hlY2tRT3JpZ2luYWxMYW5ndWFnZVF1b3RlKHJvd0lELCAnUXVvdGUnLCBxdW90ZSwgb2NjdXJyZW5jZSwgb3VyUm93TG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3NTAsIG1lc3NhZ2U6IFwiTWlzc2luZyBvY2N1cnJlbmNlIGZpZWxkIHdoZW4gd2UgaGF2ZSBhbiBvcmlnaW5hbCBxdW90ZVwiLCBmaWVsZE5hbWU6ICdPY2N1cnJlbmNlJywgcm93SUQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIC8vIFRPRE86IEZpbmQgbW9yZSBkZXRhaWxzIGFib3V0IHdoZW4gdGhlc2UgZmllbGRzIGFyZSByZWFsbHkgY29tcHVsc29yeSAoYW5kIHdoZW4gdGhleSdyZSBub3QsIGUuZy4sIGZvciAnaW50cm8nKSA/Pz9cbiAgICAgICAgICAgIGlmIChib29rSUQgPT09ICdPQlMnICYmIFYgIT09ICdpbnRybycgJiYgb2NjdXJyZW5jZSAhPT0gJzAnKVxuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTE5LCBtZXNzYWdlOiBcIk1pc3NpbmcgUXVvdGUgZmllbGRcIiwgZmllbGROYW1lOiAnUXVvdGUnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuXG4gICAgICAgIGlmIChvY2N1cnJlbmNlLmxlbmd0aCkgeyAvLyBUaGlzIHNob3VsZCB1c3VhbGx5IGJlIGEgZGlnaXRcbiAgICAgICAgICAgIGlmIChvY2N1cnJlbmNlID09PSAnMCcpIHsgLy8gemVybyBtZWFucyB0aGF0IGl0IGRvZXNu4oCZdCBvY2N1clxuICAgICAgICAgICAgICAgIGlmIChxdW90ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3NTEsIG1lc3NhZ2U6IFwiSW52YWxpZCB6ZXJvIG9jY3VycmVuY2UgZmllbGQgd2hlbiB3ZSBoYXZlIGFuIG9yaWdpbmFsIHF1b3RlXCIsIGZpZWxkTmFtZTogJ09jY3VycmVuY2UnLCByb3dJRCwgZXhjZXJwdDogb2NjdXJyZW5jZSwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICBPU3VnZ2VzdGlvbiA9ICcxJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgKFYgIT09ICdpbnRybycpXG4gICAgICAgICAgICAgICAgLy8gICAgIGFkZE5vdGljZVBhcnRpYWwoe3ByaW9yaXR5OjUwMCwgbWVzc2FnZTpcIkludmFsaWQgemVybyBvY2N1cnJlbmNlIGZpZWxkXCIsIHJvd0lELCBsb2NhdGlvbjpyb3dMb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvY2N1cnJlbmNlID09PSAnLTEnKSB7IH0vLyBUT0RPIGNoZWNrIHRoZSBzcGVjaWFsIGNvbmRpdGlvbnMgd2hlbiB0aGlzIGNhbiBvY2N1cj8/P1xuICAgICAgICAgICAgZWxzZSBpZiAoJzEyMzQ1Njc4Jy5pbmRleE9mKG9jY3VycmVuY2UpIDwgMCkgeyAvLyBpdOKAmXMgbm90IG9uZSBvZiB0aGVzZSBpbnRlZ2Vyc1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzkyLCBtZXNzYWdlOiBgSW52YWxpZCBvY2N1cnJlbmNlIGZpZWxkYCwgZmllbGROYW1lOiAnT2NjdXJyZW5jZScsIHJvd0lELCBleGNlcnB0OiBvY2N1cnJlbmNlLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgT1N1Z2dlc3Rpb24gPSAnMSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocXVvdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc5MSwgbWVzc2FnZTogYE1pc3Npbmcgb2NjdXJyZW5jZSBmaWVsZGAsIGZpZWxkTmFtZTogJ09jY3VycmVuY2UnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgT1N1Z2dlc3Rpb24gPSAnMSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocXVlc3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAocXVlc3Rpb24uaW5kZXhPZignPGJyPicpID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyQ291bnQgPSBjb3VudE9jY3VycmVuY2VzKHF1ZXN0aW9uLCAnPGJyPicpO1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNjc0LCBtZXNzYWdlOiBcIkZpZWxkIGNvbnRhaW5zIEhUTUwgPGJyPiBmaWVsZChzKVwiLCBkZXRhaWxzOiBgJHtjaGFyQ291bnR9IG9jY3VycmVuY2Uke2NoYXJDb3VudCA9PT0gMSA/ICcnIDogJ3MnfSBmb3VuZOKAlHNob3VsZCBiZSAnXFxcXG4nIGluc3RlYWRgLCBmaWVsZE5hbWU6ICdRdWVzdGlvbicsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocXVlc3Rpb24uaW5kZXhPZignXFx1MjAwQicpID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyQ291bnQgPSBjb3VudE9jY3VycmVuY2VzKHF1ZXN0aW9uLCAnXFx1MjAwQicpO1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMzc0LCBtZXNzYWdlOiBcIkZpZWxkIGNvbnRhaW5zIHplcm8td2lkdGggc3BhY2UocylcIiwgZGV0YWlsczogYCR7Y2hhckNvdW50fSBvY2N1cnJlbmNlJHtjaGFyQ291bnQgPT09IDEgPyAnJyA6ICdzJ30gZm91bmRgLCBmaWVsZE5hbWU6ICdRdWVzdGlvbicsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKHF1ZXN0aW9uKSlcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDM3MywgbWVzc2FnZTogXCJGaWVsZCBpcyBvbmx5IHdoaXRlc3BhY2VcIiwgZmllbGROYW1lOiAnUXVlc3Rpb24nLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgZWxzZSB7IC8vIE1vcmUgdGhhbiBqdXN0IHdoaXRlc3BhY2VcbiAgICAgICAgICAgICAgICBSU3VnZ2VzdGlvbiA9IGF3YWl0IG91ck1hcmtkb3duVGV4dENoZWNrcyhyb3dJRCwgJ1F1ZXN0aW9uJywgcXVlc3Rpb24sIHRydWUsIG91clJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIC8vIGF3YWl0IG91ckNoZWNrTm90ZXNMaW5rc1RvT3V0c2lkZShyb3dJRCwgJ1F1ZXN0aW9uJywgcXVlc3Rpb24sIG91clJvd0xvY2F0aW9uLCBsaW5rQ2hlY2tpbmdPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAvLyBsZXQgcmVnZXhSZXN1bHRBcnJheTtcbiAgICAgICAgICAgICAgICAvLyB3aGlsZSAoKHJlZ2V4UmVzdWx0QXJyYXkgPSBUQV9SRUdFWC5leGVjKHF1ZXN0aW9uKSkpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gZGVidWdMb2coXCJHb3QgVEEgUmVnZXggaW4gUXVlc3Rpb25cIiwgSlNPTi5zdHJpbmdpZnkocmVnZXhSZXN1bHRBcnJheSkpO1xuICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBhZGp1c3RlZExpbmsgPSByZWdleFJlc3VsdEFycmF5WzBdLnN1YnN0cmluZygyLCByZWdleFJlc3VsdEFycmF5WzBdLmxlbmd0aCAtIDIpXG4gICAgICAgICAgICAgICAgLy8gICAgIGlmIChzdXBwb3J0UmVmZXJlbmNlICE9PSBhZGp1c3RlZExpbmsgJiYgViAhPT0gJ2ludHJvJykge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgZGV0YWlscyA9IHN1cHBvcnRSZWZlcmVuY2UgPyBgKFNSPScke3N1cHBvcnRSZWZlcmVuY2V9JylgIDogXCIoZW1wdHkgU1IgZmllbGQpXCJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzg2LCBtZXNzYWdlOiBcIlNob3VsZCBoYXZlIGEgU3VwcG9ydFJlZmVyZW5jZSB3aGVuIE9jY3VycmVuY2VOb3RlIGhhcyBhIFRBIGxpbmtcIiwgZGV0YWlscywgcm93SUQsIGZpZWxkTmFtZTogJ1F1ZXN0aW9uJywgZXhjZXJwdDogYWRqdXN0ZWRMaW5rLCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSAvLyBUT0RPOiBGaW5kIG91dCBpZiB0aGVzZSBmaWVsZHMgYXJlIHJlYWxseSBjb21wdWxzb3J5IChhbmQgd2hlbiB0aGV5J3JlIG5vdCwgZS5nLiwgZm9yICdpbnRybycpID8/P1xuICAgICAgICAgICAgaWYgKHJlcG9Db2RlID09PSAnVFEyJylcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDI3NCwgbWVzc2FnZTogXCJNaXNzaW5nIFF1ZXN0aW9uIGZpZWxkXCIsIGZpZWxkTmFtZTogJ1F1ZXN0aW9uJywgcm93SUQsIGxvY2F0aW9uOiBvdXJSb3dMb2NhdGlvbiB9KTtcblxuICAgICAgICBpZiAocmVzcG9uc2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuaW5kZXhPZignPGJyPicpID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyQ291bnQgPSBjb3VudE9jY3VycmVuY2VzKHJlc3BvbnNlLCAnPGJyPicpO1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNjc0LCBtZXNzYWdlOiBcIkZpZWxkIGNvbnRhaW5zIEhUTUwgPGJyPiBmaWVsZChzKVwiLCBkZXRhaWxzOiBgJHtjaGFyQ291bnR9IG9jY3VycmVuY2Uke2NoYXJDb3VudCA9PT0gMSA/ICcnIDogJ3MnfSBmb3VuZOKAlHNob3VsZCBiZSAnXFxcXG4nIGluc3RlYWRgLCBmaWVsZE5hbWU6ICdSZXNwb25zZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuaW5kZXhPZignXFx1MjAwQicpID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyQ291bnQgPSBjb3VudE9jY3VycmVuY2VzKHJlc3BvbnNlLCAnXFx1MjAwQicpO1xuICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogMzc0LCBtZXNzYWdlOiBcIkZpZWxkIGNvbnRhaW5zIHplcm8td2lkdGggc3BhY2UocylcIiwgZGV0YWlsczogYCR7Y2hhckNvdW50fSBvY2N1cnJlbmNlJHtjaGFyQ291bnQgPT09IDEgPyAnJyA6ICdzJ30gZm91bmRgLCBmaWVsZE5hbWU6ICdSZXNwb25zZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKHJlc3BvbnNlKSlcbiAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDM3MywgbWVzc2FnZTogXCJGaWVsZCBpcyBvbmx5IHdoaXRlc3BhY2VcIiwgZmllbGROYW1lOiAnUmVzcG9uc2UnLCByb3dJRCwgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgZWxzZSB7IC8vIE1vcmUgdGhhbiBqdXN0IHdoaXRlc3BhY2VcbiAgICAgICAgICAgICAgICBSU3VnZ2VzdGlvbiA9IGF3YWl0IG91ck1hcmtkb3duVGV4dENoZWNrcyhyb3dJRCwgJ1Jlc3BvbnNlJywgcmVzcG9uc2UsIHRydWUsIG91clJvd0xvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIC8vIGF3YWl0IG91ckNoZWNrTm90ZXNMaW5rc1RvT3V0c2lkZShyb3dJRCwgJ1Jlc3BvbnNlJywgcmVzcG9uc2UsIG91clJvd0xvY2F0aW9uLCBsaW5rQ2hlY2tpbmdPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAvLyBsZXQgcmVnZXhSZXN1bHRBcnJheTtcbiAgICAgICAgICAgICAgICAvLyB3aGlsZSAoKHJlZ2V4UmVzdWx0QXJyYXkgPSBUQV9SRUdFWC5leGVjKGFuc3dlcikpKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIGRlYnVnTG9nKFwiR290IFRBIFJlZ2V4IGluIFJlc3BvbnNlXCIsIEpTT04uc3RyaW5naWZ5KHJlZ2V4UmVzdWx0QXJyYXkpKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uc3QgYWRqdXN0ZWRMaW5rID0gcmVnZXhSZXN1bHRBcnJheVswXS5zdWJzdHJpbmcoMiwgcmVnZXhSZXN1bHRBcnJheVswXS5sZW5ndGggLSAyKVxuICAgICAgICAgICAgICAgIC8vICAgICBpZiAoc3VwcG9ydFJlZmVyZW5jZSAhPT0gYWRqdXN0ZWRMaW5rICYmIFYgIT09ICdpbnRybycpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IGRldGFpbHMgPSBzdXBwb3J0UmVmZXJlbmNlID8gYChTUj0nJHtzdXBwb3J0UmVmZXJlbmNlfScpYCA6IFwiKGVtcHR5IFNSIGZpZWxkKVwiXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc4NiwgbWVzc2FnZTogXCJTaG91bGQgaGF2ZSBhIFN1cHBvcnRSZWZlcmVuY2Ugd2hlbiBPY2N1cnJlbmNlTm90ZSBoYXMgYSBUQSBsaW5rXCIsIGRldGFpbHMsIHJvd0lELCBmaWVsZE5hbWU6ICdSZXNwb25zZScsIGV4Y2VycHQ6IGFkanVzdGVkTGluaywgbG9jYXRpb246IG91clJvd0xvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgLy8gVE9ETzogRmluZCBvdXQgaWYgdGhlc2UgZmllbGRzIGFyZSByZWFsbHkgY29tcHVsc29yeSAoYW5kIHdoZW4gdGhleSdyZSBub3QsIGUuZy4sIGZvciAnaW50cm8nKSA/Pz9cbiAgICAgICAgICAgIGlmIChyZXBvQ29kZSA9PT0gJ1RRMicpXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAyNzQsIG1lc3NhZ2U6IFwiTWlzc2luZyBSZXNwb25zZSBmaWVsZFwiLCBmaWVsZE5hbWU6ICdSZXNwb25zZScsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG5cbiAgICAgICAgLy8gNyBbcmVmZXJlbmNlLCByb3dJRCwgdGFncywgcXVlc3Rpb24sIGFuc3dlcl1cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IGAke3JlZmVyZW5jZX1cXHQke1JJRFN1Z2dlc3Rpb24gPT09IHVuZGVmaW5lZCA/IHJvd0lEIDogUklEU3VnZ2VzdGlvbn1cXHQke3RhZ3N9XFx0JHtPUVN1Z2dlc3Rpb24gPT09IHVuZGVmaW5lZCA/IHF1b3RlIDogT1FTdWdnZXN0aW9ufVxcdCR7T1N1Z2dlc3Rpb24gPT09IHVuZGVmaW5lZCA/IG9jY3VycmVuY2UgOiBPU3VnZ2VzdGlvbn1cXHQke1F1U3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gcXVlc3Rpb24gOiBRdVN1Z2dlc3Rpb259XFx0JHtSU3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gcmVzcG9uc2UgOiBSU3VnZ2VzdGlvbn1gO1xuICAgICAgICBpZiAoc3VnZ2VzdGlvbiAhPT0gbGluZSkge1xuICAgICAgICAgICAgLy8gZGVidWdMb2coYEhhZCBxdWVzdGlvbiAke2xpbmV9YCk7XG4gICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgU3VnIHF1ZXN0aW9uICR7c3VnZ2VzdGlvbn1gKTtcbiAgICAgICAgICAgIGRyUmVzdWx0LnN1Z2dlc3Rpb24gPSBzdWdnZXN0aW9uO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgeyAvLyB3cm9uZyBudW1iZXIgb2YgZmllbGRzIGluIHRoZSByb3dcbiAgICAgICAgLy8gSGF2ZSBhIGdvIGF0IGdldHRpbmcgc29tZSBvZiB0aGUgZmlyc3QgZmllbGRzIG91dCBvZiB0aGUgcm93XG4gICAgICAgIGxldCByb3dJRCA9ICc/Pz8/JztcbiAgICAgICAgdHJ5IHsgcm93SUQgPSBmaWVsZHNbMV07IH0gY2F0Y2ggeyB9XG4gICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTg0LCBtZXNzYWdlOiBgRm91bmQgd3JvbmcgbnVtYmVyIG9mIFRTViBmaWVsZHMgKGV4cGVjdGVkICR7TlVNX0VYUEVDVEVEX1FVRVNUSU9OU19UU1ZfRklFTERTfSlgLCBkZXRhaWxzOiBgRm91bmQgJHtmaWVsZHMubGVuZ3RofSBmaWVsZCR7ZmllbGRzLmxlbmd0aCA9PT0gMSA/ICcnIDogJ3MnfWAsIHJvd0lELCBsb2NhdGlvbjogb3VyUm93TG9jYXRpb24gfSk7XG4gICAgfVxuXG4gICAgLy8gZGVidWdMb2coYCAgY2hlY2tRdWVzdGlvbnNUU1Y3RGF0YVJvdyByZXR1cm5pbmcgd2l0aCAke2RyUmVzdWx0Lm5vdGljZUxpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IG5vdGljZShzKS5gKTtcbiAgICAvLyBkZWJ1Z0xvZyhcImNoZWNrUXVlc3Rpb25zVFNWN0RhdGFSb3cgcmVzdWx0IGlzXCIsIEpTT04uc3RyaW5naWZ5KGRyUmVzdWx0KSk7XG4gICAgcmV0dXJuIGRyUmVzdWx0OyAvLyBvYmplY3Qgd2l0aCBub3RpY2VMaXN0IGFuZCBwb3NzaWJseSBzdWdnZXN0aW9uIG9ubHlcbn1cbi8vIGVuZCBvZiBjaGVja1F1ZXN0aW9uc1RTVjdEYXRhUm93IGZ1bmN0aW9uXG4iXX0=