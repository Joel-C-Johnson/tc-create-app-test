"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _typeof = require("@babel/runtime/helpers/typeof");Object.defineProperty(exports, "__esModule", { value: true });exports.checkOriginalLanguageQuoteAndOccurrence = checkOriginalLanguageQuoteAndOccurrence;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var books = _interopRequireWildcard(require("../core/books/books"));

var _defaults = require("./defaults");
var _getApi = require("../core/getApi");

var _utilities = require("./utilities");function _getRequireWildcardCache(nodeInterop) {if (typeof WeakMap !== "function") return null;var cacheBabelInterop = new WeakMap();var cacheNodeInterop = new WeakMap();return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {return nodeInterop ? cacheNodeInterop : cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj, nodeInterop) {if (!nodeInterop && obj && obj.__esModule) {return obj;}if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache(nodeInterop);if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _createForOfIteratorHelper(o, allowArrayLike) {var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];if (!it) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = it.call(o);}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it.return != null) it.return();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}


// const QUOTE_VALIDATOR_VERSION_STRING = '0.9.7';


/**
 *
 * @param {string} languageCode
 * @param {string} repoCode
 * @param {string} fieldName
 * @param {string} fieldText
 * @param {string} occurrenceString
 * @param {string} bookID
 * @param {string} C
 * @param {string} V
 * @param {string} givenLocation
 * @param {Object} checkingOptions
 */function
checkOriginalLanguageQuoteAndOccurrence(_x, _x2, _x3, _x4, _x5, _x6, _x7, _x8, _x9, _x10) {return _checkOriginalLanguageQuoteAndOccurrence.apply(this, arguments);}




















































































































































































































































































































































































































































































































// end of checkOriginalLanguageQuoteAndOccurrence function
function _checkOriginalLanguageQuoteAndOccurrence() {_checkOriginalLanguageQuoteAndOccurrence = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(languageCode, repoCode, fieldName, fieldText, occurrenceString, bookID, C, V, givenLocation, checkingOptions) {var discontiguousDivider, wrongDiscontiguousDivider, ourLocation, colqResult, addNotice, getOriginalPassage, _getOriginalPassage, checkFoundQuoteSegment, warnForNotFoundQuoteSegment, excerptLength, excerptHalfLength, excerptHalfLengthPlus, occurrence, characterIndex, excerpt, _excerpt2, quoteBits, _excerpt3, _excerpt4, verseText, numQuoteBits, quoteIndex, bitIndex, partDescription, _excerpt5, verseTextBits, _verseTextBits, actualNumOccurrences, actualOccurrencesText, _excerpt6;return _regenerator.default.wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:warnForNotFoundQuoteSegment = function _warnForNotFoundQuote(notFoundQuoteSegment, partDescription, occurrenceString, fullVerseText, location) {// if (partDescription) functionLog(`warnForNotFoundQuoteSegment(${notFoundQuoteSegment}, ${partDescription}, ${fullVerseText}, ${location}) ${C}:${V}…`);
              //parameterAssert(notFoundQuoteSegment !== undefined, "warnForNotFoundQuoteSegment: 'notFoundQuoteSegment' parameter should be defined");
              //parameterAssert(typeof notFoundQuoteSegment === 'string', `warnForNotFoundQuoteSegment: 'notFoundQuoteSegment' parameter should be a string not a '${typeof notFoundQuoteSegment}'`);
              //parameterAssert(notFoundQuoteSegment.indexOf(discontiguousDivider) === -1, `warnForNotFoundQuoteSegment: 'notFoundQuoteSegment' parameter should not contain '${discontiguousDivider}' divider: '${notFoundQuoteSegment}'`);
              //parameterAssert(partDescription !== undefined, "warnForNotFoundQuoteSegment: 'partDescription' parameter should be defined");
              //parameterAssert(typeof partDescription === 'string', `warnForNotFoundQuoteSegment: 'partDescription' parameter should be a string not a '${typeof partDescription}'`);
              //parameterAssert(fullVerseText !== undefined, "warnForNotFoundQuoteSegment: 'fullVerseText' parameter should be defined");
              //parameterAssert(typeof fullVerseText === 'string', `warnForNotFoundQuoteSegment: 'fullVerseText' parameter should be a string not a '${typeof fullVerseText}'`);
              //parameterAssert(location !== undefined, "warnForNotFoundQuoteSegment: 'location' parameter should be defined");
              //parameterAssert(typeof location === 'string', `warnForNotFoundQuoteSegment: 'location' parameter should be a string not a '${typeof location}'`);
              var excerpt = partDescription ? "".concat(partDescription ? '(' + partDescription + ' quote portion)' : '', " '").concat(notFoundQuoteSegment, "'") : '';var noBreakSpaceText = notFoundQuoteSegment.indexOf("\xA0") >= 0 ? "quote which contains No-Break Space shown as '⍽'" : "";if (noBreakSpaceText) notFoundQuoteSegment = notFoundQuoteSegment.replace(/\u00A0/g, '⍽'); // debugLog(`722 fieldText='${fieldText}'${extraText}`);
              // debugLog(`722 verseText='${verseText}'`);
              if (notFoundQuoteSegment[0] === ' ') {if (!excerpt) excerpt = notFoundQuoteSegment.substring(0, excerptLength) + (notFoundQuoteSegment.length > excerptLength ? '…' : '');addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which starts with a space" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment.endsWith(' ')) {if (!excerpt) excerpt = (notFoundQuoteSegment.length > excerptLength ? '…' : '') + notFoundQuoteSegment.substring(notFoundQuoteSegment.length - excerptLength, notFoundQuoteSegment.length);addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which ends with a space" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment[0] === "\u2060") {// Word joiner
                if (!excerpt) excerpt = notFoundQuoteSegment.substring(0, excerptLength) + (notFoundQuoteSegment.length > excerptLength ? '…' : '');addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which starts with 'word joiner'" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment.endsWith("\u2060")) {// Word joiner
                if (!excerpt) excerpt = (notFoundQuoteSegment.length > excerptLength ? '…' : '') + notFoundQuoteSegment.substring(notFoundQuoteSegment.length - excerptLength, notFoundQuoteSegment.length);addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which ends with 'word joiner'" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment[0] === "\u200B") {// Zero-width space
                if (!excerpt) excerpt = notFoundQuoteSegment.substring(0, excerptLength) + (notFoundQuoteSegment.length > excerptLength ? '…' : '');addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which starts with 'zero-width space'" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment.endsWith("\u200B")) {// Zero-width space
                if (!excerpt) excerpt = (notFoundQuoteSegment.length > excerptLength ? '…' : '') + notFoundQuoteSegment.substring(notFoundQuoteSegment.length - excerptLength, notFoundQuoteSegment.length);addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which ends with 'zero-width space'" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment[0] === "\u200D") {// Zero-width joiner
                if (!excerpt) excerpt = notFoundQuoteSegment.substring(0, excerptLength) + (notFoundQuoteSegment.length > excerptLength ? '…' : '');addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which starts with 'zero-width joiner'" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else if (notFoundQuoteSegment.endsWith("\u200D")) {// Zero-width joiner
                if (!excerpt) excerpt = (notFoundQuoteSegment.length > excerptLength ? '…' : '') + notFoundQuoteSegment.substring(notFoundQuoteSegment.length - excerptLength, notFoundQuoteSegment.length);addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: "quote which ends with 'zero-width joiner'" + (noBreakSpaceText ? ' ' + noBreakSpaceText : ''), excerpt: excerpt, location: ourLocation });} else {if (!excerpt) excerpt = notFoundQuoteSegment.length <= excerptLength ? notFoundQuoteSegment : notFoundQuoteSegment.substring(0, excerptHalfLength) + (notFoundQuoteSegment.length > 2 * excerptHalfLength ? '…' : '') + notFoundQuoteSegment.substring(notFoundQuoteSegment.length - excerptHalfLength, notFoundQuoteSegment.length);addNotice({ priority: 916, message: "Unable to find original language quote in verse text", details: noBreakSpaceText ? noBreakSpaceText : "verse text \u25D7".concat(fullVerseText, "\u25D6"), excerpt: excerpt, location: ourLocation });}};checkFoundQuoteSegment = function _checkFoundQuoteSegme(foundQuoteSegment, partDescription, occurrenceString, partialVerseText, fullVerseText, location) {// if (partDescription) functionLog(`checkFoundQuoteSegment(${foundQuoteSegment}, ${partDescription}, ${verseText}, ${location}) ${C}:${V}…`);
              //parameterAssert(foundQuoteSegment !== undefined, "checkFoundQuoteSegment: 'foundQuoteSegment' parameter should be defined");
              //parameterAssert(typeof foundQuoteSegment === 'string', `checkFoundQuoteSegment: 'foundQuoteSegment' parameter should be a string not a '${typeof foundQuoteSegment}'`);
              //parameterAssert(foundQuoteSegment.indexOf(discontiguousDivider) === -1, `checkFoundQuoteSegment: 'foundQuoteSegment' parameter should not contain '${discontiguousDivider}' divider: '${foundQuoteSegment}'`);
              //parameterAssert(partDescription !== undefined, "checkFoundQuoteSegment: 'partDescription' parameter should be defined");
              //parameterAssert(typeof partDescription === 'string', `checkFoundQuoteSegment: 'partDescription' parameter should be a string not a '${typeof partDescription}'`);
              //parameterAssert(occurrenceString !== undefined, "checkFoundQuoteSegment: 'occurrenceString' parameter should be defined");
              //parameterAssert(typeof occurrenceString === 'string', `checkFoundQuoteSegment: 'occurrenceString' parameter should be a string not a '${typeof occurrenceString}'`);
              //parameterAssert(partialVerseText !== undefined, "checkFoundQuoteSegment: 'partialVerseText' parameter should be defined");
              //parameterAssert(typeof partialVerseText === 'string', `checkFoundQuoteSegment: 'partialVerseText' parameter should be a string not a '${typeof partialVerseText}'`);
              //parameterAssert(fullVerseText !== undefined, "checkFoundQuoteSegment: 'fullVerseText' parameter should be defined");
              //parameterAssert(typeof fullVerseText === 'string', `checkFoundQuoteSegment: 'fullVerseText' parameter should be a string not a '${typeof fullVerseText}'`);
              //parameterAssert(fullVerseText.length >= partialVerseText.length, `checkFoundQuoteSegment: 'partialVerseText' should not be longer`);
              //parameterAssert(location !== undefined, "checkFoundQuoteSegment: 'location' parameter should be defined");
              //parameterAssert(typeof location === 'string', `checkFoundQuoteSegment: 'location' parameter should be a string not a '${typeof location}'`);
              var details = "verse text \u25D7".concat(fullVerseText, "\u25D6");if (partDescription.length) details = "".concat(partDescription, " part of quote = \"").concat(foundQuoteSegment, "\" -- ").concat(details);var remainingVerseBits = partialVerseText.split(foundQuoteSegment); // NOTE: can split (badly) on short strings (like δὲ or εἰ) mid-word
              if (remainingVerseBits.length > 2) // Join the extra bits back up
                remainingVerseBits = [remainingVerseBits[0], remainingVerseBits.slice(1).join(discontiguousDivider)];(0, _utilities.logicAssert)(remainingVerseBits.length === 2, "remaining bits are ".concat(remainingVerseBits.length)); // Note: There's some Hebrew (RTL) characters at the beginning of the following regex
              // Note: Straight quotes are included here (even though unwanted) as other code warns about them
              // Note: We don't give errors for leading or trailing spaces here, coz that's done elsewhere
              var precedingChar = remainingVerseBits[0].slice(-1); // debugLog(`Previous char before ${C}:${V} '${foundQuoteSegment}' is '${precedingChar}'`);
              // const precedingRegex = new RegExp('[ ־*[("\'“‘]', 'g');
              // NOTE: This algorithm has to handle a single word inside another prior word, e.g., searching for δὲ in οὐδὲν δὲ συνκεκαλυμμένον ἐστὶν
              if (foundQuoteSegment.slice(0) !== ' ' && remainingVerseBits[0] && precedingChar && ' ־*[("\'“‘—'.indexOf(precedingChar) === -1 // handle punctuation expected before words
              && (foundQuoteSegment.indexOf(' ') !== -1 || partialVerseText.indexOf(" ".concat(foundQuoteSegment)) === -1) // it's multiword, or there's not another word that fits
              ) {var precederDescription;if (precedingChar === "\u2060") precederDescription = 'WordJoiner';else if (precedingChar === "\u200D") precederDescription = 'ZeroWidth-WordJoiner';else precederDescription = "".concat(precedingChar, "=D").concat(precedingChar.charCodeAt(0), "/H").concat(precedingChar.charCodeAt(0).toString(16)); // debugLog(`Seems ${bookID} ${C}:${V} '${foundQuoteSegment}' might not start at the beginning of a word—it’s preceded by '${precederDescription}' in '${partialVerseText}' of '${fullVerseText}'`);
                  var excerpt = "(".concat(precederDescription, ")").concat(foundQuoteSegment.substring(0, excerptLength - 3)).concat(foundQuoteSegment.length > excerptLength - 3 ? '…' : '').concat(occurrenceString.length ? " occurrence=".concat(occurrenceString) : ''); // We greatly lower the priority if we're less sure that it's a genuine error
                  addNotice({ priority: foundQuoteSegment.indexOf(' ') !== -1 || fullVerseText.search(" ".concat(foundQuoteSegment)) === -1 ? 909 : 389, message: "Seems original language quote might not start at the beginning of a word", details: details, characterIndex: 0, excerpt: excerpt, location: location });}var followingChar = remainingVerseBits[1][0]; // debugLog(`Next char after ${C}:${V} '${foundQuoteSegment}' is '${followingChar}'`);
              // Note: There's some Hebrew (RTL) characters at the beginning of the following string used in regex
              var allowedWordEndChars = ' ׃־.,:;?!–—)…'; // Ellipsis occurs in UGNT, e.g., Rom 3:15, Rev 2:26, 18:7
              // We make up the RegEx on the fly but we need to escape special chars in foundQuoteSegment
              // debugLog(`checkFoundQuoteSegment ${bookID} ${C}:${V} regex will be '${foundQuoteSegment}[${allowedWordEndChars}]'`);
              var escapedFoundQuoteSegment = foundQuoteSegment.replace(/\(/g, '\\(').replace(/\)/g, '\\)'); // Segments may have any one or more of these (not necessarily matched)
              // if (escapedFoundQuoteSegment !== foundQuoteSegment ) debugLog(`checkFoundQuoteSegment ${bookID} ${C}:${V} from '${foundQuoteSegment}' regex will be '${escapedFoundQuoteSegment}[${allowedWordEndChars}]'`);
              var followingRegex = new RegExp("".concat(escapedFoundQuoteSegment, "[").concat(allowedWordEndChars, "]"), 'g');if (foundQuoteSegment.slice(-1) !== ' ' && remainingVerseBits[1] && followingChar && allowedWordEndChars.indexOf(followingChar) === -1 // handle punctuation expected after words
              && (foundQuoteSegment.indexOf(' ') !== -1 || partialVerseText.search(followingRegex) === -1) // it's multiword, or there's not another word that fits
              ) {// No problems if quote is followed by expected terminator-type punctuation
                  // const badCharString = `'${followingChar}'=D${followingChar.charCodeAt(0)}/H${followingChar.charCodeAt(0).toString(16)}`;
                  // debugLog(`Seems ${bookID} ${C}:${V} '${foundQuoteSegment}' might not finish at the end of a word—it’s followed by ${badCharString} in '${partialVerseText}' of '${fullVerseText}'`);
                  var _excerpt = "".concat(foundQuoteSegment.length > excerptLength - 3 ? '…' : '').concat(foundQuoteSegment.substring(foundQuoteSegment.length - excerptLength + 3, foundQuoteSegment.length), "(").concat(followingChar, "=D").concat(remainingVerseBits[1].charCodeAt(0), "/H").concat(remainingVerseBits[1].charCodeAt(0).toString(16), ")").concat(occurrenceString.length ? " occurrence=".concat(occurrenceString) : ''); // We greatly lower the priority if we're less sure that it's a genuine error
                  addNotice({ priority: foundQuoteSegment.indexOf(' ') !== -1 || fullVerseText.search(followingRegex) === -1 ? 908 : 388, message: "Seems original language quote might not finish at the end of a word", details: details, characterIndex: foundQuoteSegment.length, excerpt: _excerpt, location: location });}};_getOriginalPassage = function _getOriginalPassage3() {_getOriginalPassage = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(bookID, C, V, checkingOptions) {var username, branch, getFile_, verseText, originalMarkdown, OBSRepoName, adjC, adjV, OBSPathname, gotIt, searchString, _iterator, _step, line, bookNumberAndName, whichTestament, originalLanguageRepoLanguageCode, originalLanguageRepoCode, originalLanguageRepoName, filename, originalUSFM, foundChapter, foundVerse, _iterator2, _step2, bookLine, ixW, ixEnd, field, bits, adjusted_field;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0: // TODO: Cache these ???
                        // functionLog(`getOriginalPassage(${bookID}, ${C}, ${V})…`);
                        try {username = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.originalLanguageRepoUsername;} catch (qcoError) {}if (!username) username = languageCode === 'en' ? 'unfoldingWord' : 'Door43-Catalog'; // ??? !!!
                        try {branch = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.originalLanguageRepoBranch;} catch (qcunError) {}if (!branch) branch = 'master';getFile_ = checkingOptions && checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.getFile ? checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.getFile : _getApi.cachedGetFile;verseText = '';if (!(bookID === 'OBS')) {_context.next = 53;break;}OBSRepoName = "".concat(languageCode, "_obs");adjC = C.length === 2 ? C : '0' + C;adjV = V.length === 2 ? V : '0' + V;OBSPathname = "content/".concat(adjC, ".md");_context.prev = 11;_context.next = 14;return getFile_({ username: username, repository: OBSRepoName, path: OBSPathname, branch: branch });case 14:originalMarkdown = _context.sent;_context.next = 21;break;case 17:_context.prev = 17;_context.t0 = _context["catch"](11);console.error("getOriginalPassage(".concat(bookID, ", ").concat(C, ":").concat(V, ", ").concat(JSON.stringify(checkingOptions), ") failed to load UHB"), username, languageCode, OBSPathname, branch, _context.t0.message);addNotice({ priority: 601, message: "Unable to load", details: "username=".concat(username, " error=").concat(_context.t0), OBSPathname: OBSPathname, location: ourLocation, extra: OBSRepoName });case 21:if (originalMarkdown) {_context.next = 23;break;}return _context.abrupt("return", '');case 23:gotIt = V === 'intro'; // normally false, but true for intro (so grabs first line of text = heading line)
                        searchString = "-".concat(adjC, "-").concat(adjV, "."); // NOTE: Bible references get appended to the last frame text (but I don’t think it does any harm)
                        _iterator = _createForOfIteratorHelper(originalMarkdown.split('\n'));_context.prev = 26;_iterator.s();case 28:if ((_step = _iterator.n()).done) {_context.next = 43;break;}line = _step.value;if (line) {_context.next = 32;break;}return _context.abrupt("continue", 41);case 32:if (!(line.indexOf(searchString) > 0)) {_context.next = 35;break;}gotIt = true;return _context.abrupt("continue", 41);case 35:if (!gotIt) {_context.next = 41;break;}if (!(line.indexOf('[OBS Image]') > 0)) {_context.next = 40;break;}return _context.abrupt("break", 43);case 40:verseText += line;case 41:_context.next = 28;break;case 43:_context.next = 48;break;case 45:_context.prev = 45;_context.t1 = _context["catch"](26);_iterator.e(_context.t1);case 48:_context.prev = 48;_iterator.f();return _context.finish(48);case 51:_context.next = 118;break;case 53: // not OBS, so a USFM Bible book
                        bookNumberAndName = books.usfmNumberName(bookID);try {whichTestament = books.testament(bookID); // returns 'old' or 'new'
                        } catch (bNNerror) {if (books.isValidBookID(bookID)) // must be in FRT, BAK, etc.
                            whichTestament = 'other';}(0, _utilities.logicAssert)(whichTestament === 'old' || whichTestament === 'new', "getOriginalPassage() couldn't find testament for '".concat(bookID, "'"));originalLanguageRepoLanguageCode = whichTestament === 'old' ? 'hbo' : 'el-x-koine';originalLanguageRepoCode = whichTestament === 'old' ? 'UHB' : 'UGNT';originalLanguageRepoName = "".concat(originalLanguageRepoLanguageCode, "_").concat(originalLanguageRepoCode.toLowerCase());filename = "".concat(bookNumberAndName, ".usfm");if (!(originalLanguageRepoCode === 'UHB')) {_context.next = 73;break;}_context.prev = 61;_context.next = 64;return getFile_({ username: username, repository: originalLanguageRepoName, path: filename, branch: branch });case 64:originalUSFM = _context.sent;_context.next = 71;break;case 67:_context.prev = 67;_context.t2 = _context["catch"](61);console.error("getOriginalPassage(".concat(bookID, ", ").concat(C, ":").concat(V, ", ").concat(JSON.stringify(checkingOptions), ") failed to load UHB"), username, originalLanguageRepoCode, filename, branch, _context.t2.message);addNotice({ priority: 601, message: "Unable to load", details: "username=".concat(username, " error=").concat(_context.t2), filename: filename, location: ourLocation, extra: originalLanguageRepoName });case 71:_context.next = 84;break;case 73:if (!(originalLanguageRepoCode === 'UGNT')) {_context.next = 84;break;}_context.prev = 74;_context.next = 77;return getFile_({ username: username, repository: originalLanguageRepoName, path: filename, branch: branch });case 77:originalUSFM = _context.sent;_context.next = 84;break;case 80:_context.prev = 80;_context.t3 = _context["catch"](74);console.error("getOriginalPassage(".concat(bookID, ", ").concat(C, ":").concat(V, ", ").concat(JSON.stringify(checkingOptions), ") failed to load UGNT"), username, originalLanguageRepoCode, filename, branch, _context.t3.message);addNotice({ priority: 601, message: "Unable to load", details: "username=".concat(username, " error=").concat(_context.t3), filename: filename, location: ourLocation, extra: originalLanguageRepoName });case 84:if (originalUSFM) {_context.next = 86;break;}return _context.abrupt("return", '');case 86: // Do global fixes
                        originalUSFM = originalUSFM.replace(/\\k-e\\\*/g, ''); // Remove \k-e self-closed milestones
                        originalUSFM = originalUSFM.replace(/\\k-s.+?\\\*/g, ''); // Remove \k-s self-closed milestones
                        // Now find the desired C:V
                        foundChapter = false, foundVerse = false;_iterator2 = _createForOfIteratorHelper(originalUSFM.split('\n'));_context.prev = 90;_iterator2.s();case 92:if ((_step2 = _iterator2.n()).done) {_context.next = 104;break;}bookLine = _step2.value;if (!(!foundChapter && bookLine === "\\c ".concat(C))) {_context.next = 97;break;}foundChapter = true;return _context.abrupt("continue", 102);case 97:if (foundChapter && !foundVerse && bookLine.startsWith("\\v ".concat(V))) {foundVerse = true;bookLine = bookLine.substring(3 + V.length); // Delete verse number so below bit doesn’t fail
                        }if (!foundVerse) {_context.next = 102;break;}if (!(bookLine.startsWith('\\v ') || bookLine.startsWith('\\c '))) {_context.next = 101;break;}return _context.abrupt("break", 104);case 101: // Don’t go into the next verse or chapter
                        verseText += (bookLine.startsWith('\\f ') ? '' : ' ') + bookLine;case 102:_context.next = 92;break;case 104:_context.next = 109;break;case 106:_context.prev = 106;_context.t4 = _context["catch"](90);_iterator2.e(_context.t4);case 109:_context.prev = 109;_iterator2.f();return _context.finish(109);case 112:verseText = verseText.replace(/\\p/g, '').trim().replace(/ {2}/g, ' '); // debugLog(`Got verse text1: '${verseText}'`);
                        // Remove \w fields (just leaving the actual Bible text words)
                        ixW = verseText.indexOf('\\w ');while (ixW !== -1) {ixEnd = verseText.indexOf('\\w*', ixW);if (ixEnd !== -1) {field = verseText.substring(ixW + 3, ixEnd);bits = field.split('|');adjusted_field = bits[0];verseText = verseText.substring(0, ixW) + adjusted_field + verseText.substring(ixEnd + 3);} else {(0, _utilities.debugLog)("Missing \\w* in ".concat(bookID, " ").concat(C, ":").concat(V, " verseText: '").concat(verseText, "'"));verseText = verseText.replace(/\\w /g, '', 1); // Attempt to limp on
                          }ixW = verseText.indexOf('\\w ', ixW + 1); // Might be another one
                        } // debugLog(`Got verse text2: '${verseText}'`);
                        // Remove footnotes
                        verseText = verseText.replace(/\\f (.+?)\\f\*/g, ''); // Remove alternative versifications
                        verseText = verseText.replace(/\\va (.+?)\\va\*/g, ''); // debugLog(`Got verse text3: '${verseText}'`);
                        // Final clean-up (shouldn’t be necessary, but just in case)
                        verseText = verseText.replace(/ {2}/g, ' '); //parameterAssert(verseText.indexOf('\\w') === -1, `getOriginalPassage: Should be no \\w in ${bookID} ${C}:${V} '${verseText}'`);
                        //parameterAssert(verseText.indexOf('\\k') === -1, `getOriginalPassage: Should be no \\k in ${bookID} ${C}:${V} '${verseText}'`);
                        //parameterAssert(verseText.indexOf('x-') === -1, `getOriginalPassage: Should be no x- in ${bookID} ${C}:${V} '${verseText}'`);
                        //parameterAssert(verseText.indexOf('\\f') === -1, `getOriginalPassage: Should be no \\f in ${bookID} ${C}:${V} '${verseText}'`);
                        //parameterAssert(verseText.indexOf('\\x') === -1, `getOriginalPassage: Should be no \\x in ${bookID} ${C}:${V} '${verseText}'`);
                      case 118:return _context.abrupt("return", verseText);case 119:case "end":return _context.stop();}}}, _callee, null, [[11, 17], [26, 45, 48, 51], [61, 67], [74, 80], [90, 106, 109, 112]]);}));return _getOriginalPassage.apply(this, arguments);};getOriginalPassage = function _getOriginalPassage2(_x11, _x12, _x13, _x14) {return _getOriginalPassage.apply(this, arguments);};addNotice = function _addNotice(noticeObject) {// functionLog(`checkOriginalLanguageQuoteAndOccurrence Notice: (priority=${noticeObject.priority}) ${noticeObject.message}${characterIndex > 0 ? ` (at character ${noticeObject.characterIndex})` : ""}${noticeObject.excerpt ? ` ${noticeObject.excerpt}` : ""}${noticeObject.location}`);
              //parameterAssert(noticeObject.priority !== undefined, "cOLQ addNotice: 'priority' parameter should be defined");
              //parameterAssert(typeof noticeObject.priority === 'number', `cOLQ addNotice: 'priority' parameter should be a number not a '${typeof noticeObject.priority}': ${noticeObject.priority}`);
              //parameterAssert(noticeObject.message !== undefined, "cOLQ addNotice: 'message' parameter should be defined");
              //parameterAssert(typeof noticeObject.message === 'string', `cOLQ addNotice: 'message' parameter should be a string not a '${typeof noticeObject.message}': ${noticeObject.message}`);
              // //parameterAssert(characterIndex !== undefined, "cOLQ addNotice: 'characterIndex' parameter should be defined");
              if (noticeObject.characterIndex) {//parameterAssert(typeof noticeObject.characterIndex === 'number', `cOLQ addNotice: 'characterIndex' parameter should be a number not a '${typeof noticeObject.characterIndex}': ${noticeObject.characterIndex}`);
              } // //parameterAssert(excerpt !== undefined, "cOLQ addNotice: 'excerpt' parameter should be defined");
              if (noticeObject.excerpt) {//parameterAssert(typeof noticeObject.excerpt === 'string', `cOLQ addNotice: 'excerpt' parameter should be a string not a '${typeof noticeObject.excerpt}': ${noticeObject.excerpt} for ${noticeObject.priority}`);
              } //parameterAssert(noticeObject.location !== undefined, "cOLQ addNotice: 'location' parameter should be defined");
              //parameterAssert(typeof noticeObject.location === 'string', `cOLQ addNotice: 'location' parameter should be a string not a '${typeof noticeObject.location}': ${noticeObject.location}`);
              colqResult.noticeList.push(noticeObject);}; // Checks that the Hebrew/Greek quote can be found in the original texts
            // Also checks that the Occurrence is valid
            // bookID is a three-character UPPERCASE USFM book identifier or 'OBS'.
            // Note that the original language verse text can be passed in as
            //      checkingOptions?.originalLanguageVerseText.
            // Alternatively, we can fetch it from Door43 -- you can control this with:
            //      checkingOptions?.originalLanguageRepoUsername
            //      (UHB or UGNT will be used for the repo name)
            //      checkingOptions?.originalLanguageRepoBranch (or tag)
            // functionLog(`checkOriginalLanguageQuoteAndOccurrence v${QUOTE_VALIDATOR_VERSION_STRING} ${languageCode}, ${repoCode}, ${fieldName}, (${fieldText.length}) '${fieldText}', ${occurrenceString}, ${bookID} ${C}:${V} ${givenLocation}, …)…`);
            //parameterAssert(languageCode !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'languageCode' parameter should be defined");
            //parameterAssert(typeof languageCode === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'languageCode' parameter should be a string not a '${typeof languageCode}'`);
            //parameterAssert(repoCode !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'repoCode' parameter should be defined");
            //parameterAssert(typeof repoCode === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'repoCode' parameter should be a string not a '${typeof repoCode}'`);
            //parameterAssert(REPO_CODES_LIST.includes(repoCode), `checkOriginalLanguageQuoteAndOccurrence: 'repoCode' parameter should not be '${repoCode}'`);
            //parameterAssert(fieldName !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'fieldName' parameter should be defined");
            //parameterAssert(typeof fieldName === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'fieldName' parameter should be a string not a '${typeof fieldName}'`);
            //parameterAssert(fieldText !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'fieldText' parameter should be defined");
            //parameterAssert(typeof fieldText === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'fieldText' parameter should be a string not a '${typeof fieldText}'`);
            //parameterAssert(fieldText.length >= 1, `checkOriginalLanguageQuoteAndOccurrence: 'fieldText' parameter should have text not ${fieldText.length} characters`);
            //parameterAssert(occurrenceString !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'occurrenceString' parameter should be defined");
            //parameterAssert(typeof occurrenceString === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'occurrenceString' parameter should be a string not a '${typeof occurrenceString}'`);
            //parameterAssert(bookID !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'bookID' parameter should be defined");
            //parameterAssert(typeof bookID === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'bookID' parameter should be a string not a '${typeof bookID}'`);
            //parameterAssert(bookID.length === 3, `checkOriginalLanguageQuoteAndOccurrence: 'bookID' parameter should be three characters long not ${bookID.length}`);
            //parameterAssert(bookID.toUpperCase() === bookID, `checkOriginalLanguageQuoteAndOccurrence: 'bookID' parameter should be UPPERCASE not '${bookID}'`);
            //parameterAssert(bookID === 'OBS' || books.isValidBookID(bookID), `checkOriginalLanguageQuoteAndOccurrence: '${bookID}' is not a valid USFM book identifier`);
            //parameterAssert(C !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'C' parameter should be defined");
            //parameterAssert(typeof C === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'C' parameter should be a string not a '${typeof C}'`);
            //parameterAssert(V !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'V' parameter should be defined");
            //parameterAssert(typeof V === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'V' parameter should be a string not a '${typeof V}'`);
            //parameterAssert(givenLocation !== undefined, "checkOriginalLanguageQuoteAndOccurrence: 'givenLocation' parameter should be defined");
            //parameterAssert(typeof givenLocation === 'string', `checkOriginalLanguageQuoteAndOccurrence: 'givenLocation' parameter should be a string not a '${typeof givenLocation}'`);
            discontiguousDivider = repoCode === 'TN' ? '…' : ' & ';wrongDiscontiguousDivider = repoCode === 'TN' ? '&' : '…'; // leave out the spaces around ampersand
            // debugLog(`Got discontiguousDivider='${discontiguousDivider}' for ${repoCode}`);
            ourLocation = givenLocation;if (ourLocation && ourLocation[0] !== ' ') ourLocation = " ".concat(ourLocation);colqResult = { noticeList: [] };try {excerptLength = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.excerptLength;} catch (gcELerror) {}if (typeof excerptLength !== 'number' || isNaN(excerptLength)) {excerptLength = _defaults.DEFAULT_EXCERPT_LENGTH; // debugLog(`Using default excerptLength=${excerptLength}`);
            } // else
            // debugLog(`Using supplied excerptLength=${excerptLength}`, `cf. default=${DEFAULT_EXCERPT_LENGTH}`);
            excerptHalfLength = Math.floor(excerptLength / 2); // rounded down
            excerptHalfLengthPlus = Math.floor((excerptLength + 1) / 2); // rounded up
            // debugLog(`Using excerptHalfLength=${excerptHalfLength}`, `excerptHalfLengthPlus=${excerptHalfLengthPlus}`);
            occurrence = 1;try {occurrence = (0, _utilities.ourParseInt)(occurrenceString);} catch (_unused) {(0, _utilities.dataAssert)(false, "NOTE: We got occurrence=".concat(occurrence, " from ").concat(C, ":").concat(V, " '").concat(occurrenceString, "'"));} // errors in this field are noted elsewhere
            // if fieldText.lstrip() !== fieldText:
            //     addNotice({priority:0, message:`Unexpected whitespace at start of ${TNid} '${fieldText}'")
            // if fieldText.rstrip() !== fieldText:
            //     addNotice({priority:0, message:`Unexpected whitespace at end of ${TNid} '${fieldText}'")
            // fieldText = fieldText.strip() # so we don’t get consequential errors
            if ((characterIndex = fieldText.indexOf(wrongDiscontiguousDivider)) !== -1) {excerpt = (characterIndex > excerptHalfLength ? '…' : '') + fieldText.substring(characterIndex - excerptHalfLength, characterIndex + excerptHalfLengthPlus) + (characterIndex + excerptHalfLengthPlus < fieldText.length ? '…' : '');addNotice({ priority: 918, message: "Seems like the wrong divider for discontiguous quote segments", details: "expected \u25D7".concat(discontiguousDivider, "\u25D6"), characterIndex: characterIndex, excerpt: excerpt, location: ourLocation });}if (discontiguousDivider === '…' && (characterIndex = fieldText.indexOf('...')) >= 0) {// debugLog(`Bad ellipse characters in '${fieldText}'`);
              _excerpt2 = (characterIndex > excerptHalfLength ? '…' : '') + fieldText.substring(characterIndex - excerptHalfLength, characterIndex + excerptHalfLengthPlus) + (characterIndex + excerptHalfLengthPlus < fieldText.length ? '…' : '');addNotice({ priority: 159, message: "Should use proper ellipse character (not periods)", characterIndex: characterIndex, excerpt: _excerpt2, location: ourLocation });}if (fieldText.indexOf(discontiguousDivider) >= 0) {quoteBits = fieldText.split(discontiguousDivider);if ((characterIndex = fieldText.indexOf(" ".concat(discontiguousDivider))) >= 0 || (characterIndex = fieldText.indexOf("".concat(discontiguousDivider, " "))) >= 0) {// debugLog(`Unexpected space(s) beside ellipse in '${fieldText}'`);
                _excerpt3 = (characterIndex > excerptHalfLength ? '…' : '') + fieldText.substring(characterIndex - excerptHalfLength, characterIndex + excerptHalfLengthPlus) + (characterIndex + excerptHalfLengthPlus < fieldText.length ? '…' : '');addNotice({ priority: 158, message: "Unexpected space(s) beside divider ".concat(discontiguousDivider), characterIndex: characterIndex, excerpt: _excerpt3, location: ourLocation });} // } else if (fieldText.indexOf('↔') >= 0) {
              //     quoteBits = fieldText.split('↔');
              //     if ((characterIndex = fieldText.indexOf(' ↔')) >= 0 || (characterIndex = fieldText.indexOf('↔ ')) >= 0) {
              //         // debugLog(`Unexpected space(s) beside ellipse in '${fieldText}'`);
              //         const excerpt = (characterIndex > excerptHalfLength ? '…' : '') + fieldText.substring(characterIndex - excerptHalfLength, characterIndex + excerptHalfLengthPlus) + (characterIndex + excerptHalfLengthPlus < fieldText.length ? '…' : '');
              //         addNotice({ priority: 157, message: `Unexpected space(s) beside divider ${discontiguousDivider}`, characterIndex, excerpt, location: ourLocation });
              //     }
            } else if (discontiguousDivider === '…' && fieldText.indexOf('...') >= 0) {// Yes, we still actually allow this
              quoteBits = fieldText.split('...');if ((characterIndex = fieldText.indexOf(' ...')) >= 0 || (characterIndex = fieldText.indexOf('... ')) >= 0) {// debugLog(`Unexpected space(s) beside ellipse characters in '${fieldText}'`);
                _excerpt4 = (characterIndex > excerptHalfLength ? '…' : '') + fieldText.substring(characterIndex - excerptHalfLength, characterIndex + excerptHalfLengthPlus) + (characterIndex + excerptHalfLengthPlus < fieldText.length ? '…' : '');addNotice({ priority: 156, message: "Unexpected space(s) beside ellipse characters", characterIndex: characterIndex, excerpt: _excerpt4, location: ourLocation });}} // debugLog(`Got quoteBits=${quoteBits}`);
            // Find the verse text in the original language
            try {verseText = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.originalLanguageVerseText;} catch (gcVTerror) {}if (verseText) {_context2.next = 31;break;}if (!(checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.disableAllLinkFetchingFlag)) {_context2.next = 25;break;}return _context2.abrupt("return", colqResult);case 25:_context2.next = 27;return getOriginalPassage(bookID, C, V, checkingOptions);case 27:verseText = _context2.sent;if (verseText) {_context2.next = 31;break;}addNotice({ priority: 851, message: bookID === 'OBS' ? "Unable to load OBS story text" : "Unable to load original language verse text", location: ourLocation });return _context2.abrupt("return", colqResult);case 31: // Now check if the quote can be found in the verse text
            if (quoteBits) {// it had an ellipsis
              // //parameterAssert(occurrence === 1, `Oh -- can get '${fieldText}' with occurrence=${occurrence} in ${bookID} ${C}:${V}`);
              if (occurrence !== 1) {addNotice({ priority: 50, message: "Is this quote/occurrence correct???", details: "Occurrence=".concat(occurrence), excerpt: fieldText, location: ourLocation });} // TODO: Are we checking the correct occurrence below ???
              numQuoteBits = quoteBits.length;if (numQuoteBits >= 2) {quoteIndex = -1; // These parts have to be in order, i.e., found in the verse one AFTER the other
                for (bitIndex = 0; bitIndex < numQuoteBits; bitIndex++) {// debugLog(`warnForNotFoundQuoteSegment: checking quote part ${bitIndex} '${quoteBits[bitIndex]}' from '${fieldText}' against '${verseText.substring(quoteIndex)}' from '${verseText}'`)
                  partDescription = void 0;if (numQuoteBits === 1) partDescription = '';else if (bitIndex === 0) partDescription = 'beginning';else if (bitIndex === numQuoteBits - 1) partDescription = 'end';else partDescription = "middle".concat(numQuoteBits > 3 ? bitIndex : '');if ((quoteIndex = verseText.indexOf(quoteBits[bitIndex], quoteIndex + 1)) < 0) {// this is what we really want to catch
                    // If the quote has multiple parts, create a description of the current part
                    _excerpt5 = "".concat(partDescription ? '(' + partDescription + ' quote portion)' : '', " '").concat(quoteBits[bitIndex], "'");if (verseText.indexOf(quoteBits[bitIndex]) >= 0) {(0, _utilities.logicAssert)(bitIndex > 0, "This shouldn't happen for bitIndex of zero!"); // debugLog(`914, Unable to find '${fieldText}' ${numQuoteBits === 1 ? '' : `'${quoteBits[bitIndex]}' `}${partDescription ? '(' + partDescription + ') ' : ''}in '${verseText}'`);
                      addNotice({ priority: 914, message: "Unable to find original language quote portion in the right place in the verse text", details: "verse text \u25D7".concat(verseText, "\u25D6"), excerpt: _excerpt5, location: ourLocation });} else {// debugLog(`915, Unable to find '${fieldText}' ${numQuoteBits === 1 ? '' : `'${quoteBits[bitIndex]}' `}${partDescription ? '(' + partDescription + ') ' : ''}in '${verseText}'`);
                      warnForNotFoundQuoteSegment(fieldText, partDescription, occurrenceString, verseText, ourLocation); // addNotice({ priority: 915, message: "Unable to find original language quote portion in verse text", details: `verse text ◗${verseText}◖`, excerpt, location: ourLocation });
                    }} else {// We found this bit
                    // debugLog(`Found ${C}:${V} origQuote portion ${bitIndex} '${quoteBits[bitIndex]}' at ${quoteIndex} (num text chars = ${verseText.length})`);
                    verseTextBits = verseText.split(quoteBits[bitIndex]); // NOTE: can split (badly) on short strings (like δὲ or εἰ) mid-word
                    checkFoundQuoteSegment(quoteBits[bitIndex], partDescription, occurrenceString, "".concat(verseTextBits[occurrence - 1]).concat(quoteBits[bitIndex]).concat(verseTextBits[occurrence]), verseText, ourLocation);}}} else // < 2
                addNotice({ priority: 815, message: "Divider without surrounding snippet", location: ourLocation });} else {// Only a single quote (no discontiguousDivider)
              if (verseText.indexOf(fieldText) >= 0) {if (occurrence > 1) {// functionLog(`checkOriginalLanguageQuoteAndOccurrence is checking for ${occurrence} occurrences of ${fieldText}`);
                  _verseTextBits = verseText.split(fieldText); // NOTE: can split (badly) on short strings (like δὲ or εἰ) mid-word
                  actualNumOccurrences = _verseTextBits.length - 1;if (occurrence > actualNumOccurrences) {// There's not enough of them
                    actualOccurrencesText = actualNumOccurrences === 0 ? 'no' : "only ".concat(actualNumOccurrences);_excerpt6 = fieldText.substring(0, excerptHalfLength) + (fieldText.length > 2 * excerptHalfLength ? '…' : '') + fieldText.substring(fieldText.length - excerptHalfLength, fieldText.length);addNotice({ priority: 917, message: "Unable to find duplicate original language quote in verse text", details: "occurrence=".concat(occurrenceString, " but ").concat(actualOccurrencesText, " occurrence").concat(actualNumOccurrences === 1 ? '' : 's', " found, passage \u25D7").concat(verseText, "\u25D6"), excerpt: _excerpt6, location: ourLocation });} else {checkFoundQuoteSegment(fieldText, '', occurrenceString, "".concat(_verseTextBits[occurrence - 1]).concat(fieldText).concat(_verseTextBits[occurrence]), verseText, ourLocation);}} else {// We only need to check for one occurrence
                  // TODO: The error in the next line has been notified elsewhere, but should we try to handle it more intelligently here ???
                  (0, _utilities.logicAssert)(occurrence === 1 || occurrence === -1, "Expected ".concat(C, ":").concat(V, " occurrence to be 1 or -1 not ").concat(occurrence, " from '").concat(occurrenceString, "' for ").concat(C, ":").concat(V, " '").concat(fieldText, "'")); // Double check that it doesn’t start/stop in the middle of a word
                  // debugLog(`Here with fieldText=${fieldText} and verseText=${verseText}`);
                  // debugLog(`remainingBits=${JSON.stringify(remainingBits)}`);
                  checkFoundQuoteSegment(fieldText, '', occurrenceString, verseText, verseText, ourLocation);}} else {// can’t find the given text
                // debugLog(`916, Unable to find '${fieldText}' in '${verseText}'`);
                warnForNotFoundQuoteSegment(fieldText, '', occurrenceString, verseText, ourLocation);}} // functionLog(`checkOriginalLanguageQuoteAndOccurrence is returning ${ JSON.stringify(colqResult) }`);
            return _context2.abrupt("return", colqResult);case 33:case "end":return _context2.stop();}}}, _callee2);}));return _checkOriginalLanguageQuoteAndOccurrence.apply(this, arguments);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL29yaWctcXVvdGUtY2hlY2suanMiXSwibmFtZXMiOlsiY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlIiwibGFuZ3VhZ2VDb2RlIiwicmVwb0NvZGUiLCJmaWVsZE5hbWUiLCJmaWVsZFRleHQiLCJvY2N1cnJlbmNlU3RyaW5nIiwiYm9va0lEIiwiQyIsIlYiLCJnaXZlbkxvY2F0aW9uIiwiY2hlY2tpbmdPcHRpb25zIiwiYWRkTm90aWNlIiwiZ2V0T3JpZ2luYWxQYXNzYWdlIiwiY2hlY2tGb3VuZFF1b3RlU2VnbWVudCIsIndhcm5Gb3JOb3RGb3VuZFF1b3RlU2VnbWVudCIsIm5vdEZvdW5kUXVvdGVTZWdtZW50IiwicGFydERlc2NyaXB0aW9uIiwiZnVsbFZlcnNlVGV4dCIsImxvY2F0aW9uIiwiZXhjZXJwdCIsIm5vQnJlYWtTcGFjZVRleHQiLCJpbmRleE9mIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImV4Y2VycHRMZW5ndGgiLCJsZW5ndGgiLCJwcmlvcml0eSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwib3VyTG9jYXRpb24iLCJlbmRzV2l0aCIsImV4Y2VycHRIYWxmTGVuZ3RoIiwiZm91bmRRdW90ZVNlZ21lbnQiLCJwYXJ0aWFsVmVyc2VUZXh0IiwicmVtYWluaW5nVmVyc2VCaXRzIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJkaXNjb250aWd1b3VzRGl2aWRlciIsInByZWNlZGluZ0NoYXIiLCJwcmVjZWRlckRlc2NyaXB0aW9uIiwiY2hhckNvZGVBdCIsInRvU3RyaW5nIiwic2VhcmNoIiwiY2hhcmFjdGVySW5kZXgiLCJmb2xsb3dpbmdDaGFyIiwiYWxsb3dlZFdvcmRFbmRDaGFycyIsImVzY2FwZWRGb3VuZFF1b3RlU2VnbWVudCIsImZvbGxvd2luZ1JlZ2V4IiwiUmVnRXhwIiwidXNlcm5hbWUiLCJvcmlnaW5hbExhbmd1YWdlUmVwb1VzZXJuYW1lIiwicWNvRXJyb3IiLCJicmFuY2giLCJvcmlnaW5hbExhbmd1YWdlUmVwb0JyYW5jaCIsInFjdW5FcnJvciIsImdldEZpbGVfIiwiZ2V0RmlsZSIsImNhY2hlZEdldEZpbGUiLCJ2ZXJzZVRleHQiLCJPQlNSZXBvTmFtZSIsImFkakMiLCJhZGpWIiwiT0JTUGF0aG5hbWUiLCJyZXBvc2l0b3J5IiwicGF0aCIsIm9yaWdpbmFsTWFya2Rvd24iLCJjb25zb2xlIiwiZXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZXh0cmEiLCJnb3RJdCIsInNlYXJjaFN0cmluZyIsImxpbmUiLCJib29rTnVtYmVyQW5kTmFtZSIsImJvb2tzIiwidXNmbU51bWJlck5hbWUiLCJ3aGljaFRlc3RhbWVudCIsInRlc3RhbWVudCIsImJOTmVycm9yIiwiaXNWYWxpZEJvb2tJRCIsIm9yaWdpbmFsTGFuZ3VhZ2VSZXBvTGFuZ3VhZ2VDb2RlIiwib3JpZ2luYWxMYW5ndWFnZVJlcG9Db2RlIiwib3JpZ2luYWxMYW5ndWFnZVJlcG9OYW1lIiwidG9Mb3dlckNhc2UiLCJmaWxlbmFtZSIsIm9yaWdpbmFsVVNGTSIsImZvdW5kQ2hhcHRlciIsImZvdW5kVmVyc2UiLCJib29rTGluZSIsInN0YXJ0c1dpdGgiLCJ0cmltIiwiaXhXIiwiaXhFbmQiLCJmaWVsZCIsImJpdHMiLCJhZGp1c3RlZF9maWVsZCIsIm5vdGljZU9iamVjdCIsImNvbHFSZXN1bHQiLCJub3RpY2VMaXN0IiwicHVzaCIsIndyb25nRGlzY29udGlndW91c0RpdmlkZXIiLCJnY0VMZXJyb3IiLCJpc05hTiIsIkRFRkFVTFRfRVhDRVJQVF9MRU5HVEgiLCJNYXRoIiwiZmxvb3IiLCJleGNlcnB0SGFsZkxlbmd0aFBsdXMiLCJvY2N1cnJlbmNlIiwicXVvdGVCaXRzIiwib3JpZ2luYWxMYW5ndWFnZVZlcnNlVGV4dCIsImdjVlRlcnJvciIsImRpc2FibGVBbGxMaW5rRmV0Y2hpbmdGbGFnIiwibnVtUXVvdGVCaXRzIiwicXVvdGVJbmRleCIsImJpdEluZGV4IiwidmVyc2VUZXh0Qml0cyIsImFjdHVhbE51bU9jY3VycmVuY2VzIiwiYWN0dWFsT2NjdXJyZW5jZXNUZXh0Il0sIm1hcHBpbmdzIjoic2VBQUE7O0FBRUE7QUFDQTs7QUFFQSx3Qzs7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7QUFDc0JBLHVDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxZnRCO3dLQXJmTyxrQkFBdURDLFlBQXZELEVBQXFFQyxRQUFyRSxFQUErRUMsU0FBL0UsRUFBMEZDLFNBQTFGLEVBQXFHQyxnQkFBckcsRUFBdUhDLE1BQXZILEVBQStIQyxDQUEvSCxFQUFrSUMsQ0FBbEksRUFBcUlDLGFBQXJJLEVBQW9KQyxlQUFwSixpRkFnRE1DLFNBaEROLEVBd0VZQyxrQkF4RVosdUJBb09NQyxzQkFwT04sRUFpVE1DLDJCQWpUTix5YUFpVE1BLDJCQWpUTixrQ0FpVGtDQyxvQkFqVGxDLEVBaVR3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ZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGJvb2tzIGZyb20gJy4uL2NvcmUvYm9va3MvYm9va3MnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBERUZBVUxUX0VYQ0VSUFRfTEVOR1RILCBSRVBPX0NPREVTX0xJU1QgfSBmcm9tICcuL2RlZmF1bHRzJ1xuaW1wb3J0IHsgY2FjaGVkR2V0RmlsZSB9IGZyb20gJy4uL2NvcmUvZ2V0QXBpJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHsgZnVuY3Rpb25Mb2csIGRlYnVnTG9nLCBwYXJhbWV0ZXJBc3NlcnQsIGxvZ2ljQXNzZXJ0LCBkYXRhQXNzZXJ0LCBvdXJQYXJzZUludCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuXG4vLyBjb25zdCBRVU9URV9WQUxJREFUT1JfVkVSU0lPTl9TVFJJTkcgPSAnMC45LjcnO1xuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZUNvZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXBvQ29kZVxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkVGV4dFxuICogQHBhcmFtIHtzdHJpbmd9IG9jY3VycmVuY2VTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBib29rSURcbiAqIEBwYXJhbSB7c3RyaW5nfSBDXG4gKiBAcGFyYW0ge3N0cmluZ30gVlxuICogQHBhcmFtIHtzdHJpbmd9IGdpdmVuTG9jYXRpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBjaGVja2luZ09wdGlvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZShsYW5ndWFnZUNvZGUsIHJlcG9Db2RlLCBmaWVsZE5hbWUsIGZpZWxkVGV4dCwgb2NjdXJyZW5jZVN0cmluZywgYm9va0lELCBDLCBWLCBnaXZlbkxvY2F0aW9uLCBjaGVja2luZ09wdGlvbnMpIHtcbiAgICAvLyBDaGVja3MgdGhhdCB0aGUgSGVicmV3L0dyZWVrIHF1b3RlIGNhbiBiZSBmb3VuZCBpbiB0aGUgb3JpZ2luYWwgdGV4dHNcblxuICAgIC8vIEFsc28gY2hlY2tzIHRoYXQgdGhlIE9jY3VycmVuY2UgaXMgdmFsaWRcblxuICAgIC8vIGJvb2tJRCBpcyBhIHRocmVlLWNoYXJhY3RlciBVUFBFUkNBU0UgVVNGTSBib29rIGlkZW50aWZpZXIgb3IgJ09CUycuXG5cbiAgICAvLyBOb3RlIHRoYXQgdGhlIG9yaWdpbmFsIGxhbmd1YWdlIHZlcnNlIHRleHQgY2FuIGJlIHBhc3NlZCBpbiBhc1xuICAgIC8vICAgICAgY2hlY2tpbmdPcHRpb25zPy5vcmlnaW5hbExhbmd1YWdlVmVyc2VUZXh0LlxuICAgIC8vIEFsdGVybmF0aXZlbHksIHdlIGNhbiBmZXRjaCBpdCBmcm9tIERvb3I0MyAtLSB5b3UgY2FuIGNvbnRyb2wgdGhpcyB3aXRoOlxuICAgIC8vICAgICAgY2hlY2tpbmdPcHRpb25zPy5vcmlnaW5hbExhbmd1YWdlUmVwb1VzZXJuYW1lXG4gICAgLy8gICAgICAoVUhCIG9yIFVHTlQgd2lsbCBiZSB1c2VkIGZvciB0aGUgcmVwbyBuYW1lKVxuICAgIC8vICAgICAgY2hlY2tpbmdPcHRpb25zPy5vcmlnaW5hbExhbmd1YWdlUmVwb0JyYW5jaCAob3IgdGFnKVxuXG4gICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZSB2JHtRVU9URV9WQUxJREFUT1JfVkVSU0lPTl9TVFJJTkd9ICR7bGFuZ3VhZ2VDb2RlfSwgJHtyZXBvQ29kZX0sICR7ZmllbGROYW1lfSwgKCR7ZmllbGRUZXh0Lmxlbmd0aH0pICcke2ZpZWxkVGV4dH0nLCAke29jY3VycmVuY2VTdHJpbmd9LCAke2Jvb2tJRH0gJHtDfToke1Z9ICR7Z2l2ZW5Mb2NhdGlvbn0sIOKApinigKZgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChsYW5ndWFnZUNvZGUgIT09IHVuZGVmaW5lZCwgXCJjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdsYW5ndWFnZUNvZGUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbGFuZ3VhZ2VDb2RlID09PSAnc3RyaW5nJywgYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ2xhbmd1YWdlQ29kZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgbGFuZ3VhZ2VDb2RlfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChyZXBvQ29kZSAhPT0gdW5kZWZpbmVkLCBcImNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ3JlcG9Db2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIHJlcG9Db2RlID09PSAnc3RyaW5nJywgYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ3JlcG9Db2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiByZXBvQ29kZX0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoUkVQT19DT0RFU19MSVNULmluY2x1ZGVzKHJlcG9Db2RlKSwgYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ3JlcG9Db2RlJyBwYXJhbWV0ZXIgc2hvdWxkIG5vdCBiZSAnJHtyZXBvQ29kZX0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGROYW1lICE9PSB1bmRlZmluZWQsIFwiY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnZmllbGROYW1lJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkTmFtZSA9PT0gJ3N0cmluZycsIGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdmaWVsZE5hbWUnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGZpZWxkTmFtZX0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGRUZXh0ICE9PSB1bmRlZmluZWQsIFwiY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnZmllbGRUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIGZpZWxkVGV4dCA9PT0gJ3N0cmluZycsIGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdmaWVsZFRleHQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGZpZWxkVGV4dH0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoZmllbGRUZXh0Lmxlbmd0aCA+PSAxLCBgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnZmllbGRUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGhhdmUgdGV4dCBub3QgJHtmaWVsZFRleHQubGVuZ3RofSBjaGFyYWN0ZXJzYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQob2NjdXJyZW5jZVN0cmluZyAhPT0gdW5kZWZpbmVkLCBcImNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ29jY3VycmVuY2VTdHJpbmcnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygb2NjdXJyZW5jZVN0cmluZyA9PT0gJ3N0cmluZycsIGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdvY2N1cnJlbmNlU3RyaW5nJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBvY2N1cnJlbmNlU3RyaW5nfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQgIT09IHVuZGVmaW5lZCwgXCJjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgYm9va0lEID09PSAnc3RyaW5nJywgYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgYm9va0lEfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQubGVuZ3RoID09PSAzLCBgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnYm9va0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIHRocmVlIGNoYXJhY3RlcnMgbG9uZyBub3QgJHtib29rSUQubGVuZ3RofWApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGJvb2tJRC50b1VwcGVyQ2FzZSgpID09PSBib29rSUQsIGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgVVBQRVJDQVNFIG5vdCAnJHtib29rSUR9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGJvb2tJRCA9PT0gJ09CUycgfHwgYm9va3MuaXNWYWxpZEJvb2tJRChib29rSUQpLCBgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnJHtib29rSUR9JyBpcyBub3QgYSB2YWxpZCBVU0ZNIGJvb2sgaWRlbnRpZmllcmApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KEMgIT09IHVuZGVmaW5lZCwgXCJjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdDJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIEMgPT09ICdzdHJpbmcnLCBgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnQycgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgQ30nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoViAhPT0gdW5kZWZpbmVkLCBcImNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ1YnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgViA9PT0gJ3N0cmluZycsIGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2U6ICdWJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBWfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChnaXZlbkxvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlOiAnZ2l2ZW5Mb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBnaXZlbkxvY2F0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZTogJ2dpdmVuTG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGdpdmVuTG9jYXRpb259J2ApO1xuXG4gICAgY29uc3QgZGlzY29udGlndW91c0RpdmlkZXIgPSAocmVwb0NvZGUgPT09ICdUTicpID8gJ+KApicgOiAnICYgJztcbiAgICBjb25zdCB3cm9uZ0Rpc2NvbnRpZ3VvdXNEaXZpZGVyID0gKHJlcG9Db2RlID09PSAnVE4nKSA/ICcmJyA6ICfigKYnOyAvLyBsZWF2ZSBvdXQgdGhlIHNwYWNlcyBhcm91bmQgYW1wZXJzYW5kXG4gICAgLy8gZGVidWdMb2coYEdvdCBkaXNjb250aWd1b3VzRGl2aWRlcj0nJHtkaXNjb250aWd1b3VzRGl2aWRlcn0nIGZvciAke3JlcG9Db2RlfWApO1xuXG4gICAgbGV0IG91ckxvY2F0aW9uID0gZ2l2ZW5Mb2NhdGlvbjtcbiAgICBpZiAob3VyTG9jYXRpb24gJiYgb3VyTG9jYXRpb25bMF0gIT09ICcgJykgb3VyTG9jYXRpb24gPSBgICR7b3VyTG9jYXRpb259YDtcblxuICAgIGNvbnN0IGNvbHFSZXN1bHQgPSB7IG5vdGljZUxpc3Q6IFtdIH07XG5cbiAgICBmdW5jdGlvbiBhZGROb3RpY2Uobm90aWNlT2JqZWN0KSB7XG4gICAgICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2UgTm90aWNlOiAocHJpb3JpdHk9JHtub3RpY2VPYmplY3QucHJpb3JpdHl9KSAke25vdGljZU9iamVjdC5tZXNzYWdlfSR7Y2hhcmFjdGVySW5kZXggPiAwID8gYCAoYXQgY2hhcmFjdGVyICR7bm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4fSlgIDogXCJcIn0ke25vdGljZU9iamVjdC5leGNlcnB0ID8gYCAke25vdGljZU9iamVjdC5leGNlcnB0fWAgOiBcIlwifSR7bm90aWNlT2JqZWN0LmxvY2F0aW9ufWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChub3RpY2VPYmplY3QucHJpb3JpdHkgIT09IHVuZGVmaW5lZCwgXCJjT0xRIGFkZE5vdGljZTogJ3ByaW9yaXR5JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QucHJpb3JpdHkgPT09ICdudW1iZXInLCBgY09MUSBhZGROb3RpY2U6ICdwcmlvcml0eScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIG51bWJlciBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LnByaW9yaXR5fSc6ICR7bm90aWNlT2JqZWN0LnByaW9yaXR5fWApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChub3RpY2VPYmplY3QubWVzc2FnZSAhPT0gdW5kZWZpbmVkLCBcImNPTFEgYWRkTm90aWNlOiAnbWVzc2FnZScgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0Lm1lc3NhZ2UgPT09ICdzdHJpbmcnLCBgY09MUSBhZGROb3RpY2U6ICdtZXNzYWdlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QubWVzc2FnZX0nOiAke25vdGljZU9iamVjdC5tZXNzYWdlfWApO1xuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChjaGFyYWN0ZXJJbmRleCAhPT0gdW5kZWZpbmVkLCBcImNPTFEgYWRkTm90aWNlOiAnY2hhcmFjdGVySW5kZXgnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgaWYgKG5vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleCkgeyAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4ID09PSAnbnVtYmVyJywgYGNPTFEgYWRkTm90aWNlOiAnY2hhcmFjdGVySW5kZXgnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBudW1iZXIgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleH0nOiAke25vdGljZU9iamVjdC5jaGFyYWN0ZXJJbmRleH1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChleGNlcnB0ICE9PSB1bmRlZmluZWQsIFwiY09MUSBhZGROb3RpY2U6ICdleGNlcnB0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIGlmIChub3RpY2VPYmplY3QuZXhjZXJwdCkgeyAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LmV4Y2VycHQgPT09ICdzdHJpbmcnLCBgY09MUSBhZGROb3RpY2U6ICdleGNlcnB0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QuZXhjZXJwdH0nOiAke25vdGljZU9iamVjdC5leGNlcnB0fSBmb3IgJHtub3RpY2VPYmplY3QucHJpb3JpdHl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LmxvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiY09MUSBhZGROb3RpY2U6ICdsb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LmxvY2F0aW9uID09PSAnc3RyaW5nJywgYGNPTFEgYWRkTm90aWNlOiAnbG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5sb2NhdGlvbn0nOiAke25vdGljZU9iamVjdC5sb2NhdGlvbn1gKTtcbiAgICAgICAgY29scVJlc3VsdC5ub3RpY2VMaXN0LnB1c2gobm90aWNlT2JqZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBib29rSUQgLS0gVVNGTSBib29rIElEIG9yICdPQlMnXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IEMgLS0gY2hhcHRlciBvciBzdG9yeSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gViAtLSB2ZXJzZSBvciBmcmFtZSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2hlY2tpbmdPcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0T3JpZ2luYWxQYXNzYWdlKGJvb2tJRCwgQywgViwgY2hlY2tpbmdPcHRpb25zKSB7XG4gICAgICAgIC8vIFRPRE86IENhY2hlIHRoZXNlID8/P1xuXG4gICAgICAgIC8vIGZ1bmN0aW9uTG9nKGBnZXRPcmlnaW5hbFBhc3NhZ2UoJHtib29rSUR9LCAke0N9LCAke1Z9KeKApmApO1xuICAgICAgICBsZXQgdXNlcm5hbWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1c2VybmFtZSA9IGNoZWNraW5nT3B0aW9ucz8ub3JpZ2luYWxMYW5ndWFnZVJlcG9Vc2VybmFtZTtcbiAgICAgICAgfSBjYXRjaCAocWNvRXJyb3IpIHsgfVxuICAgICAgICBpZiAoIXVzZXJuYW1lKSB1c2VybmFtZSA9IGxhbmd1YWdlQ29kZSA9PT0gJ2VuJyA/ICd1bmZvbGRpbmdXb3JkJyA6ICdEb29yNDMtQ2F0YWxvZyc7IC8vID8/PyAhISFcbiAgICAgICAgbGV0IGJyYW5jaDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJyYW5jaCA9IGNoZWNraW5nT3B0aW9ucz8ub3JpZ2luYWxMYW5ndWFnZVJlcG9CcmFuY2g7XG4gICAgICAgIH0gY2F0Y2ggKHFjdW5FcnJvcikgeyB9XG4gICAgICAgIGlmICghYnJhbmNoKSBicmFuY2ggPSAnbWFzdGVyJztcbiAgICAgICAgY29uc3QgZ2V0RmlsZV8gPSAoY2hlY2tpbmdPcHRpb25zICYmIGNoZWNraW5nT3B0aW9ucz8uZ2V0RmlsZSkgPyBjaGVja2luZ09wdGlvbnM/LmdldEZpbGUgOiBjYWNoZWRHZXRGaWxlO1xuXG4gICAgICAgIGxldCB2ZXJzZVRleHQgPSAnJztcbiAgICAgICAgaWYgKGJvb2tJRCA9PT0gJ09CUycpIHtcbiAgICAgICAgICAgIGxldCBvcmlnaW5hbE1hcmtkb3duO1xuICAgICAgICAgICAgY29uc3QgT0JTUmVwb05hbWUgPSBgJHtsYW5ndWFnZUNvZGV9X29ic2A7XG4gICAgICAgICAgICBjb25zdCBhZGpDID0gQy5sZW5ndGggPT09IDIgPyBDIDogJzAnICsgQztcbiAgICAgICAgICAgIGNvbnN0IGFkalYgPSBWLmxlbmd0aCA9PT0gMiA/IFYgOiAnMCcgKyBWO1xuICAgICAgICAgICAgY29uc3QgT0JTUGF0aG5hbWUgPSBgY29udGVudC8ke2FkakN9Lm1kYDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxNYXJrZG93biA9IGF3YWl0IGdldEZpbGVfKHsgdXNlcm5hbWUsIHJlcG9zaXRvcnk6IE9CU1JlcG9OYW1lLCBwYXRoOiBPQlNQYXRobmFtZSwgYnJhbmNoIH0pO1xuICAgICAgICAgICAgICAgIC8vIGRlYnVnTG9nKFwiRmV0Y2hlZCBmaWxlQ29udGVudCBmb3JcIiwgT0JTUmVwb05hbWUsIE9CU1BhdGhuYW1lLCB0eXBlb2Ygb3JpZ2luYWxNYXJrZG93biwgb3JpZ2luYWxNYXJrZG93bi5sZW5ndGgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZ2NVSEJlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYGdldE9yaWdpbmFsUGFzc2FnZSgke2Jvb2tJRH0sICR7Q306JHtWfSwgJHtKU09OLnN0cmluZ2lmeShjaGVja2luZ09wdGlvbnMpfSkgZmFpbGVkIHRvIGxvYWQgVUhCYCwgdXNlcm5hbWUsIGxhbmd1YWdlQ29kZSwgT0JTUGF0aG5hbWUsIGJyYW5jaCwgZ2NVSEJlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogNjAxLCBtZXNzYWdlOiBcIlVuYWJsZSB0byBsb2FkXCIsIGRldGFpbHM6IGB1c2VybmFtZT0ke3VzZXJuYW1lfSBlcnJvcj0ke2djVUhCZXJyb3J9YCwgT0JTUGF0aG5hbWUsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiwgZXh0cmE6IE9CU1JlcG9OYW1lIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFvcmlnaW5hbE1hcmtkb3duKSByZXR1cm4gJyc7XG5cbiAgICAgICAgICAgIGxldCBnb3RJdCA9IFYgPT09ICdpbnRybyc7IC8vIG5vcm1hbGx5IGZhbHNlLCBidXQgdHJ1ZSBmb3IgaW50cm8gKHNvIGdyYWJzIGZpcnN0IGxpbmUgb2YgdGV4dCA9IGhlYWRpbmcgbGluZSlcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFN0cmluZyA9IGAtJHthZGpDfS0ke2FkalZ9LmA7XG4gICAgICAgICAgICAvLyBOT1RFOiBCaWJsZSByZWZlcmVuY2VzIGdldCBhcHBlbmRlZCB0byB0aGUgbGFzdCBmcmFtZSB0ZXh0IChidXQgSSBkb27igJl0IHRoaW5rIGl0IGRvZXMgYW55IGhhcm0pXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2Ygb3JpZ2luYWxNYXJrZG93bi5zcGxpdCgnXFxuJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2Yoc2VhcmNoU3RyaW5nKSA+IDApIHsgZ290SXQgPSB0cnVlOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgIGlmIChnb3RJdClcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZignW09CUyBJbWFnZV0nKSA+IDApIC8vIFRoaXMgaXMgdGhlIG5leHQgZnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZVRleHQgKz0gbGluZTsgLy8gTk9URTogd29ya3MgY296IGFsbCB0ZXh0IG9uIG9uZSBsaW5lLCBvdGhlcndpc2Ugd291bGQgbmVlZCB0byBpbnNlcnQgc3BhY2VzIGhlcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRlYnVnTG9nKGBHb3QgT0JTICR7Vn06JHtDfSAnJHt2ZXJzZVRleHR9J2ApO1xuICAgICAgICB9IGVsc2UgeyAvLyBub3QgT0JTLCBzbyBhIFVTRk0gQmlibGUgYm9va1xuICAgICAgICAgICAgY29uc3QgYm9va051bWJlckFuZE5hbWUgPSBib29rcy51c2ZtTnVtYmVyTmFtZShib29rSUQpO1xuICAgICAgICAgICAgbGV0IHdoaWNoVGVzdGFtZW50O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB3aGljaFRlc3RhbWVudCA9IGJvb2tzLnRlc3RhbWVudChib29rSUQpOyAvLyByZXR1cm5zICdvbGQnIG9yICduZXcnXG4gICAgICAgICAgICB9IGNhdGNoIChiTk5lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChib29rcy5pc1ZhbGlkQm9va0lEKGJvb2tJRCkpIC8vIG11c3QgYmUgaW4gRlJULCBCQUssIGV0Yy5cbiAgICAgICAgICAgICAgICAgICAgd2hpY2hUZXN0YW1lbnQgPSAnb3RoZXInO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9naWNBc3NlcnQod2hpY2hUZXN0YW1lbnQgPT09ICdvbGQnIHx8IHdoaWNoVGVzdGFtZW50ID09PSAnbmV3JywgYGdldE9yaWdpbmFsUGFzc2FnZSgpIGNvdWxkbid0IGZpbmQgdGVzdGFtZW50IGZvciAnJHtib29rSUR9J2ApO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxMYW5ndWFnZVJlcG9MYW5ndWFnZUNvZGUgPSB3aGljaFRlc3RhbWVudCA9PT0gJ29sZCcgPyAnaGJvJyA6ICdlbC14LWtvaW5lJztcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTGFuZ3VhZ2VSZXBvQ29kZSA9IHdoaWNoVGVzdGFtZW50ID09PSAnb2xkJyA/ICdVSEInIDogJ1VHTlQnO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxMYW5ndWFnZVJlcG9OYW1lID0gYCR7b3JpZ2luYWxMYW5ndWFnZVJlcG9MYW5ndWFnZUNvZGV9XyR7b3JpZ2luYWxMYW5ndWFnZVJlcG9Db2RlLnRvTG93ZXJDYXNlKCl9YDtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7Ym9va051bWJlckFuZE5hbWV9LnVzZm1gO1xuXG4gICAgICAgICAgICBsZXQgb3JpZ2luYWxVU0ZNO1xuICAgICAgICAgICAgLy8gZGVidWdMb2coYE5lZWQgdG8gY2hlY2sgYWdhaW5zdCAke29yaWdpbmFsTGFuZ3VhZ2VSZXBvQ29kZX1gKTtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbExhbmd1YWdlUmVwb0NvZGUgPT09ICdVSEInKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxVU0ZNID0gYXdhaXQgZ2V0RmlsZV8oeyB1c2VybmFtZSwgcmVwb3NpdG9yeTogb3JpZ2luYWxMYW5ndWFnZVJlcG9OYW1lLCBwYXRoOiBmaWxlbmFtZSwgYnJhbmNoIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWJ1Z0xvZyhcIkZldGNoZWQgZmlsZUNvbnRlbnQgZm9yXCIsIHJlcG9OYW1lLCBmaWxlbmFtZSwgdHlwZW9mIG9yaWdpbmFsVVNGTSwgb3JpZ2luYWxVU0ZNLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZ2NVSEJlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBnZXRPcmlnaW5hbFBhc3NhZ2UoJHtib29rSUR9LCAke0N9OiR7Vn0sICR7SlNPTi5zdHJpbmdpZnkoY2hlY2tpbmdPcHRpb25zKX0pIGZhaWxlZCB0byBsb2FkIFVIQmAsIHVzZXJuYW1lLCBvcmlnaW5hbExhbmd1YWdlUmVwb0NvZGUsIGZpbGVuYW1lLCBicmFuY2gsIGdjVUhCZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiA2MDEsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGxvYWRcIiwgZGV0YWlsczogYHVzZXJuYW1lPSR7dXNlcm5hbWV9IGVycm9yPSR7Z2NVSEJlcnJvcn1gLCBmaWxlbmFtZSwgbG9jYXRpb246IG91ckxvY2F0aW9uLCBleHRyYTogb3JpZ2luYWxMYW5ndWFnZVJlcG9OYW1lIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3JpZ2luYWxMYW5ndWFnZVJlcG9Db2RlID09PSAnVUdOVCcpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFVTRk0gPSBhd2FpdCBnZXRGaWxlXyh7IHVzZXJuYW1lLCByZXBvc2l0b3J5OiBvcmlnaW5hbExhbmd1YWdlUmVwb05hbWUsIHBhdGg6IGZpbGVuYW1lLCBicmFuY2ggfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlYnVnTG9nKFwiRmV0Y2hlZCBmaWxlQ29udGVudCBmb3JcIiwgcmVwb05hbWUsIGZpbGVuYW1lLCB0eXBlb2Ygb3JpZ2luYWxVU0ZNLCBvcmlnaW5hbFVTRk0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChnY1VHTlRlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBnZXRPcmlnaW5hbFBhc3NhZ2UoJHtib29rSUR9LCAke0N9OiR7Vn0sICR7SlNPTi5zdHJpbmdpZnkoY2hlY2tpbmdPcHRpb25zKX0pIGZhaWxlZCB0byBsb2FkIFVHTlRgLCB1c2VybmFtZSwgb3JpZ2luYWxMYW5ndWFnZVJlcG9Db2RlLCBmaWxlbmFtZSwgYnJhbmNoLCBnY1VHTlRlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IDYwMSwgbWVzc2FnZTogXCJVbmFibGUgdG8gbG9hZFwiLCBkZXRhaWxzOiBgdXNlcm5hbWU9JHt1c2VybmFtZX0gZXJyb3I9JHtnY1VHTlRlcnJvcn1gLCBmaWxlbmFtZSwgbG9jYXRpb246IG91ckxvY2F0aW9uLCBleHRyYTogb3JpZ2luYWxMYW5ndWFnZVJlcG9OYW1lIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb3JpZ2luYWxVU0ZNKSByZXR1cm4gJyc7XG5cblxuICAgICAgICAgICAgLy8gRG8gZ2xvYmFsIGZpeGVzXG4gICAgICAgICAgICBvcmlnaW5hbFVTRk0gPSBvcmlnaW5hbFVTRk0ucmVwbGFjZSgvXFxcXGstZVxcXFxcXCovZywgJycpOyAvLyBSZW1vdmUgXFxrLWUgc2VsZi1jbG9zZWQgbWlsZXN0b25lc1xuICAgICAgICAgICAgb3JpZ2luYWxVU0ZNID0gb3JpZ2luYWxVU0ZNLnJlcGxhY2UoL1xcXFxrLXMuKz9cXFxcXFwqL2csICcnKTsgLy8gUmVtb3ZlIFxcay1zIHNlbGYtY2xvc2VkIG1pbGVzdG9uZXNcblxuXG4gICAgICAgICAgICAvLyBOb3cgZmluZCB0aGUgZGVzaXJlZCBDOlZcbiAgICAgICAgICAgIGxldCBmb3VuZENoYXB0ZXIgPSBmYWxzZSwgZm91bmRWZXJzZSA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgYm9va0xpbmUgb2Ygb3JpZ2luYWxVU0ZNLnNwbGl0KCdcXG4nKSkge1xuICAgICAgICAgICAgICAgIC8vIGRlYnVnTG9nKFwiYm9va0xpbmVcIiwgYm9va0xpbmUpO1xuICAgICAgICAgICAgICAgIGlmICghZm91bmRDaGFwdGVyICYmIGJvb2tMaW5lID09PSBgXFxcXGMgJHtDfWApIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRDaGFwdGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3VuZENoYXB0ZXIgJiYgIWZvdW5kVmVyc2UgJiYgYm9va0xpbmUuc3RhcnRzV2l0aChgXFxcXHYgJHtWfWApKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVmVyc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBib29rTGluZSA9IGJvb2tMaW5lLnN1YnN0cmluZygzICsgVi5sZW5ndGgpOyAvLyBEZWxldGUgdmVyc2UgbnVtYmVyIHNvIGJlbG93IGJpdCBkb2VzbuKAmXQgZmFpbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm91bmRWZXJzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYm9va0xpbmUuc3RhcnRzV2l0aCgnXFxcXHYgJykgfHwgYm9va0xpbmUuc3RhcnRzV2l0aCgnXFxcXGMgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gRG9u4oCZdCBnbyBpbnRvIHRoZSBuZXh0IHZlcnNlIG9yIGNoYXB0ZXJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2VUZXh0ICs9IChib29rTGluZS5zdGFydHNXaXRoKCdcXFxcZiAnKSA/ICcnIDogJyAnKSArIGJvb2tMaW5lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZlcnNlVGV4dCA9IHZlcnNlVGV4dC5yZXBsYWNlKC9cXFxccC9nLCAnJykudHJpbSgpLnJlcGxhY2UoLyB7Mn0vZywgJyAnKVxuICAgICAgICAgICAgLy8gZGVidWdMb2coYEdvdCB2ZXJzZSB0ZXh0MTogJyR7dmVyc2VUZXh0fSdgKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIFxcdyBmaWVsZHMgKGp1c3QgbGVhdmluZyB0aGUgYWN0dWFsIEJpYmxlIHRleHQgd29yZHMpXG4gICAgICAgICAgICBsZXQgaXhXID0gdmVyc2VUZXh0LmluZGV4T2YoJ1xcXFx3ICcpXG4gICAgICAgICAgICB3aGlsZSAoaXhXICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl4RW5kID0gdmVyc2VUZXh0LmluZGV4T2YoJ1xcXFx3KicsIGl4VylcbiAgICAgICAgICAgICAgICBpZiAoaXhFbmQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdmVyc2VUZXh0LnN1YnN0cmluZyhpeFcgKyAzLCBpeEVuZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpdHMgPSBmaWVsZC5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGp1c3RlZF9maWVsZCA9IGJpdHNbMF07XG4gICAgICAgICAgICAgICAgICAgIHZlcnNlVGV4dCA9IHZlcnNlVGV4dC5zdWJzdHJpbmcoMCwgaXhXKSArIGFkanVzdGVkX2ZpZWxkICsgdmVyc2VUZXh0LnN1YnN0cmluZyhpeEVuZCArIDMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nKGBNaXNzaW5nIFxcXFx3KiBpbiAke2Jvb2tJRH0gJHtDfToke1Z9IHZlcnNlVGV4dDogJyR7dmVyc2VUZXh0fSdgKTtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2VUZXh0ID0gdmVyc2VUZXh0LnJlcGxhY2UoL1xcXFx3IC9nLCAnJywgMSk7IC8vIEF0dGVtcHQgdG8gbGltcCBvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpeFcgPSB2ZXJzZVRleHQuaW5kZXhPZignXFxcXHcgJywgaXhXICsgMSk7IC8vIE1pZ2h0IGJlIGFub3RoZXIgb25lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgR290IHZlcnNlIHRleHQyOiAnJHt2ZXJzZVRleHR9J2ApO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgZm9vdG5vdGVzXG4gICAgICAgICAgICB2ZXJzZVRleHQgPSB2ZXJzZVRleHQucmVwbGFjZSgvXFxcXGYgKC4rPylcXFxcZlxcKi9nLCAnJyk7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYWx0ZXJuYXRpdmUgdmVyc2lmaWNhdGlvbnNcbiAgICAgICAgICAgIHZlcnNlVGV4dCA9IHZlcnNlVGV4dC5yZXBsYWNlKC9cXFxcdmEgKC4rPylcXFxcdmFcXCovZywgJycpO1xuICAgICAgICAgICAgLy8gZGVidWdMb2coYEdvdCB2ZXJzZSB0ZXh0MzogJyR7dmVyc2VUZXh0fSdgKTtcblxuICAgICAgICAgICAgLy8gRmluYWwgY2xlYW4tdXAgKHNob3VsZG7igJl0IGJlIG5lY2Vzc2FyeSwgYnV0IGp1c3QgaW4gY2FzZSlcbiAgICAgICAgICAgIHZlcnNlVGV4dCA9IHZlcnNlVGV4dC5yZXBsYWNlKC8gezJ9L2csICcgJyk7XG4gICAgICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh2ZXJzZVRleHQuaW5kZXhPZignXFxcXHcnKSA9PT0gLTEsIGBnZXRPcmlnaW5hbFBhc3NhZ2U6IFNob3VsZCBiZSBubyBcXFxcdyBpbiAke2Jvb2tJRH0gJHtDfToke1Z9ICcke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh2ZXJzZVRleHQuaW5kZXhPZignXFxcXGsnKSA9PT0gLTEsIGBnZXRPcmlnaW5hbFBhc3NhZ2U6IFNob3VsZCBiZSBubyBcXFxcayBpbiAke2Jvb2tJRH0gJHtDfToke1Z9ICcke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh2ZXJzZVRleHQuaW5kZXhPZigneC0nKSA9PT0gLTEsIGBnZXRPcmlnaW5hbFBhc3NhZ2U6IFNob3VsZCBiZSBubyB4LSBpbiAke2Jvb2tJRH0gJHtDfToke1Z9ICcke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh2ZXJzZVRleHQuaW5kZXhPZignXFxcXGYnKSA9PT0gLTEsIGBnZXRPcmlnaW5hbFBhc3NhZ2U6IFNob3VsZCBiZSBubyBcXFxcZiBpbiAke2Jvb2tJRH0gJHtDfToke1Z9ICcke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh2ZXJzZVRleHQuaW5kZXhPZignXFxcXHgnKSA9PT0gLTEsIGBnZXRPcmlnaW5hbFBhc3NhZ2U6IFNob3VsZCBiZSBubyBcXFxceCBpbiAke2Jvb2tJRH0gJHtDfToke1Z9ICcke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWJ1Z0xvZyhgICBnZXRPcmlnaW5hbFBhc3NhZ2UoJHtib29rSUR9ICR7Q306JHtWfSkgaXMgcmV0dXJuaW5nICcke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgIHJldHVybiB2ZXJzZVRleHQ7XG4gICAgfVxuICAgIC8vIGVuZCBvZiBnZXRPcmlnaW5hbFBhc3NhZ2UgZnVuY3Rpb25cblxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm91bmRRdW90ZVNlZ21lbnQgLS0gYW4gb3JpZ1F1b3RlLCBvciBhIHNlZ21lbnQgb2YgYW4gb3JpZ1F1b3RlLCB0aGF0IGV4aXN0cyBpbiB0aGUgdmVyc2VUZXh0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhcnREZXNjcmlwdGlvbiAtLSBlbXB0eSBzdHJpbmcgaWYgZmlyc3QgcGFyYW1ldGVyIGlzIHRoZSBlbnRpcmUgb3JpZ1F1b3RlIGVsc2UgYSBkZXNjcmlwdGl2ZSB3b3JkIChsaWtlIFwiYmVnaW5uaW5nXCIpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9jY3VycmVuY2VTdHJpbmcgLS0gZnJvbSB0aGUgc291cmNlIGZpbGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGlhbFZlcnNlVGV4dCAtLSByZWxldmFudCBzZWN0aW9uIG9mIG9yaWdMIHZlcnNlIHRleHRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZnVsbFZlcnNlVGV4dCAtLSBvcmlnTCB2ZXJzZSB0ZXh0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2F0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIENoZWNrcyB0aGF0IHRoZSBzZWdtZW50IChhbHRob3VnaCBmb3VuZCBzbyB3ZSBrbm93IGl0J3MgaW4gdGhlIHZlcnNlKSBhY3R1YWxseSBzdGFydHMgYW5kIGVuZHMgYXQgd29yZCBicmVha3NcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGVja0ZvdW5kUXVvdGVTZWdtZW50KGZvdW5kUXVvdGVTZWdtZW50LCBwYXJ0RGVzY3JpcHRpb24sIG9jY3VycmVuY2VTdHJpbmcsIHBhcnRpYWxWZXJzZVRleHQsIGZ1bGxWZXJzZVRleHQsIGxvY2F0aW9uKSB7XG4gICAgICAgIC8vIGlmIChwYXJ0RGVzY3JpcHRpb24pIGZ1bmN0aW9uTG9nKGBjaGVja0ZvdW5kUXVvdGVTZWdtZW50KCR7Zm91bmRRdW90ZVNlZ21lbnR9LCAke3BhcnREZXNjcmlwdGlvbn0sICR7dmVyc2VUZXh0fSwgJHtsb2NhdGlvbn0pICR7Q306JHtWfeKApmApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChmb3VuZFF1b3RlU2VnbWVudCAhPT0gdW5kZWZpbmVkLCBcImNoZWNrRm91bmRRdW90ZVNlZ21lbnQ6ICdmb3VuZFF1b3RlU2VnbWVudCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZm91bmRRdW90ZVNlZ21lbnQgPT09ICdzdHJpbmcnLCBgY2hlY2tGb3VuZFF1b3RlU2VnbWVudDogJ2ZvdW5kUXVvdGVTZWdtZW50JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBmb3VuZFF1b3RlU2VnbWVudH0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGZvdW5kUXVvdGVTZWdtZW50LmluZGV4T2YoZGlzY29udGlndW91c0RpdmlkZXIpID09PSAtMSwgYGNoZWNrRm91bmRRdW90ZVNlZ21lbnQ6ICdmb3VuZFF1b3RlU2VnbWVudCcgcGFyYW1ldGVyIHNob3VsZCBub3QgY29udGFpbiAnJHtkaXNjb250aWd1b3VzRGl2aWRlcn0nIGRpdmlkZXI6ICcke2ZvdW5kUXVvdGVTZWdtZW50fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocGFydERlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQsIFwiY2hlY2tGb3VuZFF1b3RlU2VnbWVudDogJ3BhcnREZXNjcmlwdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgcGFydERlc2NyaXB0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrRm91bmRRdW90ZVNlZ21lbnQ6ICdwYXJ0RGVzY3JpcHRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIHBhcnREZXNjcmlwdGlvbn0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KG9jY3VycmVuY2VTdHJpbmcgIT09IHVuZGVmaW5lZCwgXCJjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAnb2NjdXJyZW5jZVN0cmluZycgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygb2NjdXJyZW5jZVN0cmluZyA9PT0gJ3N0cmluZycsIGBjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAnb2NjdXJyZW5jZVN0cmluZycgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygb2NjdXJyZW5jZVN0cmluZ30nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHBhcnRpYWxWZXJzZVRleHQgIT09IHVuZGVmaW5lZCwgXCJjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAncGFydGlhbFZlcnNlVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgcGFydGlhbFZlcnNlVGV4dCA9PT0gJ3N0cmluZycsIGBjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAncGFydGlhbFZlcnNlVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgcGFydGlhbFZlcnNlVGV4dH0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGZ1bGxWZXJzZVRleHQgIT09IHVuZGVmaW5lZCwgXCJjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAnZnVsbFZlcnNlVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZnVsbFZlcnNlVGV4dCA9PT0gJ3N0cmluZycsIGBjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAnZnVsbFZlcnNlVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZnVsbFZlcnNlVGV4dH0nYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGZ1bGxWZXJzZVRleHQubGVuZ3RoID49IHBhcnRpYWxWZXJzZVRleHQubGVuZ3RoLCBgY2hlY2tGb3VuZFF1b3RlU2VnbWVudDogJ3BhcnRpYWxWZXJzZVRleHQnIHNob3VsZCBub3QgYmUgbG9uZ2VyYCk7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGxvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiY2hlY2tGb3VuZFF1b3RlU2VnbWVudDogJ2xvY2F0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3N0cmluZycsIGBjaGVja0ZvdW5kUXVvdGVTZWdtZW50OiAnbG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGxvY2F0aW9ufSdgKTtcblxuICAgICAgICBsZXQgZGV0YWlscyA9IGB2ZXJzZSB0ZXh0IOKXlyR7ZnVsbFZlcnNlVGV4dH3il5ZgO1xuICAgICAgICBpZiAocGFydERlc2NyaXB0aW9uLmxlbmd0aCkgZGV0YWlscyA9IGAke3BhcnREZXNjcmlwdGlvbn0gcGFydCBvZiBxdW90ZSA9IFwiJHtmb3VuZFF1b3RlU2VnbWVudH1cIiAtLSAke2RldGFpbHN9YDtcblxuICAgICAgICBsZXQgcmVtYWluaW5nVmVyc2VCaXRzID0gcGFydGlhbFZlcnNlVGV4dC5zcGxpdChmb3VuZFF1b3RlU2VnbWVudCk7IC8vIE5PVEU6IGNhbiBzcGxpdCAoYmFkbHkpIG9uIHNob3J0IHN0cmluZ3MgKGxpa2UgzrThvbIgb3IgzrXhvLApIG1pZC13b3JkXG4gICAgICAgIGlmIChyZW1haW5pbmdWZXJzZUJpdHMubGVuZ3RoID4gMikgLy8gSm9pbiB0aGUgZXh0cmEgYml0cyBiYWNrIHVwXG4gICAgICAgICAgICByZW1haW5pbmdWZXJzZUJpdHMgPSBbcmVtYWluaW5nVmVyc2VCaXRzWzBdLCByZW1haW5pbmdWZXJzZUJpdHMuc2xpY2UoMSkuam9pbihkaXNjb250aWd1b3VzRGl2aWRlcildO1xuICAgICAgICBsb2dpY0Fzc2VydChyZW1haW5pbmdWZXJzZUJpdHMubGVuZ3RoID09PSAyLCBgcmVtYWluaW5nIGJpdHMgYXJlICR7cmVtYWluaW5nVmVyc2VCaXRzLmxlbmd0aH1gKTtcblxuICAgICAgICAvLyBOb3RlOiBUaGVyZSdzIHNvbWUgSGVicmV3IChSVEwpIGNoYXJhY3RlcnMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZm9sbG93aW5nIHJlZ2V4XG4gICAgICAgIC8vIE5vdGU6IFN0cmFpZ2h0IHF1b3RlcyBhcmUgaW5jbHVkZWQgaGVyZSAoZXZlbiB0aG91Z2ggdW53YW50ZWQpIGFzIG90aGVyIGNvZGUgd2FybnMgYWJvdXQgdGhlbVxuICAgICAgICAvLyBOb3RlOiBXZSBkb24ndCBnaXZlIGVycm9ycyBmb3IgbGVhZGluZyBvciB0cmFpbGluZyBzcGFjZXMgaGVyZSwgY296IHRoYXQncyBkb25lIGVsc2V3aGVyZVxuICAgICAgICBjb25zdCBwcmVjZWRpbmdDaGFyID0gcmVtYWluaW5nVmVyc2VCaXRzWzBdLnNsaWNlKC0xKTtcbiAgICAgICAgLy8gZGVidWdMb2coYFByZXZpb3VzIGNoYXIgYmVmb3JlICR7Q306JHtWfSAnJHtmb3VuZFF1b3RlU2VnbWVudH0nIGlzICcke3ByZWNlZGluZ0NoYXJ9J2ApO1xuICAgICAgICAvLyBjb25zdCBwcmVjZWRpbmdSZWdleCA9IG5ldyBSZWdFeHAoJ1sg1r4qWyhcIlxcJ+KAnOKAmF0nLCAnZycpO1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGFsZ29yaXRobSBoYXMgdG8gaGFuZGxlIGEgc2luZ2xlIHdvcmQgaW5zaWRlIGFub3RoZXIgcHJpb3Igd29yZCwgZS5nLiwgc2VhcmNoaW5nIGZvciDOtOG9siBpbiDOv+G9kM604b2yzr0gzrThvbIgz4PPhc69zrrOtc66zrHOu8+FzrzOvM6tzr3Ov869IOG8kM+Dz4ThvbbOvVxuICAgICAgICBpZiAoZm91bmRRdW90ZVNlZ21lbnQuc2xpY2UoMCkgIT09ICcgJyAmJiByZW1haW5pbmdWZXJzZUJpdHNbMF1cbiAgICAgICAgICAgICYmIHByZWNlZGluZ0NoYXIgJiYgJyDWvipbKFwiXFwn4oCc4oCY4oCUJy5pbmRleE9mKHByZWNlZGluZ0NoYXIpID09PSAtMSAvLyBoYW5kbGUgcHVuY3R1YXRpb24gZXhwZWN0ZWQgYmVmb3JlIHdvcmRzXG4gICAgICAgICAgICAmJiAoZm91bmRRdW90ZVNlZ21lbnQuaW5kZXhPZignICcpICE9PSAtMSB8fCBwYXJ0aWFsVmVyc2VUZXh0LmluZGV4T2YoYCAke2ZvdW5kUXVvdGVTZWdtZW50fWApID09PSAtMSkgLy8gaXQncyBtdWx0aXdvcmQsIG9yIHRoZXJlJ3Mgbm90IGFub3RoZXIgd29yZCB0aGF0IGZpdHNcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgcHJlY2VkZXJEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIGlmIChwcmVjZWRpbmdDaGFyID09PSAnXFx1MjA2MCcpIHByZWNlZGVyRGVzY3JpcHRpb24gPSAnV29yZEpvaW5lcic7XG4gICAgICAgICAgICBlbHNlIGlmIChwcmVjZWRpbmdDaGFyID09PSAnXFx1MjAwRCcpIHByZWNlZGVyRGVzY3JpcHRpb24gPSAnWmVyb1dpZHRoLVdvcmRKb2luZXInO1xuICAgICAgICAgICAgZWxzZSBwcmVjZWRlckRlc2NyaXB0aW9uID0gYCR7cHJlY2VkaW5nQ2hhcn09RCR7cHJlY2VkaW5nQ2hhci5jaGFyQ29kZUF0KDApfS9IJHtwcmVjZWRpbmdDaGFyLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpfWA7XG4gICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgU2VlbXMgJHtib29rSUR9ICR7Q306JHtWfSAnJHtmb3VuZFF1b3RlU2VnbWVudH0nIG1pZ2h0IG5vdCBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgd29yZOKAlGl04oCZcyBwcmVjZWRlZCBieSAnJHtwcmVjZWRlckRlc2NyaXB0aW9ufScgaW4gJyR7cGFydGlhbFZlcnNlVGV4dH0nIG9mICcke2Z1bGxWZXJzZVRleHR9J2ApO1xuICAgICAgICAgICAgY29uc3QgZXhjZXJwdCA9IGAoJHtwcmVjZWRlckRlc2NyaXB0aW9ufSkke2ZvdW5kUXVvdGVTZWdtZW50LnN1YnN0cmluZygwLCBleGNlcnB0TGVuZ3RoIC0gMyl9JHsoZm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoID4gZXhjZXJwdExlbmd0aCAtIDMgPyAn4oCmJyA6ICcnKX0ke29jY3VycmVuY2VTdHJpbmcubGVuZ3RoID8gYCBvY2N1cnJlbmNlPSR7b2NjdXJyZW5jZVN0cmluZ31gIDogJyd9YDtcbiAgICAgICAgICAgIC8vIFdlIGdyZWF0bHkgbG93ZXIgdGhlIHByaW9yaXR5IGlmIHdlJ3JlIGxlc3Mgc3VyZSB0aGF0IGl0J3MgYSBnZW51aW5lIGVycm9yXG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogZm91bmRRdW90ZVNlZ21lbnQuaW5kZXhPZignICcpICE9PSAtMSB8fCBmdWxsVmVyc2VUZXh0LnNlYXJjaChgICR7Zm91bmRRdW90ZVNlZ21lbnR9YCkgPT09IC0xID8gOTA5IDogMzg5LCBtZXNzYWdlOiBcIlNlZW1zIG9yaWdpbmFsIGxhbmd1YWdlIHF1b3RlIG1pZ2h0IG5vdCBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgd29yZFwiLCBkZXRhaWxzLCBjaGFyYWN0ZXJJbmRleDogMCwgZXhjZXJwdCwgbG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9sbG93aW5nQ2hhciA9IHJlbWFpbmluZ1ZlcnNlQml0c1sxXVswXTtcbiAgICAgICAgLy8gZGVidWdMb2coYE5leHQgY2hhciBhZnRlciAke0N9OiR7Vn0gJyR7Zm91bmRRdW90ZVNlZ21lbnR9JyBpcyAnJHtmb2xsb3dpbmdDaGFyfSdgKTtcbiAgICAgICAgLy8gTm90ZTogVGhlcmUncyBzb21lIEhlYnJldyAoUlRMKSBjaGFyYWN0ZXJzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGZvbGxvd2luZyBzdHJpbmcgdXNlZCBpbiByZWdleFxuICAgICAgICBjb25zdCBhbGxvd2VkV29yZEVuZENoYXJzID0gJyDXg9a+Liw6Oz8h4oCT4oCUKeKApic7IC8vIEVsbGlwc2lzIG9jY3VycyBpbiBVR05ULCBlLmcuLCBSb20gMzoxNSwgUmV2IDI6MjYsIDE4OjdcbiAgICAgICAgLy8gV2UgbWFrZSB1cCB0aGUgUmVnRXggb24gdGhlIGZseSBidXQgd2UgbmVlZCB0byBlc2NhcGUgc3BlY2lhbCBjaGFycyBpbiBmb3VuZFF1b3RlU2VnbWVudFxuICAgICAgICAvLyBkZWJ1Z0xvZyhgY2hlY2tGb3VuZFF1b3RlU2VnbWVudCAke2Jvb2tJRH0gJHtDfToke1Z9IHJlZ2V4IHdpbGwgYmUgJyR7Zm91bmRRdW90ZVNlZ21lbnR9WyR7YWxsb3dlZFdvcmRFbmRDaGFyc31dJ2ApO1xuICAgICAgICBjb25zdCBlc2NhcGVkRm91bmRRdW90ZVNlZ21lbnQgPSBmb3VuZFF1b3RlU2VnbWVudC5yZXBsYWNlKC9cXCgvZywgJ1xcXFwoJykucmVwbGFjZSgvXFwpL2csICdcXFxcKScpOyAvLyBTZWdtZW50cyBtYXkgaGF2ZSBhbnkgb25lIG9yIG1vcmUgb2YgdGhlc2UgKG5vdCBuZWNlc3NhcmlseSBtYXRjaGVkKVxuICAgICAgICAvLyBpZiAoZXNjYXBlZEZvdW5kUXVvdGVTZWdtZW50ICE9PSBmb3VuZFF1b3RlU2VnbWVudCApIGRlYnVnTG9nKGBjaGVja0ZvdW5kUXVvdGVTZWdtZW50ICR7Ym9va0lEfSAke0N9OiR7Vn0gZnJvbSAnJHtmb3VuZFF1b3RlU2VnbWVudH0nIHJlZ2V4IHdpbGwgYmUgJyR7ZXNjYXBlZEZvdW5kUXVvdGVTZWdtZW50fVske2FsbG93ZWRXb3JkRW5kQ2hhcnN9XSdgKTtcbiAgICAgICAgY29uc3QgZm9sbG93aW5nUmVnZXggPSBuZXcgUmVnRXhwKGAke2VzY2FwZWRGb3VuZFF1b3RlU2VnbWVudH1bJHthbGxvd2VkV29yZEVuZENoYXJzfV1gLCAnZycpO1xuICAgICAgICBpZiAoZm91bmRRdW90ZVNlZ21lbnQuc2xpY2UoLTEpICE9PSAnICcgJiYgcmVtYWluaW5nVmVyc2VCaXRzWzFdXG4gICAgICAgICAgICAmJiBmb2xsb3dpbmdDaGFyICYmIGFsbG93ZWRXb3JkRW5kQ2hhcnMuaW5kZXhPZihmb2xsb3dpbmdDaGFyKSA9PT0gLTEgLy8gaGFuZGxlIHB1bmN0dWF0aW9uIGV4cGVjdGVkIGFmdGVyIHdvcmRzXG4gICAgICAgICAgICAmJiAoZm91bmRRdW90ZVNlZ21lbnQuaW5kZXhPZignICcpICE9PSAtMSB8fCBwYXJ0aWFsVmVyc2VUZXh0LnNlYXJjaChmb2xsb3dpbmdSZWdleCkgPT09IC0xKSAvLyBpdCdzIG11bHRpd29yZCwgb3IgdGhlcmUncyBub3QgYW5vdGhlciB3b3JkIHRoYXQgZml0c1xuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE5vIHByb2JsZW1zIGlmIHF1b3RlIGlzIGZvbGxvd2VkIGJ5IGV4cGVjdGVkIHRlcm1pbmF0b3ItdHlwZSBwdW5jdHVhdGlvblxuICAgICAgICAgICAgLy8gY29uc3QgYmFkQ2hhclN0cmluZyA9IGAnJHtmb2xsb3dpbmdDaGFyfSc9RCR7Zm9sbG93aW5nQ2hhci5jaGFyQ29kZUF0KDApfS9IJHtmb2xsb3dpbmdDaGFyLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpfWA7XG4gICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgU2VlbXMgJHtib29rSUR9ICR7Q306JHtWfSAnJHtmb3VuZFF1b3RlU2VnbWVudH0nIG1pZ2h0IG5vdCBmaW5pc2ggYXQgdGhlIGVuZCBvZiBhIHdvcmTigJRpdOKAmXMgZm9sbG93ZWQgYnkgJHtiYWRDaGFyU3RyaW5nfSBpbiAnJHtwYXJ0aWFsVmVyc2VUZXh0fScgb2YgJyR7ZnVsbFZlcnNlVGV4dH0nYCk7XG4gICAgICAgICAgICBjb25zdCBleGNlcnB0ID0gYCR7KGZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCA+IGV4Y2VycHRMZW5ndGggLSAzID8gJ+KApicgOiAnJyl9JHtmb3VuZFF1b3RlU2VnbWVudC5zdWJzdHJpbmcoZm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoIC0gZXhjZXJwdExlbmd0aCArIDMsIGZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCl9KCR7Zm9sbG93aW5nQ2hhcn09RCR7cmVtYWluaW5nVmVyc2VCaXRzWzFdLmNoYXJDb2RlQXQoMCl9L0gke3JlbWFpbmluZ1ZlcnNlQml0c1sxXS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KX0pJHtvY2N1cnJlbmNlU3RyaW5nLmxlbmd0aCA/IGAgb2NjdXJyZW5jZT0ke29jY3VycmVuY2VTdHJpbmd9YCA6ICcnfWA7XG4gICAgICAgICAgICAvLyBXZSBncmVhdGx5IGxvd2VyIHRoZSBwcmlvcml0eSBpZiB3ZSdyZSBsZXNzIHN1cmUgdGhhdCBpdCdzIGEgZ2VudWluZSBlcnJvclxuICAgICAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IGZvdW5kUXVvdGVTZWdtZW50LmluZGV4T2YoJyAnKSAhPT0gLTEgfHwgZnVsbFZlcnNlVGV4dC5zZWFyY2goZm9sbG93aW5nUmVnZXgpID09PSAtMSA/IDkwOCA6IDM4OCwgbWVzc2FnZTogXCJTZWVtcyBvcmlnaW5hbCBsYW5ndWFnZSBxdW90ZSBtaWdodCBub3QgZmluaXNoIGF0IHRoZSBlbmQgb2YgYSB3b3JkXCIsIGRldGFpbHMsIGNoYXJhY3RlckluZGV4OiBmb3VuZFF1b3RlU2VnbWVudC5sZW5ndGgsIGV4Y2VycHQsIGxvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVuZCBvZiBjaGVja0ZvdW5kUXVvdGVTZWdtZW50IGZ1bmN0aW9uXG5cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5vdEZvdW5kUXVvdGVTZWdtZW50IC0tIGFuIG9yaWdRdW90ZSwgb3IgYSBzZWdtZW50IG9mIGFuIG9yaWdRdW90ZSwgdGhhdCBleGlzdHMgaW4gdGhlIHZlcnNlVGV4dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0RGVzY3JpcHRpb24gLS0gZW1wdHkgc3RyaW5nIGlmIGZpcnN0IHBhcmFtZXRlciBpcyB0aGUgZW50aXJlIG9yaWdRdW90ZSBlbHNlIGEgZGVzY3JpcHRpdmUgd29yZCAobGlrZSBcImJlZ2lubmluZ1wiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmdWxsVmVyc2VUZXh0IC0tIG9yaWdMIHZlcnNlIHRleHRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYXRpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gQ2hlY2tzIHRoZSBzZWdtZW50IHRoYXQgd2FzIG5vdCBmb3VuZCAoc28gaXQncyBub3QgaW4gdGhlIHZlcnNlKSBmb3Igc3BlY2lhbCBjaGFyYWN0ZXJzIHdoZW4gd2UgY3JlYXRlIHRoZSB3YXJuaW5nXG4gICAgICovXG4gICAgZnVuY3Rpb24gd2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50KG5vdEZvdW5kUXVvdGVTZWdtZW50LCBwYXJ0RGVzY3JpcHRpb24sIG9jY3VycmVuY2VTdHJpbmcsIGZ1bGxWZXJzZVRleHQsIGxvY2F0aW9uKSB7XG4gICAgICAgIC8vIGlmIChwYXJ0RGVzY3JpcHRpb24pIGZ1bmN0aW9uTG9nKGB3YXJuRm9yTm90Rm91bmRRdW90ZVNlZ21lbnQoJHtub3RGb3VuZFF1b3RlU2VnbWVudH0sICR7cGFydERlc2NyaXB0aW9ufSwgJHtmdWxsVmVyc2VUZXh0fSwgJHtsb2NhdGlvbn0pICR7Q306JHtWfeKApmApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChub3RGb3VuZFF1b3RlU2VnbWVudCAhPT0gdW5kZWZpbmVkLCBcIndhcm5Gb3JOb3RGb3VuZFF1b3RlU2VnbWVudDogJ25vdEZvdW5kUXVvdGVTZWdtZW50JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RGb3VuZFF1b3RlU2VnbWVudCA9PT0gJ3N0cmluZycsIGB3YXJuRm9yTm90Rm91bmRRdW90ZVNlZ21lbnQ6ICdub3RGb3VuZFF1b3RlU2VnbWVudCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90Rm91bmRRdW90ZVNlZ21lbnR9J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChub3RGb3VuZFF1b3RlU2VnbWVudC5pbmRleE9mKGRpc2NvbnRpZ3VvdXNEaXZpZGVyKSA9PT0gLTEsIGB3YXJuRm9yTm90Rm91bmRRdW90ZVNlZ21lbnQ6ICdub3RGb3VuZFF1b3RlU2VnbWVudCcgcGFyYW1ldGVyIHNob3VsZCBub3QgY29udGFpbiAnJHtkaXNjb250aWd1b3VzRGl2aWRlcn0nIGRpdmlkZXI6ICcke25vdEZvdW5kUXVvdGVTZWdtZW50fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQocGFydERlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQsIFwid2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50OiAncGFydERlc2NyaXB0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBwYXJ0RGVzY3JpcHRpb24gPT09ICdzdHJpbmcnLCBgd2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50OiAncGFydERlc2NyaXB0aW9uJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBwYXJ0RGVzY3JpcHRpb259J2ApO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydChmdWxsVmVyc2VUZXh0ICE9PSB1bmRlZmluZWQsIFwid2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50OiAnZnVsbFZlcnNlVGV4dCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgZnVsbFZlcnNlVGV4dCA9PT0gJ3N0cmluZycsIGB3YXJuRm9yTm90Rm91bmRRdW90ZVNlZ21lbnQ6ICdmdWxsVmVyc2VUZXh0JyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBmdWxsVmVyc2VUZXh0fSdgKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobG9jYXRpb24gIT09IHVuZGVmaW5lZCwgXCJ3YXJuRm9yTm90Rm91bmRRdW90ZVNlZ21lbnQ6ICdsb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnLCBgd2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50OiAnbG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGxvY2F0aW9ufSdgKTtcblxuICAgICAgICBsZXQgZXhjZXJwdCA9IHBhcnREZXNjcmlwdGlvbiA/IGAke3BhcnREZXNjcmlwdGlvbiA/ICcoJyArIHBhcnREZXNjcmlwdGlvbiArICcgcXVvdGUgcG9ydGlvbiknIDogJyd9ICcke25vdEZvdW5kUXVvdGVTZWdtZW50fSdgIDogJyc7XG5cbiAgICAgICAgY29uc3Qgbm9CcmVha1NwYWNlVGV4dCA9IG5vdEZvdW5kUXVvdGVTZWdtZW50LmluZGV4T2YoJ1xcdTAwQTAnKSA+PSAwID8gXCJxdW90ZSB3aGljaCBjb250YWlucyBOby1CcmVhayBTcGFjZSBzaG93biBhcyAn4o29J1wiIDogXCJcIjtcbiAgICAgICAgaWYgKG5vQnJlYWtTcGFjZVRleHQpIG5vdEZvdW5kUXVvdGVTZWdtZW50ID0gbm90Rm91bmRRdW90ZVNlZ21lbnQucmVwbGFjZSgvXFx1MDBBMC9nLCAn4o29Jyk7XG4gICAgICAgIC8vIGRlYnVnTG9nKGA3MjIgZmllbGRUZXh0PScke2ZpZWxkVGV4dH0nJHtleHRyYVRleHR9YCk7XG4gICAgICAgIC8vIGRlYnVnTG9nKGA3MjIgdmVyc2VUZXh0PScke3ZlcnNlVGV4dH0nYCk7XG4gICAgICAgIGlmIChub3RGb3VuZFF1b3RlU2VnbWVudFswXSA9PT0gJyAnKSB7XG4gICAgICAgICAgICBpZiAoIWV4Y2VycHQpIGV4Y2VycHQgPSBub3RGb3VuZFF1b3RlU2VnbWVudC5zdWJzdHJpbmcoMCwgZXhjZXJwdExlbmd0aCkgKyAobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoID4gZXhjZXJwdExlbmd0aCA/ICfigKYnIDogJycpO1xuICAgICAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IDkxNiwgbWVzc2FnZTogXCJVbmFibGUgdG8gZmluZCBvcmlnaW5hbCBsYW5ndWFnZSBxdW90ZSBpbiB2ZXJzZSB0ZXh0XCIsIGRldGFpbHM6IFwicXVvdGUgd2hpY2ggc3RhcnRzIHdpdGggYSBzcGFjZVwiICsgKG5vQnJlYWtTcGFjZVRleHQgPyAnICcgKyBub0JyZWFrU3BhY2VUZXh0IDogJycpLCBleGNlcnB0LCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAobm90Rm91bmRRdW90ZVNlZ21lbnQuZW5kc1dpdGgoJyAnKSkge1xuICAgICAgICAgICAgaWYgKCFleGNlcnB0KSBleGNlcnB0ID0gKG5vdEZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCA+IGV4Y2VycHRMZW5ndGggPyAn4oCmJyA6ICcnKSArIG5vdEZvdW5kUXVvdGVTZWdtZW50LnN1YnN0cmluZyhub3RGb3VuZFF1b3RlU2VnbWVudC5sZW5ndGggLSBleGNlcnB0TGVuZ3RoLCBub3RGb3VuZFF1b3RlU2VnbWVudC5sZW5ndGgpO1xuICAgICAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IDkxNiwgbWVzc2FnZTogXCJVbmFibGUgdG8gZmluZCBvcmlnaW5hbCBsYW5ndWFnZSBxdW90ZSBpbiB2ZXJzZSB0ZXh0XCIsIGRldGFpbHM6IFwicXVvdGUgd2hpY2ggZW5kcyB3aXRoIGEgc3BhY2VcIiArIChub0JyZWFrU3BhY2VUZXh0ID8gJyAnICsgbm9CcmVha1NwYWNlVGV4dCA6ICcnKSwgZXhjZXJwdCwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKG5vdEZvdW5kUXVvdGVTZWdtZW50WzBdID09PSAnXFx1MjA2MCcpIHsgLy8gV29yZCBqb2luZXJcbiAgICAgICAgICAgIGlmICghZXhjZXJwdCkgZXhjZXJwdCA9IG5vdEZvdW5kUXVvdGVTZWdtZW50LnN1YnN0cmluZygwLCBleGNlcnB0TGVuZ3RoKSArIChub3RGb3VuZFF1b3RlU2VnbWVudC5sZW5ndGggPiBleGNlcnB0TGVuZ3RoID8gJ+KApicgOiAnJyk7XG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogOTE2LCBtZXNzYWdlOiBcIlVuYWJsZSB0byBmaW5kIG9yaWdpbmFsIGxhbmd1YWdlIHF1b3RlIGluIHZlcnNlIHRleHRcIiwgZGV0YWlsczogXCJxdW90ZSB3aGljaCBzdGFydHMgd2l0aCAnd29yZCBqb2luZXInXCIgKyAobm9CcmVha1NwYWNlVGV4dCA/ICcgJyArIG5vQnJlYWtTcGFjZVRleHQgOiAnJyksIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChub3RGb3VuZFF1b3RlU2VnbWVudC5lbmRzV2l0aCgnXFx1MjA2MCcpKSB7IC8vIFdvcmQgam9pbmVyXG4gICAgICAgICAgICBpZiAoIWV4Y2VycHQpIGV4Y2VycHQgPSAobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoID4gZXhjZXJwdExlbmd0aCA/ICfigKYnIDogJycpICsgbm90Rm91bmRRdW90ZVNlZ21lbnQuc3Vic3RyaW5nKG5vdEZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCAtIGV4Y2VycHRMZW5ndGgsIG5vdEZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCk7XG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogOTE2LCBtZXNzYWdlOiBcIlVuYWJsZSB0byBmaW5kIG9yaWdpbmFsIGxhbmd1YWdlIHF1b3RlIGluIHZlcnNlIHRleHRcIiwgZGV0YWlsczogXCJxdW90ZSB3aGljaCBlbmRzIHdpdGggJ3dvcmQgam9pbmVyJ1wiICsgKG5vQnJlYWtTcGFjZVRleHQgPyAnICcgKyBub0JyZWFrU3BhY2VUZXh0IDogJycpLCBleGNlcnB0LCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAobm90Rm91bmRRdW90ZVNlZ21lbnRbMF0gPT09ICdcXHUyMDBCJykgeyAvLyBaZXJvLXdpZHRoIHNwYWNlXG4gICAgICAgICAgICBpZiAoIWV4Y2VycHQpIGV4Y2VycHQgPSBub3RGb3VuZFF1b3RlU2VnbWVudC5zdWJzdHJpbmcoMCwgZXhjZXJwdExlbmd0aCkgKyAobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoID4gZXhjZXJwdExlbmd0aCA/ICfigKYnIDogJycpO1xuICAgICAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IDkxNiwgbWVzc2FnZTogXCJVbmFibGUgdG8gZmluZCBvcmlnaW5hbCBsYW5ndWFnZSBxdW90ZSBpbiB2ZXJzZSB0ZXh0XCIsIGRldGFpbHM6IFwicXVvdGUgd2hpY2ggc3RhcnRzIHdpdGggJ3plcm8td2lkdGggc3BhY2UnXCIgKyAobm9CcmVha1NwYWNlVGV4dCA/ICcgJyArIG5vQnJlYWtTcGFjZVRleHQgOiAnJyksIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChub3RGb3VuZFF1b3RlU2VnbWVudC5lbmRzV2l0aCgnXFx1MjAwQicpKSB7IC8vIFplcm8td2lkdGggc3BhY2VcbiAgICAgICAgICAgIGlmICghZXhjZXJwdCkgZXhjZXJwdCA9IChub3RGb3VuZFF1b3RlU2VnbWVudC5sZW5ndGggPiBleGNlcnB0TGVuZ3RoID8gJ+KApicgOiAnJykgKyBub3RGb3VuZFF1b3RlU2VnbWVudC5zdWJzdHJpbmcobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoIC0gZXhjZXJwdExlbmd0aCwgbm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoKTtcbiAgICAgICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiA5MTYsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZpbmQgb3JpZ2luYWwgbGFuZ3VhZ2UgcXVvdGUgaW4gdmVyc2UgdGV4dFwiLCBkZXRhaWxzOiBcInF1b3RlIHdoaWNoIGVuZHMgd2l0aCAnemVyby13aWR0aCBzcGFjZSdcIiArIChub0JyZWFrU3BhY2VUZXh0ID8gJyAnICsgbm9CcmVha1NwYWNlVGV4dCA6ICcnKSwgZXhjZXJwdCwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKG5vdEZvdW5kUXVvdGVTZWdtZW50WzBdID09PSAnXFx1MjAwRCcpIHsgLy8gWmVyby13aWR0aCBqb2luZXJcbiAgICAgICAgICAgIGlmICghZXhjZXJwdCkgZXhjZXJwdCA9IG5vdEZvdW5kUXVvdGVTZWdtZW50LnN1YnN0cmluZygwLCBleGNlcnB0TGVuZ3RoKSArIChub3RGb3VuZFF1b3RlU2VnbWVudC5sZW5ndGggPiBleGNlcnB0TGVuZ3RoID8gJ+KApicgOiAnJyk7XG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogOTE2LCBtZXNzYWdlOiBcIlVuYWJsZSB0byBmaW5kIG9yaWdpbmFsIGxhbmd1YWdlIHF1b3RlIGluIHZlcnNlIHRleHRcIiwgZGV0YWlsczogXCJxdW90ZSB3aGljaCBzdGFydHMgd2l0aCAnemVyby13aWR0aCBqb2luZXInXCIgKyAobm9CcmVha1NwYWNlVGV4dCA/ICcgJyArIG5vQnJlYWtTcGFjZVRleHQgOiAnJyksIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChub3RGb3VuZFF1b3RlU2VnbWVudC5lbmRzV2l0aCgnXFx1MjAwRCcpKSB7IC8vIFplcm8td2lkdGggam9pbmVyXG4gICAgICAgICAgICBpZiAoIWV4Y2VycHQpIGV4Y2VycHQgPSAobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoID4gZXhjZXJwdExlbmd0aCA/ICfigKYnIDogJycpICsgbm90Rm91bmRRdW90ZVNlZ21lbnQuc3Vic3RyaW5nKG5vdEZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCAtIGV4Y2VycHRMZW5ndGgsIG5vdEZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCk7XG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogOTE2LCBtZXNzYWdlOiBcIlVuYWJsZSB0byBmaW5kIG9yaWdpbmFsIGxhbmd1YWdlIHF1b3RlIGluIHZlcnNlIHRleHRcIiwgZGV0YWlsczogXCJxdW90ZSB3aGljaCBlbmRzIHdpdGggJ3plcm8td2lkdGggam9pbmVyJ1wiICsgKG5vQnJlYWtTcGFjZVRleHQgPyAnICcgKyBub0JyZWFrU3BhY2VUZXh0IDogJycpLCBleGNlcnB0LCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWV4Y2VycHQpIGV4Y2VycHQgPSBub3RGb3VuZFF1b3RlU2VnbWVudC5sZW5ndGggPD0gZXhjZXJwdExlbmd0aCA/IG5vdEZvdW5kUXVvdGVTZWdtZW50IDogKG5vdEZvdW5kUXVvdGVTZWdtZW50LnN1YnN0cmluZygwLCBleGNlcnB0SGFsZkxlbmd0aCkgKyAobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoID4gMiAqIGV4Y2VycHRIYWxmTGVuZ3RoID8gJ+KApicgOiAnJykgKyBub3RGb3VuZFF1b3RlU2VnbWVudC5zdWJzdHJpbmcobm90Rm91bmRRdW90ZVNlZ21lbnQubGVuZ3RoIC0gZXhjZXJwdEhhbGZMZW5ndGgsIG5vdEZvdW5kUXVvdGVTZWdtZW50Lmxlbmd0aCkpO1xuICAgICAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IDkxNiwgbWVzc2FnZTogXCJVbmFibGUgdG8gZmluZCBvcmlnaW5hbCBsYW5ndWFnZSBxdW90ZSBpbiB2ZXJzZSB0ZXh0XCIsIGRldGFpbHM6IG5vQnJlYWtTcGFjZVRleHQgPyBub0JyZWFrU3BhY2VUZXh0IDogYHZlcnNlIHRleHQg4peXJHtmdWxsVmVyc2VUZXh0feKXlmAsIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlbmQgb2Ygd2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50IGZ1bmN0aW9uXG5cblxuICAgIC8vIE1haW4gY29kZSBmb3IgY2hlY2tPcmlnaW5hbExhbmd1YWdlUXVvdGVBbmRPY2N1cnJlbmNlXG4gICAgbGV0IGV4Y2VycHRMZW5ndGg7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhjZXJwdExlbmd0aCA9IGNoZWNraW5nT3B0aW9ucz8uZXhjZXJwdExlbmd0aDtcbiAgICB9IGNhdGNoIChnY0VMZXJyb3IpIHsgfVxuICAgIGlmICh0eXBlb2YgZXhjZXJwdExlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNOYU4oZXhjZXJwdExlbmd0aCkpIHtcbiAgICAgICAgZXhjZXJwdExlbmd0aCA9IERFRkFVTFRfRVhDRVJQVF9MRU5HVEg7XG4gICAgICAgIC8vIGRlYnVnTG9nKGBVc2luZyBkZWZhdWx0IGV4Y2VycHRMZW5ndGg9JHtleGNlcnB0TGVuZ3RofWApO1xuICAgIH1cbiAgICAvLyBlbHNlXG4gICAgLy8gZGVidWdMb2coYFVzaW5nIHN1cHBsaWVkIGV4Y2VycHRMZW5ndGg9JHtleGNlcnB0TGVuZ3RofWAsIGBjZi4gZGVmYXVsdD0ke0RFRkFVTFRfRVhDRVJQVF9MRU5HVEh9YCk7XG4gICAgY29uc3QgZXhjZXJwdEhhbGZMZW5ndGggPSBNYXRoLmZsb29yKGV4Y2VycHRMZW5ndGggLyAyKTsgLy8gcm91bmRlZCBkb3duXG4gICAgY29uc3QgZXhjZXJwdEhhbGZMZW5ndGhQbHVzID0gTWF0aC5mbG9vcigoZXhjZXJwdExlbmd0aCArIDEpIC8gMik7IC8vIHJvdW5kZWQgdXBcbiAgICAvLyBkZWJ1Z0xvZyhgVXNpbmcgZXhjZXJwdEhhbGZMZW5ndGg9JHtleGNlcnB0SGFsZkxlbmd0aH1gLCBgZXhjZXJwdEhhbGZMZW5ndGhQbHVzPSR7ZXhjZXJwdEhhbGZMZW5ndGhQbHVzfWApO1xuXG4gICAgbGV0IG9jY3VycmVuY2UgPSAxO1xuICAgIHRyeSB7IG9jY3VycmVuY2UgPSBvdXJQYXJzZUludChvY2N1cnJlbmNlU3RyaW5nKTsgfVxuICAgIGNhdGNoIHsgZGF0YUFzc2VydChmYWxzZSwgYE5PVEU6IFdlIGdvdCBvY2N1cnJlbmNlPSR7b2NjdXJyZW5jZX0gZnJvbSAke0N9OiR7Vn0gJyR7b2NjdXJyZW5jZVN0cmluZ30nYCk7IH0gLy8gZXJyb3JzIGluIHRoaXMgZmllbGQgYXJlIG5vdGVkIGVsc2V3aGVyZVxuXG4gICAgLy8gaWYgZmllbGRUZXh0LmxzdHJpcCgpICE9PSBmaWVsZFRleHQ6XG4gICAgLy8gICAgIGFkZE5vdGljZSh7cHJpb3JpdHk6MCwgbWVzc2FnZTpgVW5leHBlY3RlZCB3aGl0ZXNwYWNlIGF0IHN0YXJ0IG9mICR7VE5pZH0gJyR7ZmllbGRUZXh0fSdcIilcbiAgICAvLyBpZiBmaWVsZFRleHQucnN0cmlwKCkgIT09IGZpZWxkVGV4dDpcbiAgICAvLyAgICAgYWRkTm90aWNlKHtwcmlvcml0eTowLCBtZXNzYWdlOmBVbmV4cGVjdGVkIHdoaXRlc3BhY2UgYXQgZW5kIG9mICR7VE5pZH0gJyR7ZmllbGRUZXh0fSdcIilcbiAgICAvLyBmaWVsZFRleHQgPSBmaWVsZFRleHQuc3RyaXAoKSAjIHNvIHdlIGRvbuKAmXQgZ2V0IGNvbnNlcXVlbnRpYWwgZXJyb3JzXG5cbiAgICBsZXQgY2hhcmFjdGVySW5kZXg7XG4gICAgaWYgKChjaGFyYWN0ZXJJbmRleCA9IGZpZWxkVGV4dC5pbmRleE9mKHdyb25nRGlzY29udGlndW91c0RpdmlkZXIpKSAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgZXhjZXJwdCA9IChjaGFyYWN0ZXJJbmRleCA+IGV4Y2VycHRIYWxmTGVuZ3RoID8gJ+KApicgOiAnJykgKyBmaWVsZFRleHQuc3Vic3RyaW5nKGNoYXJhY3RlckluZGV4IC0gZXhjZXJwdEhhbGZMZW5ndGgsIGNoYXJhY3RlckluZGV4ICsgZXhjZXJwdEhhbGZMZW5ndGhQbHVzKSArIChjaGFyYWN0ZXJJbmRleCArIGV4Y2VycHRIYWxmTGVuZ3RoUGx1cyA8IGZpZWxkVGV4dC5sZW5ndGggPyAn4oCmJyA6ICcnKTtcbiAgICAgICAgYWRkTm90aWNlKHsgcHJpb3JpdHk6IDkxOCwgbWVzc2FnZTogYFNlZW1zIGxpa2UgdGhlIHdyb25nIGRpdmlkZXIgZm9yIGRpc2NvbnRpZ3VvdXMgcXVvdGUgc2VnbWVudHNgLCBkZXRhaWxzOiBgZXhwZWN0ZWQg4peXJHtkaXNjb250aWd1b3VzRGl2aWRlcn3il5ZgLCBjaGFyYWN0ZXJJbmRleCwgZXhjZXJwdCwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgIH1cblxuICAgIGlmIChkaXNjb250aWd1b3VzRGl2aWRlciA9PT0gJ+KApicgJiYgKGNoYXJhY3RlckluZGV4ID0gZmllbGRUZXh0LmluZGV4T2YoJy4uLicpKSA+PSAwKSB7XG4gICAgICAgIC8vIGRlYnVnTG9nKGBCYWQgZWxsaXBzZSBjaGFyYWN0ZXJzIGluICcke2ZpZWxkVGV4dH0nYCk7XG4gICAgICAgIGNvbnN0IGV4Y2VycHQgPSAoY2hhcmFjdGVySW5kZXggPiBleGNlcnB0SGFsZkxlbmd0aCA/ICfigKYnIDogJycpICsgZmllbGRUZXh0LnN1YnN0cmluZyhjaGFyYWN0ZXJJbmRleCAtIGV4Y2VycHRIYWxmTGVuZ3RoLCBjaGFyYWN0ZXJJbmRleCArIGV4Y2VycHRIYWxmTGVuZ3RoUGx1cykgKyAoY2hhcmFjdGVySW5kZXggKyBleGNlcnB0SGFsZkxlbmd0aFBsdXMgPCBmaWVsZFRleHQubGVuZ3RoID8gJ+KApicgOiAnJyk7XG4gICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiAxNTksIG1lc3NhZ2U6IFwiU2hvdWxkIHVzZSBwcm9wZXIgZWxsaXBzZSBjaGFyYWN0ZXIgKG5vdCBwZXJpb2RzKVwiLCBjaGFyYWN0ZXJJbmRleCwgZXhjZXJwdCwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgIH1cblxuICAgIGxldCBxdW90ZUJpdHM7XG4gICAgaWYgKGZpZWxkVGV4dC5pbmRleE9mKGRpc2NvbnRpZ3VvdXNEaXZpZGVyKSA+PSAwKSB7XG4gICAgICAgIHF1b3RlQml0cyA9IGZpZWxkVGV4dC5zcGxpdChkaXNjb250aWd1b3VzRGl2aWRlcik7XG4gICAgICAgIGlmICgoY2hhcmFjdGVySW5kZXggPSBmaWVsZFRleHQuaW5kZXhPZihgICR7ZGlzY29udGlndW91c0RpdmlkZXJ9YCkpID49IDAgfHwgKGNoYXJhY3RlckluZGV4ID0gZmllbGRUZXh0LmluZGV4T2YoYCR7ZGlzY29udGlndW91c0RpdmlkZXJ9IGApKSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgVW5leHBlY3RlZCBzcGFjZShzKSBiZXNpZGUgZWxsaXBzZSBpbiAnJHtmaWVsZFRleHR9J2ApO1xuICAgICAgICAgICAgY29uc3QgZXhjZXJwdCA9IChjaGFyYWN0ZXJJbmRleCA+IGV4Y2VycHRIYWxmTGVuZ3RoID8gJ+KApicgOiAnJykgKyBmaWVsZFRleHQuc3Vic3RyaW5nKGNoYXJhY3RlckluZGV4IC0gZXhjZXJwdEhhbGZMZW5ndGgsIGNoYXJhY3RlckluZGV4ICsgZXhjZXJwdEhhbGZMZW5ndGhQbHVzKSArIChjaGFyYWN0ZXJJbmRleCArIGV4Y2VycHRIYWxmTGVuZ3RoUGx1cyA8IGZpZWxkVGV4dC5sZW5ndGggPyAn4oCmJyA6ICcnKTtcbiAgICAgICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiAxNTgsIG1lc3NhZ2U6IGBVbmV4cGVjdGVkIHNwYWNlKHMpIGJlc2lkZSBkaXZpZGVyICR7ZGlzY29udGlndW91c0RpdmlkZXJ9YCwgY2hhcmFjdGVySW5kZXgsIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyB9IGVsc2UgaWYgKGZpZWxkVGV4dC5pbmRleE9mKCfihpQnKSA+PSAwKSB7XG4gICAgICAgIC8vICAgICBxdW90ZUJpdHMgPSBmaWVsZFRleHQuc3BsaXQoJ+KGlCcpO1xuICAgICAgICAvLyAgICAgaWYgKChjaGFyYWN0ZXJJbmRleCA9IGZpZWxkVGV4dC5pbmRleE9mKCcg4oaUJykpID49IDAgfHwgKGNoYXJhY3RlckluZGV4ID0gZmllbGRUZXh0LmluZGV4T2YoJ+KGlCAnKSkgPj0gMCkge1xuICAgICAgICAvLyAgICAgICAgIC8vIGRlYnVnTG9nKGBVbmV4cGVjdGVkIHNwYWNlKHMpIGJlc2lkZSBlbGxpcHNlIGluICcke2ZpZWxkVGV4dH0nYCk7XG4gICAgICAgIC8vICAgICAgICAgY29uc3QgZXhjZXJwdCA9IChjaGFyYWN0ZXJJbmRleCA+IGV4Y2VycHRIYWxmTGVuZ3RoID8gJ+KApicgOiAnJykgKyBmaWVsZFRleHQuc3Vic3RyaW5nKGNoYXJhY3RlckluZGV4IC0gZXhjZXJwdEhhbGZMZW5ndGgsIGNoYXJhY3RlckluZGV4ICsgZXhjZXJwdEhhbGZMZW5ndGhQbHVzKSArIChjaGFyYWN0ZXJJbmRleCArIGV4Y2VycHRIYWxmTGVuZ3RoUGx1cyA8IGZpZWxkVGV4dC5sZW5ndGggPyAn4oCmJyA6ICcnKTtcbiAgICAgICAgLy8gICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogMTU3LCBtZXNzYWdlOiBgVW5leHBlY3RlZCBzcGFjZShzKSBiZXNpZGUgZGl2aWRlciAke2Rpc2NvbnRpZ3VvdXNEaXZpZGVyfWAsIGNoYXJhY3RlckluZGV4LCBleGNlcnB0LCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgfSBlbHNlIGlmIChkaXNjb250aWd1b3VzRGl2aWRlciA9PT0gJ+KApicgJiYgZmllbGRUZXh0LmluZGV4T2YoJy4uLicpID49IDApIHsgLy8gWWVzLCB3ZSBzdGlsbCBhY3R1YWxseSBhbGxvdyB0aGlzXG4gICAgICAgIHF1b3RlQml0cyA9IGZpZWxkVGV4dC5zcGxpdCgnLi4uJyk7XG4gICAgICAgIGlmICgoY2hhcmFjdGVySW5kZXggPSBmaWVsZFRleHQuaW5kZXhPZignIC4uLicpKSA+PSAwIHx8IChjaGFyYWN0ZXJJbmRleCA9IGZpZWxkVGV4dC5pbmRleE9mKCcuLi4gJykpID49IDApIHtcbiAgICAgICAgICAgIC8vIGRlYnVnTG9nKGBVbmV4cGVjdGVkIHNwYWNlKHMpIGJlc2lkZSBlbGxpcHNlIGNoYXJhY3RlcnMgaW4gJyR7ZmllbGRUZXh0fSdgKTtcbiAgICAgICAgICAgIGNvbnN0IGV4Y2VycHQgPSAoY2hhcmFjdGVySW5kZXggPiBleGNlcnB0SGFsZkxlbmd0aCA/ICfigKYnIDogJycpICsgZmllbGRUZXh0LnN1YnN0cmluZyhjaGFyYWN0ZXJJbmRleCAtIGV4Y2VycHRIYWxmTGVuZ3RoLCBjaGFyYWN0ZXJJbmRleCArIGV4Y2VycHRIYWxmTGVuZ3RoUGx1cykgKyAoY2hhcmFjdGVySW5kZXggKyBleGNlcnB0SGFsZkxlbmd0aFBsdXMgPCBmaWVsZFRleHQubGVuZ3RoID8gJ+KApicgOiAnJyk7XG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogMTU2LCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgc3BhY2UocykgYmVzaWRlIGVsbGlwc2UgY2hhcmFjdGVyc1wiLCBjaGFyYWN0ZXJJbmRleCwgZXhjZXJwdCwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGRlYnVnTG9nKGBHb3QgcXVvdGVCaXRzPSR7cXVvdGVCaXRzfWApO1xuXG4gICAgLy8gRmluZCB0aGUgdmVyc2UgdGV4dCBpbiB0aGUgb3JpZ2luYWwgbGFuZ3VhZ2VcbiAgICBsZXQgdmVyc2VUZXh0O1xuICAgIHRyeSB7XG4gICAgICAgIHZlcnNlVGV4dCA9IGNoZWNraW5nT3B0aW9ucz8ub3JpZ2luYWxMYW5ndWFnZVZlcnNlVGV4dDtcbiAgICB9IGNhdGNoIChnY1ZUZXJyb3IpIHsgfVxuICAgIGlmICghdmVyc2VUZXh0KSB7Ly8gbm90IHN1cHBsaWVkLCBzbyB0aGVuIHdlIG5lZWQgdG8gZ2V0IGl0IG91cnNlbHZlc1xuICAgICAgICBpZiAoY2hlY2tpbmdPcHRpb25zPy5kaXNhYmxlQWxsTGlua0ZldGNoaW5nRmxhZylcbiAgICAgICAgICAgIHJldHVybiBjb2xxUmVzdWx0OyAvLyBub3RoaW5nIGVsc2Ugd2UgY2FuIGRvIGhlcmVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2ZXJzZVRleHQgPSBhd2FpdCBnZXRPcmlnaW5hbFBhc3NhZ2UoYm9va0lELCBDLCBWLCBjaGVja2luZ09wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKCF2ZXJzZVRleHQpIHtcbiAgICAgICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogODUxLCBtZXNzYWdlOiBib29rSUQgPT09ICdPQlMnID8gXCJVbmFibGUgdG8gbG9hZCBPQlMgc3RvcnkgdGV4dFwiIDogXCJVbmFibGUgdG8gbG9hZCBvcmlnaW5hbCBsYW5ndWFnZSB2ZXJzZSB0ZXh0XCIsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29scVJlc3VsdDsgLy8gbm90aGluZyBlbHNlIHdlIGNhbiBkbyBoZXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3cgY2hlY2sgaWYgdGhlIHF1b3RlIGNhbiBiZSBmb3VuZCBpbiB0aGUgdmVyc2UgdGV4dFxuICAgIGlmIChxdW90ZUJpdHMpIHsgLy8gaXQgaGFkIGFuIGVsbGlwc2lzXG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KG9jY3VycmVuY2UgPT09IDEsIGBPaCAtLSBjYW4gZ2V0ICcke2ZpZWxkVGV4dH0nIHdpdGggb2NjdXJyZW5jZT0ke29jY3VycmVuY2V9IGluICR7Ym9va0lEfSAke0N9OiR7Vn1gKTtcbiAgICAgICAgaWYgKG9jY3VycmVuY2UgIT09IDEpIHtcbiAgICAgICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiA1MCwgbWVzc2FnZTogXCJJcyB0aGlzIHF1b3RlL29jY3VycmVuY2UgY29ycmVjdD8/P1wiLCBkZXRhaWxzOiBgT2NjdXJyZW5jZT0ke29jY3VycmVuY2V9YCwgZXhjZXJwdDogZmllbGRUZXh0LCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogQXJlIHdlIGNoZWNraW5nIHRoZSBjb3JyZWN0IG9jY3VycmVuY2UgYmVsb3cgPz8/XG4gICAgICAgIGNvbnN0IG51bVF1b3RlQml0cyA9IHF1b3RlQml0cy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1RdW90ZUJpdHMgPj0gMikge1xuICAgICAgICAgICAgbGV0IHF1b3RlSW5kZXggPSAtMTsgLy8gVGhlc2UgcGFydHMgaGF2ZSB0byBiZSBpbiBvcmRlciwgaS5lLiwgZm91bmQgaW4gdGhlIHZlcnNlIG9uZSBBRlRFUiB0aGUgb3RoZXJcbiAgICAgICAgICAgIGZvciAobGV0IGJpdEluZGV4ID0gMDsgYml0SW5kZXggPCBudW1RdW90ZUJpdHM7IGJpdEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAvLyBkZWJ1Z0xvZyhgd2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50OiBjaGVja2luZyBxdW90ZSBwYXJ0ICR7Yml0SW5kZXh9ICcke3F1b3RlQml0c1tiaXRJbmRleF19JyBmcm9tICcke2ZpZWxkVGV4dH0nIGFnYWluc3QgJyR7dmVyc2VUZXh0LnN1YnN0cmluZyhxdW90ZUluZGV4KX0nIGZyb20gJyR7dmVyc2VUZXh0fSdgKVxuICAgICAgICAgICAgICAgIGxldCBwYXJ0RGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgaWYgKG51bVF1b3RlQml0cyA9PT0gMSkgcGFydERlc2NyaXB0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYml0SW5kZXggPT09IDApIHBhcnREZXNjcmlwdGlvbiA9ICdiZWdpbm5pbmcnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdEluZGV4ID09PSBudW1RdW90ZUJpdHMgLSAxKSBwYXJ0RGVzY3JpcHRpb24gPSAnZW5kJztcbiAgICAgICAgICAgICAgICBlbHNlIHBhcnREZXNjcmlwdGlvbiA9IGBtaWRkbGUke251bVF1b3RlQml0cyA+IDMgPyBiaXRJbmRleCA6ICcnfWA7XG4gICAgICAgICAgICAgICAgaWYgKChxdW90ZUluZGV4ID0gdmVyc2VUZXh0LmluZGV4T2YocXVvdGVCaXRzW2JpdEluZGV4XSwgcXVvdGVJbmRleCArIDEpKSA8IDApIHsgLy8gdGhpcyBpcyB3aGF0IHdlIHJlYWxseSB3YW50IHRvIGNhdGNoXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBxdW90ZSBoYXMgbXVsdGlwbGUgcGFydHMsIGNyZWF0ZSBhIGRlc2NyaXB0aW9uIG9mIHRoZSBjdXJyZW50IHBhcnRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjZXJwdCA9IGAke3BhcnREZXNjcmlwdGlvbiA/ICcoJyArIHBhcnREZXNjcmlwdGlvbiArICcgcXVvdGUgcG9ydGlvbiknIDogJyd9ICcke3F1b3RlQml0c1tiaXRJbmRleF19J2A7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzZVRleHQuaW5kZXhPZihxdW90ZUJpdHNbYml0SW5kZXhdKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpY0Fzc2VydChiaXRJbmRleCA+IDAsIFwiVGhpcyBzaG91bGRuJ3QgaGFwcGVuIGZvciBiaXRJbmRleCBvZiB6ZXJvIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlYnVnTG9nKGA5MTQsIFVuYWJsZSB0byBmaW5kICcke2ZpZWxkVGV4dH0nICR7bnVtUXVvdGVCaXRzID09PSAxID8gJycgOiBgJyR7cXVvdGVCaXRzW2JpdEluZGV4XX0nIGB9JHtwYXJ0RGVzY3JpcHRpb24gPyAnKCcgKyBwYXJ0RGVzY3JpcHRpb24gKyAnKSAnIDogJyd9aW4gJyR7dmVyc2VUZXh0fSdgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiA5MTQsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZpbmQgb3JpZ2luYWwgbGFuZ3VhZ2UgcXVvdGUgcG9ydGlvbiBpbiB0aGUgcmlnaHQgcGxhY2UgaW4gdGhlIHZlcnNlIHRleHRcIiwgZGV0YWlsczogYHZlcnNlIHRleHQg4peXJHt2ZXJzZVRleHR94peWYCwgZXhjZXJwdCwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVidWdMb2coYDkxNSwgVW5hYmxlIHRvIGZpbmQgJyR7ZmllbGRUZXh0fScgJHtudW1RdW90ZUJpdHMgPT09IDEgPyAnJyA6IGAnJHtxdW90ZUJpdHNbYml0SW5kZXhdfScgYH0ke3BhcnREZXNjcmlwdGlvbiA/ICcoJyArIHBhcnREZXNjcmlwdGlvbiArICcpICcgOiAnJ31pbiAnJHt2ZXJzZVRleHR9J2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybkZvck5vdEZvdW5kUXVvdGVTZWdtZW50KGZpZWxkVGV4dCwgcGFydERlc2NyaXB0aW9uLCBvY2N1cnJlbmNlU3RyaW5nLCB2ZXJzZVRleHQsIG91ckxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZE5vdGljZSh7IHByaW9yaXR5OiA5MTUsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZpbmQgb3JpZ2luYWwgbGFuZ3VhZ2UgcXVvdGUgcG9ydGlvbiBpbiB2ZXJzZSB0ZXh0XCIsIGRldGFpbHM6IGB2ZXJzZSB0ZXh0IOKXlyR7dmVyc2VUZXh0feKXlmAsIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIFdlIGZvdW5kIHRoaXMgYml0XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlYnVnTG9nKGBGb3VuZCAke0N9OiR7Vn0gb3JpZ1F1b3RlIHBvcnRpb24gJHtiaXRJbmRleH0gJyR7cXVvdGVCaXRzW2JpdEluZGV4XX0nIGF0ICR7cXVvdGVJbmRleH0gKG51bSB0ZXh0IGNoYXJzID0gJHt2ZXJzZVRleHQubGVuZ3RofSlgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyc2VUZXh0Qml0cyA9IHZlcnNlVGV4dC5zcGxpdChxdW90ZUJpdHNbYml0SW5kZXhdKTsgLy8gTk9URTogY2FuIHNwbGl0IChiYWRseSkgb24gc2hvcnQgc3RyaW5ncyAobGlrZSDOtOG9siBvciDOteG8sCkgbWlkLXdvcmRcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tGb3VuZFF1b3RlU2VnbWVudChxdW90ZUJpdHNbYml0SW5kZXhdLCBwYXJ0RGVzY3JpcHRpb24sIG9jY3VycmVuY2VTdHJpbmcsIGAke3ZlcnNlVGV4dEJpdHNbb2NjdXJyZW5jZSAtIDFdfSR7cXVvdGVCaXRzW2JpdEluZGV4XX0ke3ZlcnNlVGV4dEJpdHNbb2NjdXJyZW5jZV19YCwgdmVyc2VUZXh0LCBvdXJMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgLy8gPCAyXG4gICAgICAgICAgICBhZGROb3RpY2UoeyBwcmlvcml0eTogODE1LCBtZXNzYWdlOiBcIkRpdmlkZXIgd2l0aG91dCBzdXJyb3VuZGluZyBzbmlwcGV0XCIsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICB9IGVsc2UgeyAvLyBPbmx5IGEgc2luZ2xlIHF1b3RlIChubyBkaXNjb250aWd1b3VzRGl2aWRlcilcbiAgICAgICAgaWYgKHZlcnNlVGV4dC5pbmRleE9mKGZpZWxkVGV4dCkgPj0gMCkge1xuICAgICAgICAgICAgaWYgKG9jY3VycmVuY2UgPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrT3JpZ2luYWxMYW5ndWFnZVF1b3RlQW5kT2NjdXJyZW5jZSBpcyBjaGVja2luZyBmb3IgJHtvY2N1cnJlbmNlfSBvY2N1cnJlbmNlcyBvZiAke2ZpZWxkVGV4dH1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzZVRleHRCaXRzID0gdmVyc2VUZXh0LnNwbGl0KGZpZWxkVGV4dCk7IC8vIE5PVEU6IGNhbiBzcGxpdCAoYmFkbHkpIG9uIHNob3J0IHN0cmluZ3MgKGxpa2UgzrThvbIgb3IgzrXhvLApIG1pZC13b3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsTnVtT2NjdXJyZW5jZXMgPSB2ZXJzZVRleHRCaXRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgaWYgKG9jY3VycmVuY2UgPiBhY3R1YWxOdW1PY2N1cnJlbmNlcykgeyAvLyBUaGVyZSdzIG5vdCBlbm91Z2ggb2YgdGhlbVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxPY2N1cnJlbmNlc1RleHQgPSBhY3R1YWxOdW1PY2N1cnJlbmNlcyA9PT0gMCA/ICdubycgOiBgb25seSAke2FjdHVhbE51bU9jY3VycmVuY2VzfWA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VycHQgPSBmaWVsZFRleHQuc3Vic3RyaW5nKDAsIGV4Y2VycHRIYWxmTGVuZ3RoKSArIChmaWVsZFRleHQubGVuZ3RoID4gMiAqIGV4Y2VycHRIYWxmTGVuZ3RoID8gJ+KApicgOiAnJykgKyBmaWVsZFRleHQuc3Vic3RyaW5nKGZpZWxkVGV4dC5sZW5ndGggLSBleGNlcnB0SGFsZkxlbmd0aCwgZmllbGRUZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZSh7IHByaW9yaXR5OiA5MTcsIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZpbmQgZHVwbGljYXRlIG9yaWdpbmFsIGxhbmd1YWdlIHF1b3RlIGluIHZlcnNlIHRleHRcIiwgZGV0YWlsczogYG9jY3VycmVuY2U9JHtvY2N1cnJlbmNlU3RyaW5nfSBidXQgJHthY3R1YWxPY2N1cnJlbmNlc1RleHR9IG9jY3VycmVuY2Uke2FjdHVhbE51bU9jY3VycmVuY2VzID09PSAxID8gJycgOiAncyd9IGZvdW5kLCBwYXNzYWdlIOKXlyR7dmVyc2VUZXh0feKXlmAsIGV4Y2VycHQsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0ZvdW5kUXVvdGVTZWdtZW50KGZpZWxkVGV4dCwgJycsIG9jY3VycmVuY2VTdHJpbmcsIGAke3ZlcnNlVGV4dEJpdHNbb2NjdXJyZW5jZSAtIDFdfSR7ZmllbGRUZXh0fSR7dmVyc2VUZXh0Qml0c1tvY2N1cnJlbmNlXX1gLCB2ZXJzZVRleHQsIG91ckxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBXZSBvbmx5IG5lZWQgdG8gY2hlY2sgZm9yIG9uZSBvY2N1cnJlbmNlXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogVGhlIGVycm9yIGluIHRoZSBuZXh0IGxpbmUgaGFzIGJlZW4gbm90aWZpZWQgZWxzZXdoZXJlLCBidXQgc2hvdWxkIHdlIHRyeSB0byBoYW5kbGUgaXQgbW9yZSBpbnRlbGxpZ2VudGx5IGhlcmUgPz8/XG4gICAgICAgICAgICAgICAgbG9naWNBc3NlcnQob2NjdXJyZW5jZSA9PT0gMSB8fCBvY2N1cnJlbmNlID09PSAtMSwgYEV4cGVjdGVkICR7Q306JHtWfSBvY2N1cnJlbmNlIHRvIGJlIDEgb3IgLTEgbm90ICR7b2NjdXJyZW5jZX0gZnJvbSAnJHtvY2N1cnJlbmNlU3RyaW5nfScgZm9yICR7Q306JHtWfSAnJHtmaWVsZFRleHR9J2ApO1xuICAgICAgICAgICAgICAgIC8vIERvdWJsZSBjaGVjayB0aGF0IGl0IGRvZXNu4oCZdCBzdGFydC9zdG9wIGluIHRoZSBtaWRkbGUgb2YgYSB3b3JkXG4gICAgICAgICAgICAgICAgLy8gZGVidWdMb2coYEhlcmUgd2l0aCBmaWVsZFRleHQ9JHtmaWVsZFRleHR9IGFuZCB2ZXJzZVRleHQ9JHt2ZXJzZVRleHR9YCk7XG4gICAgICAgICAgICAgICAgLy8gZGVidWdMb2coYHJlbWFpbmluZ0JpdHM9JHtKU09OLnN0cmluZ2lmeShyZW1haW5pbmdCaXRzKX1gKTtcbiAgICAgICAgICAgICAgICBjaGVja0ZvdW5kUXVvdGVTZWdtZW50KGZpZWxkVGV4dCwgJycsIG9jY3VycmVuY2VTdHJpbmcsIHZlcnNlVGV4dCwgdmVyc2VUZXh0LCBvdXJMb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGNhbuKAmXQgZmluZCB0aGUgZ2l2ZW4gdGV4dFxuICAgICAgICAgICAgLy8gZGVidWdMb2coYDkxNiwgVW5hYmxlIHRvIGZpbmQgJyR7ZmllbGRUZXh0fScgaW4gJyR7dmVyc2VUZXh0fSdgKTtcbiAgICAgICAgICAgIHdhcm5Gb3JOb3RGb3VuZFF1b3RlU2VnbWVudChmaWVsZFRleHQsICcnLCBvY2N1cnJlbmNlU3RyaW5nLCB2ZXJzZVRleHQsIG91ckxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZ1bmN0aW9uTG9nKGBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2UgaXMgcmV0dXJuaW5nICR7IEpTT04uc3RyaW5naWZ5KGNvbHFSZXN1bHQpIH1gKTtcbiAgICByZXR1cm4gY29scVJlc3VsdDtcbn1cbi8vIGVuZCBvZiBjaGVja09yaWdpbmFsTGFuZ3VhZ2VRdW90ZUFuZE9jY3VycmVuY2UgZnVuY3Rpb25cbiJdfQ==