"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _typeof = require("@babel/runtime/helpers/typeof");Object.defineProperty(exports, "__esModule", { value: true });exports.checkTN_TSV9Table = checkTN_TSV9Table;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var books = _interopRequireWildcard(require("./books/books"));
var _defaults = require("./defaults");
var _tnTsv9RowCheck = require("./tn-tsv9-row-check");
var _disabledNotices = require("./disabled-notices");

var _utilities = require("./utilities");function _getRequireWildcardCache(nodeInterop) {if (typeof WeakMap !== "function") return null;var cacheBabelInterop = new WeakMap();var cacheNodeInterop = new WeakMap();return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {return nodeInterop ? cacheNodeInterop : cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj, nodeInterop) {if (!nodeInterop && obj && obj.__esModule) {return obj;}if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache(nodeInterop);if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _createForOfIteratorHelper(o, allowArrayLike) {var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];if (!it) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = it.call(o);}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it.return != null) it.return();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) {symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});}keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {(0, _defineProperty2.default)(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}


var TN_TABLE_TEXT_VALIDATOR_VERSION_STRING = '0.4.2';

var NUM_EXPECTED_TN_TSV_FIELDS = 9; // so expects 8 tabs per line
var EXPECTED_TN_HEADING_LINE = 'Book\tChapter\tVerse\tID\tSupportReference\tOrigQuote\tOccurrence\tGLQuote\tOccurrenceNote';


/**
 *
 * @param {string} languageCode
 * @param {string} repoCode - 'TN' -- keeps parameter set consistent with other similar functions
 * @param {string} bookID
 * @param {string} filename
 * @param {string} tableText
 * @param {string} givenLocation
 * @param {Object} checkingOptions
 */function
checkTN_TSV9Table(_x, _x2, _x3, _x4, _x5, _x6, _x7) {return _checkTN_TSV9Table.apply(this, arguments);}






























































































































































































































































// end of checkTN_TSV9Table function
function _checkTN_TSV9Table() {_checkTN_TSV9Table = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(languageCode, repoCode, bookID, filename, tableText, givenLocation, checkingOptions) {var ourLocation, ttResult, addSuccessMessage, addNoticePartial, excerptLength, lowercaseBookID, numChaptersThisBook, lines, lastB, lastC, lastV, rowIDListForVerse, uniqueRowListForVerse, numVersesThisChapter, n, fields, _fields, B, C, V, rowID, supportReference, OrigLangQuote, occurrence, _GLQuote, _occurrenceNote, drResultObject, _iterator, _step, drNoticeEntry, _iterator2, _step2, checkedRepoName, _iterator3, _step3, checkedFilenameExtension, uniqueID, intC, lastintC, intV, lastintV, _C, _V, _rowID;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:addNoticePartial = function _addNoticePartial(noticeObject) {// functionLog(`checkTN_TSV9Table notice: (priority=${priority}) ${message}${characterIndex > 0 ? ` (at character ${characterIndex})` : ""}${excerpt ? ` ${excerpt}` : ""}${location}`);
              //parameterAssert(noticeObject.priority !== undefined, "TSV addNoticePartial: 'priority' parameter should be defined");
              //parameterAssert(typeof noticeObject.priority === 'number', `TSV addNoticePartial: 'priority' parameter should be a number not a '${typeof noticeObject.priority}': ${noticeObject.priority}`);
              //parameterAssert(noticeObject.message !== undefined, "TSV addNoticePartial: 'message' parameter should be defined");
              //parameterAssert(typeof noticeObject.message === 'string', `TSV addNoticePartial: 'message' parameter should be a string not a '${typeof noticeObject.message}': ${noticeObject.message}`);
              // //parameterAssert(C !== undefined, "TSV addNoticePartial: 'C' parameter should be defined");
              if (noticeObject.C) {//parameterAssert(typeof noticeObject.C === 'string', `TSV addNoticePartial: 'C' parameter should be a string not a '${typeof noticeObject.C}': ${noticeObject.C}`);
              } // //parameterAssert(V !== undefined, "TSV addNoticePartial: 'V' parameter should be defined");
              if (noticeObject.V) {//parameterAssert(typeof noticeObject.V === 'string', `TSV addNoticePartial: 'V' parameter should be a string not a '${typeof noticeObject.V}': ${noticeObject.V}`);
              } // //parameterAssert(characterIndex !== undefined, "TSV addNoticePartial: 'characterIndex' parameter should be defined");
              if (noticeObject.characterIndex) {//parameterAssert(typeof noticeObject.characterIndex === 'number', `TSV addNoticePartial: 'characterIndex' parameter should be a number not a '${typeof noticeObject.characterIndex}': ${noticeObject.characterIndex}`);
              } // //parameterAssert(excerpt !== undefined, "TSV addNoticePartial: 'excerpt' parameter should be defined");
              if (noticeObject.excerpt) {//parameterAssert(typeof noticeObject.excerpt === 'string', `TSV addNoticePartial: 'excerpt' parameter should be a string not a '${typeof noticeObject.excerpt}': ${noticeObject.excerpt}`);
              } //parameterAssert(noticeObject.location !== undefined, "TSV addNoticePartial: 'location' parameter should be defined");
              //parameterAssert(typeof noticeObject.location === 'string', `TSV addNoticePartial: 'location' parameter should be a string not a '${typeof noticeObject.location}': ${noticeObject.location}`);
              if (noticeObject.debugChain) noticeObject.debugChain = "checkTN_TSV9Table ".concat(noticeObject.debugChain); // NOTE: We only add the repoCode here because this function is called directly by tC Create
              //          and notice disabling currently depends on knowing the repoCode
              if (noticeObject.repoCode) (0, _utilities.debugLog)("checkTN_TSV9Table.addNoticePartial already had repoCode=".concat(noticeObject.repoCode, " (will be lost)"));ttResult.noticeList.push(_objectSpread(_objectSpread({}, noticeObject), {}, { bookID: bookID, filename: filename, repoCode: 'TN' }));};addSuccessMessage = function _addSuccessMessage(successString) {// functionLog(`checkTN_TSV9Table success: ${successString}`);
              ttResult.successList.push(successString);}; /*
            This function is optimised for checking the entire file, i.e., all rows.
               It also has the advantage of being able to compare one row with the previous one.
              bookID is a three-character UPPERCASE USFM book identifier or 'OBS'.
              Returns a result object containing a successList and a noticeList
             */ // functionLog(`checkTN_TSV9Table(${languageCode}, ${bookID}, ${filename}, ${tableText.length}, ${givenLocation},${JSON.stringify(checkingOptions)})…`);
            //parameterAssert(languageCode !== undefined, "checkTN_TSV9Table: 'languageCode' parameter should be defined");
            //parameterAssert(typeof languageCode === 'string', `checkTN_TSV9Table: 'languageCode' parameter should be a string not a '${typeof languageCode}'`);
            //parameterAssert(repoCode === 'TN', `checkTN_TSV9Table: repoCode expected 'TN' not '${repoCode}'`);
            //parameterAssert(bookID !== undefined, "checkTN_TSV9Table: 'bookID' parameter should be defined");
            //parameterAssert(typeof bookID === 'string', `checkTN_TSV9Table: 'bookID' parameter should be a string not a '${typeof bookID}'`);
            //parameterAssert(bookID.length === 3, `checkTN_TSV9Table: 'bookID' parameter should be three characters long not ${bookID.length}`);
            //parameterAssert(bookID.toUpperCase() === bookID, `checkTN_TSV9Table: 'bookID' parameter should be UPPERCASE not '${bookID}'`);
            //parameterAssert(books.isValidBookID(bookID), `checkTN_TSV9Table: '${bookID}' is not a valid USFM book identifier`);
            //parameterAssert(givenLocation !== undefined, "checkTN_TSV9Table: 'givenLocation' parameter should be defined");
            //parameterAssert(typeof givenLocation === 'string', `checkTN_TSV9Table: 'givenLocation' parameter should be a string not a '${typeof givenLocation}'`);
            //parameterAssert(checkingOptions !== undefined, "checkTN_TSV9Table: 'checkingOptions' parameter should be defined");
            ourLocation = givenLocation;if (ourLocation && ourLocation[0] !== ' ') ourLocation = " ".concat(ourLocation);ttResult = { successList: [], noticeList: [] }; /**
             *
             * @param {string} successString
             */try {excerptLength = checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.excerptLength;} catch (ttcError) {}if (typeof excerptLength !== 'number' || isNaN(excerptLength)) {excerptLength = _defaults.DEFAULT_EXCERPT_LENGTH; // debugLog(`Using default excerptLength=${excerptLength}`);
            } // else
            // debugLog(`Using supplied excerptLength=${excerptLength}`, `cf. default=${DEFAULT_EXCERPT_LENGTH}`);
            // const excerptHalfLength = Math.floor(excerptLength / 2); // rounded down
            // const excerptHalfLengthPlus = Math.floor((excerptLength + 1) / 2); // rounded up
            // debugLog(`Using excerptHalfLength=${excerptHalfLength}`, `excerptHalfLengthPlus=${excerptHalfLengthPlus}`);
            lowercaseBookID = bookID.toLowerCase();numChaptersThisBook = 0;try {//parameterAssert(lowercaseBookID !== 'obs', "Shouldn’t happen in tn_table-text-check");
              numChaptersThisBook = books.chaptersInBook(bookID);} catch (_unused) {if (!books.isValidBookID(bookID)) // must not be in FRT, BAK, etc.
                addNoticePartial({ priority: 747, message: "Bad function call: should be given a valid book abbreviation", excerpt: bookID, location: " (not '".concat(bookID, "')").concat(ourLocation) });}lines = tableText.split('\n'); // debugLog(`  '${location}' has ${lines.length.toLocaleString()} total lines (expecting ${NUM_EXPECTED_TN_FIELDS} fields in each line)`);
            lastB = '', lastC = '', lastV = '';rowIDListForVerse = [], uniqueRowListForVerse = [];numVersesThisChapter = 0;n = 0;case 15:if (!(n < lines.length)) {_context.next = 48;break;}if (!(n === 0)) {_context.next = 20;break;}if (lines[0] === EXPECTED_TN_HEADING_LINE) addSuccessMessage("Checked TSV header ".concat(ourLocation));else addNoticePartial({ priority: 988, message: "Bad TSV header", details: "expected '".concat(EXPECTED_TN_HEADING_LINE, "'"), excerpt: lines[0], lineNumber: 1, location: ourLocation });_context.next = 45;break;case 20:fields = lines[n].split('\t');if (!(fields.length === NUM_EXPECTED_TN_TSV_FIELDS)) {_context.next = 44;break;} // eslint-disable-next-line no-unused-vars
            _fields = (0, _slicedToArray2.default)(fields, 9), B = _fields[0], C = _fields[1], V = _fields[2], rowID = _fields[3], supportReference = _fields[4], OrigLangQuote = _fields[5], occurrence = _fields[6], _GLQuote = _fields[7], _occurrenceNote = _fields[8]; // Use the row check to do most basic checks
            _context.next = 25;return (0, _tnTsv9RowCheck.checkTN_TSV9DataRow)(languageCode, repoCode, lines[n], bookID, C, V, ourLocation, checkingOptions);case 25:drResultObject = _context.sent; // Choose only ONE of the following
            // This is the fast way of append the results from this field
            // result.noticeList = result.noticeList.concat(firstResult.noticeList);
            // If we need to put everything through addNoticePartial, e.g., for debugging or filtering
            //  process results line by line
            _iterator = _createForOfIteratorHelper(drResultObject.noticeList);try {for (_iterator.s(); !(_step = _iterator.n()).done;) {drNoticeEntry = _step.value;if (drNoticeEntry.extra) // it must be an indirect check on a TA or TW article from a TN check
                  ttResult.noticeList.push(drNoticeEntry); // Just copy the complete notice as is
                else if (drNoticeEntry.priority !== 931) // We already caught Missing row ID
                    addNoticePartial(_objectSpread(_objectSpread({}, drNoticeEntry), {}, { lineNumber: n + 1 }));} // The following is needed coz we might be checking the linked TA and/or TW articles
            } catch (err) {_iterator.e(err);} finally {_iterator.f();}if (drResultObject.checkedFileCount && drResultObject.checkedFileCount > 0) if (typeof ttResult.checkedFileCount === 'number') ttResult.checkedFileCount += drResultObject.checkedFileCount;else ttResult.checkedFileCount = drResultObject.checkedFileCount;if (drResultObject.checkedFilesizes && drResultObject.checkedFilesizes > 0) if (typeof ttResult.checkedFilesizes === 'number') ttResult.checkedFilesizes += drResultObject.checkedFilesizes;else ttResult.checkedFilesizes = drResultObject.checkedFilesizes;if (drResultObject.checkedRepoNames && drResultObject.checkedRepoNames.length > 0) {_iterator2 = _createForOfIteratorHelper(drResultObject.checkedRepoNames);try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {checkedRepoName = _step2.value;try {if (ttResult.checkedRepoNames.indexOf(checkedRepoName) < 0) ttResult.checkedRepoNames.push(checkedRepoName);} catch (_unused2) {ttResult.checkedRepoNames = [checkedRepoName];}}} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}}if (drResultObject.checkedFilenameExtensions && drResultObject.checkedFilenameExtensions.length > 0) {_iterator3 = _createForOfIteratorHelper(drResultObject.checkedFilenameExtensions);try {for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {checkedFilenameExtension = _step3.value;try {if (ttResult.checkedFilenameExtensions.indexOf(checkedFilenameExtension) < 0) ttResult.checkedFilenameExtensions.push(checkedFilenameExtension);} catch (_unused3) {ttResult.checkedFilenameExtensions = [checkedFilenameExtension];}}} catch (err) {_iterator3.e(err);} finally {_iterator3.f();}} // if (ttResult.checkedFilenameExtensions) userLog("ttResult", JSON.stringify(ttResult));
            // So here we only have to check against the previous and next fields for out-of-order problems and duplicate problems
            if (B !== lastB || C !== lastC || V !== lastV) {rowIDListForVerse = []; // ID's only need to be unique within each verse
              uniqueRowListForVerse = []; // Same for these
            } // TODO: Check if we need this at all (even though tC 3.0 can’t display these "duplicate" notes)
            // Check for duplicate notes
            uniqueID = C + V + supportReference + OrigLangQuote + occurrence; // This combination should not be repeated
            // if (uniqueRowListForVerse.includes(uniqueID))
            //     addNoticePartial({ priority: 880, C, V, message: `Duplicate note`, rowID, lineNumber: n + 1, location: ourLocation });
            // if (uniqueRowListForVerse.includes(uniqueID))
            //     addNoticePartial({ priority: 80, C, V, message: `Note: tC 3.0 won’t display duplicate note`, rowID, lineNumber: n + 1, location: ourLocation });
            uniqueRowListForVerse.push(uniqueID);if (B) {if (B !== bookID) addNoticePartial({ priority: 745, C: C, V: V, message: "Wrong '".concat(B, "' book identifier (expected '").concat(bookID, "')"), rowID: rowID, lineNumber: n + 1, location: ourLocation });} else addNoticePartial({ priority: 744, C: C, V: V, message: "Missing book identifier", rowID: rowID, lineNumber: n + 1, location: ourLocation });if (C) {if (C === 'front') {} else if (/^\d+$/.test(C)) {intC = Number(C);if (C !== lastC) numVersesThisChapter = books.versesInChapter(lowercaseBookID, intC);if (intC === 0) addNoticePartial({ priority: 551, C: C, V: V, message: "Invalid zero chapter number", rowID: rowID, lineNumber: n + 1, excerpt: C, location: ourLocation });if (intC > numChaptersThisBook) addNoticePartial({ priority: 737, C: C, V: V, message: "Invalid large chapter number", rowID: rowID, lineNumber: n + 1, excerpt: C, location: ourLocation });if (/^\d+$/.test(lastC)) {lastintC = Number(lastC);if (intC < lastintC) addNoticePartial({ priority: 736, C: C, V: V, message: "Receding chapter number", details: "'".concat(C, "' after '").concat(lastC, "'"), rowID: rowID, lineNumber: n + 1, location: ourLocation });else if (intC > lastintC + 1) addNoticePartial({ priority: 735, C: C, V: V, message: "Advancing chapter number", details: "'".concat(C, "' after '").concat(lastC, "'").rowID, lineNumber: n + 1, location: ourLocation });}} else addNoticePartial({ priority: 734, C: C, V: V, message: "Bad chapter number", rowID: rowID, lineNumber: n + 1, location: ourLocation });} else addNoticePartial({ priority: 739, C: C, V: V, message: "Missing chapter number", rowID: rowID, lineNumber: n + 1, location: " after ".concat(lastC, ":").concat(V).concat(ourLocation) });if (V) {if (V === 'intro') {} else if (/^\d+$/.test(V)) {intV = Number(V);if (intV === 0 && bookID !== 'PSA') // Psalms have \d titles
                  addNoticePartial({ priority: 552, C: C, V: V, message: "Invalid zero verse number", details: "for chapter ".concat(C), rowID: rowID, lineNumber: n + 1, excerpt: V, location: ourLocation });if (intV > numVersesThisChapter) addNoticePartial({ priority: 734, C: C, V: V, message: "Invalid large verse number", details: "for chapter ".concat(C), rowID: rowID, lineNumber: n + 1, excerpt: V, location: ourLocation });if (/^\d+$/.test(lastV)) {lastintV = Number(lastV);if (C === lastC && intV < lastintV) addNoticePartial({ priority: 733, C: C, V: V, message: "Receding verse number", details: "'".concat(V, "' after '").concat(lastV, " for chapter ").concat(C), rowID: rowID, lineNumber: n + 1, excerpt: V, location: ourLocation }); // else if (intV > lastintV + 1)
                  //   addNoticePartial({priority:556, "Skipped verses with '${V}' verse number after '${lastV}'${withString}`);
                }} else addNoticePartial({ priority: 738, C: C, V: V, message: "Bad verse number", rowID: rowID, lineNumber: n + 1, location: ourLocation });} else addNoticePartial({ priority: 790, C: C, V: V, message: "Missing verse number", rowID: rowID, lineNumber: n + 1, location: " after ".concat(C, ":").concat(lastV).concat(ourLocation) });if (rowID) {if (rowIDListForVerse.includes(rowID)) addNoticePartial({ priority: 831, C: C, V: V, message: "Duplicate '".concat(rowID, "' ID"), fieldName: 'ID', rowID: rowID, lineNumber: n + 1, location: ourLocation });rowIDListForVerse.push(rowID);} else addNoticePartial({ priority: 932, C: C, V: V, message: "Missing row ID", fieldName: 'ID', lineNumber: n + 1, location: ourLocation });lastB = B;lastC = C;lastV = V;_context.next = 45;break;case 44: // wrong number of fields in the row
            // if (n === lines.length - 1) // it’s the last line
            //     userLog(`  Line ${n}: Has ${fields.length} field(s) instead of ${NUM_EXPECTED_TN_FIELDS}: ${EXPECTED_TN_HEADING_LINE.replace(/\t/g, ', ')}`);
            // else
            if (n !== lines.length - 1) {// it’s not the last line
              // Have a go at getting some of the first fields out of the line
              _C = '?', _V = '?', _rowID = '????';try {_C = fields[1];} catch (_unused4) {}try {_V = fields[2];} catch (_unused5) {}try {_rowID = fields[3];} catch (_unused6) {}addNoticePartial({ priority: 983, message: "Wrong number of tabbed fields (expected ".concat(NUM_EXPECTED_TN_TSV_FIELDS, ")"), excerpt: "Found ".concat(fields.length, " field").concat(fields.length === 1 ? '' : 's'), C: _C, V: _V, rowID: _rowID, lineNumber: n + 1, location: ourLocation });}case 45:n++;_context.next = 15;break;case 48:if (!(checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.suppressNoticeDisablingFlag)) {// functionLog(`checkTN_TSV9Table: calling removeDisabledNotices(${ttResult.noticeList.length}) having ${JSON.stringify(checkingOptions)}`);
              ttResult.noticeList = (0, _disabledNotices.removeDisabledNotices)(ttResult.noticeList);}if ((!(checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.cutoffPriorityLevel) || (checkingOptions === null || checkingOptions === void 0 ? void 0 : checkingOptions.cutoffPriorityLevel) < 20) && checkingOptions !== null && checkingOptions !== void 0 && checkingOptions.disableAllLinkFetchingFlag) addNoticePartial({ priority: 20, message: "Note that 'disableAllLinkFetchingFlag' was set so link targets were not checked", location: ourLocation });addSuccessMessage("Checked all ".concat((lines.length - 1).toLocaleString(), " data line").concat(lines.length - 1 === 1 ? '' : 's').concat(ourLocation, "."));if (ttResult.noticeList.length) addSuccessMessage("checkTN_TSV9Table v".concat(TN_TABLE_TEXT_VALIDATOR_VERSION_STRING, " finished with ").concat(ttResult.noticeList.length ? ttResult.noticeList.length.toLocaleString() : "zero", " notice").concat(ttResult.noticeList.length === 1 ? '' : 's'));else addSuccessMessage("No errors or warnings found by checkTN_TSV9Table v".concat(TN_TABLE_TEXT_VALIDATOR_VERSION_STRING)); // debugLog(`  checkTN_TSV9Table returning with ${result.successList.length.toLocaleString()} success(es), ${result.noticeList.length.toLocaleString()} notice(s).`);
            // debugLog("checkTN_TSV9Table result is", JSON.stringify(result));
            return _context.abrupt("return", ttResult);case 53:case "end":return _context.stop();}}}, _callee);}));return _checkTN_TSV9Table.apply(this, arguments);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL3RuLXRzdjktdGFibGUtY2hlY2suanMiXSwibmFtZXMiOlsiVE5fVEFCTEVfVEVYVF9WQUxJREFUT1JfVkVSU0lPTl9TVFJJTkciLCJOVU1fRVhQRUNURURfVE5fVFNWX0ZJRUxEUyIsIkVYUEVDVEVEX1ROX0hFQURJTkdfTElORSIsImNoZWNrVE5fVFNWOVRhYmxlIiwibGFuZ3VhZ2VDb2RlIiwicmVwb0NvZGUiLCJib29rSUQiLCJmaWxlbmFtZSIsInRhYmxlVGV4dCIsImdpdmVuTG9jYXRpb24iLCJjaGVja2luZ09wdGlvbnMiLCJhZGRTdWNjZXNzTWVzc2FnZSIsImFkZE5vdGljZVBhcnRpYWwiLCJub3RpY2VPYmplY3QiLCJDIiwiViIsImNoYXJhY3RlckluZGV4IiwiZXhjZXJwdCIsImRlYnVnQ2hhaW4iLCJ0dFJlc3VsdCIsIm5vdGljZUxpc3QiLCJwdXNoIiwic3VjY2Vzc1N0cmluZyIsInN1Y2Nlc3NMaXN0Iiwib3VyTG9jYXRpb24iLCJleGNlcnB0TGVuZ3RoIiwidHRjRXJyb3IiLCJpc05hTiIsIkRFRkFVTFRfRVhDRVJQVF9MRU5HVEgiLCJsb3dlcmNhc2VCb29rSUQiLCJ0b0xvd2VyQ2FzZSIsIm51bUNoYXB0ZXJzVGhpc0Jvb2siLCJib29rcyIsImNoYXB0ZXJzSW5Cb29rIiwiaXNWYWxpZEJvb2tJRCIsInByaW9yaXR5IiwibWVzc2FnZSIsImxvY2F0aW9uIiwibGluZXMiLCJzcGxpdCIsImxhc3RCIiwibGFzdEMiLCJsYXN0ViIsInJvd0lETGlzdEZvclZlcnNlIiwidW5pcXVlUm93TGlzdEZvclZlcnNlIiwibnVtVmVyc2VzVGhpc0NoYXB0ZXIiLCJuIiwibGVuZ3RoIiwiZGV0YWlscyIsImxpbmVOdW1iZXIiLCJmaWVsZHMiLCJCIiwicm93SUQiLCJzdXBwb3J0UmVmZXJlbmNlIiwiT3JpZ0xhbmdRdW90ZSIsIm9jY3VycmVuY2UiLCJfR0xRdW90ZSIsIl9vY2N1cnJlbmNlTm90ZSIsImRyUmVzdWx0T2JqZWN0IiwiZHJOb3RpY2VFbnRyeSIsImV4dHJhIiwiY2hlY2tlZEZpbGVDb3VudCIsImNoZWNrZWRGaWxlc2l6ZXMiLCJjaGVja2VkUmVwb05hbWVzIiwiY2hlY2tlZFJlcG9OYW1lIiwiaW5kZXhPZiIsImNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbnMiLCJjaGVja2VkRmlsZW5hbWVFeHRlbnNpb24iLCJ1bmlxdWVJRCIsInRlc3QiLCJpbnRDIiwiTnVtYmVyIiwidmVyc2VzSW5DaGFwdGVyIiwibGFzdGludEMiLCJpbnRWIiwibGFzdGludFYiLCJpbmNsdWRlcyIsImZpZWxkTmFtZSIsInN1cHByZXNzTm90aWNlRGlzYWJsaW5nRmxhZyIsImN1dG9mZlByaW9yaXR5TGV2ZWwiLCJkaXNhYmxlQWxsTGlua0ZldGNoaW5nRmxhZyIsInRvTG9jYWxlU3RyaW5nIl0sIm1hcHBpbmdzIjoid25CQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDOzs7QUFHQSxJQUFNQSxzQ0FBc0MsR0FBRyxPQUEvQzs7QUFFQSxJQUFNQywwQkFBMEIsR0FBRyxDQUFuQyxDLENBQXNDO0FBQ3RDLElBQU1DLHdCQUF3QixHQUFHLDRGQUFqQzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRztBQUNzQkMsaUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQStQdEI7NEhBL1BPLGlCQUFpQ0MsWUFBakMsRUFBK0NDLFFBQS9DLEVBQXlEQyxNQUF6RCxFQUFpRUMsUUFBakUs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QUFvQjJCLE1BQXBCLEdBQTZCNUIsUUFBUSxDQUFDQyxVQUFULENBQW9CMkIsTUFBcEIsQ0FBMkJrQyxjQUEzQixFQUE3QixHQUEyRSxNQUExSixvQkFBMEs5RCxRQUFRLENBQUNDLFVBQVQsQ0FBb0IyQixNQUFwQixLQUErQixDQUEvQixHQUFtQyxFQUFuQyxHQUF3QyxHQUFsTixFQUFqQixDQURKLEtBR0lwQyxpQkFBaUIsNkRBQXNEWCxzQ0FBdEQsRUFBakIsQ0ExUEQsQ0EyUEg7QUFDQTtBQTVQRyw2Q0E2UEltQixRQTdQSiwyRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGJvb2tzIGZyb20gJy4vYm9va3MvYm9va3MnO1xuaW1wb3J0IHsgREVGQVVMVF9FWENFUlBUX0xFTkdUSCB9IGZyb20gJy4vZGVmYXVsdHMnXG5pbXBvcnQgeyBjaGVja1ROX1RTVjlEYXRhUm93IH0gZnJvbSAnLi90bi10c3Y5LXJvdy1jaGVjayc7XG5pbXBvcnQgeyByZW1vdmVEaXNhYmxlZE5vdGljZXMgfSBmcm9tICcuL2Rpc2FibGVkLW5vdGljZXMnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBkZWJ1Z0xvZywgcGFyYW1ldGVyQXNzZXJ0IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5cbmNvbnN0IFROX1RBQkxFX1RFWFRfVkFMSURBVE9SX1ZFUlNJT05fU1RSSU5HID0gJzAuNC4yJztcblxuY29uc3QgTlVNX0VYUEVDVEVEX1ROX1RTVl9GSUVMRFMgPSA5OyAvLyBzbyBleHBlY3RzIDggdGFicyBwZXIgbGluZVxuY29uc3QgRVhQRUNURURfVE5fSEVBRElOR19MSU5FID0gJ0Jvb2tcXHRDaGFwdGVyXFx0VmVyc2VcXHRJRFxcdFN1cHBvcnRSZWZlcmVuY2VcXHRPcmlnUXVvdGVcXHRPY2N1cnJlbmNlXFx0R0xRdW90ZVxcdE9jY3VycmVuY2VOb3RlJztcblxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2VDb2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVwb0NvZGUgLSAnVE4nIC0tIGtlZXBzIHBhcmFtZXRlciBzZXQgY29uc2lzdGVudCB3aXRoIG90aGVyIHNpbWlsYXIgZnVuY3Rpb25zXG4gKiBAcGFyYW0ge3N0cmluZ30gYm9va0lEXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWJsZVRleHRcbiAqIEBwYXJhbSB7c3RyaW5nfSBnaXZlbkxvY2F0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gY2hlY2tpbmdPcHRpb25zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1ROX1RTVjlUYWJsZShsYW5ndWFnZUNvZGUsIHJlcG9Db2RlLCBib29rSUQsIGZpbGVuYW1lLCB0YWJsZVRleHQsIGdpdmVuTG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucykge1xuICAgIC8qXG4gICAgVGhpcyBmdW5jdGlvbiBpcyBvcHRpbWlzZWQgZm9yIGNoZWNraW5nIHRoZSBlbnRpcmUgZmlsZSwgaS5lLiwgYWxsIHJvd3MuXG5cbiAgICAgIEl0IGFsc28gaGFzIHRoZSBhZHZhbnRhZ2Ugb2YgYmVpbmcgYWJsZSB0byBjb21wYXJlIG9uZSByb3cgd2l0aCB0aGUgcHJldmlvdXMgb25lLlxuXG4gICAgIGJvb2tJRCBpcyBhIHRocmVlLWNoYXJhY3RlciBVUFBFUkNBU0UgVVNGTSBib29rIGlkZW50aWZpZXIgb3IgJ09CUycuXG5cbiAgICAgUmV0dXJucyBhIHJlc3VsdCBvYmplY3QgY29udGFpbmluZyBhIHN1Y2Nlc3NMaXN0IGFuZCBhIG5vdGljZUxpc3RcbiAgICAgKi9cbiAgICAvLyBmdW5jdGlvbkxvZyhgY2hlY2tUTl9UU1Y5VGFibGUoJHtsYW5ndWFnZUNvZGV9LCAke2Jvb2tJRH0sICR7ZmlsZW5hbWV9LCAke3RhYmxlVGV4dC5sZW5ndGh9LCAke2dpdmVuTG9jYXRpb259LCR7SlNPTi5zdHJpbmdpZnkoY2hlY2tpbmdPcHRpb25zKX0p4oCmYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQobGFuZ3VhZ2VDb2RlICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5VGFibGU6ICdsYW5ndWFnZUNvZGUnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2YgbGFuZ3VhZ2VDb2RlID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOVRhYmxlOiAnbGFuZ3VhZ2VDb2RlJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBsYW5ndWFnZUNvZGV9J2ApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHJlcG9Db2RlID09PSAnVE4nLCBgY2hlY2tUTl9UU1Y5VGFibGU6IHJlcG9Db2RlIGV4cGVjdGVkICdUTicgbm90ICcke3JlcG9Db2RlfSdgKTtcbiAgICAvL3BhcmFtZXRlckFzc2VydChib29rSUQgIT09IHVuZGVmaW5lZCwgXCJjaGVja1ROX1RTVjlUYWJsZTogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBib29rSUQgPT09ICdzdHJpbmcnLCBgY2hlY2tUTl9UU1Y5VGFibGU6ICdib29rSUQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIGJvb2tJRH0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va0lELmxlbmd0aCA9PT0gMywgYGNoZWNrVE5fVFNWOVRhYmxlOiAnYm9va0lEJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIHRocmVlIGNoYXJhY3RlcnMgbG9uZyBub3QgJHtib29rSUQubGVuZ3RofWApO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGJvb2tJRC50b1VwcGVyQ2FzZSgpID09PSBib29rSUQsIGBjaGVja1ROX1RTVjlUYWJsZTogJ2Jvb2tJRCcgcGFyYW1ldGVyIHNob3VsZCBiZSBVUFBFUkNBU0Ugbm90ICcke2Jvb2tJRH0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoYm9va3MuaXNWYWxpZEJvb2tJRChib29rSUQpLCBgY2hlY2tUTl9UU1Y5VGFibGU6ICcke2Jvb2tJRH0nIGlzIG5vdCBhIHZhbGlkIFVTRk0gYm9vayBpZGVudGlmaWVyYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoZ2l2ZW5Mb2NhdGlvbiAhPT0gdW5kZWZpbmVkLCBcImNoZWNrVE5fVFNWOVRhYmxlOiAnZ2l2ZW5Mb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgIC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBnaXZlbkxvY2F0aW9uID09PSAnc3RyaW5nJywgYGNoZWNrVE5fVFNWOVRhYmxlOiAnZ2l2ZW5Mb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2YgZ2l2ZW5Mb2NhdGlvbn0nYCk7XG4gICAgLy9wYXJhbWV0ZXJBc3NlcnQoY2hlY2tpbmdPcHRpb25zICE9PSB1bmRlZmluZWQsIFwiY2hlY2tUTl9UU1Y5VGFibGU6ICdjaGVja2luZ09wdGlvbnMnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcblxuICAgIGxldCBvdXJMb2NhdGlvbiA9IGdpdmVuTG9jYXRpb247XG4gICAgaWYgKG91ckxvY2F0aW9uICYmIG91ckxvY2F0aW9uWzBdICE9PSAnICcpIG91ckxvY2F0aW9uID0gYCAke291ckxvY2F0aW9ufWA7XG5cbiAgICBjb25zdCB0dFJlc3VsdCA9IHsgc3VjY2Vzc0xpc3Q6IFtdLCBub3RpY2VMaXN0OiBbXSB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3VjY2Vzc1N0cmluZ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFN1Y2Nlc3NNZXNzYWdlKHN1Y2Nlc3NTdHJpbmcpIHtcbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrVE5fVFNWOVRhYmxlIHN1Y2Nlc3M6ICR7c3VjY2Vzc1N0cmluZ31gKTtcbiAgICAgICAgdHRSZXN1bHQuc3VjY2Vzc0xpc3QucHVzaChzdWNjZXNzU3RyaW5nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbm90aWNlT2JqZWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkTm90aWNlUGFydGlhbChub3RpY2VPYmplY3QpIHtcbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrVE5fVFNWOVRhYmxlIG5vdGljZTogKHByaW9yaXR5PSR7cHJpb3JpdHl9KSAke21lc3NhZ2V9JHtjaGFyYWN0ZXJJbmRleCA+IDAgPyBgIChhdCBjaGFyYWN0ZXIgJHtjaGFyYWN0ZXJJbmRleH0pYCA6IFwiXCJ9JHtleGNlcnB0ID8gYCAke2V4Y2VycHR9YCA6IFwiXCJ9JHtsb2NhdGlvbn1gKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LnByaW9yaXR5ICE9PSB1bmRlZmluZWQsIFwiVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdwcmlvcml0eScgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LnByaW9yaXR5ID09PSAnbnVtYmVyJywgYFRTViBhZGROb3RpY2VQYXJ0aWFsOiAncHJpb3JpdHknIHBhcmFtZXRlciBzaG91bGQgYmUgYSBudW1iZXIgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5wcmlvcml0eX0nOiAke25vdGljZU9iamVjdC5wcmlvcml0eX1gKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZCwgXCJUU1YgYWRkTm90aWNlUGFydGlhbDogJ21lc3NhZ2UnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5tZXNzYWdlID09PSAnc3RyaW5nJywgYFRTViBhZGROb3RpY2VQYXJ0aWFsOiAnbWVzc2FnZScgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0Lm1lc3NhZ2V9JzogJHtub3RpY2VPYmplY3QubWVzc2FnZX1gKTtcbiAgICAgICAgLy8gLy9wYXJhbWV0ZXJBc3NlcnQoQyAhPT0gdW5kZWZpbmVkLCBcIlRTViBhZGROb3RpY2VQYXJ0aWFsOiAnQycgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICBpZiAobm90aWNlT2JqZWN0LkMpIHsgLy9wYXJhbWV0ZXJBc3NlcnQodHlwZW9mIG5vdGljZU9iamVjdC5DID09PSAnc3RyaW5nJywgYFRTViBhZGROb3RpY2VQYXJ0aWFsOiAnQycgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHN0cmluZyBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LkN9JzogJHtub3RpY2VPYmplY3QuQ31gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAvL3BhcmFtZXRlckFzc2VydChWICE9PSB1bmRlZmluZWQsIFwiVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdWJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgIGlmIChub3RpY2VPYmplY3QuVikgeyAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LlYgPT09ICdzdHJpbmcnLCBgVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdWJyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nIG5vdCBhICcke3R5cGVvZiBub3RpY2VPYmplY3QuVn0nOiAke25vdGljZU9iamVjdC5WfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KGNoYXJhY3RlckluZGV4ICE9PSB1bmRlZmluZWQsIFwiVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdjaGFyYWN0ZXJJbmRleCcgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICBpZiAobm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4KSB7IC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QuY2hhcmFjdGVySW5kZXggPT09ICdudW1iZXInLCBgVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdjaGFyYWN0ZXJJbmRleCcgcGFyYW1ldGVyIHNob3VsZCBiZSBhIG51bWJlciBub3QgYSAnJHt0eXBlb2Ygbm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4fSc6ICR7bm90aWNlT2JqZWN0LmNoYXJhY3RlckluZGV4fWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIC8vcGFyYW1ldGVyQXNzZXJ0KGV4Y2VycHQgIT09IHVuZGVmaW5lZCwgXCJUU1YgYWRkTm90aWNlUGFydGlhbDogJ2V4Y2VycHQnIHBhcmFtZXRlciBzaG91bGQgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgaWYgKG5vdGljZU9iamVjdC5leGNlcnB0KSB7IC8vcGFyYW1ldGVyQXNzZXJ0KHR5cGVvZiBub3RpY2VPYmplY3QuZXhjZXJwdCA9PT0gJ3N0cmluZycsIGBUU1YgYWRkTm90aWNlUGFydGlhbDogJ2V4Y2VycHQnIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5leGNlcnB0fSc6ICR7bm90aWNlT2JqZWN0LmV4Y2VycHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9wYXJhbWV0ZXJBc3NlcnQobm90aWNlT2JqZWN0LmxvY2F0aW9uICE9PSB1bmRlZmluZWQsIFwiVFNWIGFkZE5vdGljZVBhcnRpYWw6ICdsb2NhdGlvbicgcGFyYW1ldGVyIHNob3VsZCBiZSBkZWZpbmVkXCIpO1xuICAgICAgICAvL3BhcmFtZXRlckFzc2VydCh0eXBlb2Ygbm90aWNlT2JqZWN0LmxvY2F0aW9uID09PSAnc3RyaW5nJywgYFRTViBhZGROb3RpY2VQYXJ0aWFsOiAnbG9jYXRpb24nIHBhcmFtZXRlciBzaG91bGQgYmUgYSBzdHJpbmcgbm90IGEgJyR7dHlwZW9mIG5vdGljZU9iamVjdC5sb2NhdGlvbn0nOiAke25vdGljZU9iamVjdC5sb2NhdGlvbn1gKTtcbiAgICAgICAgaWYgKG5vdGljZU9iamVjdC5kZWJ1Z0NoYWluKSBub3RpY2VPYmplY3QuZGVidWdDaGFpbiA9IGBjaGVja1ROX1RTVjlUYWJsZSAke25vdGljZU9iamVjdC5kZWJ1Z0NoYWlufWA7XG4gICAgICAgIC8vIE5PVEU6IFdlIG9ubHkgYWRkIHRoZSByZXBvQ29kZSBoZXJlIGJlY2F1c2UgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZGlyZWN0bHkgYnkgdEMgQ3JlYXRlXG4gICAgICAgIC8vICAgICAgICAgIGFuZCBub3RpY2UgZGlzYWJsaW5nIGN1cnJlbnRseSBkZXBlbmRzIG9uIGtub3dpbmcgdGhlIHJlcG9Db2RlXG4gICAgICAgIGlmIChub3RpY2VPYmplY3QucmVwb0NvZGUpIGRlYnVnTG9nKGBjaGVja1ROX1RTVjlUYWJsZS5hZGROb3RpY2VQYXJ0aWFsIGFscmVhZHkgaGFkIHJlcG9Db2RlPSR7bm90aWNlT2JqZWN0LnJlcG9Db2RlfSAod2lsbCBiZSBsb3N0KWApO1xuICAgICAgICB0dFJlc3VsdC5ub3RpY2VMaXN0LnB1c2goeyAuLi5ub3RpY2VPYmplY3QsIGJvb2tJRCwgZmlsZW5hbWUsIHJlcG9Db2RlOiAnVE4nIH0pO1xuICAgIH1cblxuXG4gICAgbGV0IGV4Y2VycHRMZW5ndGg7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhjZXJwdExlbmd0aCA9IGNoZWNraW5nT3B0aW9ucz8uZXhjZXJwdExlbmd0aDtcbiAgICB9IGNhdGNoICh0dGNFcnJvcikgeyB9XG4gICAgaWYgKHR5cGVvZiBleGNlcnB0TGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc05hTihleGNlcnB0TGVuZ3RoKSkge1xuICAgICAgICBleGNlcnB0TGVuZ3RoID0gREVGQVVMVF9FWENFUlBUX0xFTkdUSDtcbiAgICAgICAgLy8gZGVidWdMb2coYFVzaW5nIGRlZmF1bHQgZXhjZXJwdExlbmd0aD0ke2V4Y2VycHRMZW5ndGh9YCk7XG4gICAgfVxuICAgIC8vIGVsc2VcbiAgICAvLyBkZWJ1Z0xvZyhgVXNpbmcgc3VwcGxpZWQgZXhjZXJwdExlbmd0aD0ke2V4Y2VycHRMZW5ndGh9YCwgYGNmLiBkZWZhdWx0PSR7REVGQVVMVF9FWENFUlBUX0xFTkdUSH1gKTtcbiAgICAvLyBjb25zdCBleGNlcnB0SGFsZkxlbmd0aCA9IE1hdGguZmxvb3IoZXhjZXJwdExlbmd0aCAvIDIpOyAvLyByb3VuZGVkIGRvd25cbiAgICAvLyBjb25zdCBleGNlcnB0SGFsZkxlbmd0aFBsdXMgPSBNYXRoLmZsb29yKChleGNlcnB0TGVuZ3RoICsgMSkgLyAyKTsgLy8gcm91bmRlZCB1cFxuICAgIC8vIGRlYnVnTG9nKGBVc2luZyBleGNlcnB0SGFsZkxlbmd0aD0ke2V4Y2VycHRIYWxmTGVuZ3RofWAsIGBleGNlcnB0SGFsZkxlbmd0aFBsdXM9JHtleGNlcnB0SGFsZkxlbmd0aFBsdXN9YCk7XG5cbiAgICBsZXQgbG93ZXJjYXNlQm9va0lEID0gYm9va0lELnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IG51bUNoYXB0ZXJzVGhpc0Jvb2sgPSAwO1xuICAgIHRyeSB7XG4gICAgICAgIC8vcGFyYW1ldGVyQXNzZXJ0KGxvd2VyY2FzZUJvb2tJRCAhPT0gJ29icycsIFwiU2hvdWxkbuKAmXQgaGFwcGVuIGluIHRuX3RhYmxlLXRleHQtY2hlY2tcIik7XG4gICAgICAgIG51bUNoYXB0ZXJzVGhpc0Jvb2sgPSBib29rcy5jaGFwdGVyc0luQm9vayhib29rSUQpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIGlmICghYm9va3MuaXNWYWxpZEJvb2tJRChib29rSUQpKSAvLyBtdXN0IG5vdCBiZSBpbiBGUlQsIEJBSywgZXRjLlxuICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3NDcsIG1lc3NhZ2U6IFwiQmFkIGZ1bmN0aW9uIGNhbGw6IHNob3VsZCBiZSBnaXZlbiBhIHZhbGlkIGJvb2sgYWJicmV2aWF0aW9uXCIsIGV4Y2VycHQ6IGJvb2tJRCwgbG9jYXRpb246IGAgKG5vdCAnJHtib29rSUR9Jykke291ckxvY2F0aW9ufWAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGxpbmVzID0gdGFibGVUZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAvLyBkZWJ1Z0xvZyhgICAnJHtsb2NhdGlvbn0nIGhhcyAke2xpbmVzLmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSB0b3RhbCBsaW5lcyAoZXhwZWN0aW5nICR7TlVNX0VYUEVDVEVEX1ROX0ZJRUxEU30gZmllbGRzIGluIGVhY2ggbGluZSlgKTtcblxuICAgIGxldCBsYXN0QiA9ICcnLCBsYXN0QyA9ICcnLCBsYXN0ViA9ICcnO1xuICAgIGxldCByb3dJRExpc3RGb3JWZXJzZSA9IFtdLCB1bmlxdWVSb3dMaXN0Rm9yVmVyc2UgPSBbXTtcbiAgICBsZXQgbnVtVmVyc2VzVGhpc0NoYXB0ZXIgPSAwO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbGluZXMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgLy8gZnVuY3Rpb25Mb2coYGNoZWNrVE5fVFNWOVRhYmxlIGNoZWNraW5nIGxpbmUgJHtufTogJHtKU09OLnN0cmluZ2lmeShsaW5lc1tuXSl9YCk7XG4gICAgICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgICAgICBpZiAobGluZXNbMF0gPT09IEVYUEVDVEVEX1ROX0hFQURJTkdfTElORSlcbiAgICAgICAgICAgICAgICBhZGRTdWNjZXNzTWVzc2FnZShgQ2hlY2tlZCBUU1YgaGVhZGVyICR7b3VyTG9jYXRpb259YCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA5ODgsIG1lc3NhZ2U6IFwiQmFkIFRTViBoZWFkZXJcIiwgZGV0YWlsczogYGV4cGVjdGVkICcke0VYUEVDVEVEX1ROX0hFQURJTkdfTElORX0nYCwgZXhjZXJwdDogbGluZXNbMF0sIGxpbmVOdW1iZXI6IDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIC8vIG5vdCB0aGUgaGVhZGVyXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBmaWVsZHMgPSBsaW5lc1tuXS5zcGxpdCgnXFx0Jyk7XG4gICAgICAgICAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gTlVNX0VYUEVDVEVEX1ROX1RTVl9GSUVMRFMpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgICAgICAgICAgICBjb25zdCBbQiwgQywgViwgcm93SUQsIHN1cHBvcnRSZWZlcmVuY2UsIE9yaWdMYW5nUXVvdGUsIG9jY3VycmVuY2UsIF9HTFF1b3RlLCBfb2NjdXJyZW5jZU5vdGVdID0gZmllbGRzO1xuXG4gICAgICAgICAgICAgICAgLy8gVXNlIHRoZSByb3cgY2hlY2sgdG8gZG8gbW9zdCBiYXNpYyBjaGVja3NcbiAgICAgICAgICAgICAgICBjb25zdCBkclJlc3VsdE9iamVjdCA9IGF3YWl0IGNoZWNrVE5fVFNWOURhdGFSb3cobGFuZ3VhZ2VDb2RlLCByZXBvQ29kZSwgbGluZXNbbl0sIGJvb2tJRCwgQywgViwgb3VyTG9jYXRpb24sIGNoZWNraW5nT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgLy8gQ2hvb3NlIG9ubHkgT05FIG9mIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmYXN0IHdheSBvZiBhcHBlbmQgdGhlIHJlc3VsdHMgZnJvbSB0aGlzIGZpZWxkXG4gICAgICAgICAgICAgICAgLy8gcmVzdWx0Lm5vdGljZUxpc3QgPSByZXN1bHQubm90aWNlTGlzdC5jb25jYXQoZmlyc3RSZXN1bHQubm90aWNlTGlzdCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgbmVlZCB0byBwdXQgZXZlcnl0aGluZyB0aHJvdWdoIGFkZE5vdGljZVBhcnRpYWwsIGUuZy4sIGZvciBkZWJ1Z2dpbmcgb3IgZmlsdGVyaW5nXG4gICAgICAgICAgICAgICAgLy8gIHByb2Nlc3MgcmVzdWx0cyBsaW5lIGJ5IGxpbmVcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRyTm90aWNlRW50cnkgb2YgZHJSZXN1bHRPYmplY3Qubm90aWNlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyTm90aWNlRW50cnkuZXh0cmEpIC8vIGl0IG11c3QgYmUgYW4gaW5kaXJlY3QgY2hlY2sgb24gYSBUQSBvciBUVyBhcnRpY2xlIGZyb20gYSBUTiBjaGVja1xuICAgICAgICAgICAgICAgICAgICAgICAgdHRSZXN1bHQubm90aWNlTGlzdC5wdXNoKGRyTm90aWNlRW50cnkpOyAvLyBKdXN0IGNvcHkgdGhlIGNvbXBsZXRlIG5vdGljZSBhcyBpc1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkck5vdGljZUVudHJ5LnByaW9yaXR5ICE9PSA5MzEpIC8vIFdlIGFscmVhZHkgY2F1Z2h0IE1pc3Npbmcgcm93IElEXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgLi4uZHJOb3RpY2VFbnRyeSwgbGluZU51bWJlcjogbiArIDEgfSk7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBpcyBuZWVkZWQgY296IHdlIG1pZ2h0IGJlIGNoZWNraW5nIHRoZSBsaW5rZWQgVEEgYW5kL29yIFRXIGFydGljbGVzXG4gICAgICAgICAgICAgICAgaWYgKGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRGaWxlQ291bnQgJiYgZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVDb3VudCA+IDApXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHRSZXN1bHQuY2hlY2tlZEZpbGVDb3VudCA9PT0gJ251bWJlcicpIHR0UmVzdWx0LmNoZWNrZWRGaWxlQ291bnQgKz0gZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB0dFJlc3VsdC5jaGVja2VkRmlsZUNvdW50ID0gZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVDb3VudDtcbiAgICAgICAgICAgICAgICBpZiAoZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVzaXplcyAmJiBkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZXNpemVzID4gMClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0dFJlc3VsdC5jaGVja2VkRmlsZXNpemVzID09PSAnbnVtYmVyJykgdHRSZXN1bHQuY2hlY2tlZEZpbGVzaXplcyArPSBkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZXNpemVzO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHR0UmVzdWx0LmNoZWNrZWRGaWxlc2l6ZXMgPSBkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZXNpemVzO1xuICAgICAgICAgICAgICAgIGlmIChkclJlc3VsdE9iamVjdC5jaGVja2VkUmVwb05hbWVzICYmIGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRSZXBvTmFtZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2VkUmVwb05hbWUgb2YgZHJSZXN1bHRPYmplY3QuY2hlY2tlZFJlcG9OYW1lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IGlmICh0dFJlc3VsdC5jaGVja2VkUmVwb05hbWVzLmluZGV4T2YoY2hlY2tlZFJlcG9OYW1lKSA8IDApIHR0UmVzdWx0LmNoZWNrZWRSZXBvTmFtZXMucHVzaChjaGVja2VkUmVwb05hbWUpOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IHR0UmVzdWx0LmNoZWNrZWRSZXBvTmFtZXMgPSBbY2hlY2tlZFJlcG9OYW1lXTsgfVxuICAgICAgICAgICAgICAgIGlmIChkclJlc3VsdE9iamVjdC5jaGVja2VkRmlsZW5hbWVFeHRlbnNpb25zICYmIGRyUmVzdWx0T2JqZWN0LmNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbnMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2VkRmlsZW5hbWVFeHRlbnNpb24gb2YgZHJSZXN1bHRPYmplY3QuY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IGlmICh0dFJlc3VsdC5jaGVja2VkRmlsZW5hbWVFeHRlbnNpb25zLmluZGV4T2YoY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9uKSA8IDApIHR0UmVzdWx0LmNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbnMucHVzaChjaGVja2VkRmlsZW5hbWVFeHRlbnNpb24pOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7IHR0UmVzdWx0LmNoZWNrZWRGaWxlbmFtZUV4dGVuc2lvbnMgPSBbY2hlY2tlZEZpbGVuYW1lRXh0ZW5zaW9uXTsgfVxuICAgICAgICAgICAgICAgIC8vIGlmICh0dFJlc3VsdC5jaGVja2VkRmlsZW5hbWVFeHRlbnNpb25zKSB1c2VyTG9nKFwidHRSZXN1bHRcIiwgSlNPTi5zdHJpbmdpZnkodHRSZXN1bHQpKTtcblxuICAgICAgICAgICAgICAgIC8vIFNvIGhlcmUgd2Ugb25seSBoYXZlIHRvIGNoZWNrIGFnYWluc3QgdGhlIHByZXZpb3VzIGFuZCBuZXh0IGZpZWxkcyBmb3Igb3V0LW9mLW9yZGVyIHByb2JsZW1zIGFuZCBkdXBsaWNhdGUgcHJvYmxlbXNcbiAgICAgICAgICAgICAgICBpZiAoQiAhPT0gbGFzdEIgfHwgQyAhPT0gbGFzdEMgfHwgViAhPT0gbGFzdFYpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93SURMaXN0Rm9yVmVyc2UgPSBbXTsgLy8gSUQncyBvbmx5IG5lZWQgdG8gYmUgdW5pcXVlIHdpdGhpbiBlYWNoIHZlcnNlXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZVJvd0xpc3RGb3JWZXJzZSA9IFtdOyAvLyBTYW1lIGZvciB0aGVzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRPRE86IENoZWNrIGlmIHdlIG5lZWQgdGhpcyBhdCBhbGwgKGV2ZW4gdGhvdWdoIHRDIDMuMCBjYW7igJl0IGRpc3BsYXkgdGhlc2UgXCJkdXBsaWNhdGVcIiBub3RlcylcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIG5vdGVzXG4gICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlSUQgPSBDICsgViArIHN1cHBvcnRSZWZlcmVuY2UgKyBPcmlnTGFuZ1F1b3RlICsgb2NjdXJyZW5jZTsgLy8gVGhpcyBjb21iaW5hdGlvbiBzaG91bGQgbm90IGJlIHJlcGVhdGVkXG4gICAgICAgICAgICAgICAgLy8gaWYgKHVuaXF1ZVJvd0xpc3RGb3JWZXJzZS5pbmNsdWRlcyh1bmlxdWVJRCkpXG4gICAgICAgICAgICAgICAgLy8gICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogODgwLCBDLCBWLCBtZXNzYWdlOiBgRHVwbGljYXRlIG5vdGVgLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAvLyBpZiAodW5pcXVlUm93TGlzdEZvclZlcnNlLmluY2x1ZGVzKHVuaXF1ZUlEKSlcbiAgICAgICAgICAgICAgICAvLyAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA4MCwgQywgViwgbWVzc2FnZTogYE5vdGU6IHRDIDMuMCB3b27igJl0IGRpc3BsYXkgZHVwbGljYXRlIG5vdGVgLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICB1bmlxdWVSb3dMaXN0Rm9yVmVyc2UucHVzaCh1bmlxdWVJRCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoQikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQiAhPT0gYm9va0lEKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3NDUsIEMsIFYsIG1lc3NhZ2U6IGBXcm9uZyAnJHtCfScgYm9vayBpZGVudGlmaWVyIChleHBlY3RlZCAnJHtib29rSUR9JylgLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDc0NCwgQywgViwgbWVzc2FnZTogXCJNaXNzaW5nIGJvb2sgaWRlbnRpZmllclwiLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChDKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChDID09PSAnZnJvbnQnKSB7IH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoL15cXGQrJC8udGVzdChDKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGludEMgPSBOdW1iZXIoQyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQyAhPT0gbGFzdEMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtVmVyc2VzVGhpc0NoYXB0ZXIgPSBib29rcy52ZXJzZXNJbkNoYXB0ZXIobG93ZXJjYXNlQm9va0lELCBpbnRDKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRDID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNTUxLCBDLCBWLCBtZXNzYWdlOiBgSW52YWxpZCB6ZXJvIGNoYXB0ZXIgbnVtYmVyYCwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBleGNlcnB0OiBDLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50QyA+IG51bUNoYXB0ZXJzVGhpc0Jvb2spXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3MzcsIEMsIFYsIG1lc3NhZ2U6IFwiSW52YWxpZCBsYXJnZSBjaGFwdGVyIG51bWJlclwiLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGV4Y2VycHQ6IEMsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXlxcZCskLy50ZXN0KGxhc3RDKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0aW50QyA9IE51bWJlcihsYXN0Qyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludEMgPCBsYXN0aW50QylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3MzYsIEMsIFYsIG1lc3NhZ2U6IFwiUmVjZWRpbmcgY2hhcHRlciBudW1iZXJcIiwgZGV0YWlsczogYCcke0N9JyBhZnRlciAnJHtsYXN0Q30nYCwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW50QyA+IGxhc3RpbnRDICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3MzUsIEMsIFYsIG1lc3NhZ2U6IFwiQWR2YW5jaW5nIGNoYXB0ZXIgbnVtYmVyXCIsIGRldGFpbHM6IGAnJHtDfScgYWZ0ZXIgJyR7bGFzdEN9J2Aucm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3MzQsIEMsIFYsIG1lc3NhZ2U6IFwiQmFkIGNoYXB0ZXIgbnVtYmVyXCIsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzM5LCBDLCBWLCBtZXNzYWdlOiBcIk1pc3NpbmcgY2hhcHRlciBudW1iZXJcIiwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBsb2NhdGlvbjogYCBhZnRlciAke2xhc3RDfToke1Z9JHtvdXJMb2NhdGlvbn1gIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKFYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFYgPT09ICdpbnRybycpIHsgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgvXlxcZCskLy50ZXN0KFYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW50ViA9IE51bWJlcihWKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRWID09PSAwICYmIGJvb2tJRCAhPT0gJ1BTQScpIC8vIFBzYWxtcyBoYXZlIFxcZCB0aXRsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDU1MiwgQywgViwgbWVzc2FnZTogXCJJbnZhbGlkIHplcm8gdmVyc2UgbnVtYmVyXCIsIGRldGFpbHM6IGBmb3IgY2hhcHRlciAke0N9YCwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ViA+IG51bVZlcnNlc1RoaXNDaGFwdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzM0LCBDLCBWLCBtZXNzYWdlOiBcIkludmFsaWQgbGFyZ2UgdmVyc2UgbnVtYmVyXCIsIGRldGFpbHM6IGBmb3IgY2hhcHRlciAke0N9YCwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL15cXGQrJC8udGVzdChsYXN0VikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdGludFYgPSBOdW1iZXIobGFzdFYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDID09PSBsYXN0QyAmJiBpbnRWIDwgbGFzdGludFYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogNzMzLCBDLCBWLCBtZXNzYWdlOiBcIlJlY2VkaW5nIHZlcnNlIG51bWJlclwiLCBkZXRhaWxzOiBgJyR7Vn0nIGFmdGVyICcke2xhc3RWfSBmb3IgY2hhcHRlciAke0N9YCwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBleGNlcnB0OiBWLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBpZiAoaW50ViA+IGxhc3RpbnRWICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGFkZE5vdGljZVBhcnRpYWwoe3ByaW9yaXR5OjU1NiwgXCJTa2lwcGVkIHZlcnNlcyB3aXRoICcke1Z9JyB2ZXJzZSBudW1iZXIgYWZ0ZXIgJyR7bGFzdFZ9JyR7d2l0aFN0cmluZ31gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDczOCwgQywgViwgbWVzc2FnZTogXCJCYWQgdmVyc2UgbnVtYmVyXCIsIHJvd0lELCBsaW5lTnVtYmVyOiBuICsgMSwgbG9jYXRpb246IG91ckxvY2F0aW9uIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiA3OTAsIEMsIFYsIG1lc3NhZ2U6IFwiTWlzc2luZyB2ZXJzZSBudW1iZXJcIiwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBsb2NhdGlvbjogYCBhZnRlciAke0N9OiR7bGFzdFZ9JHtvdXJMb2NhdGlvbn1gIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJvd0lEKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dJRExpc3RGb3JWZXJzZS5pbmNsdWRlcyhyb3dJRCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpY2VQYXJ0aWFsKHsgcHJpb3JpdHk6IDgzMSwgQywgViwgbWVzc2FnZTogYER1cGxpY2F0ZSAnJHtyb3dJRH0nIElEYCwgZmllbGROYW1lOiAnSUQnLCByb3dJRCwgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93SURMaXN0Rm9yVmVyc2UucHVzaChyb3dJRCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTMyLCBDLCBWLCBtZXNzYWdlOiBcIk1pc3Npbmcgcm93IElEXCIsIGZpZWxkTmFtZTogJ0lEJywgbGluZU51bWJlcjogbiArIDEsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcblxuXG4gICAgICAgICAgICAgICAgbGFzdEIgPSBCOyBsYXN0QyA9IEM7IGxhc3RWID0gVjtcblxuICAgICAgICAgICAgfSBlbHNlIC8vIHdyb25nIG51bWJlciBvZiBmaWVsZHMgaW4gdGhlIHJvd1xuICAgICAgICAgICAgICAgIC8vIGlmIChuID09PSBsaW5lcy5sZW5ndGggLSAxKSAvLyBpdOKAmXMgdGhlIGxhc3QgbGluZVxuICAgICAgICAgICAgICAgIC8vICAgICB1c2VyTG9nKGAgIExpbmUgJHtufTogSGFzICR7ZmllbGRzLmxlbmd0aH0gZmllbGQocykgaW5zdGVhZCBvZiAke05VTV9FWFBFQ1RFRF9UTl9GSUVMRFN9OiAke0VYUEVDVEVEX1ROX0hFQURJTkdfTElORS5yZXBsYWNlKC9cXHQvZywgJywgJyl9YCk7XG4gICAgICAgICAgICAgICAgLy8gZWxzZVxuICAgICAgICAgICAgICAgIGlmIChuICE9PSBsaW5lcy5sZW5ndGggLSAxKSB7IC8vIGl04oCZcyBub3QgdGhlIGxhc3QgbGluZVxuICAgICAgICAgICAgICAgICAgICAvLyBIYXZlIGEgZ28gYXQgZ2V0dGluZyBzb21lIG9mIHRoZSBmaXJzdCBmaWVsZHMgb3V0IG9mIHRoZSBsaW5lXG4gICAgICAgICAgICAgICAgICAgIGxldCBDID0gJz8nLCBWID0gJz8nLCByb3dJRCA9ICc/Pz8/JztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgQyA9IGZpZWxkc1sxXTsgfSBjYXRjaCB7IH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgViA9IGZpZWxkc1syXTsgfSBjYXRjaCB7IH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgcm93SUQgPSBmaWVsZHNbM107IH0gY2F0Y2ggeyB9XG4gICAgICAgICAgICAgICAgICAgIGFkZE5vdGljZVBhcnRpYWwoeyBwcmlvcml0eTogOTgzLCBtZXNzYWdlOiBgV3JvbmcgbnVtYmVyIG9mIHRhYmJlZCBmaWVsZHMgKGV4cGVjdGVkICR7TlVNX0VYUEVDVEVEX1ROX1RTVl9GSUVMRFN9KWAsIGV4Y2VycHQ6IGBGb3VuZCAke2ZpZWxkcy5sZW5ndGh9IGZpZWxkJHtmaWVsZHMubGVuZ3RoID09PSAxID8gJycgOiAncyd9YCwgQywgViwgcm93SUQsIGxpbmVOdW1iZXI6IG4gKyAxLCBsb2NhdGlvbjogb3VyTG9jYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaGVja2luZ09wdGlvbnM/LnN1cHByZXNzTm90aWNlRGlzYWJsaW5nRmxhZykge1xuICAgICAgICAvLyBmdW5jdGlvbkxvZyhgY2hlY2tUTl9UU1Y5VGFibGU6IGNhbGxpbmcgcmVtb3ZlRGlzYWJsZWROb3RpY2VzKCR7dHRSZXN1bHQubm90aWNlTGlzdC5sZW5ndGh9KSBoYXZpbmcgJHtKU09OLnN0cmluZ2lmeShjaGVja2luZ09wdGlvbnMpfWApO1xuICAgICAgICB0dFJlc3VsdC5ub3RpY2VMaXN0ID0gcmVtb3ZlRGlzYWJsZWROb3RpY2VzKHR0UmVzdWx0Lm5vdGljZUxpc3QpO1xuICAgIH1cblxuICAgIGlmICgoIWNoZWNraW5nT3B0aW9ucz8uY3V0b2ZmUHJpb3JpdHlMZXZlbCB8fCBjaGVja2luZ09wdGlvbnM/LmN1dG9mZlByaW9yaXR5TGV2ZWwgPCAyMClcbiAgICAgICAgJiYgY2hlY2tpbmdPcHRpb25zPy5kaXNhYmxlQWxsTGlua0ZldGNoaW5nRmxhZylcbiAgICAgICAgYWRkTm90aWNlUGFydGlhbCh7IHByaW9yaXR5OiAyMCwgbWVzc2FnZTogXCJOb3RlIHRoYXQgJ2Rpc2FibGVBbGxMaW5rRmV0Y2hpbmdGbGFnJyB3YXMgc2V0IHNvIGxpbmsgdGFyZ2V0cyB3ZXJlIG5vdCBjaGVja2VkXCIsIGxvY2F0aW9uOiBvdXJMb2NhdGlvbiB9KTtcblxuICAgIGFkZFN1Y2Nlc3NNZXNzYWdlKGBDaGVja2VkIGFsbCAkeyhsaW5lcy5sZW5ndGggLSAxKS50b0xvY2FsZVN0cmluZygpfSBkYXRhIGxpbmUke2xpbmVzLmxlbmd0aCAtIDEgPT09IDEgPyAnJyA6ICdzJ30ke291ckxvY2F0aW9ufS5gKTtcbiAgICBpZiAodHRSZXN1bHQubm90aWNlTGlzdC5sZW5ndGgpXG4gICAgICAgIGFkZFN1Y2Nlc3NNZXNzYWdlKGBjaGVja1ROX1RTVjlUYWJsZSB2JHtUTl9UQUJMRV9URVhUX1ZBTElEQVRPUl9WRVJTSU9OX1NUUklOR30gZmluaXNoZWQgd2l0aCAke3R0UmVzdWx0Lm5vdGljZUxpc3QubGVuZ3RoID8gdHRSZXN1bHQubm90aWNlTGlzdC5sZW5ndGgudG9Mb2NhbGVTdHJpbmcoKSA6IFwiemVyb1wifSBub3RpY2Uke3R0UmVzdWx0Lm5vdGljZUxpc3QubGVuZ3RoID09PSAxID8gJycgOiAncyd9YCk7XG4gICAgZWxzZVxuICAgICAgICBhZGRTdWNjZXNzTWVzc2FnZShgTm8gZXJyb3JzIG9yIHdhcm5pbmdzIGZvdW5kIGJ5IGNoZWNrVE5fVFNWOVRhYmxlIHYke1ROX1RBQkxFX1RFWFRfVkFMSURBVE9SX1ZFUlNJT05fU1RSSU5HfWApXG4gICAgLy8gZGVidWdMb2coYCAgY2hlY2tUTl9UU1Y5VGFibGUgcmV0dXJuaW5nIHdpdGggJHtyZXN1bHQuc3VjY2Vzc0xpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IHN1Y2Nlc3MoZXMpLCAke3Jlc3VsdC5ub3RpY2VMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSBub3RpY2UocykuYCk7XG4gICAgLy8gZGVidWdMb2coXCJjaGVja1ROX1RTVjlUYWJsZSByZXN1bHQgaXNcIiwgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgcmV0dXJuIHR0UmVzdWx0O1xufVxuLy8gZW5kIG9mIGNoZWNrVE5fVFNWOVRhYmxlIGZ1bmN0aW9uXG4iXX0=