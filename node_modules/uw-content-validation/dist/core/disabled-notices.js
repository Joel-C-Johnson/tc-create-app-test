"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.isDisabledNotice = isDisabledNotice;exports.removeDisabledNotices = removeDisabledNotices;
var _utilities = require("./utilities");function _createForOfIteratorHelper(o, allowArrayLike) {var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];if (!it) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = it.call(o);}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it.return != null) it.return();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;}

/* This file handles the suppression of notices where we don’t want to disable or remove the actual check,
    but we just want to disable it for certain resources to handle special cases.
    In some cases, it’s to handle software deficiencies.

  NOTE: This is only recommended for resources which are relatively stable,
          e.g., completed book packages
        as it can rely on details like filename and maybe line number.
*/


// const DISABLED_NOTICES_VERSION_STRING = '0.3.5';


var disabledNotices = [
// Just enter enough details to disable the required message(s) and no unwanted ones
//  i.e., you can be as specific as you need about username and/or lineNumber, etc.

{ repoCode: 'TN', priority: 450 }, // TN "Resource container link should have '*' language code with (not 'en')" disabled as tC can’t handle it yet!
{ repoCode: 'TW', priority: 450 }, // TW "Resource container link should have '*' language code with (not 'en')" disabled as tC can’t handle it yet!
{ extra: 'TW', priority: 450 }, // TW "Resource container link should have '*' language code with (not 'en')" disabled as tC can’t handle it yet!

{ repoCode: 'ST', message: "Bad punctuation nesting: } closing character doesn’t match", bookID: 'NEH' }, // 777 - complex { } nesting in direct speech
{ repoCode: 'ST', message: "Bad punctuation nesting: ” closing character doesn’t match", bookID: 'NEH' }, // 777 - complex { } nesting in direct speech

{ repoCode: 'LT', priority: 638, fieldName: '\\p' }, // "Only found whitespace" tC3 outputs trailing spaces here
{ repoCode: 'ST', priority: 638, fieldName: '\\p' }, // "Only found whitespace" tC3 outputs trailing spaces here
{ repoCode: 'LT', priority: 124, excerpt: '\\p␣␣' }, // "Unexpected double spaces" tC3 outputs trailing spaces here
{ repoCode: 'ST', priority: 124, excerpt: '\\p␣␣' }, // "Unexpected double spaces" tC3 outputs trailing spaces here
{ repoCode: 'LT', message: "Unexpected space after | character" }, // 192 tC3 outputs an unneeded/unwanted space in \zaln-s
{ repoCode: 'ST', message: "Unexpected space after | character" }, // 192 tC3 outputs an unneeded/unwanted space in \zaln-s
{ repoCode: 'LT', priority: 95 }, // "Unexpected trailing space(s)" tC3 outputs trailing spaces all over the place
{ repoCode: 'ST', priority: 95 }, // "Unexpected trailing space(s)" tC3 outputs trailing spaces all over the place

{ repoCode: 'TA', priority: 104 }, // "Unexpected trailing line break" UTA uses trailing <BR> for (1) (2) (3) style numbered lists

{ repoCode: 'TA', message: "Unexpected – character after space" }, // 191 -- temp en-dashes
{ repoCode: 'TA', message: "Unexpected space after – character" }, // 192 -- temp en-dashes

{ repoCode: 'TA', priority: 172 }, // "Header levels should only increment by one" not required for TA

{ repoCode: 'TA', filename: 'translate/translate-alphabet/01.md', message: "At end of text with unclosed ‘ opening character" }, // 768
{ repoCode: 'TA', filename: 'translate/translate-alphabet/01.md', message: "Mismatched ‘’ characters" }, // 462
{ repoCode: 'TA', filename: 'translate/translate-textvariants/01.md', message: "Unexpected space after [ character" }, // 192
{ repoCode: 'TA', filename: 'translate/translate-formatsignals/01.md', message: "Unexpected space after ( character" }, // 192

{ repoCode: 'TN', excerpt: ' brackets [ ] to ind', message: "Unexpected space after [ character" }, // 192

// This file has a space-separated list of typical quotation symbols
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected space after “ character", lineNumber: 3 }, // 192
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected space after “ character", lineNumber: 16 }, // 192
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected space after ‘ character", lineNumber: 16 }, // 192
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected space after « character" }, // 192
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected space after ‹ character" }, // 192
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected space after — character" }, // 192

{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected . character after space", lineNumber: 16 }, // 191
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected ” character after space" }, // 191
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected ’ character after space" }, // 191
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected » character after space" }, // 191
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected › character after space" }, // 191
{ repoCode: 'TA', filename: 'translate/figs-quotemarks/01.md', message: "Unexpected — character after space" }, // 191

{ repoCode: 'TA', filename: 'translate/figs-metaphor/01.md', message: "Possible misplaced ( character" } // 17
];


/**
 *
 * @param {Object} givenNotice
 * @returns true if the givenNotice has a match in the disabledNotices list above
 */
function isDisabledNotice(givenNotice) {
  // NOTE: The function will fail if repoCode is not set in the notices passed to this function
  // NOTE: 'extra' is still valid at this point (not yet prepended to 'message')
  // functionLog(`isDisabledNotice(${JSON.stringify(givenNotice)})…`);
  // if (givenNotice.repoCode === undefined) debugLog(`isDisabledNotice() cannot work without repoCode for ${JSON.stringify(givenNotice)}`);
  var _iterator = _createForOfIteratorHelper(disabledNotices),_step;try {for (_iterator.s(); !(_step = _iterator.n()).done;) {var disabledNotice = _step.value;
      var matchedAllSpecifiedFields = true;
      for (var propertyName in disabledNotice) {
        // if ((propertyName !== 'repoCode' || givenNotice.repoCode !== undefined) // Some individual checks don't set repoCode
        // && (givenNotice[propertyName] !== disabledNotice[propertyName])) {
        if (givenNotice[propertyName] !== disabledNotice[propertyName]) {
          matchedAllSpecifiedFields = false;
          break;
        }}
      if (matchedAllSpecifiedFields) {
        // debugLog(`  isDisabledNotice() returning true for ${JSON.stringify(disabledNotice)}`);
        return true;
      }
    }} catch (err) {_iterator.e(err);} finally {_iterator.f();}
  return false;
}


/**
 *
 * @param {Array} givenNoticeList
 * @returns a new list of notices with disabled ones removed
 */
function removeDisabledNotices(givenNoticeList) {
  // NOTE: The function will fail if repoCode is not set in the notices passed to this function
  var remainingNoticeList = [];
  var givenRepoCodeNotice = false;var _iterator2 = _createForOfIteratorHelper(
  givenNoticeList),_step2;try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {var thisNotice = _step2.value;
      if (thisNotice.repoCode === undefined && !givenRepoCodeNotice) {(0, _utilities.debugLog)("removeDisabledNotices() cannot work without repoCode for ".concat(JSON.stringify(thisNotice), " in list of ").concat(givenNoticeList.length, " notices."));givenRepoCodeNotice = true;}
      if (!isDisabledNotice(thisNotice))
      remainingNoticeList.push(thisNotice);
      // else userLog(`  Removing disabled ${JSON.stringify(thisNotice)}`);
    }} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}
  if (remainingNoticeList.length !== givenNoticeList.length) (0, _utilities.userLog)("removeDisabledNotices() returning ".concat(remainingNoticeList.length, " out of ").concat(givenNoticeList.length, " notices"));
  return remainingNoticeList;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL2Rpc2FibGVkLW5vdGljZXMuanMiXSwibmFtZXMiOlsiZGlzYWJsZWROb3RpY2VzIiwicmVwb0NvZGUiLCJwcmlvcml0eSIsImV4dHJhIiwibWVzc2FnZSIsImJvb2tJRCIsImZpZWxkTmFtZSIsImV4Y2VycHQiLCJmaWxlbmFtZSIsImxpbmVOdW1iZXIiLCJpc0Rpc2FibGVkTm90aWNlIiwiZ2l2ZW5Ob3RpY2UiLCJkaXNhYmxlZE5vdGljZSIsIm1hdGNoZWRBbGxTcGVjaWZpZWRGaWVsZHMiLCJwcm9wZXJ0eU5hbWUiLCJyZW1vdmVEaXNhYmxlZE5vdGljZXMiLCJnaXZlbk5vdGljZUxpc3QiLCJyZW1haW5pbmdOb3RpY2VMaXN0IiwiZ2l2ZW5SZXBvQ29kZU5vdGljZSIsInRoaXNOb3RpY2UiLCJ1bmRlZmluZWQiLCJKU09OIiwic3RyaW5naWZ5IiwibGVuZ3RoIiwicHVzaCJdLCJtYXBwaW5ncyI6IjtBQUNBLHdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOzs7QUFHQSxJQUFNQSxlQUFlLEdBQUc7QUFDdEI7QUFDQTs7QUFFQSxFQUFFQyxRQUFRLEVBQUUsSUFBWixFQUFrQkMsUUFBUSxFQUFFLEdBQTVCLEVBSnNCLEVBSWM7QUFDcEMsRUFBRUQsUUFBUSxFQUFFLElBQVosRUFBa0JDLFFBQVEsRUFBRSxHQUE1QixFQUxzQixFQUtjO0FBQ3BDLEVBQUVDLEtBQUssRUFBRSxJQUFULEVBQWVELFFBQVEsRUFBRSxHQUF6QixFQU5zQixFQU1XOztBQUVqQyxFQUFFRCxRQUFRLEVBQUUsSUFBWixFQUFrQkcsT0FBTyxFQUFFLDREQUEzQixFQUF5RkMsTUFBTSxFQUFFLEtBQWpHLEVBUnNCLEVBUXFGO0FBQzNHLEVBQUVKLFFBQVEsRUFBRSxJQUFaLEVBQWtCRyxPQUFPLEVBQUUsNERBQTNCLEVBQXlGQyxNQUFNLEVBQUUsS0FBakcsRUFUc0IsRUFTcUY7O0FBRTNHLEVBQUVKLFFBQVEs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XG5pbXBvcnQgeyBkZWJ1Z0xvZywgdXNlckxvZywgZnVuY3Rpb25Mb2cgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbi8qIFRoaXMgZmlsZSBoYW5kbGVzIHRoZSBzdXBwcmVzc2lvbiBvZiBub3RpY2VzIHdoZXJlIHdlIGRvbuKAmXQgd2FudCB0byBkaXNhYmxlIG9yIHJlbW92ZSB0aGUgYWN0dWFsIGNoZWNrLFxuICAgIGJ1dCB3ZSBqdXN0IHdhbnQgdG8gZGlzYWJsZSBpdCBmb3IgY2VydGFpbiByZXNvdXJjZXMgdG8gaGFuZGxlIHNwZWNpYWwgY2FzZXMuXG4gICAgSW4gc29tZSBjYXNlcywgaXTigJlzIHRvIGhhbmRsZSBzb2Z0d2FyZSBkZWZpY2llbmNpZXMuXG5cbiAgTk9URTogVGhpcyBpcyBvbmx5IHJlY29tbWVuZGVkIGZvciByZXNvdXJjZXMgd2hpY2ggYXJlIHJlbGF0aXZlbHkgc3RhYmxlLFxuICAgICAgICAgIGUuZy4sIGNvbXBsZXRlZCBib29rIHBhY2thZ2VzXG4gICAgICAgIGFzIGl0IGNhbiByZWx5IG9uIGRldGFpbHMgbGlrZSBmaWxlbmFtZSBhbmQgbWF5YmUgbGluZSBudW1iZXIuXG4qL1xuXG5cbi8vIGNvbnN0IERJU0FCTEVEX05PVElDRVNfVkVSU0lPTl9TVFJJTkcgPSAnMC4zLjUnO1xuXG5cbmNvbnN0IGRpc2FibGVkTm90aWNlcyA9IFtcbiAgLy8gSnVzdCBlbnRlciBlbm91Z2ggZGV0YWlscyB0byBkaXNhYmxlIHRoZSByZXF1aXJlZCBtZXNzYWdlKHMpIGFuZCBubyB1bndhbnRlZCBvbmVzXG4gIC8vICBpLmUuLCB5b3UgY2FuIGJlIGFzIHNwZWNpZmljIGFzIHlvdSBuZWVkIGFib3V0IHVzZXJuYW1lIGFuZC9vciBsaW5lTnVtYmVyLCBldGMuXG5cbiAgeyByZXBvQ29kZTogJ1ROJywgcHJpb3JpdHk6IDQ1MCwgfSwgLy8gVE4gXCJSZXNvdXJjZSBjb250YWluZXIgbGluayBzaG91bGQgaGF2ZSAnKicgbGFuZ3VhZ2UgY29kZSB3aXRoIChub3QgJ2VuJylcIiBkaXNhYmxlZCBhcyB0QyBjYW7igJl0IGhhbmRsZSBpdCB5ZXQhXG4gIHsgcmVwb0NvZGU6ICdUVycsIHByaW9yaXR5OiA0NTAsIH0sIC8vIFRXIFwiUmVzb3VyY2UgY29udGFpbmVyIGxpbmsgc2hvdWxkIGhhdmUgJyonIGxhbmd1YWdlIGNvZGUgd2l0aCAobm90ICdlbicpXCIgZGlzYWJsZWQgYXMgdEMgY2Fu4oCZdCBoYW5kbGUgaXQgeWV0IVxuICB7IGV4dHJhOiAnVFcnLCBwcmlvcml0eTogNDUwLCB9LCAvLyBUVyBcIlJlc291cmNlIGNvbnRhaW5lciBsaW5rIHNob3VsZCBoYXZlICcqJyBsYW5ndWFnZSBjb2RlIHdpdGggKG5vdCAnZW4nKVwiIGRpc2FibGVkIGFzIHRDIGNhbuKAmXQgaGFuZGxlIGl0IHlldCFcblxuICB7IHJlcG9Db2RlOiAnU1QnLCBtZXNzYWdlOiBcIkJhZCBwdW5jdHVhdGlvbiBuZXN0aW5nOiB9IGNsb3NpbmcgY2hhcmFjdGVyIGRvZXNu4oCZdCBtYXRjaFwiLCBib29rSUQ6ICdORUgnLCB9LCAvLyA3NzcgLSBjb21wbGV4IHsgfSBuZXN0aW5nIGluIGRpcmVjdCBzcGVlY2hcbiAgeyByZXBvQ29kZTogJ1NUJywgbWVzc2FnZTogXCJCYWQgcHVuY3R1YXRpb24gbmVzdGluZzog4oCdIGNsb3NpbmcgY2hhcmFjdGVyIGRvZXNu4oCZdCBtYXRjaFwiLCBib29rSUQ6ICdORUgnLCB9LCAvLyA3NzcgLSBjb21wbGV4IHsgfSBuZXN0aW5nIGluIGRpcmVjdCBzcGVlY2hcblxuICB7IHJlcG9Db2RlOiAnTFQnLCBwcmlvcml0eTogNjM4LCBmaWVsZE5hbWU6ICdcXFxccCcsIH0sIC8vIFwiT25seSBmb3VuZCB3aGl0ZXNwYWNlXCIgdEMzIG91dHB1dHMgdHJhaWxpbmcgc3BhY2VzIGhlcmVcbiAgeyByZXBvQ29kZTogJ1NUJywgcHJpb3JpdHk6IDYzOCwgZmllbGROYW1lOiAnXFxcXHAnLCB9LCAvLyBcIk9ubHkgZm91bmQgd2hpdGVzcGFjZVwiIHRDMyBvdXRwdXRzIHRyYWlsaW5nIHNwYWNlcyBoZXJlXG4gIHsgcmVwb0NvZGU6ICdMVCcsIHByaW9yaXR5OiAxMjQsIGV4Y2VycHQ6ICdcXFxccOKQo+KQoycsIH0sIC8vIFwiVW5leHBlY3RlZCBkb3VibGUgc3BhY2VzXCIgdEMzIG91dHB1dHMgdHJhaWxpbmcgc3BhY2VzIGhlcmVcbiAgeyByZXBvQ29kZTogJ1NUJywgcHJpb3JpdHk6IDEyNCwgZXhjZXJwdDogJ1xcXFxw4pCj4pCjJywgfSwgLy8gXCJVbmV4cGVjdGVkIGRvdWJsZSBzcGFjZXNcIiB0QzMgb3V0cHV0cyB0cmFpbGluZyBzcGFjZXMgaGVyZVxuICB7IHJlcG9Db2RlOiAnTFQnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgfCBjaGFyYWN0ZXJcIiwgfSwgLy8gMTkyIHRDMyBvdXRwdXRzIGFuIHVubmVlZGVkL3Vud2FudGVkIHNwYWNlIGluIFxcemFsbi1zXG4gIHsgcmVwb0NvZGU6ICdTVCcsIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCBzcGFjZSBhZnRlciB8IGNoYXJhY3RlclwiLCB9LCAvLyAxOTIgdEMzIG91dHB1dHMgYW4gdW5uZWVkZWQvdW53YW50ZWQgc3BhY2UgaW4gXFx6YWxuLXNcbiAgeyByZXBvQ29kZTogJ0xUJywgcHJpb3JpdHk6IDk1LCB9LCAvLyBcIlVuZXhwZWN0ZWQgdHJhaWxpbmcgc3BhY2UocylcIiB0QzMgb3V0cHV0cyB0cmFpbGluZyBzcGFjZXMgYWxsIG92ZXIgdGhlIHBsYWNlXG4gIHsgcmVwb0NvZGU6ICdTVCcsIHByaW9yaXR5OiA5NSwgfSwgLy8gXCJVbmV4cGVjdGVkIHRyYWlsaW5nIHNwYWNlKHMpXCIgdEMzIG91dHB1dHMgdHJhaWxpbmcgc3BhY2VzIGFsbCBvdmVyIHRoZSBwbGFjZVxuXG4gIHsgcmVwb0NvZGU6ICdUQScsIHByaW9yaXR5OiAxMDQsIH0sIC8vIFwiVW5leHBlY3RlZCB0cmFpbGluZyBsaW5lIGJyZWFrXCIgVVRBIHVzZXMgdHJhaWxpbmcgPEJSPiBmb3IgKDEpICgyKSAoMykgc3R5bGUgbnVtYmVyZWQgbGlzdHNcblxuICB7IHJlcG9Db2RlOiAnVEEnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQg4oCTIGNoYXJhY3RlciBhZnRlciBzcGFjZVwiLCB9LCAvLyAxOTEgLS0gdGVtcCBlbi1kYXNoZXNcbiAgeyByZXBvQ29kZTogJ1RBJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIOKAkyBjaGFyYWN0ZXJcIiwgfSwgLy8gMTkyIC0tIHRlbXAgZW4tZGFzaGVzXG5cbiAgeyByZXBvQ29kZTogJ1RBJywgcHJpb3JpdHk6IDE3MiwgfSwgLy8gXCJIZWFkZXIgbGV2ZWxzIHNob3VsZCBvbmx5IGluY3JlbWVudCBieSBvbmVcIiBub3QgcmVxdWlyZWQgZm9yIFRBXG5cbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvdHJhbnNsYXRlLWFscGhhYmV0LzAxLm1kJywgbWVzc2FnZTogXCJBdCBlbmQgb2YgdGV4dCB3aXRoIHVuY2xvc2VkIOKAmCBvcGVuaW5nIGNoYXJhY3RlclwiLCB9LCAvLyA3NjhcbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvdHJhbnNsYXRlLWFscGhhYmV0LzAxLm1kJywgbWVzc2FnZTogXCJNaXNtYXRjaGVkIOKAmOKAmSBjaGFyYWN0ZXJzXCIsIH0sIC8vIDQ2MlxuICB7IHJlcG9Db2RlOiAnVEEnLCBmaWxlbmFtZTogJ3RyYW5zbGF0ZS90cmFuc2xhdGUtdGV4dHZhcmlhbnRzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIFsgY2hhcmFjdGVyXCIsIH0sIC8vIDE5MlxuICB7IHJlcG9Db2RlOiAnVEEnLCBmaWxlbmFtZTogJ3RyYW5zbGF0ZS90cmFuc2xhdGUtZm9ybWF0c2lnbmFscy8wMS5tZCcsIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCBzcGFjZSBhZnRlciAoIGNoYXJhY3RlclwiLCB9LCAvLyAxOTJcblxuICB7IHJlcG9Db2RlOiAnVE4nLCBleGNlcnB0OiAnIGJyYWNrZXRzIFsgXSB0byBpbmQnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgWyBjaGFyYWN0ZXJcIiwgfSwgLy8gMTkyXG5cbiAgLy8gVGhpcyBmaWxlIGhhcyBhIHNwYWNlLXNlcGFyYXRlZCBsaXN0IG9mIHR5cGljYWwgcXVvdGF0aW9uIHN5bWJvbHNcbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1xdW90ZW1hcmtzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIOKAnCBjaGFyYWN0ZXJcIiwgbGluZU51bWJlcjogMywgfSwgLy8gMTkyXG4gIHsgcmVwb0NvZGU6ICdUQScsIGZpbGVuYW1lOiAndHJhbnNsYXRlL2ZpZ3MtcXVvdGVtYXJrcy8wMS5tZCcsIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCBzcGFjZSBhZnRlciDigJwgY2hhcmFjdGVyXCIsIGxpbmVOdW1iZXI6IDE2LCB9LCAvLyAxOTJcbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1xdW90ZW1hcmtzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIOKAmCBjaGFyYWN0ZXJcIiwgbGluZU51bWJlcjogMTYsIH0sIC8vIDE5MlxuICB7IHJlcG9Db2RlOiAnVEEnLCBmaWxlbmFtZTogJ3RyYW5zbGF0ZS9maWdzLXF1b3RlbWFya3MvMDEubWQnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgwqsgY2hhcmFjdGVyXCIsIH0sIC8vIDE5MlxuICB7IHJlcG9Db2RlOiAnVEEnLCBmaWxlbmFtZTogJ3RyYW5zbGF0ZS9maWdzLXF1b3RlbWFya3MvMDEubWQnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIg4oC5IGNoYXJhY3RlclwiLCB9LCAvLyAxOTJcbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1xdW90ZW1hcmtzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIOKAlCBjaGFyYWN0ZXJcIiwgfSwgLy8gMTkyXG5cbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1xdW90ZW1hcmtzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIC4gY2hhcmFjdGVyIGFmdGVyIHNwYWNlXCIsIGxpbmVOdW1iZXI6IDE2LCB9LCAvLyAxOTFcbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1xdW90ZW1hcmtzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIOKAnSBjaGFyYWN0ZXIgYWZ0ZXIgc3BhY2VcIiwgfSwgLy8gMTkxXG4gIHsgcmVwb0NvZGU6ICdUQScsIGZpbGVuYW1lOiAndHJhbnNsYXRlL2ZpZ3MtcXVvdGVtYXJrcy8wMS5tZCcsIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCDigJkgY2hhcmFjdGVyIGFmdGVyIHNwYWNlXCIsIH0sIC8vIDE5MVxuICB7IHJlcG9Db2RlOiAnVEEnLCBmaWxlbmFtZTogJ3RyYW5zbGF0ZS9maWdzLXF1b3RlbWFya3MvMDEubWQnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgwrsgY2hhcmFjdGVyIGFmdGVyIHNwYWNlXCIsIH0sIC8vIDE5MVxuICB7IHJlcG9Db2RlOiAnVEEnLCBmaWxlbmFtZTogJ3RyYW5zbGF0ZS9maWdzLXF1b3RlbWFya3MvMDEubWQnLCBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQg4oC6IGNoYXJhY3RlciBhZnRlciBzcGFjZVwiLCB9LCAvLyAxOTFcbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1xdW90ZW1hcmtzLzAxLm1kJywgbWVzc2FnZTogXCJVbmV4cGVjdGVkIOKAlCBjaGFyYWN0ZXIgYWZ0ZXIgc3BhY2VcIiwgfSwgLy8gMTkxXG5cbiAgeyByZXBvQ29kZTogJ1RBJywgZmlsZW5hbWU6ICd0cmFuc2xhdGUvZmlncy1tZXRhcGhvci8wMS5tZCcsIG1lc3NhZ2U6IFwiUG9zc2libGUgbWlzcGxhY2VkICggY2hhcmFjdGVyXCIsIH0sIC8vIDE3XG5dO1xuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnaXZlbk5vdGljZVxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW5Ob3RpY2UgaGFzIGEgbWF0Y2ggaW4gdGhlIGRpc2FibGVkTm90aWNlcyBsaXN0IGFib3ZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc2FibGVkTm90aWNlKGdpdmVuTm90aWNlKSB7XG4gIC8vIE5PVEU6IFRoZSBmdW5jdGlvbiB3aWxsIGZhaWwgaWYgcmVwb0NvZGUgaXMgbm90IHNldCBpbiB0aGUgbm90aWNlcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvblxuICAvLyBOT1RFOiAnZXh0cmEnIGlzIHN0aWxsIHZhbGlkIGF0IHRoaXMgcG9pbnQgKG5vdCB5ZXQgcHJlcGVuZGVkIHRvICdtZXNzYWdlJylcbiAgLy8gZnVuY3Rpb25Mb2coYGlzRGlzYWJsZWROb3RpY2UoJHtKU09OLnN0cmluZ2lmeShnaXZlbk5vdGljZSl9KeKApmApO1xuICAvLyBpZiAoZ2l2ZW5Ob3RpY2UucmVwb0NvZGUgPT09IHVuZGVmaW5lZCkgZGVidWdMb2coYGlzRGlzYWJsZWROb3RpY2UoKSBjYW5ub3Qgd29yayB3aXRob3V0IHJlcG9Db2RlIGZvciAke0pTT04uc3RyaW5naWZ5KGdpdmVuTm90aWNlKX1gKTtcbiAgZm9yIChjb25zdCBkaXNhYmxlZE5vdGljZSBvZiBkaXNhYmxlZE5vdGljZXMpIHtcbiAgICBsZXQgbWF0Y2hlZEFsbFNwZWNpZmllZEZpZWxkcyA9IHRydWU7XG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgaW4gZGlzYWJsZWROb3RpY2UpXG4gICAgICAvLyBpZiAoKHByb3BlcnR5TmFtZSAhPT0gJ3JlcG9Db2RlJyB8fCBnaXZlbk5vdGljZS5yZXBvQ29kZSAhPT0gdW5kZWZpbmVkKSAvLyBTb21lIGluZGl2aWR1YWwgY2hlY2tzIGRvbid0IHNldCByZXBvQ29kZVxuICAgICAgLy8gJiYgKGdpdmVuTm90aWNlW3Byb3BlcnR5TmFtZV0gIT09IGRpc2FibGVkTm90aWNlW3Byb3BlcnR5TmFtZV0pKSB7XG4gICAgICBpZiAoZ2l2ZW5Ob3RpY2VbcHJvcGVydHlOYW1lXSAhPT0gZGlzYWJsZWROb3RpY2VbcHJvcGVydHlOYW1lXSkge1xuICAgICAgICBtYXRjaGVkQWxsU3BlY2lmaWVkRmllbGRzID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIGlmIChtYXRjaGVkQWxsU3BlY2lmaWVkRmllbGRzKSB7XG4gICAgICAvLyBkZWJ1Z0xvZyhgICBpc0Rpc2FibGVkTm90aWNlKCkgcmV0dXJuaW5nIHRydWUgZm9yICR7SlNPTi5zdHJpbmdpZnkoZGlzYWJsZWROb3RpY2UpfWApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBnaXZlbk5vdGljZUxpc3RcbiAqIEByZXR1cm5zIGEgbmV3IGxpc3Qgb2Ygbm90aWNlcyB3aXRoIGRpc2FibGVkIG9uZXMgcmVtb3ZlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRGlzYWJsZWROb3RpY2VzKGdpdmVuTm90aWNlTGlzdCkge1xuICAvLyBOT1RFOiBUaGUgZnVuY3Rpb24gd2lsbCBmYWlsIGlmIHJlcG9Db2RlIGlzIG5vdCBzZXQgaW4gdGhlIG5vdGljZXMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb25cbiAgY29uc3QgcmVtYWluaW5nTm90aWNlTGlzdCA9IFtdO1xuICBsZXQgZ2l2ZW5SZXBvQ29kZU5vdGljZSA9IGZhbHNlO1xuICBmb3IgKGNvbnN0IHRoaXNOb3RpY2Ugb2YgZ2l2ZW5Ob3RpY2VMaXN0KSB7XG4gICAgaWYgKHRoaXNOb3RpY2UucmVwb0NvZGUgPT09IHVuZGVmaW5lZCAmJiAhZ2l2ZW5SZXBvQ29kZU5vdGljZSkgeyBkZWJ1Z0xvZyhgcmVtb3ZlRGlzYWJsZWROb3RpY2VzKCkgY2Fubm90IHdvcmsgd2l0aG91dCByZXBvQ29kZSBmb3IgJHtKU09OLnN0cmluZ2lmeSh0aGlzTm90aWNlKX0gaW4gbGlzdCBvZiAke2dpdmVuTm90aWNlTGlzdC5sZW5ndGh9IG5vdGljZXMuYCk7IGdpdmVuUmVwb0NvZGVOb3RpY2UgPSB0cnVlOyB9XG4gICAgaWYgKCFpc0Rpc2FibGVkTm90aWNlKHRoaXNOb3RpY2UpKVxuICAgICAgcmVtYWluaW5nTm90aWNlTGlzdC5wdXNoKHRoaXNOb3RpY2UpO1xuICAgIC8vIGVsc2UgdXNlckxvZyhgICBSZW1vdmluZyBkaXNhYmxlZCAke0pTT04uc3RyaW5naWZ5KHRoaXNOb3RpY2UpfWApO1xuICB9XG4gIGlmIChyZW1haW5pbmdOb3RpY2VMaXN0Lmxlbmd0aCAhPT0gZ2l2ZW5Ob3RpY2VMaXN0Lmxlbmd0aCkgdXNlckxvZyhgcmVtb3ZlRGlzYWJsZWROb3RpY2VzKCkgcmV0dXJuaW5nICR7cmVtYWluaW5nTm90aWNlTGlzdC5sZW5ndGh9IG91dCBvZiAke2dpdmVuTm90aWNlTGlzdC5sZW5ndGh9IG5vdGljZXNgKTtcbiAgcmV0dXJuIHJlbWFpbmluZ05vdGljZUxpc3Q7XG59XG4iXX0=