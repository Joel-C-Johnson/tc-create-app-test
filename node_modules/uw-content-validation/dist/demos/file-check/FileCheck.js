"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _typeof = require("@babel/runtime/helpers/typeof");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react = _interopRequireWildcard(require("react"));
var _styles = require("@material-ui/core/styles");
var _core = require("../../core");
var _noticeProcessingFunctions = require("../notice-processing-functions");
var _RenderProcessedResults = require("../RenderProcessedResults");
var _checkFileContents = require("./checkFileContents");

var _utilities = require("../../core/utilities");function _getRequireWildcardCache(nodeInterop) {if (typeof WeakMap !== "function") return null;var cacheBabelInterop = new WeakMap();var cacheNodeInterop = new WeakMap();return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {return nodeInterop ? cacheNodeInterop : cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj, nodeInterop) {if (!nodeInterop && obj && obj.__esModule) {return obj;}if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache(nodeInterop);if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;} // eslint-disable-next-line no-unused-vars


// const FILE_CHECK_VERSION_STRING = '0.3.2';


function FileCheck(props) {
  // debugLog(`I'm here in FileCheck v${FILE_CHECK_VERSION_STRING}`);
  // consoleLogObject("props", props);

  var _useState = (0, _react.useState)("Waiting-FileCheck"),_useState2 = (0, _slicedToArray2.default)(_useState, 2),result = _useState2[0],setResultValue = _useState2[1];
  (0, _react.useEffect)(function () {
    // debugLog("FileCheck.useEffect() called with ", JSON.stringify(props));

    // Use an IIFE (Immediately Invoked Function Expression)
    //  e.g., see https://medium.com/javascript-in-plain-english/https-medium-com-javascript-in-plain-english-stop-feeling-iffy-about-using-an-iife-7b0292aba174
    (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {var fileContent, rawCFResults, addFields, languageCode, repoCodeGuess, processOptions, displayType,






































































































      renderSummary, processedResults, _processedResults, _processedResults2;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:renderSummary = function _renderSummary(processedResults) {
                var cutoffString = '';
                // NOTE: Couldn't figure out why ?. was not allowed in the statement below
                if (rawCFResults && rawCFResults.checkedOptions && rawCFResults.checkedOptions.cutoffPriorityLevel)
                cutoffString = " Priority level ".concat(rawCFResults.checkedOptions.cutoffPriorityLevel, " or lower were not included.");
                return /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/
                _react.default.createElement("p", null, "Checked ", /*#__PURE__*/_react.default.createElement("b", null, filename), " (from ", /*#__PURE__*/_react.default.createElement("i", null, username), " ", repoName, " ", /*#__PURE__*/_react.default.createElement("i", null, branchOrRelease === undefined ? 'DEFAULT' : branchOrRelease), " branch)"), /*#__PURE__*/
                _react.default.createElement("p", null, "\xA0\xA0\xA0\xA0Finished in ", /*#__PURE__*/_react.default.createElement(_RenderProcessedResults.RenderElapsedTime, { elapsedSeconds: processedResults.elapsedSeconds }), " with ", rawCFResults.noticeList.length === 0 ? 'no' : rawCFResults.noticeList.length.toLocaleString(), " notice", rawCFResults.noticeList.length === 1 ? '' : 's',
                processedResults.numIgnoredNotices || processedResults.numDisabledNotices ? ' (but ' : '',
                processedResults.numIgnoredNotices ? "".concat(processedResults.numIgnoredNotices.toLocaleString(), " ignored notice(s)") : "",
                processedResults.numIgnoredNotices && processedResults.numDisabledNotices ? ' and ' : '',
                processedResults.numDisabledNotices ? "".concat(processedResults.numDisabledNotices.toLocaleString(), " expected/disabled notice").concat(processedResults.numDisabledNotices === 1 ? '' : 's') : "",
                processedResults.numIgnoredNotices || processedResults.numDisabledNotices ? ')' : '', ".", cutoffString));


              };if (!(!props.wait || props.wait !== 'N')) {_context.next = 4;break;}setResultValue( /*#__PURE__*/_react.default.createElement("p", null, /*#__PURE__*/_react.default.createElement("span", { style: { color: 'blue' } }, "Waiting for user\u2026"), " (Adjust settings below as necessary and then set ", /*#__PURE__*/_react.default.createElement("b", null, "wait='N'"), " to start)"));return _context.abrupt("return");case 4:if (username) {_context.next = 7;break;}setResultValue( /*#__PURE__*/_react.default.createElement("p", { style: { color: 'red' } }, "No ", /*#__PURE__*/_react.default.createElement("b", null, "username"), " set!"));return _context.abrupt("return");case 7:if (repoName) {_context.next = 10;break;}setResultValue( /*#__PURE__*/_react.default.createElement("p", { style: { color: 'red' } }, "No ", /*#__PURE__*/_react.default.createElement("b", null, "repoName"), " set!"));return _context.abrupt("return");case 10:if (filename) {_context.next = 13;break;}setResultValue( /*#__PURE__*/_react.default.createElement("p", { style: { color: 'red' } }, "No ", /*#__PURE__*/_react.default.createElement("b", null, "filename"), " set!"));return _context.abrupt("return");case 13:if (!(props.reloadAllFilesFirst && props.reloadAllFilesFirst.slice(0).toUpperCase() === 'Y')) {_context.next = 20;break;}(0, _utilities.userLog)("Clearing cache before running file check…");setResultValue( /*#__PURE__*/_react.default.createElement("p", { style: { color: 'orange' } }, "Clearing cache before running file check\u2026"));_context.next = 18;return (0, _core.clearCaches)();case 18:_context.next = 22;break;case 20:_context.next = 22;return (0, _core.clearCheckedArticleCache)();case 22: // otherwise we wouldn't see any of the warnings again from checking these
              // Display our "waiting" message
              setResultValue( /*#__PURE__*/_react.default.createElement("p", { style: { color: 'magenta' } }, "Fetching ", /*#__PURE__*/_react.default.createElement("i", null, username), " ", repoName, " ", /*#__PURE__*/_react.default.createElement("b", null, filename), "\u2026")); // Fetch the file that we need to check (but it might already be in the cache)
              // debugLog(`FileCheck about to call cachedGetFile(${username}, ${repoName}, ${filename}, ${branch})…`);
              _context.next = 25;return (0, _core.cachedGetFile)({ username: username, repository: repoName, path: filename, branch: branchOrRelease });case 25:fileContent = _context.sent;if (fileContent) {_context.next = 31;break;} // could it be a release, not a branch???
              (0, _utilities.userLog)("Unable to fetch ".concat(filename, " from branch ").concat(branchOrRelease, ", so trying a release instead\u2026"));_context.next = 30;return (0, _core.cachedFetchFileFromServerWithTag)({ username: username, repository: repoName, path: filename, tag: branchOrRelease });case 30:fileContent = _context.sent;case 31:setResultValue( /*#__PURE__*/_react.default.createElement("p", { style: { color: 'magenta' } }, "Checking ", /*#__PURE__*/_react.default.createElement("i", null, username), " ", repoName, " ", /*#__PURE__*/_react.default.createElement("b", null, filename), "\u2026"));rawCFResults = { noticeList: [{ priority: 990, message: "Unable to load file", details: "username=".concat(username), repoName: repoName, filename: filename }], elapsedSeconds: 0 };if (!fileContent) {_context.next = 42;break;} // debugLog(`rawCFResults=${JSON.stringify(rawCFResults)}`);
              // Because we know here that we're only checking one file, we don’t need the filename field in the notices
              // WRONG: We want the filename so that the lineNumber can be made into a live link
              addFields = function addFields(notice) {notice.username = username;notice.repoName = repoName;notice.repoCode = repoCodeGuess;if (!notice.extra) notice.extra = repoCodeGuess;return notice;};languageCode = repoName.split('_')[0];repoCodeGuess = '';if (repoName === 'hbo_uhb') repoCodeGuess = 'UHB';else if (repoName === 'el-x-koine_ugnt') repoCodeGuess = 'UGNT';else if (repoName.endsWith('_twl')) repoCodeGuess = 'TWL';else if (repoName.endsWith('_tn')) repoCodeGuess = 'TN';else if (repoName.endsWith('_ta')) repoCodeGuess = 'TA';else if (repoName.endsWith('_tq')) repoCodeGuess = 'TQ';else if (repoName.endsWith('_tw')) repoCodeGuess = 'TW';else if (repoName.endsWith('_sn')) repoCodeGuess = 'SN';else if (repoName.endsWith('_sq')) repoCodeGuess = 'SQ';else if (repoName.endsWith('lt')) repoCodeGuess = 'LT';else if (repoName.endsWith('st')) repoCodeGuess = 'ST';_context.next = 40;return (0, _checkFileContents.checkFileContents)(username, languageCode, repoCodeGuess, branchOrRelease, filename, fileContent, givenLocation, checkingOptions);case 40:rawCFResults = _context.sent;rawCFResults.noticeList = rawCFResults.noticeList.map(addFields);case 42: // debugLog(`FileCheck got initial results with ${rawCFResults.successList.length} success message(s) and ${rawCFResults.noticeList.length} notice(s)`);
              // // Since we know the repoName here, add it to our notices
              // for (const thisNotice of rawCFResults.noticeList)
              //   thisNotice.repoName = repoName; // Add in this info that we know
              // Add some extra fields to our rawCFResults object in case we need this information again later
              rawCFResults.checkType = 'File';rawCFResults.username = username;rawCFResults.repoName = repoName;rawCFResults.branch = props.branch;rawCFResults.filename = filename;rawCFResults.checkingOptions = checkingOptions; // Now do our final handling of the result
              processOptions = {// Uncomment any of these to test them
                // 'maximumSimilarMessages': 4, // default is 3  -- 0 means don’t suppress
                // 'errorPriorityLevel': 800, // default is 700
                // 'cutoffPriorityLevel': 100, // default is 0
                // 'sortBy': 'ByRepo', // default is 'ByPriority', also have 'AsFound'
                // 'ignorePriorityNumberList': [123, 202], // default is []
              }; // Or this allows the parameters to be specified as a FileCheck property
              if (props.maximumSimilarMessages) processOptions.maximumSimilarMessages = (0, _core.ourParseInt)(props.maximumSimilarMessages);if (props.errorPriorityLevel) processOptions.errorPriorityLevel = (0, _core.ourParseInt)(props.errorPriorityLevel); // if (props.cutoffPriorityLevel) processOptions.cutoffPriorityLevel = ourParseInt(props.cutoffPriorityLevel);
              if (props.sortBy) processOptions.sortBy = props.sortBy; // if (props.ignorePriorityNumberList) processOptions.ignorePriorityNumberList = props.ignorePriorityNumberList;
              displayType = 'ErrorsWarnings'; // default
              if (props.displayType) displayType = props.displayType;if (displayType === 'ErrorsWarnings') {processedResults = (0, _noticeProcessingFunctions.processNoticesToErrorsWarnings)(rawCFResults, processOptions); //                 userLog(`${`FileCheck got processed results with ${processedResults.successList.length.toLocaleString()} success message(s), ${processedResults.errorList.length.toLocaleString()} error(s) and ${processedResults.warningList.length.toLocaleString()} warning(s)`}
                //   numIgnoredNotices=${processedResults.numIgnoredNotices.toLocaleString()} numHiddenErrors=${processedResults.numHiddenErrors.toLocaleString()} numHiddenWarnings=${processedResults.numHiddenWarnings.toLocaleString()}`);
                if (processedResults.errorList.length || processedResults.warningList.length) setResultValue( /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, renderSummary(processedResults), /*#__PURE__*/_react.default.createElement(_RenderProcessedResults.RenderSuccessesErrorsWarnings, { results: processedResults })));else // no errors or warnings
                  setResultValue( /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, renderSummary(processedResults), /*#__PURE__*/_react.default.createElement(_RenderProcessedResults.RenderSuccessesErrorsWarnings, { results: processedResults })));} else if (displayType === 'SevereMediumLow') {_processedResults = (0, _noticeProcessingFunctions.processNoticesToSevereMediumLow)(rawCFResults, processOptions); //                 userLog(`FileCheck got processed results with ${processedResults.successList.length.toLocaleString()} success message(s), ${processedResults.errorList.length.toLocaleString()} error(s) and ${processedResults.warningList.length.toLocaleString()} warning(s)
                //   numIgnoredNotices=${processedResults.numIgnoredNotices.toLocaleString()} numHiddenErrors=${processedResults.numHiddenErrors.toLocaleString()} numHiddenWarnings=${processedResults.numHiddenWarnings.toLocaleString()}`);
                if (_processedResults.severeList.length || _processedResults.mediumList.length || _processedResults.lowList.length) setResultValue( /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, renderSummary(_processedResults), /*#__PURE__*/_react.default.createElement(_RenderProcessedResults.RenderSuccessesSevereMediumLow, { results: _processedResults })));else // no severe, medium, or low notices
                  setResultValue( /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, renderSummary(_processedResults), /*#__PURE__*/_react.default.createElement(_RenderProcessedResults.RenderSuccessesSevereMediumLow, { results: _processedResults })));

              } else if (displayType === 'SingleList') {
                _processedResults2 = (0, _noticeProcessingFunctions.processNoticesToSingleList)(rawCFResults, processOptions);
                //       userLog(`FileCheck got processed results with ${processedResults.successList.length.toLocaleString()} success message(s) and ${processedResults.warningList.length.toLocaleString()} notice(s)
                // numIgnoredNotices=${processedResults.numIgnoredNotices.toLocaleString()} numHiddenWarnings=${processedResults.numHiddenWarnings.toLocaleString()}`);

                if (_processedResults2.warningList.length)
                setResultValue( /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null,
                renderSummary(_processedResults2), /*#__PURE__*/
                _react.default.createElement(_RenderProcessedResults.RenderSuccessesNoticesGradient, { results: _processedResults2 })));else

                  // no warnings
                  setResultValue( /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null,
                  renderSummary(_processedResults2), /*#__PURE__*/
                  _react.default.createElement(_RenderProcessedResults.RenderSuccessesNoticesGradient, { results: _processedResults2 })));

              } else setResultValue( /*#__PURE__*/_react.default.createElement("b", { style: { color: 'red' } }, "Invalid displayType='", displayType, "'"));case 55:case "end":return _context.stop();}}}, _callee);}))();
    // end of async part in unnamedFunction
    // Doesn’t work if we add this to next line: username,repoName,branch,checkingOptions,filename,givenLocation,props
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []); // end of useEffect part

  var username = props.username;
  // debugLog(`FileCheck username='${username}'`);
  if (!username) return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("b", null, "ERROR"), ": The Door43 ", /*#__PURE__*/_react.default.createElement("b", null, "username"), " must be specified");
  var repoName = props.repoName;
  // debugLog(`FileCheck repoName='${repoName}'`);
  if (!repoName) return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("b", null, "ERROR"), ": The Door43 ", /*#__PURE__*/_react.default.createElement("b", null, "repository name"), " must be specified");
  var branchOrRelease = props.branchOrRelease;
  // debugLog(`FileCheck branchOrRelease='${branchOrRelease}'`);
  if (branchOrRelease === undefined) branchOrRelease = 'master';
  var filename = props.filename;
  // debugLog(`filename='${filename}'`);
  if (!filename) return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("b", null, "ERROR"), ": The Door43 ", /*#__PURE__*/_react.default.createElement("b", null, "filename"), " must be specified");

  var givenLocation = props['location'] ? props['location'] : "";
  if (givenLocation && givenLocation[0] !== ' ') givenLocation = " ".concat(givenLocation);

  var checkingOptions = { // Uncomment any of these to test them
    // excerptLength: 25,
    suppressNoticeDisablingFlag: true // Leave this one as true (otherwise demo checks are less efficient)
  };
  // Or this allows the parameters to be specified as a FileCheck property
  if (props.excerptLength) checkingOptions.excerptLength = (0, _core.ourParseInt)(props.excerptLength);
  if (props.cutoffPriorityLevel) checkingOptions.cutoffPriorityLevel = (0, _core.ourParseInt)(props.cutoffPriorityLevel);
  if (props.disableAllLinkFetchingFlag) checkingOptions.disableAllLinkFetchingFlag = props.disableAllLinkFetchingFlag.toLowerCase() === 'true';
  if (props.disableLinkedTAArticlesCheckFlag) checkingOptions.disableLinkedTAArticlesCheckFlag = props.disableLinkedTAArticlesCheckFlag.toLowerCase() === 'true';
  if (props.disableLinkedTWArticlesCheckFlag) checkingOptions.disableLinkedTWArticlesCheckFlag = props.disableLinkedTWArticlesCheckFlag.toLowerCase() === 'true';

  // {/* <div className={classes.root}> */}
  return /*#__PURE__*/(
    _react.default.createElement("div", { className: "Fred" },
    result));


};
// end of FileCheck()

var styles = function styles(theme) {return {
    root: {} };};var _default =



(0, _styles.withStyles)(styles)(FileCheck);exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kZW1vcy9maWxlLWNoZWNrL0ZpbGVDaGVjay5qcyJdLCJuYW1lcyI6WyJGaWxlQ2hlY2siLCJwcm9wcyIsInJlc3VsdCIsInNldFJlc3VsdFZhbHVlIiwicmVuZGVyU3VtbWFyeSIsInByb2Nlc3NlZFJlc3VsdHMiLCJjdXRvZmZTdHJpbmciLCJyYXdDRlJlc3VsdHMiLCJjaGVja2VkT3B0aW9ucyIsImN1dG9mZlByaW9yaXR5TGV2ZWwiLCJmaWxlbmFtZSIsInVzZXJuYW1lIiwicmVwb05hbWUiLCJicmFuY2hPclJlbGVhc2UiLCJ1bmRlZmluZWQiLCJlbGFwc2VkU2Vjb25kcyIsIm5vdGljZUxpc3QiLCJsZW5ndGgiLCJ0b0xvY2FsZVN0cmluZyIsIm51bUlnbm9yZWROb3RpY2VzIiwibnVtRGlzYWJsZWROb3RpY2VzIiwid2FpdCIsImNvbG9yIiwicmVsb2FkQWxsRmlsZXNGaXJzdCIsInNsaWNlIiwidG9VcHBlckNhc2UiLCJyZXBvc2l0b3J5IiwicGF0aCIsImJyYW5jaCIsImZpbGVDb250ZW50IiwidGFnIiwicHJpb3JpdHkiLCJtZXNzYWdlIiwiZGV0YWlscyIsImFkZEZpZWxkcyIsIm5vdGljZSIsInJlcG9Db2RlIiwicmVwb0NvZGVHdWVzcyIsImV4dHJhIiwibGFuZ3VhZ2VDb2RlIiwic3BsaXQiLCJlbmRzV2l0aCIsImdpdmVuTG9jYXRpb24iLCJjaGVja2luZ09wdGlvbnMiLCJtYXAiLCJjaGVja1R5cGUiLCJwcm9jZXNzT3B0aW9ucyIsIm1heGltdW1TaW1pbGFyTWVzc2FnZXMiLCJlcnJvclByaW9yaXR5TGV2ZWwiLCJzb3J0QnkiLCJkaXNwbGF5VHlwZSIsImVycm9yTGlzdCIsIndhcm5pbmdMaXN0Iiwic2V2ZXJlTGlzdCIsIm1lZGl1bUxpc3QiLCJsb3dMaXN0Iiwic3VwcHJlc3NOb3RpY2VEaXNhYmxpbmdGbGFnIiwiZXhjZXJwdExlbmd0aCIsImRpc2FibGVBbGxMaW5rRmV0Y2hpbmdGbGFnIiwidG9Mb3dlckNhc2UiLCJkaXNhYmxlTGlua2VkVEFBcnRpY2xlc0NoZWNrRmxhZyIsImRpc2FibGVMaW5rZWRUV0FydGljbGVzQ2hlY2tGbGFnIiwic3R5bGVzIiwidGhlbWUiLCJyb290Il0sIm1hcHBpbmdzIjoibWdCQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRCxtbENBREE7OztBQUlBOzs7QUFHQSxTQUFTQSxTQUFULENBQW1CQyxLQUFuQixFQUEwQjtBQUN4QjtBQUNBOztBQUVBLGtCQUFpQyxxQkFBUyxtQkFBVCxDQUFqQyx5REFBT0MsTUFBUCxpQkFBZUMsY0FBZjtBQUNBLHdCQUFVLFlBQU07QUFDZDs7QUFFQTtBQUNBO0FBQ0EsNEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1R1VDLE1BQUFBLGFBdkdWLGtMQXVHVUEsYUF2R1YsMkJBdUd3QkMsZ0JBdkd4QixFQXVHMEM7QUFDdkMsb0JBQUlDLFlBQVksR0FBRyxFQUFuQjtBQUNBO0FBQ0Esb0JBQUlDLFlBQVksSUFBSUEsWUFBWSxDQUFDQyxjQUE3QixJQUErQ0QsWUFBWSxDQUFDQyxjQUFiLENBQTRCQyxtQkFBL0U7QUFDRUgsZ0JBQUFBLFlBQVksNkJBQXNCQyxZQUFZLENBQUNDLGNBQWIsQ0FBNEJDLG1CQUFsRCxpQ0FBWjtBQUNGLG9DQUFRO0FBQ04saUZBQVcsd0NBQUlDLFFBQUosQ0FBWCwwQkFBbUMsd0NBQUlDLFFBQUosQ0FBbkMsT0FBc0RDLFFBQXRELG9CQUFnRSx3Q0FBSUMsZUFBZSxLQUFLQyxTQUFwQixHQUFnQyxTQUFoQyxHQUE0Q0QsZUFBaEQsQ0FBaEUsYUFETTtBQUVOLHFHQUF1Qyw2QkFBQyx5Q0FBRCxJQUFtQixjQUFjLEVBQUVSLGdCQUFnQixDQUFDVSxjQUFwRCxHQUF2QyxZQUFvSFIsWUFBWSxDQUFDUyxVQUFiLENBQXdCQyxNQUF4QixLQUFtQyxD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dXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgd2l0aFN0eWxlcyB9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL3N0eWxlcyc7XG5pbXBvcnQgeyBjbGVhckNhY2hlcywgY2xlYXJDaGVja2VkQXJ0aWNsZUNhY2hlLCBvdXJQYXJzZUludCwgY2FjaGVkR2V0RmlsZSwgY2FjaGVkRmV0Y2hGaWxlRnJvbVNlcnZlcldpdGhUYWcgfSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IHByb2Nlc3NOb3RpY2VzVG9FcnJvcnNXYXJuaW5ncywgcHJvY2Vzc05vdGljZXNUb1NldmVyZU1lZGl1bUxvdywgcHJvY2Vzc05vdGljZXNUb1NpbmdsZUxpc3QgfSBmcm9tICcuLi9ub3RpY2UtcHJvY2Vzc2luZy1mdW5jdGlvbnMnO1xuaW1wb3J0IHsgUmVuZGVyU3VjY2Vzc2VzRXJyb3JzV2FybmluZ3MsIFJlbmRlclN1Y2Nlc3Nlc1NldmVyZU1lZGl1bUxvdywgUmVuZGVyU3VjY2Vzc2VzTm90aWNlc0dyYWRpZW50LCBSZW5kZXJFbGFwc2VkVGltZSB9IGZyb20gJy4uL1JlbmRlclByb2Nlc3NlZFJlc3VsdHMnO1xuaW1wb3J0IHsgY2hlY2tGaWxlQ29udGVudHMgfSBmcm9tICcuL2NoZWNrRmlsZUNvbnRlbnRzJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHsgZGVidWdMb2csIHVzZXJMb2cgfSBmcm9tICcuLi8uLi9jb3JlL3V0aWxpdGllcyc7XG5cblxuLy8gY29uc3QgRklMRV9DSEVDS19WRVJTSU9OX1NUUklORyA9ICcwLjMuMic7XG5cblxuZnVuY3Rpb24gRmlsZUNoZWNrKHByb3BzKSB7XG4gIC8vIGRlYnVnTG9nKGBJJ20gaGVyZSBpbiBGaWxlQ2hlY2sgdiR7RklMRV9DSEVDS19WRVJTSU9OX1NUUklOR31gKTtcbiAgLy8gY29uc29sZUxvZ09iamVjdChcInByb3BzXCIsIHByb3BzKTtcblxuICBjb25zdCBbcmVzdWx0LCBzZXRSZXN1bHRWYWx1ZV0gPSB1c2VTdGF0ZShcIldhaXRpbmctRmlsZUNoZWNrXCIpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGRlYnVnTG9nKFwiRmlsZUNoZWNrLnVzZUVmZmVjdCgpIGNhbGxlZCB3aXRoIFwiLCBKU09OLnN0cmluZ2lmeShwcm9wcykpO1xuXG4gICAgLy8gVXNlIGFuIElJRkUgKEltbWVkaWF0ZWx5IEludm9rZWQgRnVuY3Rpb24gRXhwcmVzc2lvbilcbiAgICAvLyAgZS5nLiwgc2VlIGh0dHBzOi8vbWVkaXVtLmNvbS9qYXZhc2NyaXB0LWluLXBsYWluLWVuZ2xpc2gvaHR0cHMtbWVkaXVtLWNvbS1qYXZhc2NyaXB0LWluLXBsYWluLWVuZ2xpc2gtc3RvcC1mZWVsaW5nLWlmZnktYWJvdXQtdXNpbmctYW4taWlmZS03YjAyOTJhYmExNzRcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gZGVidWdMb2coXCJTdGFydGVkIEZpbGVDaGVjay51bm5hbWVkRnVuY3Rpb24oKVwiKTtcblxuICAgICAgLy8gTk9URSBmcm9tIFJKSDogSSBjYW7igJl0IGZpbmQgdGhlIGNvcnJlY3QgUmVhY3QgcGxhY2UgZm9yIHRoaXMgLyB3YXkgdG8gZG8gdGhpc1xuICAgICAgLy8gICAgICAgICAgICAgICAgICBzbyBpdCBzaG93cyBhIHdhcm5pbmcgZm9yIHRoZSB1c2VyLCBhbmQgZG9lc27igJl0IGNvbnRpbnVlIHRvIHRyeSB0byBwcm9jZXNzXG4gICAgICBpZiAoIXByb3BzLndhaXQgfHwgcHJvcHMud2FpdCAhPT0gJ04nKSB7XG4gICAgICAgIHNldFJlc3VsdFZhbHVlKDxwPjxzcGFuIHN0eWxlPXt7IGNvbG9yOiAnYmx1ZScgfX0+V2FpdGluZyBmb3IgdXNlcuKApjwvc3Bhbj4gKEFkanVzdCBzZXR0aW5ncyBiZWxvdyBhcyBuZWNlc3NhcnkgYW5kIHRoZW4gc2V0IDxiPndhaXQ9J04nPC9iPiB0byBzdGFydCk8L3A+KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICAgIHNldFJlc3VsdFZhbHVlKDxwIHN0eWxlPXt7IGNvbG9yOiAncmVkJyB9fT5ObyA8Yj51c2VybmFtZTwvYj4gc2V0ITwvcD4pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXJlcG9OYW1lKSB7XG4gICAgICAgIHNldFJlc3VsdFZhbHVlKDxwIHN0eWxlPXt7IGNvbG9yOiAncmVkJyB9fT5ObyA8Yj5yZXBvTmFtZTwvYj4gc2V0ITwvcD4pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWZpbGVuYW1lKSB7XG4gICAgICAgIHNldFJlc3VsdFZhbHVlKDxwIHN0eWxlPXt7IGNvbG9yOiAncmVkJyB9fT5ObyA8Yj5maWxlbmFtZTwvYj4gc2V0ITwvcD4pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5yZWxvYWRBbGxGaWxlc0ZpcnN0ICYmIHByb3BzLnJlbG9hZEFsbEZpbGVzRmlyc3Quc2xpY2UoMCkudG9VcHBlckNhc2UoKSA9PT0gJ1knKSB7XG4gICAgICAgIHVzZXJMb2coXCJDbGVhcmluZyBjYWNoZSBiZWZvcmUgcnVubmluZyBmaWxlIGNoZWNr4oCmXCIpO1xuICAgICAgICBzZXRSZXN1bHRWYWx1ZSg8cCBzdHlsZT17eyBjb2xvcjogJ29yYW5nZScgfX0+Q2xlYXJpbmcgY2FjaGUgYmVmb3JlIHJ1bm5pbmcgZmlsZSBjaGVja+KApjwvcD4pO1xuICAgICAgICBhd2FpdCBjbGVhckNhY2hlcygpO1xuICAgICAgfVxuICAgICAgZWxzZSBhd2FpdCBjbGVhckNoZWNrZWRBcnRpY2xlQ2FjaGUoKTsgLy8gb3RoZXJ3aXNlIHdlIHdvdWxkbid0IHNlZSBhbnkgb2YgdGhlIHdhcm5pbmdzIGFnYWluIGZyb20gY2hlY2tpbmcgdGhlc2VcblxuICAgICAgLy8gRGlzcGxheSBvdXIgXCJ3YWl0aW5nXCIgbWVzc2FnZVxuICAgICAgc2V0UmVzdWx0VmFsdWUoPHAgc3R5bGU9e3sgY29sb3I6ICdtYWdlbnRhJyB9fT5GZXRjaGluZyA8aT57dXNlcm5hbWV9PC9pPiB7cmVwb05hbWV9IDxiPntmaWxlbmFtZX08L2I+4oCmPC9wPik7XG5cbiAgICAgIC8vIEZldGNoIHRoZSBmaWxlIHRoYXQgd2UgbmVlZCB0byBjaGVjayAoYnV0IGl0IG1pZ2h0IGFscmVhZHkgYmUgaW4gdGhlIGNhY2hlKVxuICAgICAgLy8gZGVidWdMb2coYEZpbGVDaGVjayBhYm91dCB0byBjYWxsIGNhY2hlZEdldEZpbGUoJHt1c2VybmFtZX0sICR7cmVwb05hbWV9LCAke2ZpbGVuYW1lfSwgJHticmFuY2h9KeKApmApO1xuICAgICAgbGV0IGZpbGVDb250ZW50ID0gYXdhaXQgY2FjaGVkR2V0RmlsZSh7IHVzZXJuYW1lOiB1c2VybmFtZSwgcmVwb3NpdG9yeTogcmVwb05hbWUsIHBhdGg6IGZpbGVuYW1lLCBicmFuY2g6IGJyYW5jaE9yUmVsZWFzZSB9KTtcbiAgICAgIGlmICghZmlsZUNvbnRlbnQpIHsgLy8gY291bGQgaXQgYmUgYSByZWxlYXNlLCBub3QgYSBicmFuY2g/Pz9cbiAgICAgICAgdXNlckxvZyhgVW5hYmxlIHRvIGZldGNoICR7ZmlsZW5hbWV9IGZyb20gYnJhbmNoICR7YnJhbmNoT3JSZWxlYXNlfSwgc28gdHJ5aW5nIGEgcmVsZWFzZSBpbnN0ZWFk4oCmYClcbiAgICAgICAgZmlsZUNvbnRlbnQgPSBhd2FpdCBjYWNoZWRGZXRjaEZpbGVGcm9tU2VydmVyV2l0aFRhZyh7IHVzZXJuYW1lOiB1c2VybmFtZSwgcmVwb3NpdG9yeTogcmVwb05hbWUsIHBhdGg6IGZpbGVuYW1lLCB0YWc6IGJyYW5jaE9yUmVsZWFzZSB9KTtcbiAgICAgIH1cblxuICAgICAgc2V0UmVzdWx0VmFsdWUoPHAgc3R5bGU9e3sgY29sb3I6ICdtYWdlbnRhJyB9fT5DaGVja2luZyA8aT57dXNlcm5hbWV9PC9pPiB7cmVwb05hbWV9IDxiPntmaWxlbmFtZX08L2I+4oCmPC9wPik7XG4gICAgICBsZXQgcmF3Q0ZSZXN1bHRzID0geyBub3RpY2VMaXN0OiBbeyBwcmlvcml0eTogOTkwLCBtZXNzYWdlOiBcIlVuYWJsZSB0byBsb2FkIGZpbGVcIiwgZGV0YWlsczogYHVzZXJuYW1lPSR7dXNlcm5hbWV9YCwgcmVwb05hbWUsIGZpbGVuYW1lIH1dLCBlbGFwc2VkU2Vjb25kczogMCB9O1xuICAgICAgaWYgKGZpbGVDb250ZW50KSB7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlQ29kZSA9IHJlcG9OYW1lLnNwbGl0KCdfJylbMF07XG5cbiAgICAgICAgbGV0IHJlcG9Db2RlR3Vlc3MgPSAnJztcbiAgICAgICAgaWYgKHJlcG9OYW1lID09PSAnaGJvX3VoYicpIHJlcG9Db2RlR3Vlc3MgPSAnVUhCJ1xuICAgICAgICBlbHNlIGlmIChyZXBvTmFtZSA9PT0gJ2VsLXgta29pbmVfdWdudCcpIHJlcG9Db2RlR3Vlc3MgPSAnVUdOVCdcbiAgICAgICAgZWxzZSBpZiAocmVwb05hbWUuZW5kc1dpdGgoJ190d2wnKSkgcmVwb0NvZGVHdWVzcyA9ICdUV0wnXG4gICAgICAgIGVsc2UgaWYgKHJlcG9OYW1lLmVuZHNXaXRoKCdfdG4nKSkgcmVwb0NvZGVHdWVzcyA9ICdUTidcbiAgICAgICAgZWxzZSBpZiAocmVwb05hbWUuZW5kc1dpdGgoJ190YScpKSByZXBvQ29kZUd1ZXNzID0gJ1RBJ1xuICAgICAgICBlbHNlIGlmIChyZXBvTmFtZS5lbmRzV2l0aCgnX3RxJykpIHJlcG9Db2RlR3Vlc3MgPSAnVFEnXG4gICAgICAgIGVsc2UgaWYgKHJlcG9OYW1lLmVuZHNXaXRoKCdfdHcnKSkgcmVwb0NvZGVHdWVzcyA9ICdUVydcbiAgICAgICAgZWxzZSBpZiAocmVwb05hbWUuZW5kc1dpdGgoJ19zbicpKSByZXBvQ29kZUd1ZXNzID0gJ1NOJ1xuICAgICAgICBlbHNlIGlmIChyZXBvTmFtZS5lbmRzV2l0aCgnX3NxJykpIHJlcG9Db2RlR3Vlc3MgPSAnU1EnXG4gICAgICAgIGVsc2UgaWYgKHJlcG9OYW1lLmVuZHNXaXRoKCdsdCcpKSByZXBvQ29kZUd1ZXNzID0gJ0xUJ1xuICAgICAgICBlbHNlIGlmIChyZXBvTmFtZS5lbmRzV2l0aCgnc3QnKSkgcmVwb0NvZGVHdWVzcyA9ICdTVCdcblxuICAgICAgICByYXdDRlJlc3VsdHMgPSBhd2FpdCBjaGVja0ZpbGVDb250ZW50cyh1c2VybmFtZSwgbGFuZ3VhZ2VDb2RlLCByZXBvQ29kZUd1ZXNzLCBicmFuY2hPclJlbGVhc2UsIGZpbGVuYW1lLCBmaWxlQ29udGVudCwgZ2l2ZW5Mb2NhdGlvbiwgY2hlY2tpbmdPcHRpb25zKTtcbiAgICAgICAgLy8gZGVidWdMb2coYHJhd0NGUmVzdWx0cz0ke0pTT04uc3RyaW5naWZ5KHJhd0NGUmVzdWx0cyl9YCk7XG5cbiAgICAgICAgLy8gQmVjYXVzZSB3ZSBrbm93IGhlcmUgdGhhdCB3ZSdyZSBvbmx5IGNoZWNraW5nIG9uZSBmaWxlLCB3ZSBkb27igJl0IG5lZWQgdGhlIGZpbGVuYW1lIGZpZWxkIGluIHRoZSBub3RpY2VzXG4gICAgICAgIC8vIFdST05HOiBXZSB3YW50IHRoZSBmaWxlbmFtZSBzbyB0aGF0IHRoZSBsaW5lTnVtYmVyIGNhbiBiZSBtYWRlIGludG8gYSBsaXZlIGxpbmtcbiAgICAgICAgZnVuY3Rpb24gYWRkRmllbGRzKG5vdGljZSkge1xuICAgICAgICAgIG5vdGljZS51c2VybmFtZSA9IHVzZXJuYW1lOyBub3RpY2UucmVwb05hbWUgPSByZXBvTmFtZTsgbm90aWNlLnJlcG9Db2RlID0gcmVwb0NvZGVHdWVzcztcbiAgICAgICAgICBpZiAoIW5vdGljZS5leHRyYSkgbm90aWNlLmV4dHJhID0gcmVwb0NvZGVHdWVzcztcbiAgICAgICAgICByZXR1cm4gbm90aWNlO1xuICAgICAgICB9XG4gICAgICAgIHJhd0NGUmVzdWx0cy5ub3RpY2VMaXN0ID0gcmF3Q0ZSZXN1bHRzLm5vdGljZUxpc3QubWFwKGFkZEZpZWxkcyk7XG4gICAgICB9XG4gICAgICAvLyBkZWJ1Z0xvZyhgRmlsZUNoZWNrIGdvdCBpbml0aWFsIHJlc3VsdHMgd2l0aCAke3Jhd0NGUmVzdWx0cy5zdWNjZXNzTGlzdC5sZW5ndGh9IHN1Y2Nlc3MgbWVzc2FnZShzKSBhbmQgJHtyYXdDRlJlc3VsdHMubm90aWNlTGlzdC5sZW5ndGh9IG5vdGljZShzKWApO1xuXG4gICAgICAvLyAvLyBTaW5jZSB3ZSBrbm93IHRoZSByZXBvTmFtZSBoZXJlLCBhZGQgaXQgdG8gb3VyIG5vdGljZXNcbiAgICAgIC8vIGZvciAoY29uc3QgdGhpc05vdGljZSBvZiByYXdDRlJlc3VsdHMubm90aWNlTGlzdClcbiAgICAgIC8vICAgdGhpc05vdGljZS5yZXBvTmFtZSA9IHJlcG9OYW1lOyAvLyBBZGQgaW4gdGhpcyBpbmZvIHRoYXQgd2Uga25vd1xuXG4gICAgICAvLyBBZGQgc29tZSBleHRyYSBmaWVsZHMgdG8gb3VyIHJhd0NGUmVzdWx0cyBvYmplY3QgaW4gY2FzZSB3ZSBuZWVkIHRoaXMgaW5mb3JtYXRpb24gYWdhaW4gbGF0ZXJcbiAgICAgIHJhd0NGUmVzdWx0cy5jaGVja1R5cGUgPSAnRmlsZSc7XG4gICAgICByYXdDRlJlc3VsdHMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgIHJhd0NGUmVzdWx0cy5yZXBvTmFtZSA9IHJlcG9OYW1lO1xuICAgICAgcmF3Q0ZSZXN1bHRzLmJyYW5jaCA9IHByb3BzLmJyYW5jaDtcbiAgICAgIHJhd0NGUmVzdWx0cy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgcmF3Q0ZSZXN1bHRzLmNoZWNraW5nT3B0aW9ucyA9IGNoZWNraW5nT3B0aW9ucztcblxuICAgICAgLy8gTm93IGRvIG91ciBmaW5hbCBoYW5kbGluZyBvZiB0aGUgcmVzdWx0XG4gICAgICBsZXQgcHJvY2Vzc09wdGlvbnMgPSB7IC8vIFVuY29tbWVudCBhbnkgb2YgdGhlc2UgdG8gdGVzdCB0aGVtXG4gICAgICAgIC8vICdtYXhpbXVtU2ltaWxhck1lc3NhZ2VzJzogNCwgLy8gZGVmYXVsdCBpcyAzICAtLSAwIG1lYW5zIGRvbuKAmXQgc3VwcHJlc3NcbiAgICAgICAgLy8gJ2Vycm9yUHJpb3JpdHlMZXZlbCc6IDgwMCwgLy8gZGVmYXVsdCBpcyA3MDBcbiAgICAgICAgLy8gJ2N1dG9mZlByaW9yaXR5TGV2ZWwnOiAxMDAsIC8vIGRlZmF1bHQgaXMgMFxuICAgICAgICAvLyAnc29ydEJ5JzogJ0J5UmVwbycsIC8vIGRlZmF1bHQgaXMgJ0J5UHJpb3JpdHknLCBhbHNvIGhhdmUgJ0FzRm91bmQnXG4gICAgICAgIC8vICdpZ25vcmVQcmlvcml0eU51bWJlckxpc3QnOiBbMTIzLCAyMDJdLCAvLyBkZWZhdWx0IGlzIFtdXG4gICAgICB9O1xuICAgICAgLy8gT3IgdGhpcyBhbGxvd3MgdGhlIHBhcmFtZXRlcnMgdG8gYmUgc3BlY2lmaWVkIGFzIGEgRmlsZUNoZWNrIHByb3BlcnR5XG4gICAgICBpZiAocHJvcHMubWF4aW11bVNpbWlsYXJNZXNzYWdlcykgcHJvY2Vzc09wdGlvbnMubWF4aW11bVNpbWlsYXJNZXNzYWdlcyA9IG91clBhcnNlSW50KHByb3BzLm1heGltdW1TaW1pbGFyTWVzc2FnZXMpO1xuICAgICAgaWYgKHByb3BzLmVycm9yUHJpb3JpdHlMZXZlbCkgcHJvY2Vzc09wdGlvbnMuZXJyb3JQcmlvcml0eUxldmVsID0gb3VyUGFyc2VJbnQocHJvcHMuZXJyb3JQcmlvcml0eUxldmVsKTtcbiAgICAgIC8vIGlmIChwcm9wcy5jdXRvZmZQcmlvcml0eUxldmVsKSBwcm9jZXNzT3B0aW9ucy5jdXRvZmZQcmlvcml0eUxldmVsID0gb3VyUGFyc2VJbnQocHJvcHMuY3V0b2ZmUHJpb3JpdHlMZXZlbCk7XG4gICAgICBpZiAocHJvcHMuc29ydEJ5KSBwcm9jZXNzT3B0aW9ucy5zb3J0QnkgPSBwcm9wcy5zb3J0Qnk7XG4gICAgICAvLyBpZiAocHJvcHMuaWdub3JlUHJpb3JpdHlOdW1iZXJMaXN0KSBwcm9jZXNzT3B0aW9ucy5pZ25vcmVQcmlvcml0eU51bWJlckxpc3QgPSBwcm9wcy5pZ25vcmVQcmlvcml0eU51bWJlckxpc3Q7XG5cbiAgICAgIGxldCBkaXNwbGF5VHlwZSA9ICdFcnJvcnNXYXJuaW5ncyc7IC8vIGRlZmF1bHRcbiAgICAgIGlmIChwcm9wcy5kaXNwbGF5VHlwZSkgZGlzcGxheVR5cGUgPSBwcm9wcy5kaXNwbGF5VHlwZTtcblxuICAgICAgZnVuY3Rpb24gcmVuZGVyU3VtbWFyeShwcm9jZXNzZWRSZXN1bHRzKSB7XG4gICAgICAgIGxldCBjdXRvZmZTdHJpbmcgPSAnJztcbiAgICAgICAgLy8gTk9URTogQ291bGRuJ3QgZmlndXJlIG91dCB3aHkgPy4gd2FzIG5vdCBhbGxvd2VkIGluIHRoZSBzdGF0ZW1lbnQgYmVsb3dcbiAgICAgICAgaWYgKHJhd0NGUmVzdWx0cyAmJiByYXdDRlJlc3VsdHMuY2hlY2tlZE9wdGlvbnMgJiYgcmF3Q0ZSZXN1bHRzLmNoZWNrZWRPcHRpb25zLmN1dG9mZlByaW9yaXR5TGV2ZWwpXG4gICAgICAgICAgY3V0b2ZmU3RyaW5nID0gYCBQcmlvcml0eSBsZXZlbCAke3Jhd0NGUmVzdWx0cy5jaGVja2VkT3B0aW9ucy5jdXRvZmZQcmlvcml0eUxldmVsfSBvciBsb3dlciB3ZXJlIG5vdCBpbmNsdWRlZC5gO1xuICAgICAgICByZXR1cm4gKDxkaXY+XG4gICAgICAgICAgPHA+Q2hlY2tlZCA8Yj57ZmlsZW5hbWV9PC9iPiAoZnJvbSA8aT57dXNlcm5hbWV9PC9pPiB7cmVwb05hbWV9IDxpPnticmFuY2hPclJlbGVhc2UgPT09IHVuZGVmaW5lZCA/ICdERUZBVUxUJyA6IGJyYW5jaE9yUmVsZWFzZX08L2k+IGJyYW5jaCk8L3A+XG4gICAgICAgICAgPHA+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7RmluaXNoZWQgaW4gPFJlbmRlckVsYXBzZWRUaW1lIGVsYXBzZWRTZWNvbmRzPXtwcm9jZXNzZWRSZXN1bHRzLmVsYXBzZWRTZWNvbmRzfSAvPiB3aXRoIHtyYXdDRlJlc3VsdHMubm90aWNlTGlzdC5sZW5ndGggPT09IDAgPyAnbm8nIDogcmF3Q0ZSZXN1bHRzLm5vdGljZUxpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IG5vdGljZXtyYXdDRlJlc3VsdHMubm90aWNlTGlzdC5sZW5ndGggPT09IDEgPyAnJyA6ICdzJ31cbiAgICAgICAgICAgIHtwcm9jZXNzZWRSZXN1bHRzLm51bUlnbm9yZWROb3RpY2VzIHx8IHByb2Nlc3NlZFJlc3VsdHMubnVtRGlzYWJsZWROb3RpY2VzID8gJyAoYnV0ICcgOiAnJ31cbiAgICAgICAgICAgIHtwcm9jZXNzZWRSZXN1bHRzLm51bUlnbm9yZWROb3RpY2VzID8gYCR7cHJvY2Vzc2VkUmVzdWx0cy5udW1JZ25vcmVkTm90aWNlcy50b0xvY2FsZVN0cmluZygpfSBpZ25vcmVkIG5vdGljZShzKWAgOiBcIlwifVxuICAgICAgICAgICAge3Byb2Nlc3NlZFJlc3VsdHMubnVtSWdub3JlZE5vdGljZXMgJiYgcHJvY2Vzc2VkUmVzdWx0cy5udW1EaXNhYmxlZE5vdGljZXMgPyAnIGFuZCAnIDogJyd9XG4gICAgICAgICAgICB7cHJvY2Vzc2VkUmVzdWx0cy5udW1EaXNhYmxlZE5vdGljZXMgPyBgJHtwcm9jZXNzZWRSZXN1bHRzLm51bURpc2FibGVkTm90aWNlcy50b0xvY2FsZVN0cmluZygpfSBleHBlY3RlZC9kaXNhYmxlZCBub3RpY2Uke3Byb2Nlc3NlZFJlc3VsdHMubnVtRGlzYWJsZWROb3RpY2VzID09PSAxID8gJycgOiAncyd9YCA6IFwiXCJ9XG4gICAgICAgICAgICB7cHJvY2Vzc2VkUmVzdWx0cy5udW1JZ25vcmVkTm90aWNlcyB8fCBwcm9jZXNzZWRSZXN1bHRzLm51bURpc2FibGVkTm90aWNlcyA/ICcpJyA6ICcnfS57Y3V0b2ZmU3RyaW5nfTwvcD5cbiAgICAgICAgICB7LyogPFJlbmRlclJhd1Jlc3VsdHMgcmVzdWx0cz17cmF3Q0ZSZXN1bHRzfSAvPiAqL31cbiAgICAgICAgPC9kaXY+KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpc3BsYXlUeXBlID09PSAnRXJyb3JzV2FybmluZ3MnKSB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3VsdHMgPSBwcm9jZXNzTm90aWNlc1RvRXJyb3JzV2FybmluZ3MocmF3Q0ZSZXN1bHRzLCBwcm9jZXNzT3B0aW9ucyk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB1c2VyTG9nKGAke2BGaWxlQ2hlY2sgZ290IHByb2Nlc3NlZCByZXN1bHRzIHdpdGggJHtwcm9jZXNzZWRSZXN1bHRzLnN1Y2Nlc3NMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSBzdWNjZXNzIG1lc3NhZ2UocyksICR7cHJvY2Vzc2VkUmVzdWx0cy5lcnJvckxpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IGVycm9yKHMpIGFuZCAke3Byb2Nlc3NlZFJlc3VsdHMud2FybmluZ0xpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IHdhcm5pbmcocylgfVxuICAgICAgICAvLyAgIG51bUlnbm9yZWROb3RpY2VzPSR7cHJvY2Vzc2VkUmVzdWx0cy5udW1JZ25vcmVkTm90aWNlcy50b0xvY2FsZVN0cmluZygpfSBudW1IaWRkZW5FcnJvcnM9JHtwcm9jZXNzZWRSZXN1bHRzLm51bUhpZGRlbkVycm9ycy50b0xvY2FsZVN0cmluZygpfSBudW1IaWRkZW5XYXJuaW5ncz0ke3Byb2Nlc3NlZFJlc3VsdHMubnVtSGlkZGVuV2FybmluZ3MudG9Mb2NhbGVTdHJpbmcoKX1gKTtcblxuICAgICAgICBpZiAocHJvY2Vzc2VkUmVzdWx0cy5lcnJvckxpc3QubGVuZ3RoIHx8IHByb2Nlc3NlZFJlc3VsdHMud2FybmluZ0xpc3QubGVuZ3RoKVxuICAgICAgICAgIHNldFJlc3VsdFZhbHVlKDw+XG4gICAgICAgICAgICB7cmVuZGVyU3VtbWFyeShwcm9jZXNzZWRSZXN1bHRzKX1cbiAgICAgICAgICAgIDxSZW5kZXJTdWNjZXNzZXNFcnJvcnNXYXJuaW5ncyByZXN1bHRzPXtwcm9jZXNzZWRSZXN1bHRzfSAvPlxuICAgICAgICAgIDwvPik7XG4gICAgICAgIGVsc2UgLy8gbm8gZXJyb3JzIG9yIHdhcm5pbmdzXG4gICAgICAgICAgc2V0UmVzdWx0VmFsdWUoPD5cbiAgICAgICAgICAgIHtyZW5kZXJTdW1tYXJ5KHByb2Nlc3NlZFJlc3VsdHMpfVxuICAgICAgICAgICAgPFJlbmRlclN1Y2Nlc3Nlc0Vycm9yc1dhcm5pbmdzIHJlc3VsdHM9e3Byb2Nlc3NlZFJlc3VsdHN9IC8+XG4gICAgICAgICAgPC8+KTtcbiAgICAgIH0gZWxzZSBpZiAoZGlzcGxheVR5cGUgPT09ICdTZXZlcmVNZWRpdW1Mb3cnKSB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3VsdHMgPSBwcm9jZXNzTm90aWNlc1RvU2V2ZXJlTWVkaXVtTG93KHJhd0NGUmVzdWx0cywgcHJvY2Vzc09wdGlvbnMpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdXNlckxvZyhgRmlsZUNoZWNrIGdvdCBwcm9jZXNzZWQgcmVzdWx0cyB3aXRoICR7cHJvY2Vzc2VkUmVzdWx0cy5zdWNjZXNzTGlzdC5sZW5ndGgudG9Mb2NhbGVTdHJpbmcoKX0gc3VjY2VzcyBtZXNzYWdlKHMpLCAke3Byb2Nlc3NlZFJlc3VsdHMuZXJyb3JMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSBlcnJvcihzKSBhbmQgJHtwcm9jZXNzZWRSZXN1bHRzLndhcm5pbmdMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSB3YXJuaW5nKHMpXG4gICAgICAgIC8vICAgbnVtSWdub3JlZE5vdGljZXM9JHtwcm9jZXNzZWRSZXN1bHRzLm51bUlnbm9yZWROb3RpY2VzLnRvTG9jYWxlU3RyaW5nKCl9IG51bUhpZGRlbkVycm9ycz0ke3Byb2Nlc3NlZFJlc3VsdHMubnVtSGlkZGVuRXJyb3JzLnRvTG9jYWxlU3RyaW5nKCl9IG51bUhpZGRlbldhcm5pbmdzPSR7cHJvY2Vzc2VkUmVzdWx0cy5udW1IaWRkZW5XYXJuaW5ncy50b0xvY2FsZVN0cmluZygpfWApO1xuXG4gICAgICAgIGlmIChwcm9jZXNzZWRSZXN1bHRzLnNldmVyZUxpc3QubGVuZ3RoIHx8IHByb2Nlc3NlZFJlc3VsdHMubWVkaXVtTGlzdC5sZW5ndGggfHwgcHJvY2Vzc2VkUmVzdWx0cy5sb3dMaXN0Lmxlbmd0aClcbiAgICAgICAgICBzZXRSZXN1bHRWYWx1ZSg8PlxuICAgICAgICAgICAge3JlbmRlclN1bW1hcnkocHJvY2Vzc2VkUmVzdWx0cyl9XG4gICAgICAgICAgICA8UmVuZGVyU3VjY2Vzc2VzU2V2ZXJlTWVkaXVtTG93IHJlc3VsdHM9e3Byb2Nlc3NlZFJlc3VsdHN9IC8+XG4gICAgICAgICAgPC8+KTtcbiAgICAgICAgZWxzZSAvLyBubyBzZXZlcmUsIG1lZGl1bSwgb3IgbG93IG5vdGljZXNcbiAgICAgICAgICBzZXRSZXN1bHRWYWx1ZSg8PlxuICAgICAgICAgICAge3JlbmRlclN1bW1hcnkocHJvY2Vzc2VkUmVzdWx0cyl9XG4gICAgICAgICAgICA8UmVuZGVyU3VjY2Vzc2VzU2V2ZXJlTWVkaXVtTG93IHJlc3VsdHM9e3Byb2Nlc3NlZFJlc3VsdHN9IC8+XG4gICAgICAgICAgPC8+KTtcbiAgICAgIH0gZWxzZSBpZiAoZGlzcGxheVR5cGUgPT09ICdTaW5nbGVMaXN0Jykge1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXN1bHRzID0gcHJvY2Vzc05vdGljZXNUb1NpbmdsZUxpc3QocmF3Q0ZSZXN1bHRzLCBwcm9jZXNzT3B0aW9ucyk7XG4gICAgICAgIC8vICAgICAgIHVzZXJMb2coYEZpbGVDaGVjayBnb3QgcHJvY2Vzc2VkIHJlc3VsdHMgd2l0aCAke3Byb2Nlc3NlZFJlc3VsdHMuc3VjY2Vzc0xpc3QubGVuZ3RoLnRvTG9jYWxlU3RyaW5nKCl9IHN1Y2Nlc3MgbWVzc2FnZShzKSBhbmQgJHtwcm9jZXNzZWRSZXN1bHRzLndhcm5pbmdMaXN0Lmxlbmd0aC50b0xvY2FsZVN0cmluZygpfSBub3RpY2UocylcbiAgICAgICAgLy8gbnVtSWdub3JlZE5vdGljZXM9JHtwcm9jZXNzZWRSZXN1bHRzLm51bUlnbm9yZWROb3RpY2VzLnRvTG9jYWxlU3RyaW5nKCl9IG51bUhpZGRlbldhcm5pbmdzPSR7cHJvY2Vzc2VkUmVzdWx0cy5udW1IaWRkZW5XYXJuaW5ncy50b0xvY2FsZVN0cmluZygpfWApO1xuXG4gICAgICAgIGlmIChwcm9jZXNzZWRSZXN1bHRzLndhcm5pbmdMaXN0Lmxlbmd0aClcbiAgICAgICAgICBzZXRSZXN1bHRWYWx1ZSg8PlxuICAgICAgICAgICAge3JlbmRlclN1bW1hcnkocHJvY2Vzc2VkUmVzdWx0cyl9XG4gICAgICAgICAgICA8UmVuZGVyU3VjY2Vzc2VzTm90aWNlc0dyYWRpZW50IHJlc3VsdHM9e3Byb2Nlc3NlZFJlc3VsdHN9IC8+XG4gICAgICAgICAgPC8+KTtcbiAgICAgICAgZWxzZSAvLyBubyB3YXJuaW5nc1xuICAgICAgICAgIHNldFJlc3VsdFZhbHVlKDw+XG4gICAgICAgICAgICB7cmVuZGVyU3VtbWFyeShwcm9jZXNzZWRSZXN1bHRzKX1cbiAgICAgICAgICAgIDxSZW5kZXJTdWNjZXNzZXNOb3RpY2VzR3JhZGllbnQgcmVzdWx0cz17cHJvY2Vzc2VkUmVzdWx0c30gLz5cbiAgICAgICAgICA8Lz4pO1xuICAgICAgfSBlbHNlIHNldFJlc3VsdFZhbHVlKDxiIHN0eWxlPXt7IGNvbG9yOiAncmVkJyB9fT5JbnZhbGlkIGRpc3BsYXlUeXBlPSd7ZGlzcGxheVR5cGV9JzwvYj4pXG4gICAgfSkoKTsgLy8gZW5kIG9mIGFzeW5jIHBhcnQgaW4gdW5uYW1lZEZ1bmN0aW9uXG4gICAgLy8gRG9lc27igJl0IHdvcmsgaWYgd2UgYWRkIHRoaXMgdG8gbmV4dCBsaW5lOiB1c2VybmFtZSxyZXBvTmFtZSxicmFuY2gsY2hlY2tpbmdPcHRpb25zLGZpbGVuYW1lLGdpdmVuTG9jYXRpb24scHJvcHNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtdKTsgLy8gZW5kIG9mIHVzZUVmZmVjdCBwYXJ0XG5cbiAgY29uc3QgdXNlcm5hbWUgPSBwcm9wcy51c2VybmFtZTtcbiAgLy8gZGVidWdMb2coYEZpbGVDaGVjayB1c2VybmFtZT0nJHt1c2VybmFtZX0nYCk7XG4gIGlmICghdXNlcm5hbWUpIHJldHVybiA8PjxiPkVSUk9SPC9iPjogVGhlIERvb3I0MyA8Yj51c2VybmFtZTwvYj4gbXVzdCBiZSBzcGVjaWZpZWQ8Lz47XG4gIGNvbnN0IHJlcG9OYW1lID0gcHJvcHMucmVwb05hbWU7XG4gIC8vIGRlYnVnTG9nKGBGaWxlQ2hlY2sgcmVwb05hbWU9JyR7cmVwb05hbWV9J2ApO1xuICBpZiAoIXJlcG9OYW1lKSByZXR1cm4gPD48Yj5FUlJPUjwvYj46IFRoZSBEb29yNDMgPGI+cmVwb3NpdG9yeSBuYW1lPC9iPiBtdXN0IGJlIHNwZWNpZmllZDwvPjtcbiAgbGV0IGJyYW5jaE9yUmVsZWFzZSA9IHByb3BzLmJyYW5jaE9yUmVsZWFzZTtcbiAgLy8gZGVidWdMb2coYEZpbGVDaGVjayBicmFuY2hPclJlbGVhc2U9JyR7YnJhbmNoT3JSZWxlYXNlfSdgKTtcbiAgaWYgKGJyYW5jaE9yUmVsZWFzZSA9PT0gdW5kZWZpbmVkKSBicmFuY2hPclJlbGVhc2UgPSAnbWFzdGVyJztcbiAgY29uc3QgZmlsZW5hbWUgPSBwcm9wcy5maWxlbmFtZTtcbiAgLy8gZGVidWdMb2coYGZpbGVuYW1lPScke2ZpbGVuYW1lfSdgKTtcbiAgaWYgKCFmaWxlbmFtZSkgcmV0dXJuIDw+PGI+RVJST1I8L2I+OiBUaGUgRG9vcjQzIDxiPmZpbGVuYW1lPC9iPiBtdXN0IGJlIHNwZWNpZmllZDwvPjtcblxuICBsZXQgZ2l2ZW5Mb2NhdGlvbiA9IHByb3BzWydsb2NhdGlvbiddID8gcHJvcHNbJ2xvY2F0aW9uJ10gOiBcIlwiO1xuICBpZiAoZ2l2ZW5Mb2NhdGlvbiAmJiBnaXZlbkxvY2F0aW9uWzBdICE9PSAnICcpIGdpdmVuTG9jYXRpb24gPSBgICR7Z2l2ZW5Mb2NhdGlvbn1gO1xuXG4gIGNvbnN0IGNoZWNraW5nT3B0aW9ucyA9IHsgLy8gVW5jb21tZW50IGFueSBvZiB0aGVzZSB0byB0ZXN0IHRoZW1cbiAgICAvLyBleGNlcnB0TGVuZ3RoOiAyNSxcbiAgICBzdXBwcmVzc05vdGljZURpc2FibGluZ0ZsYWc6IHRydWUsIC8vIExlYXZlIHRoaXMgb25lIGFzIHRydWUgKG90aGVyd2lzZSBkZW1vIGNoZWNrcyBhcmUgbGVzcyBlZmZpY2llbnQpXG4gIH07XG4gIC8vIE9yIHRoaXMgYWxsb3dzIHRoZSBwYXJhbWV0ZXJzIHRvIGJlIHNwZWNpZmllZCBhcyBhIEZpbGVDaGVjayBwcm9wZXJ0eVxuICBpZiAocHJvcHMuZXhjZXJwdExlbmd0aCkgY2hlY2tpbmdPcHRpb25zLmV4Y2VycHRMZW5ndGggPSBvdXJQYXJzZUludChwcm9wcy5leGNlcnB0TGVuZ3RoKTtcbiAgaWYgKHByb3BzLmN1dG9mZlByaW9yaXR5TGV2ZWwpIGNoZWNraW5nT3B0aW9ucy5jdXRvZmZQcmlvcml0eUxldmVsID0gb3VyUGFyc2VJbnQocHJvcHMuY3V0b2ZmUHJpb3JpdHlMZXZlbCk7XG4gIGlmIChwcm9wcy5kaXNhYmxlQWxsTGlua0ZldGNoaW5nRmxhZykgY2hlY2tpbmdPcHRpb25zLmRpc2FibGVBbGxMaW5rRmV0Y2hpbmdGbGFnID0gcHJvcHMuZGlzYWJsZUFsbExpbmtGZXRjaGluZ0ZsYWcudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xuICBpZiAocHJvcHMuZGlzYWJsZUxpbmtlZFRBQXJ0aWNsZXNDaGVja0ZsYWcpIGNoZWNraW5nT3B0aW9ucy5kaXNhYmxlTGlua2VkVEFBcnRpY2xlc0NoZWNrRmxhZyA9IHByb3BzLmRpc2FibGVMaW5rZWRUQUFydGljbGVzQ2hlY2tGbGFnLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbiAgaWYgKHByb3BzLmRpc2FibGVMaW5rZWRUV0FydGljbGVzQ2hlY2tGbGFnKSBjaGVja2luZ09wdGlvbnMuZGlzYWJsZUxpbmtlZFRXQXJ0aWNsZXNDaGVja0ZsYWcgPSBwcm9wcy5kaXNhYmxlTGlua2VkVFdBcnRpY2xlc0NoZWNrRmxhZy50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG5cbiAgLy8gey8qIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLnJvb3R9PiAqL31cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIkZyZWRcIj5cbiAgICAgIHtyZXN1bHR9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuLy8gZW5kIG9mIEZpbGVDaGVjaygpXG5cbmNvbnN0IHN0eWxlcyA9IHRoZW1lID0+ICh7XG4gIHJvb3Q6IHtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoU3R5bGVzKHN0eWxlcykoRmlsZUNoZWNrKTtcbiJdfQ==