"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireWildcard(require("react"));

var _lodash = _interopRequireDefault(require("lodash.isequal"));

var _styles = require("@material-ui/core/styles");

var _core = require("@material-ui/core");

require("@material-ui/icons");

var _datatable = require("../../core/datatable");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function AddRowMenu(_ref) {
  var rowData = _ref.rowData,
      rowIndex = _ref.rowIndex,
      columnNames = _ref.columnNames,
      rowGenerate = _ref.rowGenerate,
      rowAddBelow = _ref.rowAddBelow,
      button = _ref.button,
      generateRowId = _ref.generateRowId;

  var _useState = (0, _react.useState)(false),
      _useState2 = _slicedToArray(_useState, 2),
      open = _useState2[0],
      setOpen = _useState2[1];

  var _useState3 = (0, _react.useState)(),
      _useState4 = _slicedToArray(_useState3, 2),
      newRow = _useState4[0],
      setNewRow = _useState4[1];

  var classes = useStyles();

  var handleOpen = function handleOpen() {
    return setOpen(true);
  };

  var handleClose = function handleClose() {
    setOpen(false);
    setNewRow();
  };

  var handleRowAdd = function handleRowAdd() {
    rowAddBelow({
      rowIndex: rowIndex,
      rowData: newRow
    });
    handleClose();
    setTimeout(function () {
      var rowBelow = (0, _datatable.getRowElement)(generateRowId, rowData, 1);

      if (rowBelow) {
        var top = (0, _datatable.getOffset)(rowBelow).top - rowBelow.offsetHeight;
        document.documentElement.scrollTop = top - 20;
        document.body.scrollTop = top - 20;
      }
    }, 200);
  };

  var dialogComponent = /*#__PURE__*/_react["default"].createElement("div", null);

  if (open) {
    var newRowComponent = columnNames.map(function (name, i) {
      var text = '';

      if (!newRow) {
        var _newRow = rowGenerate({
          rowIndex: rowIndex
        });

        setNewRow(_newRow);
        return text;
      } else {
        text = /*#__PURE__*/_react["default"].createElement(_core.DialogContentText, {
          key: name + i
        }, /*#__PURE__*/_react["default"].createElement("strong", null, name, ":"), ' ' + newRow[i]);
      }

      return text;
    });
    dialogComponent = /*#__PURE__*/_react["default"].createElement(_core.Dialog, {
      open: open,
      onClose: handleClose,
      "aria-labelledby": "dialog-title",
      "aria-describedby": "dialog-description",
      classes: {
        paper: classes.paper
      }
    }, /*#__PURE__*/_react["default"].createElement(_core.DialogTitle, {
      id: "dialog-title"
    }, "Add Row"), /*#__PURE__*/_react["default"].createElement(_core.DialogContent, null, /*#__PURE__*/_react["default"].createElement(_core.Divider, null), /*#__PURE__*/_react["default"].createElement("br", null), newRowComponent), /*#__PURE__*/_react["default"].createElement(_core.DialogActions, null, /*#__PURE__*/_react["default"].createElement(_core.Button, {
      onClick: handleClose,
      color: "primary",
      autoFocus: true
    }, "Cancel"), /*#__PURE__*/_react["default"].createElement(_core.Button, {
      onClick: handleRowAdd,
      color: "secondary"
    }, "Add")));
  }

  return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("div", {
    onClick: handleOpen
  }, button), dialogComponent);
}

var useStyles = (0, _styles.makeStyles)(function (theme) {
  return {
    paper: {
      minWidth: '500px'
    }
  };
});
AddRowMenu.propTypes = {};

var _default = /*#__PURE__*/_react["default"].memo(AddRowMenu, function (prevProps, nextProps) {
  return prevProps.rowIndex === nextProps.rowIndex && (0, _lodash["default"])(prevProps.rowData, nextProps.rowData) && (0, _lodash["default"])(prevProps.columnNames, nextProps.columnNames);
});

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMtbWVudS9BZGRSb3cuanMiXSwibmFtZXMiOlsiQWRkUm93TWVudSIsInJvd0RhdGEiLCJyb3dJbmRleCIsImNvbHVtbk5hbWVzIiwicm93R2VuZXJhdGUiLCJyb3dBZGRCZWxvdyIsImJ1dHRvbiIsImdlbmVyYXRlUm93SWQiLCJvcGVuIiwic2V0T3BlbiIsIm5ld1JvdyIsInNldE5ld1JvdyIsImNsYXNzZXMiLCJ1c2VTdHlsZXMiLCJoYW5kbGVPcGVuIiwiaGFuZGxlQ2xvc2UiLCJoYW5kbGVSb3dBZGQiLCJzZXRUaW1lb3V0Iiwicm93QmVsb3ciLCJ0b3AiLCJvZmZzZXRIZWlnaHQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsImJvZHkiLCJkaWFsb2dDb21wb25lbnQiLCJuZXdSb3dDb21wb25lbnQiLCJtYXAiLCJuYW1lIiwiaSIsInRleHQiLCJfbmV3Um93IiwicGFwZXIiLCJ0aGVtZSIsIm1pbldpZHRoIiwicHJvcFR5cGVzIiwiUmVhY3QiLCJtZW1vIiwicHJldlByb3BzIiwibmV4dFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFTQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxTQUFTQSxVQUFULE9BUUc7QUFBQSxNQVBEQyxPQU9DLFFBUERBLE9BT0M7QUFBQSxNQU5EQyxRQU1DLFFBTkRBLFFBTUM7QUFBQSxNQUxEQyxXQUtDLFFBTERBLFdBS0M7QUFBQSxNQUpEQyxXQUlDLFFBSkRBLFdBSUM7QUFBQSxNQUhEQyxXQUdDLFFBSERBLFdBR0M7QUFBQSxNQUZEQyxNQUVDLFFBRkRBLE1BRUM7QUFBQSxNQUREQyxhQUNDLFFBRERBLGFBQ0M7O0FBQUEsa0JBQ3VCLHFCQUFTLEtBQVQsQ0FEdkI7QUFBQTtBQUFBLE1BQ01DLElBRE47QUFBQSxNQUNZQyxPQURaOztBQUFBLG1CQUUyQixzQkFGM0I7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UixNQURILENBREYsRUFJR21CLGVBSkgsQ0FERjtBQVFEOztBQUVELElBQU1aLFNBQVMsR0FBRyx3QkFBVyxVQUFBb0IsS0FBSztBQUFBLFNBQUs7QUFDckNELElBQUFBLEtBQUssRUFBRTtBQUNMRSxNQUFBQSxRQUFRLEVBQUU7QUFETDtBQUQ4QixHQUFMO0FBQUEsQ0FBaEIsQ0FBbEI7QUFNQWxDLFVBQVUsQ0FBQ21DLFNBQVgsR0FBdUIsRUFBdkI7OzRCQUVlQyxrQkFBTUMsSUFBTixDQUFXckMsVUFBWCxFQUF1QixVQUFDc0MsU0FBRCxFQUFZQyxTQUFaO0FBQUEsU0FDcENELFNBQVMsQ0FBQ3BDLFFBQVYsS0FBdUJxQyxTQUFTLENBQUNyQyxRQUFqQyxJQUNBLHdCQUFRb0MsU0FBUyxDQUFDckMsT0FBbEIsRUFBMkJzQyxTQUFTLENBQUN0QyxPQUFyQyxDQURBLElBRUEsd0JBQVFxQyxTQUFTLENBQUNuQyxXQUFsQixFQUErQm9DLFNBQVMsQ0FBQ3BDLFdBQXpDLENBSG9DO0FBQUEsQ0FBdkIsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGlzRXF1YWwgZnJvbSAnbG9kYXNoLmlzZXF1YWwnO1xyXG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzJztcclxuaW1wb3J0IHtcclxuICBCdXR0b24sXHJcbiAgRGl2aWRlcixcclxuICBEaWFsb2csXHJcbiAgRGlhbG9nVGl0bGUsXHJcbiAgRGlhbG9nQWN0aW9ucyxcclxuICBEaWFsb2dDb250ZW50LFxyXG4gIERpYWxvZ0NvbnRlbnRUZXh0LFxyXG59IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlJztcclxuaW1wb3J0IHtcclxufSBmcm9tICdAbWF0ZXJpYWwtdWkvaWNvbnMnO1xyXG5pbXBvcnQgeyBnZXRSb3dFbGVtZW50LCBnZXRPZmZzZXQgfSBmcm9tICcuLi8uLi9jb3JlL2RhdGF0YWJsZSc7XHJcblxyXG5mdW5jdGlvbiBBZGRSb3dNZW51KHtcclxuICByb3dEYXRhLFxyXG4gIHJvd0luZGV4LFxyXG4gIGNvbHVtbk5hbWVzLFxyXG4gIHJvd0dlbmVyYXRlLFxyXG4gIHJvd0FkZEJlbG93LFxyXG4gIGJ1dHRvbixcclxuICBnZW5lcmF0ZVJvd0lkLFxyXG59KSB7XHJcbiAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtuZXdSb3csIHNldE5ld1Jvd10gPSB1c2VTdGF0ZSgpO1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKCk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZU9wZW4gPSAoKSA9PiBzZXRPcGVuKHRydWUpO1xyXG5cclxuICBjb25zdCBoYW5kbGVDbG9zZSA9ICgpID0+IHtcclxuICAgIHNldE9wZW4oZmFsc2UpO1xyXG4gICAgc2V0TmV3Um93KCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUm93QWRkID0gKCkgPT4ge1xyXG4gICAgcm93QWRkQmVsb3coeyByb3dJbmRleCwgcm93RGF0YTogbmV3Um93IH0pO1xyXG4gICAgaGFuZGxlQ2xvc2UoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBjb25zdCByb3dCZWxvdyA9IGdldFJvd0VsZW1lbnQoZ2VuZXJhdGVSb3dJZCwgcm93RGF0YSwgMSk7XHJcblxyXG4gICAgICBpZiAocm93QmVsb3cpIHtcclxuICAgICAgICBjb25zdCB0b3AgPSBnZXRPZmZzZXQocm93QmVsb3cpLnRvcCAtIHJvd0JlbG93Lm9mZnNldEhlaWdodDtcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gdG9wIC0gMjA7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSB0b3AgLSAyMDtcclxuICAgICAgfVxyXG4gICAgfSwgMjAwKTtcclxuICB9O1xyXG5cclxuICBsZXQgZGlhbG9nQ29tcG9uZW50ID0gPGRpdiAvPjtcclxuXHJcbiAgaWYgKG9wZW4pIHtcclxuICAgIGNvbnN0IG5ld1Jvd0NvbXBvbmVudCA9IGNvbHVtbk5hbWVzLm1hcCgobmFtZSwgaSkgPT4ge1xyXG4gICAgICBsZXQgdGV4dCA9ICcnO1xyXG5cclxuICAgICAgaWYgKCFuZXdSb3cpIHtcclxuICAgICAgICBjb25zdCBfbmV3Um93ID0gcm93R2VuZXJhdGUoeyByb3dJbmRleCB9KTtcclxuICAgICAgICBzZXROZXdSb3coX25ld1Jvdyk7XHJcbiAgICAgICAgcmV0dXJuIHRleHQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGV4dCA9IChcclxuICAgICAgICAgIDxEaWFsb2dDb250ZW50VGV4dCBrZXk9e25hbWUgKyBpfT5cclxuICAgICAgICAgICAgPHN0cm9uZz57bmFtZX06PC9zdHJvbmc+XHJcbiAgICAgICAgICAgIHsnICcgKyBuZXdSb3dbaV19XHJcbiAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnRUZXh0PlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRleHQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkaWFsb2dDb21wb25lbnQgPSAoXHJcbiAgICAgIDxEaWFsb2dcclxuICAgICAgICBvcGVuPXtvcGVufVxyXG4gICAgICAgIG9uQ2xvc2U9e2hhbmRsZUNsb3NlfVxyXG4gICAgICAgIGFyaWEtbGFiZWxsZWRieT1cImRpYWxvZy10aXRsZVwiXHJcbiAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cImRpYWxvZy1kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgY2xhc3Nlcz17e3BhcGVyOiBjbGFzc2VzLnBhcGVyfX1cclxuICAgICAgPlxyXG4gICAgICAgIDxEaWFsb2dUaXRsZSBpZD1cImRpYWxvZy10aXRsZVwiPlxyXG4gICAgICAgICAgQWRkIFJvd1xyXG4gICAgICAgIDwvRGlhbG9nVGl0bGU+XHJcbiAgICAgICAgPERpYWxvZ0NvbnRlbnQ+XHJcbiAgICAgICAgICA8RGl2aWRlciAvPlxyXG4gICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICB7bmV3Um93Q29tcG9uZW50fVxyXG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cclxuICAgICAgICA8RGlhbG9nQWN0aW9ucz5cclxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlQ2xvc2V9IGNvbG9yPVwicHJpbWFyeVwiIGF1dG9Gb2N1cz5cclxuICAgICAgICAgICAgQ2FuY2VsXHJcbiAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlUm93QWRkfSBjb2xvcj1cInNlY29uZGFyeVwiPlxyXG4gICAgICAgICAgICBBZGRcclxuICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgIDwvRGlhbG9nQWN0aW9ucz5cclxuICAgICAgPC9EaWFsb2c+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxkaXYgb25DbGljaz17aGFuZGxlT3Blbn0+XHJcbiAgICAgICAge2J1dHRvbn1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtkaWFsb2dDb21wb25lbnR9XHJcbiAgICA8Lz5cclxuICApO1xyXG59XHJcblxyXG5jb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKHRoZW1lID0+ICh7XHJcbiAgcGFwZXI6IHtcclxuICAgIG1pbldpZHRoOiAnNTAwcHgnXHJcbiAgfSxcclxufSkpO1xyXG5cclxuQWRkUm93TWVudS5wcm9wVHlwZXMgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oQWRkUm93TWVudSwgKHByZXZQcm9wcywgbmV4dFByb3BzKSA9PlxyXG4gIHByZXZQcm9wcy5yb3dJbmRleCA9PT0gbmV4dFByb3BzLnJvd0luZGV4ICYmXHJcbiAgaXNFcXVhbChwcmV2UHJvcHMucm93RGF0YSwgbmV4dFByb3BzLnJvd0RhdGEpICYmXHJcbiAgaXNFcXVhbChwcmV2UHJvcHMuY29sdW1uTmFtZXMsIG5leHRQcm9wcy5jb2x1bW5OYW1lcyksXHJcbik7XHJcbiJdfQ==