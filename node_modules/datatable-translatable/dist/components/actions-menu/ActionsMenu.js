"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireWildcard(require("react"));

var _styles = require("@material-ui/core/styles");

var _core = require("@material-ui/core");

var _lodash = _interopRequireDefault(require("lodash.isequal"));

var _icons = require("@material-ui/icons");

var _DataTable = require("../datatable/DataTable.context");

var _localStrings = require("../../core/localStrings");

var _AddRow = _interopRequireDefault(require("./AddRow"));

var _DeleteRow = _interopRequireDefault(require("./DeleteRow"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function RowMenu(_ref) {
  var rowIndex = _ref.rowIndex,
      rowData = _ref.rowData,
      delimiters = _ref.delimiters,
      generateRowId = _ref.generateRowId;
  var classes = useStyles();

  var _useContext = (0, _react.useContext)(_DataTable.DataTableContext),
      state = _useContext.state,
      actions = _useContext.actions;

  var columnNames = state.columnNames;
  var rowGenerate = actions.rowGenerate,
      rowAddBelow = actions.rowAddBelow,
      rowDelete = actions.rowDelete,
      rowMoveAbove = actions.rowMoveAbove,
      rowMoveBelow = actions.rowMoveBelow;

  var handleMoveAbove = function handleMoveAbove() {
    return rowMoveAbove({
      rowIndex: rowIndex
    });
  };

  var handleMoveBelow = function handleMoveBelow() {
    return rowMoveBelow({
      rowIndex: rowIndex
    });
  };

  var disableMoveAbove = rowIndex === 0; // rowData is the combined array of source and target
  // if target rows have been deleted, then source will contain more
  // rows that the target. For deleted rows, the combined array will 
  // have for each cell just the source data ending in a tab character.
  // Normally the target value for each cell follows the tab character.
  // If that target value is missing, then we are on a deleted row 
  // and we cannot add a row at this location.
  // From the console log, here is a sample:
  // 0: "rowHeader"
  // 1: "JUD\t"
  // 2: "1\t"
  // 3: "2\t"
  // 4: "q2qo\t"
  // 5: "figs-metaphor\t"
  // 6: "ὑμῖν…πληθυνθείη\t"
  // 7: "1\t"
  // 8: "May…be multiplied to you\t"
  // 9: "These ideas are spoken of as if ...
  // Note that there is the constant value "rowHeader" in slot zero.
  // Let's test by splitting index 1; in the sample above there should
  // be two elements, both being the string "JUD" if the row is not
  // deleted.
  // If a row is deleted (as opposed to being a new add/insert), then
  // source side will *not* be empty, but the target side will be empty.

  var cellvals = [];
  cellvals = rowData[1].split('\t'); // is this a deleted row?

  if (cellvals[0] !== "" && cellvals[1] === "") {
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null);
  }

  var addRowButton = /*#__PURE__*/_react["default"].createElement(_core.Tooltip, {
    title: (0, _localStrings.localString)('AddRow'),
    arrow: true
  }, /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    className: classes.button
  }, /*#__PURE__*/_react["default"].createElement(_icons.AddCircleOutline, null)));

  var deleteRowButton = /*#__PURE__*/_react["default"].createElement(_core.Tooltip, {
    title: (0, _localStrings.localString)('DeleteRow'),
    arrow: true
  }, /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    className: classes.button
  }, /*#__PURE__*/_react["default"].createElement(_icons.RemoveCircleOutline, null)));

  return /*#__PURE__*/_react["default"].createElement("div", {
    className: classes.root
  }, /*#__PURE__*/_react["default"].createElement(_core.Tooltip, {
    title: (0, _localStrings.localString)('MoveRowUp'),
    arrow: true
  }, /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    className: classes.flipY,
    disabled: disableMoveAbove,
    onClick: handleMoveAbove
  }, /*#__PURE__*/_react["default"].createElement(_icons.ArrowDropDownCircleOutlined, null)))), /*#__PURE__*/_react["default"].createElement(_AddRow["default"], {
    rowData: rowData,
    rowIndex: rowIndex,
    columnNames: columnNames,
    rowGenerate: rowGenerate,
    rowAddBelow: rowAddBelow,
    button: addRowButton,
    generateRowId: generateRowId
  }), /*#__PURE__*/_react["default"].createElement(_DeleteRow["default"], {
    rowData: rowData,
    rowIndex: rowIndex,
    columnNames: columnNames,
    rowDelete: rowDelete,
    delimiters: delimiters,
    button: deleteRowButton,
    generateRowId: generateRowId
  }), /*#__PURE__*/_react["default"].createElement(_core.Tooltip, {
    title: (0, _localStrings.localString)('MoveRowDown'),
    arrow: true
  }, /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    className: classes.button,
    onClick: handleMoveBelow
  }, /*#__PURE__*/_react["default"].createElement(_icons.ArrowDropDownCircleOutlined, null))));
}

var useStyles = (0, _styles.makeStyles)(function (theme) {
  return {
    root: {
      display: 'flex',
      justifyContent: 'flex-end'
    },
    flipY: {
      transform: 'scaleY(-1)',
      padding: '8px'
    },
    button: {
      padding: '8px'
    }
  };
});

var _default = /*#__PURE__*/_react["default"].memo(RowMenu, function (prevProps, nextProps) {
  return prevProps.rowIndex === nextProps.rowIndex && (0, _lodash["default"])(prevProps.rowData, nextProps.rowData) && (0, _lodash["default"])(prevProps.delimiters, nextProps.delimiters);
});

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMtbWVudS9BY3Rpb25zTWVudS5qcyJdLCJuYW1lcyI6WyJSb3dNZW51Iiwicm93SW5kZXgiLCJyb3dEYXRhIiwiZGVsaW1pdGVycyIsImdlbmVyYXRlUm93SWQiLCJjbGFzc2VzIiwidXNlU3R5bGVzIiwiRGF0YVRhYmxlQ29udGV4dCIsInN0YXRlIiwiYWN0aW9ucyIsImNvbHVtbk5hbWVzIiwicm93R2VuZXJhdGUiLCJyb3dBZGRCZWxvdyIsInJvd0RlbGV0ZSIsInJvd01vdmVBYm92ZSIsInJvd01vdmVCZWxvdyIsImhhbmRsZU1vdmVBYm92ZSIsImhhbmRsZU1vdmVCZWxvdyIsImRpc2FibGVNb3ZlQWJvdmUiLCJjZWxsdmFscyIsInNwbGl0IiwiYWRkUm93QnV0dG9uIiwiYnV0dG9uIiwiZGVsZXRlUm93QnV0dG9uIiwicm9vdCIsImZsaXBZIiwidGhlbWUiLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJ0cmFuc2Zvcm0iLCJwYWRkaW5nIiwiUmVhY3QiLCJtZW1vIiwicHJldlByb3BzIiwibmV4dFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFPQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFHQSxTQUFTQSxPQUFULE9BS0c7QUFBQSxNQUpEQyxRQUlDLFFBSkRBLFFBSUM7QUFBQSxNQUhEQyxPQUdDLFFBSERBLE9BR0M7QUFBQSxNQUZEQyxVQUVDLFFBRkRBLFVBRUM7QUFBQSxNQUREQyxhQUNDLFFBRERBLGFBQ0M7QUFDRCxNQUFNQyxPQUFPLEdBQUdDLFNBQVMsRUFBekI7O0FBREMsb0JBRTBCLHVCQUFXQywyQkFBWCxDQUYxQjtBQUFBLE1BRU9DLEtBRlAsZUFFT0EsS0FGUDtBQUFBLE1BRWNDLE9BRmQsZUFFY0EsT0FGZDs7QUFBQSxNQUdPQyxXQUhQLEdBR3VCRixLQUh2QixDQUdPRSxXQUhQO0FBQUEsTUFLQ0Ms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RSxJQUFBLE1BQU0sRUFBRW9CLGVBTlY7QUFPRSxJQUFBLGFBQWEsRUFBRW5CO0FBUGpCLElBakJGLGVBMEJFLGdDQUFDLGFBQUQ7QUFBUyxJQUFBLEtBQUssRUFBRSwrQkFBWSxhQUFaLENBQWhCO0FBQTRDLElBQUEsS0FBSztBQUFqRCxrQkFDRSxnQ0FBQyxnQkFBRDtBQUFZLElBQUEsU0FBUyxFQUFFQyxPQUFPLENBQUNpQixNQUEvQjtBQUF1QyxJQUFBLE9BQU8sRUFBRUw7QUFBaEQsa0JBQ0UsZ0NBQUMsa0NBQUQsT0FERixDQURGLENBMUJGLENBREY7QUFrQ0Q7O0FBRUQsSUFBTVgsU0FBUyxHQUFHLHdCQUFXLFVBQUFvQixLQUFLO0FBQUEsU0FBSztBQUNyQ0YsSUFBQUEsSUFBSSxFQUFFO0FBQ0pHLE1BQUFBLE9BQU8sRUFBRSxNQURMO0FBRUpDLE1BQUFBLGNBQWMsRUFBRTtBQUZaLEtBRCtCO0FBS3JDSCxJQUFBQSxLQUFLLEVBQUU7QUFDTEksTUFBQUEsU0FBUyxFQUFFLFlBRE47QUFFTEMsTUFBQUEsT0FBTyxFQUFFO0FBRkosS0FMOEI7QUFTckNSLElBQUFBLE1BQU0sRUFBRTtBQUFFUSxNQUFBQSxPQUFPLEVBQUU7QUFBWDtBQVQ2QixHQUFMO0FBQUEsQ0FBaEIsQ0FBbEI7OzRCQVllQyxrQkFBTUMsSUFBTixDQUFXaEMsT0FBWCxFQUFvQixVQUFDaUMsU0FBRCxFQUFZQyxTQUFaO0FBQUEsU0FBMEJELFNBQVMsQ0FBQ2hDLFFBQVYsS0FBdUJpQyxTQUFTLENBQUNqQyxRQUFqQyxJQUMzRCx3QkFBUWdDLFNBQVMsQ0FBQy9CLE9BQWxCLEVBQTJCZ0MsU0FBUyxDQUFDaEMsT0FBckMsQ0FEMkQsSUFFM0Qsd0JBQVErQixTQUFTLENBQUM5QixVQUFsQixFQUE4QitCLFNBQVMsQ0FBQy9CLFVBQXhDLENBRmlDO0FBQUEsQ0FBcEIsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzJztcclxuaW1wb3J0IHsgSWNvbkJ1dHRvbiAsIFRvb2x0aXAgfSBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZSc7XHJcbmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC5pc2VxdWFsJztcclxuaW1wb3J0IHtcclxuICBBcnJvd0Ryb3BEb3duQ2lyY2xlT3V0bGluZWQsXHJcbiAgQWRkQ2lyY2xlT3V0bGluZSxcclxuICBSZW1vdmVDaXJjbGVPdXRsaW5lLFxyXG59IGZyb20gJ0BtYXRlcmlhbC11aS9pY29ucyc7XHJcblxyXG5cclxuaW1wb3J0IHsgRGF0YVRhYmxlQ29udGV4dCB9IGZyb20gJy4uL2RhdGF0YWJsZS9EYXRhVGFibGUuY29udGV4dCc7XHJcbmltcG9ydCB7IGxvY2FsU3RyaW5nIH0gZnJvbSAnLi4vLi4vY29yZS9sb2NhbFN0cmluZ3MnO1xyXG5pbXBvcnQgQWRkUm93IGZyb20gJy4vQWRkUm93JztcclxuaW1wb3J0IERlbGV0ZVJvdyBmcm9tICcuL0RlbGV0ZVJvdyc7XHJcblxyXG5cclxuZnVuY3Rpb24gUm93TWVudSh7XHJcbiAgcm93SW5kZXgsXHJcbiAgcm93RGF0YSxcclxuICBkZWxpbWl0ZXJzLFxyXG4gIGdlbmVyYXRlUm93SWQsXHJcbn0pIHtcclxuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKCk7XHJcbiAgY29uc3QgeyBzdGF0ZSwgYWN0aW9ucyB9ID0gdXNlQ29udGV4dChEYXRhVGFibGVDb250ZXh0KTtcclxuICBjb25zdCB7IGNvbHVtbk5hbWVzIH0gPSBzdGF0ZTtcclxuICBjb25zdCB7XHJcbiAgICByb3dHZW5lcmF0ZSxcclxuICAgIHJvd0FkZEJlbG93LFxyXG4gICAgcm93RGVsZXRlLFxyXG4gICAgcm93TW92ZUFib3ZlLFxyXG4gICAgcm93TW92ZUJlbG93LFxyXG4gIH0gPSBhY3Rpb25zO1xyXG4gIGNvbnN0IGhhbmRsZU1vdmVBYm92ZSA9ICgpID0+IHJvd01vdmVBYm92ZSh7IHJvd0luZGV4IH0pO1xyXG4gIGNvbnN0IGhhbmRsZU1vdmVCZWxvdyA9ICgpID0+IHJvd01vdmVCZWxvdyh7IHJvd0luZGV4IH0pO1xyXG5cclxuICBjb25zdCBkaXNhYmxlTW92ZUFib3ZlID0gcm93SW5kZXggPT09IDA7XHJcblxyXG4gIC8vIHJvd0RhdGEgaXMgdGhlIGNvbWJpbmVkIGFycmF5IG9mIHNvdXJjZSBhbmQgdGFyZ2V0XHJcbiAgLy8gaWYgdGFyZ2V0IHJvd3MgaGF2ZSBiZWVuIGRlbGV0ZWQsIHRoZW4gc291cmNlIHdpbGwgY29udGFpbiBtb3JlXHJcbiAgLy8gcm93cyB0aGF0IHRoZSB0YXJnZXQuIEZvciBkZWxldGVkIHJvd3MsIHRoZSBjb21iaW5lZCBhcnJheSB3aWxsIFxyXG4gIC8vIGhhdmUgZm9yIGVhY2ggY2VsbCBqdXN0IHRoZSBzb3VyY2UgZGF0YSBlbmRpbmcgaW4gYSB0YWIgY2hhcmFjdGVyLlxyXG4gIC8vIE5vcm1hbGx5IHRoZSB0YXJnZXQgdmFsdWUgZm9yIGVhY2ggY2VsbCBmb2xsb3dzIHRoZSB0YWIgY2hhcmFjdGVyLlxyXG4gIC8vIElmIHRoYXQgdGFyZ2V0IHZhbHVlIGlzIG1pc3NpbmcsIHRoZW4gd2UgYXJlIG9uIGEgZGVsZXRlZCByb3cgXHJcbiAgLy8gYW5kIHdlIGNhbm5vdCBhZGQgYSByb3cgYXQgdGhpcyBsb2NhdGlvbi5cclxuXHJcbiAgLy8gRnJvbSB0aGUgY29uc29sZSBsb2csIGhlcmUgaXMgYSBzYW1wbGU6XHJcbiAgLy8gMDogXCJyb3dIZWFkZXJcIlxyXG4gIC8vIDE6IFwiSlVEXFx0XCJcclxuICAvLyAyOiBcIjFcXHRcIlxyXG4gIC8vIDM6IFwiMlxcdFwiXHJcbiAgLy8gNDogXCJxMnFvXFx0XCJcclxuICAvLyA1OiBcImZpZ3MtbWV0YXBob3JcXHRcIlxyXG4gIC8vIDY6IFwi4b2Rzrzhv5bOveKAps+AzrvOt864z4XOvc64zrXOr863XFx0XCJcclxuICAvLyA3OiBcIjFcXHRcIlxyXG4gIC8vIDg6IFwiTWF54oCmYmUgbXVsdGlwbGllZCB0byB5b3VcXHRcIlxyXG4gIC8vIDk6IFwiVGhlc2UgaWRlYXMgYXJlIHNwb2tlbiBvZiBhcyBpZiAuLi5cclxuXHJcbiAgLy8gTm90ZSB0aGF0IHRoZXJlIGlzIHRoZSBjb25zdGFudCB2YWx1ZSBcInJvd0hlYWRlclwiIGluIHNsb3QgemVyby5cclxuICAvLyBMZXQncyB0ZXN0IGJ5IHNwbGl0dGluZyBpbmRleCAxOyBpbiB0aGUgc2FtcGxlIGFib3ZlIHRoZXJlIHNob3VsZFxyXG4gIC8vIGJlIHR3byBlbGVtZW50cywgYm90aCBiZWluZyB0aGUgc3RyaW5nIFwiSlVEXCIgaWYgdGhlIHJvdyBpcyBub3RcclxuICAvLyBkZWxldGVkLlxyXG4gIC8vIElmIGEgcm93IGlzIGRlbGV0ZWQgKGFzIG9wcG9zZWQgdG8gYmVpbmcgYSBuZXcgYWRkL2luc2VydCksIHRoZW5cclxuICAvLyBzb3VyY2Ugc2lkZSB3aWxsICpub3QqIGJlIGVtcHR5LCBidXQgdGhlIHRhcmdldCBzaWRlIHdpbGwgYmUgZW1wdHkuXHJcbiAgbGV0IGNlbGx2YWxzID0gW11cclxuICBjZWxsdmFscyA9IHJvd0RhdGFbMV0uc3BsaXQoJ1xcdCcpXHJcbiAgLy8gaXMgdGhpcyBhIGRlbGV0ZWQgcm93P1xyXG4gIGlmICggY2VsbHZhbHNbMF0gIT09IFwiXCIgJiYgY2VsbHZhbHNbMV0gPT09IFwiXCIgKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICA8Lz5cclxuICAgIClcclxuICB9XHJcblxyXG4gIGNvbnN0IGFkZFJvd0J1dHRvbiA9IChcclxuICAgIDxUb29sdGlwIHRpdGxlPXtsb2NhbFN0cmluZygnQWRkUm93Jyl9IGFycm93PlxyXG4gICAgICA8SWNvbkJ1dHRvbiBjbGFzc05hbWU9e2NsYXNzZXMuYnV0dG9ufT5cclxuICAgICAgICA8QWRkQ2lyY2xlT3V0bGluZSAvPlxyXG4gICAgICA8L0ljb25CdXR0b24+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbiAgKTtcclxuICBjb25zdCBkZWxldGVSb3dCdXR0b24gPSAoXHJcbiAgICA8VG9vbHRpcCB0aXRsZT17bG9jYWxTdHJpbmcoJ0RlbGV0ZVJvdycpfSBhcnJvdz5cclxuICAgICAgPEljb25CdXR0b24gY2xhc3NOYW1lPXtjbGFzc2VzLmJ1dHRvbn0+XHJcbiAgICAgICAgPFJlbW92ZUNpcmNsZU91dGxpbmUgLz5cclxuICAgICAgPC9JY29uQnV0dG9uPlxyXG4gICAgPC9Ub29sdGlwPlxyXG4gICk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5yb290fT5cclxuICAgICAgPFRvb2x0aXAgdGl0bGU9e2xvY2FsU3RyaW5nKCdNb3ZlUm93VXAnKX0gYXJyb3c+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxJY29uQnV0dG9uIGNsYXNzTmFtZT17Y2xhc3Nlcy5mbGlwWX0gZGlzYWJsZWQ9e2Rpc2FibGVNb3ZlQWJvdmV9IG9uQ2xpY2s9e2hhbmRsZU1vdmVBYm92ZX0+XHJcbiAgICAgICAgICAgIDxBcnJvd0Ryb3BEb3duQ2lyY2xlT3V0bGluZWQgLz5cclxuICAgICAgICAgIDwvSWNvbkJ1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICA8QWRkUm93XHJcbiAgICAgICAgcm93RGF0YT17cm93RGF0YX1cclxuICAgICAgICByb3dJbmRleD17cm93SW5kZXh9XHJcbiAgICAgICAgY29sdW1uTmFtZXM9e2NvbHVtbk5hbWVzfVxyXG4gICAgICAgIHJvd0dlbmVyYXRlPXtyb3dHZW5lcmF0ZX1cclxuICAgICAgICByb3dBZGRCZWxvdz17cm93QWRkQmVsb3d9XHJcbiAgICAgICAgYnV0dG9uPXthZGRSb3dCdXR0b259XHJcbiAgICAgICAgZ2VuZXJhdGVSb3dJZD17Z2VuZXJhdGVSb3dJZH1cclxuICAgICAgLz5cclxuICAgICAgPERlbGV0ZVJvd1xyXG4gICAgICAgIHJvd0RhdGE9e3Jvd0RhdGF9XHJcbiAgICAgICAgcm93SW5kZXg9e3Jvd0luZGV4fVxyXG4gICAgICAgIGNvbHVtbk5hbWVzPXtjb2x1bW5OYW1lc31cclxuICAgICAgICByb3dEZWxldGU9e3Jvd0RlbGV0ZX1cclxuICAgICAgICBkZWxpbWl0ZXJzPXtkZWxpbWl0ZXJzfVxyXG4gICAgICAgIGJ1dHRvbj17ZGVsZXRlUm93QnV0dG9ufVxyXG4gICAgICAgIGdlbmVyYXRlUm93SWQ9e2dlbmVyYXRlUm93SWR9XHJcbiAgICAgIC8+XHJcbiAgICAgIDxUb29sdGlwIHRpdGxlPXtsb2NhbFN0cmluZygnTW92ZVJvd0Rvd24nKX0gYXJyb3c+XHJcbiAgICAgICAgPEljb25CdXR0b24gY2xhc3NOYW1lPXtjbGFzc2VzLmJ1dHRvbn0gb25DbGljaz17aGFuZGxlTW92ZUJlbG93fT5cclxuICAgICAgICAgIDxBcnJvd0Ryb3BEb3duQ2lyY2xlT3V0bGluZWQgLz5cclxuICAgICAgICA8L0ljb25CdXR0b24+XHJcbiAgICAgIDwvVG9vbHRpcD5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuXHJcbmNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXModGhlbWUgPT4gKHtcclxuICByb290OiB7XHJcbiAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcclxuICB9LFxyXG4gIGZsaXBZOiB7XHJcbiAgICB0cmFuc2Zvcm06ICdzY2FsZVkoLTEpJyxcclxuICAgIHBhZGRpbmc6ICc4cHgnLFxyXG4gIH0sXHJcbiAgYnV0dG9uOiB7IHBhZGRpbmc6ICc4cHgnIH0sXHJcbn0pKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oUm93TWVudSwgKHByZXZQcm9wcywgbmV4dFByb3BzKSA9PiBwcmV2UHJvcHMucm93SW5kZXggPT09IG5leHRQcm9wcy5yb3dJbmRleCAmJlxyXG4gIGlzRXF1YWwocHJldlByb3BzLnJvd0RhdGEsIG5leHRQcm9wcy5yb3dEYXRhKSAmJlxyXG4gIGlzRXF1YWwocHJldlByb3BzLmRlbGltaXRlcnMsIG5leHRQcm9wcy5kZWxpbWl0ZXJzKSxcclxuKTsiXX0=