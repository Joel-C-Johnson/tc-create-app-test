"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.Verses = void 0;

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _styles = require("@material-ui/core/styles");

var _ = require(".");

var _core = require("../../core");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function cov_wivg89lfm() {
  var path = "D:\\Projects-unfoldingWord\\scripture-resources-rcl\\src\\components\\verses\\Verses.js";
  var hash = "83e8cc8ea8145ba3446da2614e2fcfb7906b287e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "D:\\Projects-unfoldingWord\\scripture-resources-rcl\\src\\components\\verses\\Verses.js",
    statementMap: {
      "0": {
        start: {
          line: 8,
          column: 22
        },
        end: {
          line: 63,
          column: 1
        }
      },
      "1": {
        start: {
          line: 17,
          column: 18
        },
        end: {
          line: 17,
          column: 29
        }
      },
      "2": {
        start: {
          line: 18,
          column: 29
        },
        end: {
          line: 18,
          column: 39
        }
      },
      "3": {
        start: {
          line: 19,
          column: 27
        },
        end: {
          line: 19,
          column: 37
        }
      },
      "4": {
        start: {
          line: 20,
          column: 25
        },
        end: {
          line: 20,
          column: 35
        }
      },
      "5": {
        start: {
          line: 21,
          column: 22
        },
        end: {
          line: 21,
          column: 41
        }
      },
      "6": {
        start: {
          line: 23,
          column: 2
        },
        end: {
          line: 30,
          column: 26
        }
      },
      "7": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 29,
          column: 5
        }
      },
      "8": {
        start: {
          line: 25,
          column: 24
        },
        end: {
          line: 25,
          column: 94
        }
      },
      "9": {
        start: {
          line: 25,
          column: 68
        },
        end: {
          line: 25,
          column: 84
        }
      },
      "10": {
        start: {
          line: 26,
          column: 21
        },
        end: {
          line: 26,
          column: 40
        }
      },
      "11": {
        start: {
          line: 27,
          column: 6
        },
        end: {
          line: 28,
          column: 26
        }
      },
      "12": {
        start: {
          line: 27,
          column: 18
        },
        end: {
          line: 27,
          column: 32
        }
      },
      "13": {
        start: {
          line: 28,
          column: 11
        },
        end: {
          line: 28,
          column: 26
        }
      },
      "14": {
        start: {
          line: 32,
          column: 2
        },
        end: {
          line: 54,
          column: 64
        }
      },
      "15": {
        start: {
          line: 33,
          column: 19
        },
        end: {
          line: 33,
          column: 21
        }
      },
      "16": {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 51,
          column: 7
        }
      },
      "17": {
        start: {
          line: 35,
          column: 29
        },
        end: {
          line: 35,
          column: 45
        }
      },
      "18": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 46,
          column: 10
        }
      },
      "19": {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 50,
          column: 32
        }
      },
      "20": {
        start: {
          line: 48,
          column: 32
        },
        end: {
          line: 48,
          column: 48
        }
      },
      "21": {
        start: {
          line: 49,
          column: 11
        },
        end: {
          line: 50,
          column: 32
        }
      },
      "22": {
        start: {
          line: 49,
          column: 36
        },
        end: {
          line: 49,
          column: 51
        }
      },
      "23": {
        start: {
          line: 50,
          column: 11
        },
        end: {
          line: 50,
          column: 32
        }
      },
      "24": {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 53,
          column: 24
        }
      },
      "25": {
        start: {
          line: 56,
          column: 2
        },
        end: {
          line: 62,
          column: 4
        }
      },
      "26": {
        start: {
          line: 65,
          column: 0
        },
        end: {
          line: 77,
          column: 2
        }
      },
      "27": {
        start: {
          line: 79,
          column: 18
        },
        end: {
          line: 82,
          column: 3
        }
      },
      "28": {
        start: {
          line: 79,
          column: 39
        },
        end: {
          line: 82,
          column: 1
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 8,
            column: 22
          },
          end: {
            line: 8,
            column: 23
          }
        },
        loc: {
          start: {
            line: 16,
            column: 6
          },
          end: {
            line: 63,
            column: 1
          }
        },
        line: 16
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 23,
            column: 12
          },
          end: {
            line: 23,
            column: 13
          }
        },
        loc: {
          start: {
            line: 23,
            column: 18
          },
          end: {
            line: 30,
            column: 3
          }
        },
        line: 23
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 25,
            column: 53
          },
          end: {
            line: 25,
            column: 54
          }
        },
        loc: {
          start: {
            line: 25,
            column: 68
          },
          end: {
            line: 25,
            column: 84
          }
        },
        line: 25
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 32,
            column: 12
          },
          end: {
            line: 32,
            column: 13
          }
        },
        loc: {
          start: {
            line: 32,
            column: 18
          },
          end: {
            line: 54,
            column: 3
          }
        },
        line: 32
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 34,
            column: 32
          },
          end: {
            line: 34,
            column: 33
          }
        },
        loc: {
          start: {
            line: 34,
            column: 53
          },
          end: {
            line: 51,
            column: 5
          }
        },
        line: 34
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 79,
            column: 29
          },
          end: {
            line: 79,
            column: 30
          }
        },
        loc: {
          start: {
            line: 79,
            column: 39
          },
          end: {
            line: 82,
            column: 1
          }
        },
        line: 79
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        }, {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        }],
        line: 24
      },
      "1": {
        loc: {
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 28,
            column: 26
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 28,
            column: 26
          }
        }, {
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 28,
            column: 26
          }
        }],
        line: 27
      },
      "2": {
        loc: {
          start: {
            line: 48,
            column: 6
          },
          end: {
            line: 50,
            column: 32
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 48,
            column: 6
          },
          end: {
            line: 50,
            column: 32
          }
        }, {
          start: {
            line: 48,
            column: 6
          },
          end: {
            line: 50,
            column: 32
          }
        }],
        line: 48
      },
      "3": {
        loc: {
          start: {
            line: 49,
            column: 11
          },
          end: {
            line: 50,
            column: 32
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 49,
            column: 11
          },
          end: {
            line: 50,
            column: 32
          }
        }, {
          start: {
            line: 49,
            column: 11
          },
          end: {
            line: 50,
            column: 32
          }
        }],
        line: 49
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "83e8cc8ea8145ba3446da2614e2fcfb7906b287e"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];

  cov_wivg89lfm = function () {
    return actualCoverage;
  };

  return actualCoverage;
}

cov_wivg89lfm();

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

cov_wivg89lfm().s[0]++;

var Verses = ({
  verses,
  paragraphs,
  showUnsupported,
  direction,
  disableWordPopover,
  reference,
  renderOffscreen
}) => {
  cov_wivg89lfm().f[0]++;
  var classes = (cov_wivg89lfm().s[1]++, useStyles());

  var _ref = (cov_wivg89lfm().s[2]++, (0, _react.useState)()),
      _ref2 = _slicedToArray(_ref, 2),
      _verses = _ref2[0],
      setVerses = _ref2[1];

  var _ref3 = (cov_wivg89lfm().s[3]++, (0, _react.useState)()),
      _ref4 = _slicedToArray(_ref3, 2),
      _front = _ref4[0],
      setFront = _ref4[1];

  var _ref5 = (cov_wivg89lfm().s[4]++, (0, _react.useState)()),
      _ref6 = _slicedToArray(_ref5, 2),
      _back = _ref6[0],
      setBack = _ref6[1];

  var _ref7 = (cov_wivg89lfm().s[5]++, (0, _react.useState)(direction)),
      _ref8 = _slicedToArray(_ref7, 2),
      dir = _ref8[0],
      setDir = _ref8[1];

  cov_wivg89lfm().s[6]++;
  (0, _react.useEffect)(() => {
    cov_wivg89lfm().f[1]++;
    cov_wivg89lfm().s[7]++;

    if (!direction) {
      cov_wivg89lfm().b[0][0]++;
      var verseText = (cov_wivg89lfm().s[8]++, verses['1'].verseObjects.map(verseObject => {
        cov_wivg89lfm().f[2]++;
        cov_wivg89lfm().s[9]++;
        return verseObject.text;
      }).join(''));
      var hebrew = (cov_wivg89lfm().s[10]++, (0, _core.isHebrew)(verseText));
      cov_wivg89lfm().s[11]++;

      if (hebrew) {
        cov_wivg89lfm().b[1][0]++;
        cov_wivg89lfm().s[12]++;
        setDir('rtl');
      } else {
        cov_wivg89lfm().b[1][1]++;
        cov_wivg89lfm().s[13]++;
        setDir('auto');
      }
    } else {
      cov_wivg89lfm().b[0][1]++;
    }
  }, [verses, direction]);
  cov_wivg89lfm().s[14]++;
  (0, _react.useEffect)(() => {
    cov_wivg89lfm().f[3]++;

    var __verses = (cov_wivg89lfm().s[15]++, []);

    cov_wivg89lfm().s[16]++;
    Object.keys(verses).forEach((verseKey, index) => {
      cov_wivg89lfm().f[4]++;

      var _ref9 = (cov_wivg89lfm().s[17]++, verses[verseKey]),
          verseObjects = _ref9.verseObjects;

      var verse = (cov_wivg89lfm().s[18]++, _react.default.createElement(_.Verse, {
        key: index,
        verseKey: verseKey,
        verseObjects: verseObjects,
        paragraphs: paragraphs,
        showUnsupported: showUnsupported,
        disableWordPopover: disableWordPopover,
        reference: _objectSpread(_objectSpread({}, reference), {}, {
          verse: verseKey
        }),
        renderOffscreen: renderOffscreen
      }));
      cov_wivg89lfm().s[19]++;

      if (verseKey === 'front') {
        cov_wivg89lfm().b[2][0]++;
        cov_wivg89lfm().s[20]++;
        setFront(verse);
      } else {
        cov_wivg89lfm().b[2][1]++;
        cov_wivg89lfm().s[21]++;

        if (verseKey === 'back') {
          cov_wivg89lfm().b[3][0]++;
          cov_wivg89lfm().s[22]++;
          setBack(verse);
        } else {
          cov_wivg89lfm().b[3][1]++;
          cov_wivg89lfm().s[23]++;

          __verses.push(verse);
        }
      }
    });
    cov_wivg89lfm().s[24]++;
    setVerses(__verses);
  }, [verses, paragraphs, showUnsupported, disableWordPopover]);
  cov_wivg89lfm().s[25]++;
  return _react.default.createElement("div", {
    className: classes.verses,
    dir: dir
  }, _front, _verses, _back);
};

exports.Verses = Verses;
cov_wivg89lfm().s[26]++;
Verses.propTypes = {
  verses: _propTypes.default.object.isRequired,

  /** render verses paragraphs, use explicit paragraphs */
  paragraphs: _propTypes.default.bool,

  /** bypass rendering only when visible */
  renderOffscreen: _propTypes.default.bool,

  /** render unsupported usfm markers */
  showUnsupported: _propTypes.default.bool,

  /** override text direction detection */
  direction: _propTypes.default.string,

  /** disable popovers for aligned and original language words */
  disableWordPopover: _propTypes.default.bool
};
var useStyles = (cov_wivg89lfm().s[27]++, (0, _styles.makeStyles)(theme => {
  cov_wivg89lfm().f[5]++;
  cov_wivg89lfm().s[28]++;
  return {
    verses: {}
  };
}));
var _default = Verses;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZlcnNlcy9WZXJzZXMuanMiXSwibmFtZXMiOlsiVmVyc2VzIiwidmVyc2VzIiwicGFyYWdyYXBocyIsInNob3dVbnN1cHBvcnRlZCIsImRpcmVjdGlvbiIsImRpc2FibGVXb3JkUG9wb3ZlciIsInJlZmVyZW5jZSIsInJlbmRlck9mZnNjcmVlbiIsImNsYXNzZXMiLCJ1c2VTdHlsZXMiLCJfdmVyc2VzIiwic2V0VmVyc2VzIiwiX2Zyb250Iiwic2V0RnJvbnQiLCJfYmFjayIsInNldEJhY2siLCJkaXIiLCJzZXREaXIiLCJ2ZXJzZVRleHQiLCJ2ZXJzZU9iamVjdHMiLCJtYXAiLCJ2ZXJzZU9iamVjdCIsInRleHQiLCJqb2luIiwiaGVicmV3IiwiX192ZXJzZXMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInZlcnNlS2V5IiwiaW5kZXgiLCJ2ZXJzZSIsInB1c2giLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwiYm9vbCIsInN0cmluZyIsInRoZW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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SGlCLENBQUgsQ0FBZjtlQUtlRCxNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7dXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQge21ha2VTdHlsZXN9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL3N0eWxlcyc7XHJcblxyXG5pbXBvcnQgeyBWZXJzZSB9IGZyb20gJy4nO1xyXG5pbXBvcnQge2lzSGVicmV3fSBmcm9tICcuLi8uLi9jb3JlJztcclxuXHJcbmV4cG9ydCBjb25zdCBWZXJzZXMgPSAoe1xyXG4gIHZlcnNlcyxcclxuICBwYXJhZ3JhcGhzLFxyXG4gIHNob3dVbnN1cHBvcnRlZCxcclxuICBkaXJlY3Rpb24sXHJcbiAgZGlzYWJsZVdvcmRQb3BvdmVyLFxyXG4gIHJlZmVyZW5jZSxcclxuICByZW5kZXJPZmZzY3JlZW5cclxufSkgPT4ge1xyXG4gIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoKTtcclxuICBsZXQgW192ZXJzZXMsIHNldFZlcnNlc10gPSB1c2VTdGF0ZSgpO1xyXG4gIGxldCBbX2Zyb250LCBzZXRGcm9udF0gPSB1c2VTdGF0ZSgpO1xyXG4gIGxldCBbX2JhY2ssIHNldEJhY2tdID0gdXNlU3RhdGUoKTtcclxuICBsZXQgW2Rpciwgc2V0RGlyXSA9IHVzZVN0YXRlKGRpcmVjdGlvbik7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWRpcmVjdGlvbikge1xyXG4gICAgICBjb25zdCB2ZXJzZVRleHQgPSB2ZXJzZXNbJzEnXS52ZXJzZU9iamVjdHMubWFwKHZlcnNlT2JqZWN0ID0+IHZlcnNlT2JqZWN0LnRleHQpLmpvaW4oJycpO1xyXG4gICAgICBjb25zdCBoZWJyZXcgPSBpc0hlYnJldyh2ZXJzZVRleHQpO1xyXG4gICAgICBpZiAoaGVicmV3KSBzZXREaXIoJ3J0bCcpO1xyXG4gICAgICBlbHNlIHNldERpcignYXV0bycpO1xyXG4gICAgfVxyXG4gIH0sIFt2ZXJzZXMsIGRpcmVjdGlvbl0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IF9fdmVyc2VzID0gW107XHJcbiAgICBPYmplY3Qua2V5cyh2ZXJzZXMpLmZvckVhY2goKHZlcnNlS2V5LCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCB7dmVyc2VPYmplY3RzfSA9IHZlcnNlc1t2ZXJzZUtleV07XHJcbiAgICAgIGNvbnN0IHZlcnNlID0gKFxyXG4gICAgICAgIDxWZXJzZVxyXG4gICAgICAgICAga2V5PXtpbmRleH1cclxuICAgICAgICAgIHZlcnNlS2V5PXt2ZXJzZUtleX1cclxuICAgICAgICAgIHZlcnNlT2JqZWN0cz17dmVyc2VPYmplY3RzfVxyXG4gICAgICAgICAgcGFyYWdyYXBocz17cGFyYWdyYXBoc31cclxuICAgICAgICAgIHNob3dVbnN1cHBvcnRlZD17c2hvd1Vuc3VwcG9ydGVkfVxyXG4gICAgICAgICAgZGlzYWJsZVdvcmRQb3BvdmVyPXtkaXNhYmxlV29yZFBvcG92ZXJ9XHJcbiAgICAgICAgICByZWZlcmVuY2U9eyB7Li4ucmVmZXJlbmNlLCB2ZXJzZTogdmVyc2VLZXl9IH1cclxuICAgICAgICAgIHJlbmRlck9mZnNjcmVlbj17cmVuZGVyT2Zmc2NyZWVufVxyXG4gICAgICAgIC8+XHJcbiAgICAgICk7XHJcbiAgICAgIGlmICh2ZXJzZUtleSA9PT0gJ2Zyb250Jykgc2V0RnJvbnQodmVyc2UpO1xyXG4gICAgICBlbHNlIGlmICh2ZXJzZUtleSA9PT0gJ2JhY2snKSBzZXRCYWNrKHZlcnNlKTtcclxuICAgICAgZWxzZSBfX3ZlcnNlcy5wdXNoKHZlcnNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNldFZlcnNlcyhfX3ZlcnNlcyk7XHJcbiAgfSwgW3ZlcnNlcywgcGFyYWdyYXBocywgc2hvd1Vuc3VwcG9ydGVkLCBkaXNhYmxlV29yZFBvcG92ZXJdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLnZlcnNlc30gZGlyPXtkaXJ9PlxyXG4gICAgICB7X2Zyb250fVxyXG4gICAgICB7X3ZlcnNlc31cclxuICAgICAge19iYWNrfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcblZlcnNlcy5wcm9wVHlwZXMgPSB7XHJcbiAgdmVyc2VzOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgLyoqIHJlbmRlciB2ZXJzZXMgcGFyYWdyYXBocywgdXNlIGV4cGxpY2l0IHBhcmFncmFwaHMgKi9cclxuICBwYXJhZ3JhcGhzOiBQcm9wVHlwZXMuYm9vbCxcclxuICAvKiogYnlwYXNzIHJlbmRlcmluZyBvbmx5IHdoZW4gdmlzaWJsZSAqL1xyXG4gIHJlbmRlck9mZnNjcmVlbjogUHJvcFR5cGVzLmJvb2wsXHJcbiAgLyoqIHJlbmRlciB1bnN1cHBvcnRlZCB1c2ZtIG1hcmtlcnMgKi8gXHJcbiAgc2hvd1Vuc3VwcG9ydGVkOiBQcm9wVHlwZXMuYm9vbCxcclxuICAvKiogb3ZlcnJpZGUgdGV4dCBkaXJlY3Rpb24gZGV0ZWN0aW9uICovXHJcbiAgZGlyZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIC8qKiBkaXNhYmxlIHBvcG92ZXJzIGZvciBhbGlnbmVkIGFuZCBvcmlnaW5hbCBsYW5ndWFnZSB3b3JkcyAqL1xyXG4gIGRpc2FibGVXb3JkUG9wb3ZlcjogUHJvcFR5cGVzLmJvb2wsXHJcbn07XHJcblxyXG5jb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKHRoZW1lID0+ICh7XHJcbiAgdmVyc2VzOiB7XHJcbiAgfSxcclxufSkpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVmVyc2VzO1xyXG4iXX0=