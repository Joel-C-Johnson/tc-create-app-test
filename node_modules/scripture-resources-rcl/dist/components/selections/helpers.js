"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.removeSelections = exports.removeSelection = exports.addSelections = exports.addSelection = exports.areSelected = exports.isSelected = exports.selectionFromWord = exports.quoteFromVerse = exports.selectionsFromQuote = void 0;

var _selections2 = require("../../core/selections/selections");

function cov_12krp22t7u() {
  var path = "D:\\Projects-unfoldingWord\\scripture-resources-rcl\\src\\components\\selections\\helpers.js";
  var hash = "ba85416c4ea72aa9ee6e0f64540f81ae07fe9f1a";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "D:\\Projects-unfoldingWord\\scripture-resources-rcl\\src\\components\\selections\\helpers.js",
    statementMap: {
      "0": {
        start: {
          line: 9,
          column: 35
        },
        end: {
          line: 20,
          column: 1
        }
      },
      "1": {
        start: {
          line: 10,
          column: 19
        },
        end: {
          line: 10,
          column: 21
        }
      },
      "2": {
        start: {
          line: 12,
          column: 2
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "3": {
        start: {
          line: 13,
          column: 4
        },
        end: {
          line: 17,
          column: 53
        }
      },
      "4": {
        start: {
          line: 17,
          column: 26
        },
        end: {
          line: 17,
          column: 51
        }
      },
      "5": {
        start: {
          line: 19,
          column: 2
        },
        end: {
          line: 19,
          column: 20
        }
      },
      "6": {
        start: {
          line: 22,
          column: 30
        },
        end: {
          line: 41,
          column: 1
        }
      },
      "7": {
        start: {
          line: 23,
          column: 20
        },
        end: {
          line: 23,
          column: 50
        }
      },
      "8": {
        start: {
          line: 24,
          column: 22
        },
        end: {
          line: 24,
          column: 79
        }
      },
      "9": {
        start: {
          line: 24,
          column: 52
        },
        end: {
          line: 24,
          column: 78
        }
      },
      "10": {
        start: {
          line: 26,
          column: 2
        },
        end: {
          line: 34,
          column: 5
        }
      },
      "11": {
        start: {
          line: 27,
          column: 27
        },
        end: {
          line: 27,
          column: 38
        }
      },
      "12": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 33,
          column: 5
        }
      },
      "13": {
        start: {
          line: 30,
          column: 20
        },
        end: {
          line: 30,
          column: 46
        }
      },
      "14": {
        start: {
          line: 31,
          column: 25
        },
        end: {
          line: 31,
          column: 43
        }
      },
      "15": {
        start: {
          line: 32,
          column: 6
        },
        end: {
          line: 32,
          column: 35
        }
      },
      "16": {
        start: {
          line: 36,
          column: 16
        },
        end: {
          line: 39,
          column: 36
        }
      },
      "17": {
        start: {
          line: 40,
          column: 2
        },
        end: {
          line: 40,
          column: 15
        }
      },
      "18": {
        start: {
          line: 53,
          column: 33
        },
        end: {
          line: 62,
          column: 1
        }
      },
      "19": {
        start: {
          line: 54,
          column: 53
        },
        end: {
          line: 54,
          column: 57
        }
      },
      "20": {
        start: {
          line: 55,
          column: 26
        },
        end: {
          line: 59,
          column: 3
        }
      },
      "21": {
        start: {
          line: 60,
          column: 20
        },
        end: {
          line: 60,
          column: 51
        }
      },
      "22": {
        start: {
          line: 61,
          column: 2
        },
        end: {
          line: 61,
          column: 19
        }
      },
      "23": {
        start: {
          line: 64,
          column: 26
        },
        end: {
          line: 68,
          column: 1
        }
      },
      "24": {
        start: {
          line: 65,
          column: 20
        },
        end: {
          line: 65,
          column: 43
        }
      },
      "25": {
        start: {
          line: 66,
          column: 19
        },
        end: {
          line: 66,
          column: 49
        }
      },
      "26": {
        start: {
          line: 67,
          column: 2
        },
        end: {
          line: 67,
          column: 18
        }
      },
      "27": {
        start: {
          line: 70,
          column: 27
        },
        end: {
          line: 93,
          column: 1
        }
      },
      "28": {
        start: {
          line: 71,
          column: 17
        },
        end: {
          line: 71,
          column: 22
        }
      },
      "29": {
        start: {
          line: 72,
          column: 22
        },
        end: {
          line: 72,
          column: 66
        }
      },
      "30": {
        start: {
          line: 72,
          column: 42
        },
        end: {
          line: 72,
          column: 65
        }
      },
      "31": {
        start: {
          line: 74,
          column: 2
        },
        end: {
          line: 91,
          column: 5
        }
      },
      "32": {
        start: {
          line: 76,
          column: 23
        },
        end: {
          line: 76,
          column: 44
        }
      },
      "33": {
        start: {
          line: 77,
          column: 16
        },
        end: {
          line: 77,
          column: 48
        }
      },
      "34": {
        start: {
          line: 78,
          column: 15
        },
        end: {
          line: 78,
          column: 36
        }
      },
      "35": {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 38
        }
      },
      "36": {
        start: {
          line: 81,
          column: 4
        },
        end: {
          line: 90,
          column: 5
        }
      },
      "37": {
        start: {
          line: 81,
          column: 17
        },
        end: {
          line: 81,
          column: 18
        }
      },
      "38": {
        start: {
          line: 82,
          column: 19
        },
        end: {
          line: 82,
          column: 37
        }
      },
      "39": {
        start: {
          line: 83,
          column: 18
        },
        end: {
          line: 83,
          column: 42
        }
      },
      "40": {
        start: {
          line: 84,
          column: 19
        },
        end: {
          line: 84,
          column: 44
        }
      },
      "41": {
        start: {
          line: 86,
          column: 6
        },
        end: {
          line: 89,
          column: 7
        }
      },
      "42": {
        start: {
          line: 87,
          column: 8
        },
        end: {
          line: 87,
          column: 24
        }
      },
      "43": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 88,
          column: 14
        }
      },
      "44": {
        start: {
          line: 92,
          column: 2
        },
        end: {
          line: 92,
          column: 18
        }
      },
      "45": {
        start: {
          line: 95,
          column: 28
        },
        end: {
          line: 100,
          column: 1
        }
      },
      "46": {
        start: {
          line: 96,
          column: 20
        },
        end: {
          line: 96,
          column: 39
        }
      },
      "47": {
        start: {
          line: 97,
          column: 20
        },
        end: {
          line: 97,
          column: 43
        }
      },
      "48": {
        start: {
          line: 98,
          column: 2
        },
        end: {
          line: 98,
          column: 29
        }
      },
      "49": {
        start: {
          line: 99,
          column: 2
        },
        end: {
          line: 99,
          column: 26
        }
      },
      "50": {
        start: {
          line: 102,
          column: 29
        },
        end: {
          line: 110,
          column: 1
        }
      },
      "51": {
        start: {
          line: 103,
          column: 20
        },
        end: {
          line: 103,
          column: 39
        }
      },
      "52": {
        start: {
          line: 105,
          column: 2
        },
        end: {
          line: 108,
          column: 5
        }
      },
      "53": {
        start: {
          line: 106,
          column: 22
        },
        end: {
          line: 106,
          column: 45
        }
      },
      "54": {
        start: {
          line: 107,
          column: 4
        },
        end: {
          line: 107,
          column: 31
        }
      },
      "55": {
        start: {
          line: 109,
          column: 2
        },
        end: {
          line: 109,
          column: 26
        }
      },
      "56": {
        start: {
          line: 112,
          column: 31
        },
        end: {
          line: 120,
          column: 1
        }
      },
      "57": {
        start: {
          line: 113,
          column: 20
        },
        end: {
          line: 113,
          column: 43
        }
      },
      "58": {
        start: {
          line: 114,
          column: 31
        },
        end: {
          line: 116,
          column: 3
        }
      },
      "59": {
        start: {
          line: 115,
          column: 4
        },
        end: {
          line: 115,
          column: 33
        }
      },
      "60": {
        start: {
          line: 117,
          column: 22
        },
        end: {
          line: 117,
          column: 51
        }
      },
      "61": {
        start: {
          line: 118,
          column: 2
        },
        end: {
          line: 118,
          column: 32
        }
      },
      "62": {
        start: {
          line: 119,
          column: 2
        },
        end: {
          line: 119,
          column: 26
        }
      },
      "63": {
        start: {
          line: 122,
          column: 32
        },
        end: {
          line: 133,
          column: 1
        }
      },
      "64": {
        start: {
          line: 123,
          column: 31
        },
        end: {
          line: 125,
          column: 3
        }
      },
      "65": {
        start: {
          line: 124,
          column: 4
        },
        end: {
          line: 124,
          column: 32
        }
      },
      "66": {
        start: {
          line: 126,
          column: 22
        },
        end: {
          line: 126,
          column: 51
        }
      },
      "67": {
        start: {
          line: 128,
          column: 2
        },
        end: {
          line: 131,
          column: 5
        }
      },
      "68": {
        start: {
          line: 129,
          column: 22
        },
        end: {
          line: 129,
          column: 45
        }
      },
      "69": {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 130,
          column: 34
        }
      },
      "70": {
        start: {
          line: 132,
          column: 2
        },
        end: {
          line: 132,
          column: 26
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 9,
            column: 35
          },
          end: {
            line: 9,
            column: 36
          }
        },
        loc: {
          start: {
            line: 9,
            column: 76
          },
          end: {
            line: 20,
            column: 1
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 17,
            column: 11
          },
          end: {
            line: 17,
            column: 12
          }
        },
        loc: {
          start: {
            line: 17,
            column: 26
          },
          end: {
            line: 17,
            column: 51
          }
        },
        line: 17
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 22,
            column: 30
          },
          end: {
            line: 22,
            column: 31
          }
        },
        loc: {
          start: {
            line: 22,
            column: 64
          },
          end: {
            line: 41,
            column: 1
          }
        },
        line: 22
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 24,
            column: 37
          },
          end: {
            line: 24,
            column: 38
          }
        },
        loc: {
          start: {
            line: 24,
            column: 52
          },
          end: {
            line: 24,
            column: 78
          }
        },
        line: 24
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 26,
            column: 23
          },
          end: {
            line: 26,
            column: 24
          }
        },
        loc: {
          start: {
            line: 26,
            column: 47
          },
          end: {
            line: 34,
            column: 3
          }
        },
        line: 26
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 53,
            column: 33
          },
          end: {
            line: 53,
            column: 34
          }
        },
        loc: {
          start: {
            line: 53,
            column: 43
          },
          end: {
            line: 62,
            column: 1
          }
        },
        line: 53
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 64,
            column: 26
          },
          end: {
            line: 64,
            column: 27
          }
        },
        loc: {
          start: {
            line: 64,
            column: 52
          },
          end: {
            line: 68,
            column: 1
          }
        },
        line: 64
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 70,
            column: 27
          },
          end: {
            line: 70,
            column: 28
          }
        },
        loc: {
          start: {
            line: 70,
            column: 54
          },
          end: {
            line: 93,
            column: 1
          }
        },
        line: 70
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 72,
            column: 32
          },
          end: {
            line: 72,
            column: 33
          }
        },
        loc: {
          start: {
            line: 72,
            column: 42
          },
          end: {
            line: 72,
            column: 65
          }
        },
        line: 72
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 74,
            column: 22
          },
          end: {
            line: 74,
            column: 23
          }
        },
        loc: {
          start: {
            line: 74,
            column: 37
          },
          end: {
            line: 91,
            column: 3
          }
        },
        line: 74
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 95,
            column: 28
          },
          end: {
            line: 95,
            column: 29
          }
        },
        loc: {
          start: {
            line: 95,
            column: 54
          },
          end: {
            line: 100,
            column: 1
          }
        },
        line: 95
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 102,
            column: 29
          },
          end: {
            line: 102,
            column: 30
          }
        },
        loc: {
          start: {
            line: 102,
            column: 56
          },
          end: {
            line: 110,
            column: 1
          }
        },
        line: 102
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 105,
            column: 16
          },
          end: {
            line: 105,
            column: 17
          }
        },
        loc: {
          start: {
            line: 105,
            column: 26
          },
          end: {
            line: 108,
            column: 3
          }
        },
        line: 105
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 112,
            column: 31
          },
          end: {
            line: 112,
            column: 32
          }
        },
        loc: {
          start: {
            line: 112,
            column: 57
          },
          end: {
            line: 120,
            column: 1
          }
        },
        line: 112
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 114,
            column: 46
          },
          end: {
            line: 114,
            column: 47
          }
        },
        loc: {
          start: {
            line: 115,
            column: 4
          },
          end: {
            line: 115,
            column: 33
          }
        },
        line: 115
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 122,
            column: 32
          },
          end: {
            line: 122,
            column: 33
          }
        },
        loc: {
          start: {
            line: 122,
            column: 59
          },
          end: {
            line: 133,
            column: 1
          }
        },
        line: 122
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 123,
            column: 46
          },
          end: {
            line: 123,
            column: 47
          }
        },
        loc: {
          start: {
            line: 124,
            column: 4
          },
          end: {
            line: 124,
            column: 32
          }
        },
        line: 124
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 128,
            column: 16
          },
          end: {
            line: 128,
            column: 17
          }
        },
        loc: {
          start: {
            line: 128,
            column: 26
          },
          end: {
            line: 131,
            column: 3
          }
        },
        line: 128
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 12,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 12,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        }, {
          start: {
            line: 12,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        }],
        line: 12
      },
      "1": {
        loc: {
          start: {
            line: 12,
            column: 6
          },
          end: {
            line: 12,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 12,
            column: 6
          },
          end: {
            line: 12,
            column: 11
          }
        }, {
          start: {
            line: 12,
            column: 15
          },
          end: {
            line: 12,
            column: 27
          }
        }, {
          start: {
            line: 12,
            column: 31
          },
          end: {
            line: 12,
            column: 41
          }
        }],
        line: 12
      },
      "2": {
        loc: {
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        }, {
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        }],
        line: 29
      },
      "3": {
        loc: {
          start: {
            line: 31,
            column: 25
          },
          end: {
            line: 31,
            column: 43
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 31,
            column: 33
          },
          end: {
            line: 31,
            column: 37
          }
        }, {
          start: {
            line: 31,
            column: 40
          },
          end: {
            line: 31,
            column: 43
          }
        }],
        line: 31
      },
      "4": {
        loc: {
          start: {
            line: 56,
            column: 10
          },
          end: {
            line: 56,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 56,
            column: 10
          },
          end: {
            line: 56,
            column: 17
          }
        }, {
          start: {
            line: 56,
            column: 21
          },
          end: {
            line: 56,
            column: 25
          }
        }],
        line: 56
      },
      "5": {
        loc: {
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 89,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 89,
            column: 7
          }
        }, {
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 89,
            column: 7
          }
        }],
        line: 86
      },
      "6": {
        loc: {
          start: {
            line: 86,
            column: 10
          },
          end: {
            line: 86,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 86,
            column: 10
          },
          end: {
            line: 86,
            column: 24
          }
        }, {
          start: {
            line: 86,
            column: 28
          },
          end: {
            line: 86,
            column: 40
          }
        }, {
          start: {
            line: 86,
            column: 44
          },
          end: {
            line: 86,
            column: 58
          }
        }],
        line: 86
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "ba85416c4ea72aa9ee6e0f64540f81ae07fe9f1a"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];

  cov_12krp22t7u = function () {
    return actualCoverage;
  };

  return actualCoverage;
}

cov_12krp22t7u();
cov_12krp22t7u().s[0]++;

// const stringify = (array) => array.map(object => JSON.stringify(object));
//export const parsify = (array) => array.map(string => JSON.parse(string));
var selectionsFromQuote = ({
  quote,
  verseObjects,
  occurrence
}) => {
  cov_12krp22t7u().f[0]++;
  var selections = (cov_12krp22t7u().s[1]++, []);
  cov_12krp22t7u().s[2]++;

  if ((cov_12krp22t7u().b[1][0]++, quote) && (cov_12krp22t7u().b[1][1]++, verseObjects) && (cov_12krp22t7u().b[1][2]++, occurrence)) {
    cov_12krp22t7u().b[0][0]++;
    cov_12krp22t7u().s[3]++;
    selections = (0, _selections2.selectionsFromQuoteAndVerseObjects)({
      quote,
      verseObjects,
      occurrence
    }).map(selection => {
      cov_12krp22t7u().f[1]++;
      cov_12krp22t7u().s[4]++;
      return JSON.stringify(selection);
    });
  } else {
    cov_12krp22t7u().b[0][1]++;
  }

  cov_12krp22t7u().s[5]++;
  return selections;
};

exports.selectionsFromQuote = selectionsFromQuote;
cov_12krp22t7u().s[6]++;

var quoteFromVerse = ({
  selections,
  verseObjects
}) => {
  cov_12krp22t7u().f[2]++;
  var quotedWords = (cov_12krp22t7u().s[7]++, new Array(verseObjects.length));

  var _selections = (cov_12krp22t7u().s[8]++, selections.map(selection => {
    cov_12krp22t7u().f[3]++;
    cov_12krp22t7u().s[9]++;
    return JSON.parse(selection).text;
  }));

  cov_12krp22t7u().s[10]++;
  verseObjects.forEach((verseObject, index) => {
    cov_12krp22t7u().f[4]++;

    var _ref = (cov_12krp22t7u().s[11]++, verseObject),
        type = _ref.type,
        text = _ref.text;

    cov_12krp22t7u().s[12]++;

    if (type === 'word') {
      cov_12krp22t7u().b[2][0]++;
      var match = (cov_12krp22t7u().s[13]++, _selections.includes(text));
      var quotedWord = (cov_12krp22t7u().s[14]++, match ? (cov_12krp22t7u().b[3][0]++, text) : (cov_12krp22t7u().b[3][1]++, '…'));
      cov_12krp22t7u().s[15]++;
      quotedWords.push(quotedWord);
    } else {
      cov_12krp22t7u().b[2][1]++;
    }
  });
  var quote = (cov_12krp22t7u().s[16]++, quotedWords.join(' ').replace(/( ?… ?)+/g, ' … ').replace(/(^[… ]+|[… ]+$)/g, ''));
  cov_12krp22t7u().s[17]++;
  return quote;
}; // const wordsFromMilestone = ({milestone, quotedWords=[]}) => {
//   const _selections = selections.map(selection => selection.text);
//   if (_selections.include(milestone.content)) {
//     if (milestone.children[0].type === 'word') {
//       const words = milestone.children;
//       words.forEach(word => quotedWords.push(word.text));
//     }
//   }
// };


exports.quoteFromVerse = quoteFromVerse;
cov_12krp22t7u().s[18]++;

var selectionFromWord = word => {
  cov_12krp22t7u().f[5]++;

  var _ref2 = (cov_12krp22t7u().s[19]++, word),
      content = _ref2.content,
      text = _ref2.text,
      occurrence = _ref2.occurrence,
      occurrences = _ref2.occurrences;

  var selectionObject = (cov_12krp22t7u().s[20]++, {
    text: (cov_12krp22t7u().b[4][0]++, content) || (cov_12krp22t7u().b[4][1]++, text),
    occurrence: parseInt(occurrence),
    occurrences: parseInt(occurrences)
  });
  var selection = (cov_12krp22t7u().s[21]++, JSON.stringify(selectionObject));
  cov_12krp22t7u().s[22]++;
  return selection;
};

exports.selectionFromWord = selectionFromWord;
cov_12krp22t7u().s[23]++;

var isSelected = ({
  word,
  selections
}) => {
  cov_12krp22t7u().f[6]++;
  var selection = (cov_12krp22t7u().s[24]++, selectionFromWord(word));
  var selected = (cov_12krp22t7u().s[25]++, selections.includes(selection));
  cov_12krp22t7u().s[26]++;
  return selected;
};

exports.isSelected = isSelected;
cov_12krp22t7u().s[27]++;

var areSelected = ({
  words,
  selections
}) => {
  cov_12krp22t7u().f[7]++;
  var selected = (cov_12krp22t7u().s[28]++, false);

  var _selections = (cov_12krp22t7u().s[29]++, words.map(word => {
    cov_12krp22t7u().f[8]++;
    cov_12krp22t7u().s[30]++;
    return selectionFromWord(word);
  }));

  cov_12krp22t7u().s[31]++;

  _selections.forEach(selection => {
    cov_12krp22t7u().f[9]++;

    //if (selections.includes(_s)) selected = true;
    var _selection = (cov_12krp22t7u().s[32]++, JSON.parse(selection));

    var _text = (cov_12krp22t7u().s[33]++, (0, _selections2.normalizeString)(_selection.text));

    var _occ = (cov_12krp22t7u().s[34]++, _selection.occurrence);

    var _occs = (cov_12krp22t7u().s[35]++, _selection.occurrences);

    cov_12krp22t7u().s[36]++;

    for (var i = (cov_12krp22t7u().s[37]++, 0); i < selections.length; i++) {
      var text = (cov_12krp22t7u().s[38]++, selections[i].text); //already normalized.

      var occ = (cov_12krp22t7u().s[39]++, selections[i].occurrence);
      var occs = (cov_12krp22t7u().s[40]++, selections[i].occurrences);
      cov_12krp22t7u().s[41]++;

      if ((cov_12krp22t7u().b[6][0]++, text === _text) && (cov_12krp22t7u().b[6][1]++, occ === _occ) && (cov_12krp22t7u().b[6][2]++, occs === _occs)) {
        cov_12krp22t7u().b[5][0]++;
        cov_12krp22t7u().s[42]++;
        selected = true;
        cov_12krp22t7u().s[43]++;
        break;
      } else {
        cov_12krp22t7u().b[5][1]++;
      }
    }
  });

  cov_12krp22t7u().s[44]++;
  return selected;
};

exports.areSelected = areSelected;
cov_12krp22t7u().s[45]++;

var addSelection = ({
  word,
  selections
}) => {
  cov_12krp22t7u().f[10]++;

  var _selections = (cov_12krp22t7u().s[46]++, new Set(selections));

  var selection = (cov_12krp22t7u().s[47]++, selectionFromWord(word));
  cov_12krp22t7u().s[48]++;

  _selections.add(selection);

  cov_12krp22t7u().s[49]++;
  return [..._selections];
};

exports.addSelection = addSelection;
cov_12krp22t7u().s[50]++;

var addSelections = ({
  words,
  selections
}) => {
  cov_12krp22t7u().f[11]++;

  var _selections = (cov_12krp22t7u().s[51]++, new Set(selections));

  cov_12krp22t7u().s[52]++;
  words.forEach(word => {
    cov_12krp22t7u().f[12]++;
    var selection = (cov_12krp22t7u().s[53]++, selectionFromWord(word));
    cov_12krp22t7u().s[54]++;

    _selections.add(selection);
  });
  cov_12krp22t7u().s[55]++;
  return [..._selections];
};

exports.addSelections = addSelections;
cov_12krp22t7u().s[56]++;

var removeSelection = ({
  word,
  selections
}) => {
  cov_12krp22t7u().f[13]++;
  var selection = (cov_12krp22t7u().s[57]++, selectionFromWord(word));
  var selectionStringified = (cov_12krp22t7u().s[58]++, selections.map(_selection => {
    cov_12krp22t7u().f[14]++;
    cov_12krp22t7u().s[59]++;
    return selectionFromWord(_selection);
  }));

  var _selections = (cov_12krp22t7u().s[60]++, new Set(selectionStringified));

  cov_12krp22t7u().s[61]++;

  _selections.delete(selection);

  cov_12krp22t7u().s[62]++;
  return [..._selections];
};

exports.removeSelection = removeSelection;
cov_12krp22t7u().s[63]++;

var removeSelections = ({
  words,
  selections
}) => {
  cov_12krp22t7u().f[15]++;
  var selectionStringified = (cov_12krp22t7u().s[64]++, selections.map(selection => {
    cov_12krp22t7u().f[16]++;
    cov_12krp22t7u().s[65]++;
    return selectionFromWord(selection);
  }));

  var _selections = (cov_12krp22t7u().s[66]++, new Set(selectionStringified));

  cov_12krp22t7u().s[67]++;
  words.forEach(word => {
    cov_12krp22t7u().f[17]++;
    var selection = (cov_12krp22t7u().s[68]++, selectionFromWord(word));
    cov_12krp22t7u().s[69]++;

    _selections.delete(selection);
  });
  cov_12krp22t7u().s[70]++;
  return [..._selections];
};

exports.removeSelections = removeSelections;
var _default = {
  selectionFromWord,
  isSelected,
  areSelected,
  addSelection,
  addSelections,
  removeSelection,
  removeSelections
};
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NlbGVjdGlvbnMvaGVscGVycy5qcyJdLCJuYW1lcyI6WyJzZWxlY3Rpb25zRnJvbVF1b3RlIiwicXVvdGUiLCJ2ZXJzZU9iamVjdHMiLCJvY2N1cnJlbmNlIiwic2VsZWN0aW9ucyIsIm1hcCIsInNlbGVjdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJxdW90ZUZyb21WZXJzZSIsInF1b3RlZFdvcmRzIiwiQXJyYXkiLCJsZW5ndGgiLCJfc2VsZWN0aW9ucyIsInBhcnNlIiwidGV4dCIsImZvckVhY2giLCJ2ZXJzZU9iamVjdCIsImluZGV4IiwidHlwZSIsIm1hdGNoIiwiaW5jbHVkZXMiLCJxdW90ZWRXb3JkIiwicHVzaCIsImpvaW4iLCJyZXBsYWNlIiwic2VsZWN0aW9uRnJvbVdvcmQiLCJ3b3JkIiwiY29udGVudCIsIm9jY3VycmVuY2VzIiwic2VsZWN0aW9uT2JqZWN0IiwicGFyc2VJbnQiLCJpc1NlbGVjdGVkIiwic2VsZWN0ZWQiLCJhcmVTZWxlY3RlZCIsIndvcmRzIiwiX3NlbGVjdGlvbiIsIl90ZXh0IiwiX29jYyIsIl9vY2NzIiwiaSIsIm9jYyIsIm9jY3MiLCJhZGRTZWxlY3Rpb24iLCJTZXQiLCJhZGQiLCJhZGRTZWxlY3Rpb25zIiwicmVtb3ZlU2VsZWN0aW9uIiwic2VsZWN0aW9uU3RyaW5naWZpZWQiLCJkZWxldGUiLCJyZW1vdmVTZWxlY3Rpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUVPLElBQU1BLG1CQUFtQixHQUFHLENBQUM7QUFBRUMsRUFBQUEsS0FBRjtBQUFTQyxFQUFBQSxZQUFUO0FBQXVCQyxFQUFBQTtBQUF2QixDQUFELEtBQXlDO0FBQUE7QUFDMUUsTUFBSUMsVUFBVSw2QkFBRyxFQUFILENBQWQ7QUFEMEU7O0FBRzFFLE1BQUksNkJBQUFILEtBQUssa0NBQUlDLFlBQUosQ0FBTCxpQ0FBeUJDLFVBQXpCLENBQUosRUFBeUM7QUFBQTtBQUFBO0FBQ3ZDQyxJQUFBQSxVQUFVLEdBQUcscURBQW1DO0FBQzlDSCxNQUFBQSxLQUQ4QztBQUU5Q0MsTUFBQUEsWUFGOEM7QUFHOUNDLE1BQUFBO0FBSDhDLEtBQW5DLEVBSVZFLEdBSlUsQ0FJTEMsU0FBRCxJQUFlO0FBQUE7QUFBQTtBQUFBLGFBQUFDLElBQUksQ0FBQ0MsU0FBTCxDQUFlRixTQUFmO0FBQXlCLEtBSmxDLENBQWI7QUFLRCxHQU5EO0FBQUE7QUFBQTs7QUFIMEU7QUFVMUUsU0FBT0YsVUFBUDtBQUNELENBWE07Ozs7O0FBYUEsSUFBTUssY0FBYyxHQUFHLENBQUM7QUFBRUwsRUFBQUEsVUFBRjtBQUFjRixFQUFBQTtBQUFkLENBQUQsS0FBa0M7QUFBQTtBQUM5RCxNQUFJUSxXQUFXLDZCQUFHLElBQUlDLEtBQUosQ0FBVVQsWUFBWSxDQUFDVSxNQUF2QixDQUFILENBQWY7O0FBQ0EsTUFBTUMsV0FBVyw2QkFBR1QsVUFBVSxDQUFDQyxHQUFYLENBQWdCQyxTQUFELElBQWU7QUFBQTtBQUFBO0FBQUEsV0FBQUMsSUFBSSxDQUFDTyxLQUFMLENBQVdSLFNBQVgsRUFBc0JTLElBQXRCO0FBQTBCLEdBQXhELENBQUgsQ0FBakI7O0FBRjhEO0FBSTlEYixFQUFBQSxZQUFZLENBQUNjLE9BQWIsQ0FBcUIsQ0FBQ0MsV0FBRCxFQUFjQyxLQUFkLEtBQXdCO0FBQUE7O0FBQUEsMENBQ3BCRCxXQURvQjtBQUFBLFFBQ25DRSxJQURtQyxRQUNuQ0EsSUFEbUM7QUFBQSxRQUM3QkosSUFENkIsUUFDN0JBLElBRDZCOztBQUFBOztBQUczQyxRQUFJSSxJQUFJLEtBQUssTUFBYixFQUFxQjtBQUFBO0FBQ25CLFVBQU1DLEtBQUssOEJBQUdQLFdBQVcsQ0FBQ1EsUUFBWixDQUFxQk4sSUFBckIsQ0FBSCxDQUFYO0FBQ0EsVUFBTU8sVUFBVSw4QkFBR0YsS0FBSyxnQ0FBR0wsSUFBSCxpQ0FBVSxHQUFWLENBQVIsQ0FBaEI7QUFGbUI7QUFHbkJMLE1BQUFBLFdBQVcsQ0FBQ2EsSUFBWixDQUFpQkQsVUFBakI7QUFDRCxLQUpEO0FBQUE7QUFBQTtBQUtELEdBUkQ7QUFVQSxNQUFNckIsS0FBSyw4QkFBR1MsV0FBVyxDQUN0QmMsSUFEVyxDQUNOLEdBRE0sRUFFWEMsT0FGVyxDQUVILFdBRkcsRUFFVSxLQUZWLEVBR1hBLE9BSFcsQ0FHSCxrQkFIRyxFQUdpQixFQUhqQixDQUFILENBQVg7QUFkOEQ7QUFrQjlELFNBQU94QixLQUFQO0FBQ0QsQ0FuQk0sQyxDQXFCUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVPLElBQU15QixpQkFBaUIsR0FBSUMsSUFBRCxJQUFVO0FBQUE7O0FBQUEseUNBQ1VBLElBRFY7QUFBQSxNQUNqQ0MsT0FEaUMsU0FDakNBLE9BRGlDO0FBQUEsTUFDeEJiLElBRHdCLFNBQ3hCQSxJQUR3QjtBQUFBLE1BQ2xCWixVQURrQixTQUNsQkEsVUFEa0I7QUFBQSxNQUNOMEIsV0FETSxTQUNOQSxXQURNOztBQUV6QyxNQUFNQyxlQUFlLDhCQUFHO0FBQ3RCZixJQUFBQSxJQUFJLEVBQUUsNkJBQUFhLE9BQU8sa0NBQUliLElBQUosQ0FEUztBQUV0QlosSUFBQUEsVUFBVSxFQUFFNEIsUUFBUSxDQUFDNUIsVUFBRCxDQUZFO0FBR3RCMEIsSUFBQUEsV0FBVyxFQUFFRSxRQUFRLENBQUNGLFdBQUQ7QUFIQyxHQUFILENBQXJCO0FBS0EsTUFBTXZCLFNBQVMsOEJBQUdDLElBQUksQ0FBQ0MsU0FBTCxDQUFlc0IsZUFBZixDQUFILENBQWY7QUFQeUM7QUFRekMsU0FBT3hCLFNBQVA7QUFDRCxDQVRNOzs7OztBQVdBLElBQU0wQixVQUFVLEdBQUcsQ0FBQztBQUFFTCxFQUFBQSxJQUFGO0FBQVF2QixFQUFBQTtBQUFSLENBQUQsS0FBMEI7QUFBQTtBQUNsRCxNQUFNRSxTQUFTLDhCQUFHb0IsaUJBQWlCLENBQUNDLElBQUQsQ0FBcEIsQ0FBZjtBQUNBLE1BQU1NLFFBQVEsOEJBQUc3QixVQUFVLENBQUNpQixRQUFYLENBQW9CZixTQUFwQixDQUFILENBQWQ7QUFGa0Q7QUFHbEQsU0FBTzJCLFFBQVA7QUFDRCxDQUpNOzs7OztBQU1BLElBQU1DLFdBQVcsR0FBRyxDQUFDO0FBQUVDLEVBQUFBLEtBQUY7QUFBUy9CLEVBQUFBO0FBQVQsQ0FBRCxLQUEyQjtBQUFBO0FBQ3BELE1BQUk2QixRQUFRLDhCQUFHLEtBQUgsQ0FBWjs7QUFDQSxNQUFNcEIsV0FBVyw4QkFBR3NCLEtBQUssQ0FBQzlCLEdBQU4sQ0FBV3NCLElBQUQsSUFBVTtBQUFBO0FBQUE7QUFBQSxXQUFBRCxpQkFBaUIsQ0FBQ0MsSUFBRCxDQUFqQjtBQUF1QixHQUEzQyxDQUFILENBQWpCOztBQUZvRDs7QUFJcERkLEVBQUFBLFdBQVcsQ0FBQ0csT0FBWixDQUFxQlYsU0FBRCxJQUFlO0FBQUE7O0FBQ2pDO0FBQ0EsUUFBTThCLFVBQVUsOEJBQUc3QixJQUFJLENBQUNPLEtBQUwsQ0FBV1IsU0FBWCxDQUFILENBQWhCOztBQUNBLFFBQUkrQixLQUFLLDhCQUFHLGtDQUFnQkQsVUFBVSxDQUFDckIsSUFBM0IsQ0FBSCxDQUFUOztBQUNBLFFBQUl1QixJQUFJLDhCQUFHRixVQUFVLENBQUNqQyxVQUFkLENBQVI7O0FBQ0EsUUFBSW9DLEtBQUssOEJBQUdILFVBQVUsQ0FBQ1AsV0FBZCxDQUFUOztBQUxpQzs7QUFPakMsU0FBSyxJQUFJVyxDQUFDLDhCQUFHLENBQUgsQ0FBVixFQUFnQkEsQ0FBQyxHQUFHcEMsVUFBVSxDQUFDUSxNQUEvQixFQUF1QzRCLENBQUMsRUFBeEMsRUFBNEM7QUFDMUMsVUFBTXpCLElBQUksOEJBQUdYLFVBQVUsQ0FBQ29DLENBQUQsQ0FBVixDQUFjekIsSUFBakIsQ0FBVixDQUQwQyxDQUNUOztBQUNqQyxVQUFNMEIsR0FBRyw4QkFBR3JDLFVBQVUsQ0FBQ29DLENBQUQsQ0FBVixDQUFjckMsVUFBakIsQ0FBVDtBQUNBLFVBQU11QyxJQUFJLDhCQUFHdEMsVUFBVSxDQUFDb0MsQ0FBRCxDQUFWLENBQWNYLFdBQWpCLENBQVY7QUFIMEM7O0FBSzFDLFVBQUksNkJBQUFkLElBQUksS0FBS3NCLEtBQVQsa0NBQWtCSSxHQUFHLEtBQUtILElBQTFCLGtDQUFrQ0ksSUFBSSxLQUFLSCxLQUEzQyxDQUFKLEVBQXNEO0FBQUE7QUFBQTtBQUNwRE4sUUFBQUEsUUFBUSxHQUFHLElBQVg7QUFEb0Q7QUFFcEQ7QUFDRCxPQUhEO0FBQUE7QUFBQTtBQUlEO0FBQ0YsR0FqQkQ7O0FBSm9EO0FBc0JwRCxTQUFPQSxRQUFQO0FBQ0QsQ0F2Qk07Ozs7O0FBeUJBLElBQU1VLFlBQVksR0FBRyxDQUFDO0FBQUVoQixFQUFBQSxJQUFGO0FBQVF2QixFQUFBQTtBQUFSLENBQUQsS0FBMEI7QUFBQTs7QUFDcEQsTUFBSVMsV0FBVyw4QkFBRyxJQUFJK0IsR0FBSixDQUFReEMsVUFBUixDQUFILENBQWY7O0FBQ0EsTUFBTUUsU0FBUyw4QkFBR29CLGlCQUFpQixDQUFDQyxJQUFELENBQXBCLENBQWY7QUFGb0Q7O0FBR3BEZCxFQUFBQSxXQUFXLENBQUNnQyxHQUFaLENBQWdCdkMsU0FBaEI7O0FBSG9EO0FBSXBELFNBQU8sQ0FBQyxHQUFHTyxXQUFKLENBQVA7QUFDRCxDQUxNOzs7OztBQU9BLElBQU1pQyxhQUFhLEdBQUcsQ0FBQztBQUFFWCxFQUFBQSxLQUFGO0FBQVMvQixFQUFBQTtBQUFULENBQUQsS0FBMkI7QUFBQTs7QUFDdEQsTUFBSVMsV0FBVyw4QkFBRyxJQUFJK0IsR0FBSixDQUFReEMsVUFBUixDQUFILENBQWY7O0FBRHNEO0FBR3REK0IsRUFBQUEsS0FBSyxDQUFDbkIsT0FBTixDQUFlVyxJQUFELElBQVU7QUFBQTtBQUN0QixRQUFNckIsU0FBUyw4QkFBR29CLGlCQUFpQixDQUFDQyxJQUFELENBQXBCLENBQWY7QUFEc0I7O0FBRXRCZCxJQUFBQSxXQUFXLENBQUNnQyxHQUFaLENBQWdCdkMsU0FBaEI7QUFDRCxHQUhEO0FBSHNEO0FBT3RELFNBQU8sQ0FBQyxHQUFHTyxXQUFKLENBQVA7QUFDRCxDQVJNOzs7OztBQVVBLElBQU1rQyxlQUFlLEdBQUcsQ0FBQztBQUFFcEIsRUFBQUEsSUFBRjtBQUFRdkIsRUFBQUE7QUFBUixDQUFELEtBQTBCO0FBQUE7QUFDdkQsTUFBTUUsU0FBUyw4QkFBR29CLGlCQUFpQixDQUFDQyxJQUFELENBQXBCLENBQWY7QUFDQSxNQUFNcUIsb0JBQW9CLDhCQUFHNUMsVUFBVSxDQUFDQyxHQUFYLENBQWdCK0IsVUFBRCxJQUMxQztBQUFBO0FBQUE7QUFBQSxXQUFBVixpQkFBaUIsQ0FBQ1UsVUFBRCxDQUFqQjtBQUE2QixHQURGLENBQUgsQ0FBMUI7O0FBR0EsTUFBTXZCLFdBQVcsOEJBQUcsSUFBSStCLEdBQUosQ0FBUUksb0JBQVIsQ0FBSCxDQUFqQjs7QUFMdUQ7O0FBTXZEbkMsRUFBQUEsV0FBVyxDQUFDb0MsTUFBWixDQUFtQjNDLFNBQW5COztBQU51RDtBQU92RCxTQUFPLENBQUMsR0FBR08sV0FBSixDQUFQO0FBQ0QsQ0FSTTs7Ozs7QUFVQSxJQUFNcUMsZ0JBQWdCLEdBQUcsQ0FBQztBQUFFZixFQUFBQSxLQUFGO0FBQVMvQixFQUFBQTtBQUFULENBQUQsS0FBMkI7QUFBQTtBQUN6RCxNQUFNNEMsb0JBQW9CLDhCQUFHNUMsVUFBVSxDQUFDQyxHQUFYLENBQWdCQyxTQUFELElBQzFDO0FBQUE7QUFBQTtBQUFBLFdBQUFvQixpQkFBaUIsQ0FBQ3BCLFNBQUQsQ0FBakI7QUFBNEIsR0FERCxDQUFILENBQTFCOztBQUdBLE1BQU1PLFdBQVcsOEJBQUcsSUFBSStCLEdBQUosQ0FBUUksb0JBQVIsQ0FBSCxDQUFqQjs7QUFKeUQ7QUFNekRiLEVBQUFBLEtBQUssQ0FBQ25CLE9BQU4sQ0FBZVcsSUFBRCxJQUFVO0FBQUE7QUFDdEIsUUFBTXJCLFNBQVMsOEJBQUdvQixpQkFBaUIsQ0FBQ0MsSUFBRCxDQUFwQixDQUFmO0FBRHNCOztBQUV0QmQsSUFBQUEsV0FBVyxDQUFDb0MsTUFBWixDQUFtQjNDLFNBQW5CO0FBQ0QsR0FIRDtBQU55RDtBQVV6RCxTQUFPLENBQUMsR0FBR08sV0FBSixDQUFQO0FBQ0QsQ0FYTTs7O2VBYVE7QUFDYmEsRUFBQUEsaUJBRGE7QUFFYk0sRUFBQUEsVUFGYTtBQUdiRSxFQUFBQSxXQUhhO0FBSWJTLEVBQUFBLFlBSmE7QUFLYkcsRUFBQUEsYUFMYTtBQU1iQyxFQUFBQSxlQU5hO0FBT2JHLEVBQUFBO0FBUGEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgc2VsZWN0aW9uc0Zyb21RdW90ZUFuZFZlcnNlT2JqZWN0cyxcclxuICBub3JtYWxpemVTdHJpbmcsXHJcbn0gZnJvbSAnLi4vLi4vY29yZS9zZWxlY3Rpb25zL3NlbGVjdGlvbnMnO1xyXG5cclxuLy8gY29uc3Qgc3RyaW5naWZ5ID0gKGFycmF5KSA9PiBhcnJheS5tYXAob2JqZWN0ID0+IEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xyXG4vL2V4cG9ydCBjb25zdCBwYXJzaWZ5ID0gKGFycmF5KSA9PiBhcnJheS5tYXAoc3RyaW5nID0+IEpTT04ucGFyc2Uoc3RyaW5nKSk7XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0aW9uc0Zyb21RdW90ZSA9ICh7IHF1b3RlLCB2ZXJzZU9iamVjdHMsIG9jY3VycmVuY2UgfSkgPT4ge1xyXG4gIGxldCBzZWxlY3Rpb25zID0gW107XHJcblxyXG4gIGlmIChxdW90ZSAmJiB2ZXJzZU9iamVjdHMgJiYgb2NjdXJyZW5jZSkge1xyXG4gICAgc2VsZWN0aW9ucyA9IHNlbGVjdGlvbnNGcm9tUXVvdGVBbmRWZXJzZU9iamVjdHMoe1xyXG4gICAgICBxdW90ZSxcclxuICAgICAgdmVyc2VPYmplY3RzLFxyXG4gICAgICBvY2N1cnJlbmNlLFxyXG4gICAgfSkubWFwKChzZWxlY3Rpb24pID0+IEpTT04uc3RyaW5naWZ5KHNlbGVjdGlvbikpO1xyXG4gIH1cclxuICByZXR1cm4gc2VsZWN0aW9ucztcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBxdW90ZUZyb21WZXJzZSA9ICh7IHNlbGVjdGlvbnMsIHZlcnNlT2JqZWN0cyB9KSA9PiB7XHJcbiAgbGV0IHF1b3RlZFdvcmRzID0gbmV3IEFycmF5KHZlcnNlT2JqZWN0cy5sZW5ndGgpO1xyXG4gIGNvbnN0IF9zZWxlY3Rpb25zID0gc2VsZWN0aW9ucy5tYXAoKHNlbGVjdGlvbikgPT4gSlNPTi5wYXJzZShzZWxlY3Rpb24pLnRleHQpO1xyXG5cclxuICB2ZXJzZU9iamVjdHMuZm9yRWFjaCgodmVyc2VPYmplY3QsIGluZGV4KSA9PiB7XHJcbiAgICBjb25zdCB7IHR5cGUsIHRleHQgfSA9IHZlcnNlT2JqZWN0O1xyXG5cclxuICAgIGlmICh0eXBlID09PSAnd29yZCcpIHtcclxuICAgICAgY29uc3QgbWF0Y2ggPSBfc2VsZWN0aW9ucy5pbmNsdWRlcyh0ZXh0KTtcclxuICAgICAgY29uc3QgcXVvdGVkV29yZCA9IG1hdGNoID8gdGV4dCA6ICfigKYnO1xyXG4gICAgICBxdW90ZWRXb3Jkcy5wdXNoKHF1b3RlZFdvcmQpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBxdW90ZSA9IHF1b3RlZFdvcmRzXHJcbiAgICAuam9pbignICcpXHJcbiAgICAucmVwbGFjZSgvKCA/4oCmID8pKy9nLCAnIOKApiAnKVxyXG4gICAgLnJlcGxhY2UoLyheW+KApiBdK3xb4oCmIF0rJCkvZywgJycpO1xyXG4gIHJldHVybiBxdW90ZTtcclxufTtcclxuXHJcbi8vIGNvbnN0IHdvcmRzRnJvbU1pbGVzdG9uZSA9ICh7bWlsZXN0b25lLCBxdW90ZWRXb3Jkcz1bXX0pID0+IHtcclxuLy8gICBjb25zdCBfc2VsZWN0aW9ucyA9IHNlbGVjdGlvbnMubWFwKHNlbGVjdGlvbiA9PiBzZWxlY3Rpb24udGV4dCk7XHJcbi8vICAgaWYgKF9zZWxlY3Rpb25zLmluY2x1ZGUobWlsZXN0b25lLmNvbnRlbnQpKSB7XHJcbi8vICAgICBpZiAobWlsZXN0b25lLmNoaWxkcmVuWzBdLnR5cGUgPT09ICd3b3JkJykge1xyXG4vLyAgICAgICBjb25zdCB3b3JkcyA9IG1pbGVzdG9uZS5jaGlsZHJlbjtcclxuLy8gICAgICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHF1b3RlZFdvcmRzLnB1c2god29yZC50ZXh0KSk7XHJcbi8vICAgICB9XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdGlvbkZyb21Xb3JkID0gKHdvcmQpID0+IHtcclxuICBjb25zdCB7IGNvbnRlbnQsIHRleHQsIG9jY3VycmVuY2UsIG9jY3VycmVuY2VzIH0gPSB3b3JkO1xyXG4gIGNvbnN0IHNlbGVjdGlvbk9iamVjdCA9IHtcclxuICAgIHRleHQ6IGNvbnRlbnQgfHwgdGV4dCxcclxuICAgIG9jY3VycmVuY2U6IHBhcnNlSW50KG9jY3VycmVuY2UpLFxyXG4gICAgb2NjdXJyZW5jZXM6IHBhcnNlSW50KG9jY3VycmVuY2VzKSxcclxuICB9O1xyXG4gIGNvbnN0IHNlbGVjdGlvbiA9IEpTT04uc3RyaW5naWZ5KHNlbGVjdGlvbk9iamVjdCk7XHJcbiAgcmV0dXJuIHNlbGVjdGlvbjtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpc1NlbGVjdGVkID0gKHsgd29yZCwgc2VsZWN0aW9ucyB9KSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0aW9uID0gc2VsZWN0aW9uRnJvbVdvcmQod29yZCk7XHJcbiAgY29uc3Qgc2VsZWN0ZWQgPSBzZWxlY3Rpb25zLmluY2x1ZGVzKHNlbGVjdGlvbik7XHJcbiAgcmV0dXJuIHNlbGVjdGVkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFyZVNlbGVjdGVkID0gKHsgd29yZHMsIHNlbGVjdGlvbnMgfSkgPT4ge1xyXG4gIGxldCBzZWxlY3RlZCA9IGZhbHNlO1xyXG4gIGNvbnN0IF9zZWxlY3Rpb25zID0gd29yZHMubWFwKCh3b3JkKSA9PiBzZWxlY3Rpb25Gcm9tV29yZCh3b3JkKSk7XHJcblxyXG4gIF9zZWxlY3Rpb25zLmZvckVhY2goKHNlbGVjdGlvbikgPT4ge1xyXG4gICAgLy9pZiAoc2VsZWN0aW9ucy5pbmNsdWRlcyhfcykpIHNlbGVjdGVkID0gdHJ1ZTtcclxuICAgIGNvbnN0IF9zZWxlY3Rpb24gPSBKU09OLnBhcnNlKHNlbGVjdGlvbik7XHJcbiAgICBsZXQgX3RleHQgPSBub3JtYWxpemVTdHJpbmcoX3NlbGVjdGlvbi50ZXh0KTtcclxuICAgIGxldCBfb2NjID0gX3NlbGVjdGlvbi5vY2N1cnJlbmNlO1xyXG4gICAgbGV0IF9vY2NzID0gX3NlbGVjdGlvbi5vY2N1cnJlbmNlcztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgdGV4dCA9IHNlbGVjdGlvbnNbaV0udGV4dDsgLy9hbHJlYWR5IG5vcm1hbGl6ZWQuXHJcbiAgICAgIGNvbnN0IG9jYyA9IHNlbGVjdGlvbnNbaV0ub2NjdXJyZW5jZTtcclxuICAgICAgY29uc3Qgb2NjcyA9IHNlbGVjdGlvbnNbaV0ub2NjdXJyZW5jZXM7XHJcblxyXG4gICAgICBpZiAodGV4dCA9PT0gX3RleHQgJiYgb2NjID09PSBfb2NjICYmIG9jY3MgPT09IF9vY2NzKSB7XHJcbiAgICAgICAgc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHNlbGVjdGVkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFNlbGVjdGlvbiA9ICh7IHdvcmQsIHNlbGVjdGlvbnMgfSkgPT4ge1xyXG4gIGxldCBfc2VsZWN0aW9ucyA9IG5ldyBTZXQoc2VsZWN0aW9ucyk7XHJcbiAgY29uc3Qgc2VsZWN0aW9uID0gc2VsZWN0aW9uRnJvbVdvcmQod29yZCk7XHJcbiAgX3NlbGVjdGlvbnMuYWRkKHNlbGVjdGlvbik7XHJcbiAgcmV0dXJuIFsuLi5fc2VsZWN0aW9uc107XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkU2VsZWN0aW9ucyA9ICh7IHdvcmRzLCBzZWxlY3Rpb25zIH0pID0+IHtcclxuICBsZXQgX3NlbGVjdGlvbnMgPSBuZXcgU2V0KHNlbGVjdGlvbnMpO1xyXG5cclxuICB3b3Jkcy5mb3JFYWNoKCh3b3JkKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBzZWxlY3Rpb25Gcm9tV29yZCh3b3JkKTtcclxuICAgIF9zZWxlY3Rpb25zLmFkZChzZWxlY3Rpb24pO1xyXG4gIH0pO1xyXG4gIHJldHVybiBbLi4uX3NlbGVjdGlvbnNdO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVNlbGVjdGlvbiA9ICh7IHdvcmQsIHNlbGVjdGlvbnMgfSkgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdGlvbiA9IHNlbGVjdGlvbkZyb21Xb3JkKHdvcmQpO1xyXG4gIGNvbnN0IHNlbGVjdGlvblN0cmluZ2lmaWVkID0gc2VsZWN0aW9ucy5tYXAoKF9zZWxlY3Rpb24pID0+XHJcbiAgICBzZWxlY3Rpb25Gcm9tV29yZChfc2VsZWN0aW9uKVxyXG4gICk7XHJcbiAgY29uc3QgX3NlbGVjdGlvbnMgPSBuZXcgU2V0KHNlbGVjdGlvblN0cmluZ2lmaWVkKTtcclxuICBfc2VsZWN0aW9ucy5kZWxldGUoc2VsZWN0aW9uKTtcclxuICByZXR1cm4gWy4uLl9zZWxlY3Rpb25zXTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVTZWxlY3Rpb25zID0gKHsgd29yZHMsIHNlbGVjdGlvbnMgfSkgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdGlvblN0cmluZ2lmaWVkID0gc2VsZWN0aW9ucy5tYXAoKHNlbGVjdGlvbikgPT5cclxuICAgIHNlbGVjdGlvbkZyb21Xb3JkKHNlbGVjdGlvbilcclxuICApO1xyXG4gIGNvbnN0IF9zZWxlY3Rpb25zID0gbmV3IFNldChzZWxlY3Rpb25TdHJpbmdpZmllZCk7XHJcblxyXG4gIHdvcmRzLmZvckVhY2goKHdvcmQpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHNlbGVjdGlvbkZyb21Xb3JkKHdvcmQpO1xyXG4gICAgX3NlbGVjdGlvbnMuZGVsZXRlKHNlbGVjdGlvbik7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIFsuLi5fc2VsZWN0aW9uc107XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgc2VsZWN0aW9uRnJvbVdvcmQsXHJcbiAgaXNTZWxlY3RlZCxcclxuICBhcmVTZWxlY3RlZCxcclxuICBhZGRTZWxlY3Rpb24sXHJcbiAgYWRkU2VsZWN0aW9ucyxcclxuICByZW1vdmVTZWxlY3Rpb24sXHJcbiAgcmVtb3ZlU2VsZWN0aW9ucyxcclxufTtcclxuIl19