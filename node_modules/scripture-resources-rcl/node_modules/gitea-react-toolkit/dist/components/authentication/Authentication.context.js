"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AuthenticationContextProvider = AuthenticationContextProvider;
exports.AuthenticationContext = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _ = require(".");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var AuthenticationContext = _react.default.createContext();

exports.AuthenticationContext = AuthenticationContext;

function AuthenticationContextProvider(_ref) {
  var _config = _ref.config,
      messages = _ref.messages,
      authentication = _ref.authentication,
      onAuthentication = _ref.onAuthentication,
      loadAuthentication = _ref.loadAuthentication,
      saveAuthentication = _ref.saveAuthentication,
      children = _ref.children,
      onError = _ref.onError;

  var _useAuthentication = (0, _.useAuthentication)({
    authentication: authentication,
    onAuthentication: onAuthentication,
    config: _config,
    messages: messages,
    loadAuthentication: loadAuthentication,
    saveAuthentication: saveAuthentication,
    onError: onError
  }),
      state = _useAuthentication.state,
      actions = _useAuthentication.actions,
      component = _useAuthentication.component,
      config = _useAuthentication.config;

  var context = {
    state: state,
    actions: actions,
    component: component,
    config: config
  };
  return /*#__PURE__*/_react.default.createElement(AuthenticationContext.Provider, {
    value: context
  }, children);
}

;
AuthenticationContextProvider.propTypes = {
  /** Pass a previously returned authentication object to bypass login. */
  authentication: _propTypes.default.shape({
    user: _propTypes.default.object.isRequired,
    token: _propTypes.default.object.isRequired,
    config: _propTypes.default.object.isRequired,
    remember: _propTypes.default.bool
  }),

  /** Callback function to propogate the user/token used for API Authentication. */
  onAuthentication: _propTypes.default.func,

  /** Configuration to pass through to the Authentication component. */

  /** Override the default text and errors. Must override all or none. */
  messages: _propTypes.default.shape({
    actionText: _propTypes.default.string.isRequired,
    genericError: _propTypes.default.string.isRequired,
    usernameError: _propTypes.default.string.isRequired,
    passwordError: _propTypes.default.string.isRequired
  }),
  config: _propTypes.default.shape({
    /** The Gitea server to use when authenticating. */
    server: _propTypes.default.string.isRequired,

    /** The id of the token to create/retrieve that is used for the app. */
    tokenid: _propTypes.default.string.isRequired
  }),

  /** Callback function to persist authentication. */
  saveAuthentication: _propTypes.default.func,

  /** Callback function to retrieve persisted authentication. */
  loadAuthentication: _propTypes.default.func,

  /** optional callback for error */
  onError: _propTypes.default.func
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2F1dGhlbnRpY2F0aW9uL0F1dGhlbnRpY2F0aW9uLmNvbnRleHQuanMiXSwibmFtZXMiOlsiQXV0aGVudGljYXRpb25Db250ZXh0IiwiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwiQXV0aGVudGljYXRpb25Db250ZXh0UHJvdmlkZXIiLCJfY29uZmlnIiwiY29uZmlnIiwibWVzc2FnZXMiLCJhdXRoZW50aWNhdGlvbiIsIm9uQXV0aGVudGljYXRpb24iLCJsb2FkQXV0aGVudGljYXRpb24iLCJzYXZlQXV0aGVudGljYXRpb24iLCJjaGlsZHJlbiIsIm9uRXJyb3IiLCJzdGF0ZSIsImFjdGlvbnMiLCJjb21wb25lbnQiLCJjb250ZXh0IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic2hhcGUiLCJ1c2VyIiwib2JqZWN0IiwiaXNSZXF1aXJlZCIsInRva2VuIiwicmVtZW1iZXIiLCJib29sIiwiZnVuYyIsImFjdGlvblRleHQiLCJzdHJpbmciLCJnZW5lcmljRXJyb3IiLCJ1c2VybmFtZUVycm9yIiwicGFzc3dvcmRFcnJvciIsInNlcnZlciIsInRva2VuaWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7Ozs7QUFFTyxJQUFNQSxxQkFBcUIsR0FBR0MsZUFBTUMsYUFBTixFQUE5Qjs7OztBQUVBLFNBQVNDLDZCQUFULE9BU0o7QUFBQSxNQVJPQyxPQVFQLFFBUkRDLE1BUUM7QUFBQSxNQVBEQyxRQU9DLFFBUERBLFFBT0M7QUFBQSxNQU5EQyxjQU1DLFFBTkRBLGNBTUM7QUFBQSxNQUxEQyxnQkFLQyxRQUxEQSxnQkFLQztBQUFBLE1BSkRDLGtCQUlDLFFBSkRBLGtCQUlDO0FBQUEsTUFIREMsa0JBR0MsUUFIREEsa0JBR0M7QUFBQSxNQUZEQyxRQUVDLFFBRkRBLFFBRUM7QUFBQSxNQUREQyxPQUNDLFFBRERBLE9BQ0M7O0FBQUEsMkJBR0cseUJBQWtCO0FBQ3BCTCxJQUFBQSxjQUFjLEVBQWRBLGNBRG9CO0FBRXBCQyxJQUFBQSxnQkFBZ0IsRUFBaEJBLGdCQUZvQjtBQUdwQkgsSUFBQUEsTUFBTSxFQUFFRCxPQUhZO0FBSXBCRSxJQUFBQSxRQUFRLEVBQVJBLFFBSm9CO0FBS3BCRyxJQUFBQSxrQkFBa0IsRUFBbEJBLGtCQUxvQjtBQU1wQkMsSUFBQUEsa0JBQWtCLEVBQWxCQSxrQkFOb0I7QUFPcEJFLElBQUFBLE9BQU8sRUFBUEE7QUFQb0IsR0FBbEIsQ0FISDtBQUFBLE1BRUNDLEtBRkQsc0JBRUNBLEtBRkQ7QUFBQSxNQUVRQyxPQUZSLHNCQUVRQSxPQUZSO0FBQUEsTUFFaUJDLFNBRmpCLHNCQUVpQkEsU0FGakI7QUFBQSxNQUU0QlYsTUFGNUIsc0JBRTRCQSxNQUY1Qjs7QUFZRCxNQUFNVyxPQUFPLEdBQUc7QUFDZEgsSUFBQUEsS0FBSyxFQUFMQSxLQURjO0FBRWRDLElBQUFBLE9BQU8sRUFBUEEsT0FGYztBQUdkQyxJQUFBQSxTQUFTLEVBQVRBLFNBSGM7QUFJZFYsSUFBQUEsTUFBTSxFQUFOQTtBQUpjLEdBQWhCO0FBT0Esc0JBQ0UsNkJBQUMscUJBQUQsQ0FBdUIsUUFBdkI7QUFBZ0MsSUFBQSxLQUFLLEVBQUVXO0FBQXZDLEtBQ0dMLFFBREgsQ0FERjtBQUtEOztBQUFBO0FBRURSLDZCQUE2QixDQUFDYyxTQUE5QixHQUEwQztBQUN4QztBQUNBVixFQUFBQSxjQUFjLEVBQUVXLG1CQUFVQyxLQUFWLENBQWdCO0FBQzlCQyxJQUFBQSxJQUFJLEVBQUVGLG1CQUFVRyxNQUFWLENBQWlCQyxVQURPO0FBRTlCQyxJQUFBQSxLQUFLLEVBQUVMLG1CQUFVRyxNQUFWLENBQWlCQyxVQUZNO0FBRzlCakIsSUFBQUEsTUFBTSxFQUFFYSxtQkFBVUcsTUFBVixDQUFpQkMsVUFISztBQUk5QkUsSUFBQUEsUUFBUSxFQUFFTixtQkFBVU87QUFKVSxHQUFoQixDQUZ3Qjs7QUFReEM7QUFDQWpCLEVBQUFBLGdCQUFnQixFQUFFVSxtQkFBVVEsSUFUWTs7QUFVeEM7O0FBQ0E7QUFDQXBCLEVBQUFBLFFBQVEsRUFBRVksbUJBQVVDLEtBQVYsQ0FBZ0I7QUFDeEJRLElBQUFBLFVBQVUsRUFBRVQsbUJBQVVVLE1BQVYsQ0FBaUJOLFVBREw7QUFFeEJPLElBQUFBLFlBQVksRUFBRVgsbUJBQVVVLE1BQVYsQ0FBaUJOLFVBRlA7QUFHeEJRLElBQUFBLGFBQWEsRUFBRVosbUJBQVVVLE1BQVYsQ0FBaUJOLFVBSFI7QUFJeEJTLElBQUFBLGFBQWEsRUFBRWIsbUJBQVVVLE1BQVYsQ0FBaUJOO0FBSlIsR0FBaEIsQ0FaOEI7QUFrQnhDakIsRUFBQUEsTUFBTSxFQUFFYSxtQkFBVUMsS0FBVixDQUFnQjtBQUN0QjtBQUNBYSxJQUFBQSxNQUFNLEVBQUVkLG1CQUFVVSxNQUFWLENBQWlCTixVQUZIOztBQUd0QjtBQUNBVyxJQUFBQSxPQUFPLEVBQUVmLG1CQUFVVSxNQUFWLENBQWlCTjtBQUpKLEdBQWhCLENBbEJnQzs7QUF3QnhDO0FBQ0FaLEVBQUFBLGtCQUFrQixFQUFFUSxtQkFBVVEsSUF6QlU7O0FBMEJ4QztBQUNBakIsRUFBQUEsa0JBQWtCLEVBQUVTLG1CQUFVUSxJQTNCVTs7QUE0QnhDO0FBQ0FkLEVBQUFBLE9BQU8sRUFBRU0sbUJBQVVRO0FBN0JxQixDQUExQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcblxyXG5pbXBvcnQgeyB1c2VBdXRoZW50aWNhdGlvbiB9IGZyb20gJy4nO1xyXG5cclxuZXhwb3J0IGNvbnN0IEF1dGhlbnRpY2F0aW9uQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBdXRoZW50aWNhdGlvbkNvbnRleHRQcm92aWRlcih7XHJcbiAgY29uZmlnOiBfY29uZmlnLFxyXG4gIG1lc3NhZ2VzLFxyXG4gIGF1dGhlbnRpY2F0aW9uLFxyXG4gIG9uQXV0aGVudGljYXRpb24sXHJcbiAgbG9hZEF1dGhlbnRpY2F0aW9uLFxyXG4gIHNhdmVBdXRoZW50aWNhdGlvbixcclxuICBjaGlsZHJlbixcclxuICBvbkVycm9yLFxyXG59KSB7XHJcbiAgY29uc3Qge1xyXG4gICAgc3RhdGUsIGFjdGlvbnMsIGNvbXBvbmVudCwgY29uZmlnLFxyXG4gIH0gPSB1c2VBdXRoZW50aWNhdGlvbih7XHJcbiAgICBhdXRoZW50aWNhdGlvbixcclxuICAgIG9uQXV0aGVudGljYXRpb24sXHJcbiAgICBjb25maWc6IF9jb25maWcsXHJcbiAgICBtZXNzYWdlcyxcclxuICAgIGxvYWRBdXRoZW50aWNhdGlvbixcclxuICAgIHNhdmVBdXRoZW50aWNhdGlvbixcclxuICAgIG9uRXJyb3IsXHJcbiAgfSk7XHJcbiAgY29uc3QgY29udGV4dCA9IHtcclxuICAgIHN0YXRlLFxyXG4gICAgYWN0aW9ucyxcclxuICAgIGNvbXBvbmVudCxcclxuICAgIGNvbmZpZyxcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEF1dGhlbnRpY2F0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dH0+XHJcbiAgICAgIHtjaGlsZHJlbn1cclxuICAgIDwvQXV0aGVudGljYXRpb25Db250ZXh0LlByb3ZpZGVyPlxyXG4gICk7XHJcbn07XHJcblxyXG5BdXRoZW50aWNhdGlvbkNvbnRleHRQcm92aWRlci5wcm9wVHlwZXMgPSB7XHJcbiAgLyoqIFBhc3MgYSBwcmV2aW91c2x5IHJldHVybmVkIGF1dGhlbnRpY2F0aW9uIG9iamVjdCB0byBieXBhc3MgbG9naW4uICovXHJcbiAgYXV0aGVudGljYXRpb246IFByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICB1c2VyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICB0b2tlbjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgY29uZmlnOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICByZW1lbWJlcjogUHJvcFR5cGVzLmJvb2wsXHJcbiAgfSksXHJcbiAgLyoqIENhbGxiYWNrIGZ1bmN0aW9uIHRvIHByb3BvZ2F0ZSB0aGUgdXNlci90b2tlbiB1c2VkIGZvciBBUEkgQXV0aGVudGljYXRpb24uICovXHJcbiAgb25BdXRoZW50aWNhdGlvbjogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgLyoqIENvbmZpZ3VyYXRpb24gdG8gcGFzcyB0aHJvdWdoIHRvIHRoZSBBdXRoZW50aWNhdGlvbiBjb21wb25lbnQuICovXHJcbiAgLyoqIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRleHQgYW5kIGVycm9ycy4gTXVzdCBvdmVycmlkZSBhbGwgb3Igbm9uZS4gKi9cclxuICBtZXNzYWdlczogUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgIGFjdGlvblRleHQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICAgIGdlbmVyaWNFcnJvcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgdXNlcm5hbWVFcnJvcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgcGFzc3dvcmRFcnJvcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIH0pLFxyXG4gIGNvbmZpZzogUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgIC8qKiBUaGUgR2l0ZWEgc2VydmVyIHRvIHVzZSB3aGVuIGF1dGhlbnRpY2F0aW5nLiAqL1xyXG4gICAgc2VydmVyOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICAvKiogVGhlIGlkIG9mIHRoZSB0b2tlbiB0byBjcmVhdGUvcmV0cmlldmUgdGhhdCBpcyB1c2VkIGZvciB0aGUgYXBwLiAqL1xyXG4gICAgdG9rZW5pZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIH0pLFxyXG4gIC8qKiBDYWxsYmFjayBmdW5jdGlvbiB0byBwZXJzaXN0IGF1dGhlbnRpY2F0aW9uLiAqL1xyXG4gIHNhdmVBdXRoZW50aWNhdGlvbjogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgLyoqIENhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHBlcnNpc3RlZCBhdXRoZW50aWNhdGlvbi4gKi9cclxuICBsb2FkQXV0aGVudGljYXRpb246IFByb3BUeXBlcy5mdW5jLFxyXG4gIC8qKiBvcHRpb25hbCBjYWxsYmFjayBmb3IgZXJyb3IgKi9cclxuICBvbkVycm9yOiBQcm9wVHlwZXMuZnVuYyxcclxufTtcclxuIl19