"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _styles = require("@material-ui/core/styles");

var _core = require("@material-ui/core");

var _icons = require("@material-ui/icons");

var _localStrings = require("../../core/localStrings");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function Actions(_ref) {
  var sectionable = _ref.sectionable,
      onSectionable = _ref.onSectionable,
      blockable = _ref.blockable,
      onBlockable = _ref.onBlockable,
      preview = _ref.preview,
      onPreview = _ref.onPreview,
      changed = _ref.changed,
      onSave = _ref.onSave;
  var classes = useStyles();

  var _onSave = (0, _react.useCallback)(onSave, [onSave]);

  var _onPreview = (0, _react.useCallback)(onPreview, [onPreview]);

  var _onSectionable = (0, _react.useCallback)(onSectionable, [onSectionable]);

  var _onBlockable = (0, _react.useCallback)(onBlockable, [onBlockable]);

  var togglePreview = (0, _react.useCallback)(function () {
    return _onPreview(!preview);
  }, [preview, _onPreview]);
  var toggleSectionable = (0, _react.useCallback)(function () {
    return _onSectionable(!sectionable);
  }, [sectionable, _onSectionable]);
  var toggleBlockable = (0, _react.useCallback)(function () {
    return _onBlockable(!blockable);
  }, [blockable, _onBlockable]);
  var saveIcon = (0, _react.useMemo)(function () {
    return changed ? /*#__PURE__*/_react.default.createElement(_icons.Save, null) : /*#__PURE__*/_react.default.createElement(_icons.SaveOutlined, null);
  }, [changed]);
  var previewIcon = (0, _react.useMemo)(function () {
    return !preview ? /*#__PURE__*/_react.default.createElement(_icons.Pageview, null) : /*#__PURE__*/_react.default.createElement(_icons.PageviewOutlined, null);
  }, [preview]);
  var sectionableIcon = (0, _react.useMemo)(function () {
    return sectionable ? /*#__PURE__*/_react.default.createElement(_icons.ViewStream, null) : /*#__PURE__*/_react.default.createElement(_icons.ViewStreamOutlined, null);
  }, [sectionable]);
  var blockableIcon = (0, _react.useMemo)(function () {
    return blockable ? /*#__PURE__*/_react.default.createElement(_icons.ShortText, null) : /*#__PURE__*/_react.default.createElement(_icons.Subject, null);
  }, [blockable]);
  var sectionsAction = (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement(_core.Tooltip, {
      title: sectionable ? (0, _localStrings.localString)("Sections") : (0, _localStrings.localString)("NoSections"),
      arrow: true
    }, /*#__PURE__*/_react.default.createElement(_core.IconButton, {
      className: classes.action,
      "aria-label": "Sections",
      onClick: toggleSectionable
    }, sectionableIcon));
  }, [classes.action, sectionableIcon, toggleSectionable]);
  var blocksAction = (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement(_core.Tooltip, {
      title: blockable ? (0, _localStrings.localString)("Blocks") : (0, _localStrings.localString)("NoBlocks"),
      arrow: true
    }, /*#__PURE__*/_react.default.createElement(_core.IconButton, {
      className: classes.action,
      "aria-label": "Blocks",
      onClick: toggleBlockable
    }, blockableIcon));
  }, [classes.action, blockableIcon, toggleBlockable]);
  var previewAction = (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement(_core.Tooltip, {
      title: (0, _localStrings.localString)("Preview"),
      arrow: true
    }, /*#__PURE__*/_react.default.createElement(_core.IconButton, {
      className: classes.action,
      "aria-label": "Preview",
      onClick: togglePreview
    }, previewIcon));
  }, [classes.action, previewIcon, togglePreview]);
  var saveAction = (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement(_core.Tooltip, {
      title: (0, _localStrings.localString)("Save"),
      arrow: true
    }, /*#__PURE__*/_react.default.createElement(_core.IconButton, {
      className: classes.action,
      "aria-label": "Save",
      disabled: !changed,
      onClick: _onSave
    }, saveIcon));
  }, [_onSave, changed, classes.action, saveIcon]);
  return /*#__PURE__*/_react.default.createElement("div", {
    className: classes.actions
  }, sectionsAction, blocksAction, previewAction, saveAction);
}

;
Actions.propTypes = {
  /** Divide editor by segments */
  sectionable: _propTypes.default.bool,

  /** Function to propogate changes to sectionable. */
  onSectionable: _propTypes.default.func.isRequired,

  /** Divide segments by blocks */
  blockable: _propTypes.default.bool,

  /** Function to propogate changes to blockable. */
  onBlockable: _propTypes.default.func.isRequired,

  /** Preview HTML or RAW Markdown */
  preview: _propTypes.default.bool,

  /** Function to propogate changes to preview. */
  onPreview: _propTypes.default.func.isRequired,

  /** Enable/Disable save icon if changed. */
  changed: _propTypes.default.bool,

  /** Function to propogate changes to save. */
  onSave: _propTypes.default.func.isRequired
};
var useStyles = (0, _styles.makeStyles)(function (theme) {
  return {
    actions: {
      textAlign: 'right',
      paddingRight: "".concat(theme.spacing(1.5), "px")
    },
    action: {
      marginLeft: "".concat(theme.spacing(1), "px")
    }
  };
});
var _default = Actions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMvQWN0aW9ucy5qcyJdLCJuYW1lcyI6WyJBY3Rpb25zIiwic2VjdGlvbmFibGUiLCJvblNlY3Rpb25hYmxlIiwiYmxvY2thYmxlIiwib25CbG9ja2FibGUiLCJwcmV2aWV3Iiwib25QcmV2aWV3IiwiY2hhbmdlZCIsIm9uU2F2ZSIsImNsYXNzZXMiLCJ1c2VTdHlsZXMiLCJfb25TYXZlIiwiX29uUHJldmlldyIsIl9vblNlY3Rpb25hYmxlIiwiX29uQmxvY2thYmxlIiwidG9nZ2xlUHJldmlldyIsInRvZ2dsZVNlY3Rpb25hYmxlIiwidG9nZ2xlQmxvY2thYmxlIiwic2F2ZUljb24iLCJwcmV2aWV3SWNvbiIsInNlY3Rpb25hYmxlSWNvbiIsImJsb2NrYWJsZUljb24iLCJzZWN0aW9uc0FjdGlvbiIsImFjdGlvbiIsImJsb2Nrc0FjdGlvbiIsInByZXZpZXdBY3Rpb24iLCJzYXZlQWN0aW9uIiwiYWN0aW9ucyIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImJvb2wiLCJmdW5jIiwiaXNSZXF1aXJlZCIsInRoZW1lIiwidGV4dEFsaWduIiwicGFkZGluZ1JpZ2h0Iiwic3BhY2luZyIsIm1hcmdpbkxlZnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQVVBOzs7Ozs7OztBQUVBLFNBQVNBLE9BQVQsT0FTRztBQUFBLE1BUkRDLFdBUUMsUUFSREEsV0FRQztBQUFBLE1BUERDLGFBT0MsUUFQREEsYUFPQztBQUFBLE1BTkRDLFNBTUMsUUFOREEsU0FNQztBQUFBLE1BTERDLFdBS0MsUUFMREEsV0FLQztBQUFBLE1BSkRDLE9BSUMsUUFKREEsT0FJQztBQUFBLE1BSERDLFNBR0MsUUFIREEsU0FHQztBQUFBLE1BRkRDLE9BRUMsUUFGREEsT0FFQztBQUFBLE1BRERDLE1BQ0MsUUFEREEsTUFDQztBQUNELE1BQU1DLE9BQU8sR0FBR0MsU0FBUyxFQUF6Qjs7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LFVBSlo7O0FBS2xCO0FBQ0E3QixFQUFBQSxTQUFTLEVBQUUwQixtQkFBVUMsSUFOSDs7QUFPbEI7QUFDQTFCLEVBQUFBLFdBQVcsRUFBRXlCLG1CQUFVRSxJQUFWLENBQWVDLFVBUlY7O0FBU2xCO0FBQ0EzQixFQUFBQSxPQUFPLEVBQUV3QixtQkFBVUMsSUFWRDs7QUFXbEI7QUFDQXhCLEVBQUFBLFNBQVMsRUFBRXVCLG1CQUFVRSxJQUFWLENBQWVDLFVBWlI7O0FBYWxCO0FBQ0F6QixFQUFBQSxPQUFPLEVBQUVzQixtQkFBVUMsSUFkRDs7QUFlbEI7QUFDQXRCLEVBQUFBLE1BQU0sRUFBRXFCLG1CQUFVRSxJQUFWLENBQWVDO0FBaEJMLENBQXBCO0FBbUJBLElBQU10QixTQUFTLEdBQUcsd0JBQVcsVUFBQXVCLEtBQUs7QUFBQSxTQUFLO0FBQ3JDTixJQUFBQSxPQUFPLEVBQUU7QUFDUE8sTUFBQUEsU0FBUyxFQUFFLE9BREo7QUFFUEMsTUFBQUEsWUFBWSxZQUFLRixLQUFLLENBQUNHLE9BQU4sQ0FBYyxHQUFkLENBQUw7QUFGTCxLQUQ0QjtBQUtyQ2IsSUFBQUEsTUFBTSxFQUFFO0FBQ05jLE1BQUFBLFVBQVUsWUFBS0osS0FBSyxDQUFDRyxPQUFOLENBQWMsQ0FBZCxDQUFMO0FBREo7QUFMNkIsR0FBTDtBQUFBLENBQWhCLENBQWxCO2VBVWVwQyxPIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzJztcclxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgVG9vbHRpcCB9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlJztcclxuaW1wb3J0IHtcclxuICBTYXZlLFxyXG4gIFNhdmVPdXRsaW5lZCxcclxuICBQYWdldmlldyxcclxuICBQYWdldmlld091dGxpbmVkLFxyXG4gIFNob3J0VGV4dCxcclxuICBTdWJqZWN0LFxyXG4gIFZpZXdTdHJlYW0sXHJcbiAgVmlld1N0cmVhbU91dGxpbmVkLFxyXG59IGZyb20gJ0BtYXRlcmlhbC11aS9pY29ucyc7XHJcbmltcG9ydCB7IGxvY2FsU3RyaW5nIH0gZnJvbSAnLi4vLi4vY29yZS9sb2NhbFN0cmluZ3MnO1xyXG5cclxuZnVuY3Rpb24gQWN0aW9ucyh7XHJcbiAgc2VjdGlvbmFibGUsXHJcbiAgb25TZWN0aW9uYWJsZSxcclxuICBibG9ja2FibGUsXHJcbiAgb25CbG9ja2FibGUsXHJcbiAgcHJldmlldyxcclxuICBvblByZXZpZXcsXHJcbiAgY2hhbmdlZCxcclxuICBvblNhdmUsXHJcbn0pIHtcclxuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKCk7XHJcblxyXG4gIGNvbnN0IF9vblNhdmUgPSB1c2VDYWxsYmFjayhvblNhdmUsIFtvblNhdmVdKTtcclxuICBjb25zdCBfb25QcmV2aWV3ID0gdXNlQ2FsbGJhY2sob25QcmV2aWV3LCBbb25QcmV2aWV3XSk7XHJcbiAgY29uc3QgX29uU2VjdGlvbmFibGUgPSB1c2VDYWxsYmFjayhvblNlY3Rpb25hYmxlLCBbb25TZWN0aW9uYWJsZV0pO1xyXG4gIGNvbnN0IF9vbkJsb2NrYWJsZSA9IHVzZUNhbGxiYWNrKG9uQmxvY2thYmxlLCBbb25CbG9ja2FibGVdKTtcclxuICBjb25zdCB0b2dnbGVQcmV2aWV3ID0gdXNlQ2FsbGJhY2soKCkgPT4gX29uUHJldmlldyghcHJldmlldyksIFtwcmV2aWV3LCBfb25QcmV2aWV3XSk7XHJcbiAgY29uc3QgdG9nZ2xlU2VjdGlvbmFibGUgPSB1c2VDYWxsYmFjaygoKSA9PiBfb25TZWN0aW9uYWJsZSghc2VjdGlvbmFibGUpLCBbc2VjdGlvbmFibGUsIF9vblNlY3Rpb25hYmxlXSk7XHJcbiAgY29uc3QgdG9nZ2xlQmxvY2thYmxlID0gdXNlQ2FsbGJhY2soKCkgPT4gX29uQmxvY2thYmxlKCFibG9ja2FibGUpLCBbYmxvY2thYmxlLCBfb25CbG9ja2FibGVdKTtcclxuXHJcbiAgY29uc3Qgc2F2ZUljb24gPSB1c2VNZW1vKCgpID0+IChjaGFuZ2VkID8gPFNhdmUgLz4gOiA8U2F2ZU91dGxpbmVkIC8+KSwgW2NoYW5nZWRdKTtcclxuICBjb25zdCBwcmV2aWV3SWNvbiA9IHVzZU1lbW8oKCkgPT4gKCFwcmV2aWV3ID8gPFBhZ2V2aWV3IC8+IDogPFBhZ2V2aWV3T3V0bGluZWQgLz4pLCBbcHJldmlld10pO1xyXG4gIGNvbnN0IHNlY3Rpb25hYmxlSWNvbiA9IHVzZU1lbW8oKCkgPT4gKHNlY3Rpb25hYmxlID8gPFZpZXdTdHJlYW0gLz4gOiA8Vmlld1N0cmVhbU91dGxpbmVkIC8+ICksIFtzZWN0aW9uYWJsZV0pO1xyXG4gIGNvbnN0IGJsb2NrYWJsZUljb24gPSB1c2VNZW1vKCgpID0+IChibG9ja2FibGUgPyA8U2hvcnRUZXh0IC8+IDogPFN1YmplY3QgLz4pLCBbYmxvY2thYmxlXSk7XHJcblxyXG4gIGNvbnN0IHNlY3Rpb25zQWN0aW9uID0gdXNlTWVtbygoKSA9PiAoXHJcbiAgICA8VG9vbHRpcCB0aXRsZT17XHJcbiAgICAgIHNlY3Rpb25hYmxlID8gXHJcbiAgICAgICAgbG9jYWxTdHJpbmcoXCJTZWN0aW9uc1wiKSA6XHJcbiAgICAgICAgbG9jYWxTdHJpbmcoXCJOb1NlY3Rpb25zXCIpXHJcbiAgICAgIH0gYXJyb3dcclxuICAgID5cclxuICAgICAgPEljb25CdXR0b24gY2xhc3NOYW1lPXtjbGFzc2VzLmFjdGlvbn0gYXJpYS1sYWJlbD1cIlNlY3Rpb25zXCIgb25DbGljaz17dG9nZ2xlU2VjdGlvbmFibGV9PlxyXG4gICAgICAgIHtzZWN0aW9uYWJsZUljb259XHJcbiAgICAgIDwvSWNvbkJ1dHRvbj5cclxuICAgIDwvVG9vbHRpcD5cclxuICApLCBbY2xhc3Nlcy5hY3Rpb24sIHNlY3Rpb25hYmxlSWNvbiwgdG9nZ2xlU2VjdGlvbmFibGVdKTtcclxuICBjb25zdCBibG9ja3NBY3Rpb24gPSB1c2VNZW1vKCgpID0+IChcclxuICAgIDxUb29sdGlwIHRpdGxlPXtcclxuICAgICAgYmxvY2thYmxlID8gXHJcbiAgICAgICAgbG9jYWxTdHJpbmcoXCJCbG9ja3NcIikgOlxyXG4gICAgICAgIGxvY2FsU3RyaW5nKFwiTm9CbG9ja3NcIilcclxuICAgICAgfSBhcnJvd1xyXG4gICAgPlxyXG4gICAgICA8SWNvbkJ1dHRvbiBjbGFzc05hbWU9e2NsYXNzZXMuYWN0aW9ufSBhcmlhLWxhYmVsPVwiQmxvY2tzXCIgb25DbGljaz17dG9nZ2xlQmxvY2thYmxlfT5cclxuICAgICAgICB7YmxvY2thYmxlSWNvbn1cclxuICAgICAgPC9JY29uQnV0dG9uPlxyXG4gICAgPC9Ub29sdGlwPlxyXG4gICksIFtjbGFzc2VzLmFjdGlvbiwgYmxvY2thYmxlSWNvbiwgdG9nZ2xlQmxvY2thYmxlXSk7XHJcbiAgY29uc3QgcHJldmlld0FjdGlvbiA9IHVzZU1lbW8oKCkgPT4gKFxyXG4gICAgPFRvb2x0aXAgdGl0bGU9e2xvY2FsU3RyaW5nKFwiUHJldmlld1wiKX0gYXJyb3c+XHJcbiAgICAgIDxJY29uQnV0dG9uIGNsYXNzTmFtZT17Y2xhc3Nlcy5hY3Rpb259IGFyaWEtbGFiZWw9XCJQcmV2aWV3XCIgb25DbGljaz17dG9nZ2xlUHJldmlld30+XHJcbiAgICAgICAge3ByZXZpZXdJY29ufVxyXG4gICAgICA8L0ljb25CdXR0b24+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbiAgKSwgW2NsYXNzZXMuYWN0aW9uLCBwcmV2aWV3SWNvbiwgdG9nZ2xlUHJldmlld10pO1xyXG4gIGNvbnN0IHNhdmVBY3Rpb24gPSB1c2VNZW1vKCgpID0+IChcclxuICAgIDxUb29sdGlwIHRpdGxlPXtsb2NhbFN0cmluZyhcIlNhdmVcIil9IGFycm93PlxyXG4gICAgICA8SWNvbkJ1dHRvbiBjbGFzc05hbWU9e2NsYXNzZXMuYWN0aW9ufSBhcmlhLWxhYmVsPVwiU2F2ZVwiIGRpc2FibGVkPXshY2hhbmdlZH0gb25DbGljaz17X29uU2F2ZX0+XHJcbiAgICAgICAge3NhdmVJY29ufVxyXG4gICAgICA8L0ljb25CdXR0b24+XHJcbiAgICA8L1Rvb2x0aXA+XHJcbiAgKSwgW19vblNhdmUsIGNoYW5nZWQsIGNsYXNzZXMuYWN0aW9uLCBzYXZlSWNvbl0pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuYWN0aW9uc30+XHJcbiAgICAgIHtzZWN0aW9uc0FjdGlvbn1cclxuICAgICAge2Jsb2Nrc0FjdGlvbn1cclxuICAgICAge3ByZXZpZXdBY3Rpb259XHJcbiAgICAgIHtzYXZlQWN0aW9ufVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbkFjdGlvbnMucHJvcFR5cGVzID0ge1xyXG4gIC8qKiBEaXZpZGUgZWRpdG9yIGJ5IHNlZ21lbnRzICovXHJcbiAgc2VjdGlvbmFibGU6IFByb3BUeXBlcy5ib29sLFxyXG4gIC8qKiBGdW5jdGlvbiB0byBwcm9wb2dhdGUgY2hhbmdlcyB0byBzZWN0aW9uYWJsZS4gKi9cclxuICBvblNlY3Rpb25hYmxlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIC8qKiBEaXZpZGUgc2VnbWVudHMgYnkgYmxvY2tzICovXHJcbiAgYmxvY2thYmxlOiBQcm9wVHlwZXMuYm9vbCxcclxuICAvKiogRnVuY3Rpb24gdG8gcHJvcG9nYXRlIGNoYW5nZXMgdG8gYmxvY2thYmxlLiAqL1xyXG4gIG9uQmxvY2thYmxlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIC8qKiBQcmV2aWV3IEhUTUwgb3IgUkFXIE1hcmtkb3duICovXHJcbiAgcHJldmlldzogUHJvcFR5cGVzLmJvb2wsXHJcbiAgLyoqIEZ1bmN0aW9uIHRvIHByb3BvZ2F0ZSBjaGFuZ2VzIHRvIHByZXZpZXcuICovXHJcbiAgb25QcmV2aWV3OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIC8qKiBFbmFibGUvRGlzYWJsZSBzYXZlIGljb24gaWYgY2hhbmdlZC4gKi9cclxuICBjaGFuZ2VkOiBQcm9wVHlwZXMuYm9vbCxcclxuICAvKiogRnVuY3Rpb24gdG8gcHJvcG9nYXRlIGNoYW5nZXMgdG8gc2F2ZS4gKi9cclxuICBvblNhdmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbn07XHJcblxyXG5jb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKHRoZW1lID0+ICh7XHJcbiAgYWN0aW9uczoge1xyXG4gICAgdGV4dEFsaWduOiAncmlnaHQnLFxyXG4gICAgcGFkZGluZ1JpZ2h0OiBgJHt0aGVtZS5zcGFjaW5nKDEuNSl9cHhgLFxyXG4gIH0sXHJcbiAgYWN0aW9uOiB7XHJcbiAgICBtYXJnaW5MZWZ0OiBgJHt0aGVtZS5zcGFjaW5nKDEpfXB4YCxcclxuICB9XHJcbn0pKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFjdGlvbnM7XHJcbiJdfQ==