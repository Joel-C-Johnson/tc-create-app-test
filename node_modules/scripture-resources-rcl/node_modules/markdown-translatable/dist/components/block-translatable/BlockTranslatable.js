"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _styles = require("@material-ui/core/styles");

var _core = require("@material-ui/core");

var _blockEditable = _interopRequireDefault(require("../block-editable"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function BlockTranslatable(_ref) {
  var original = _ref.original,
      translation = _ref.translation,
      onTranslation = _ref.onTranslation,
      inputFilters = _ref.inputFilters,
      outputFilters = _ref.outputFilters,
      style = _ref.style,
      preview = _ref.preview;
  var classes = useStyles();
  var originalBlock = (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement(_blockEditable.default, {
      markdown: original,
      inputFilters: inputFilters,
      outputFilters: outputFilters,
      preview: preview,
      editable: false
    });
  }, [original, inputFilters, outputFilters, preview]);
  var translationBlock = (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement(_blockEditable.default, {
      markdown: translation,
      onEdit: onTranslation,
      inputFilters: inputFilters,
      outputFilters: outputFilters,
      preview: preview,
      editable: true
    });
  }, [translation, onTranslation, inputFilters, outputFilters, preview]);
  return /*#__PURE__*/_react.default.createElement(_core.Grid, {
    container: true,
    wrap: "nowrap",
    spacing: 0,
    className: classes.root,
    style: style
  }, /*#__PURE__*/_react.default.createElement(_core.Grid, {
    item: true,
    xs: 12,
    className: classes.original
  }, originalBlock), /*#__PURE__*/_react.default.createElement(_core.Grid, {
    item: true,
    xs: 12,
    className: classes.translation
  }, translationBlock));
}

;
BlockTranslatable.propTypes = {
  /** Original markdown for the editor. */
  original: _propTypes.default.string.isRequired,

  /** Translation markdown for the editor. */
  translation: _propTypes.default.string.isRequired,

  /** Function to propogate changes to the translation. */
  onTranslation: _propTypes.default.func.isRequired,

  /** Replace strings before rendering. */
  inputFilters: _propTypes.default.array,

  /** Replace strings after editing. */
  outputFilters: _propTypes.default.array,

  /** CSS for the component. */
  style: _propTypes.default.object,

  /** Display Raw Markdown or HTML. */
  preview: _propTypes.default.bool
};
BlockTranslatable.defaultProps = {
  original: '',
  translation: '',
  inputFilters: [],
  outputFilters: [],
  style: {},
  preview: true
};
var useStyles = (0, _styles.makeStyles)(function (theme) {
  return {
    root: {},
    original: {
      background: '#eee4'
    },
    translation: {}
  };
});
var _default = BlockTranslatable;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL2Jsb2NrLXRyYW5zbGF0YWJsZS9CbG9ja1RyYW5zbGF0YWJsZS5qcyJdLCJuYW1lcyI6WyJCbG9ja1RyYW5zbGF0YWJsZSIsIm9yaWdpbmFsIiwidHJhbnNsYXRpb24iLCJvblRyYW5zbGF0aW9uIiwiaW5wdXRGaWx0ZXJzIiwib3V0cHV0RmlsdGVycyIsInN0eWxlIiwicHJldmlldyIsImNsYXNzZXMiLCJ1c2VTdHlsZXMiLCJvcmlnaW5hbEJsb2NrIiwidHJhbnNsYXRpb25CbG9jayIsInJvb3QiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiZnVuYyIsImFycmF5Iiwib2JqZWN0IiwiYm9vbCIsImRlZmF1bHRQcm9wcyIsInRoZW1lIiwiYmFja2dyb3VuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUEsU0FBU0EsaUJBQVQsT0FRRztBQUFBLE1BUERDLFFBT0MsUUFQREEsUUFPQztBQUFBLE1BTkRDLFdBTUMsUUFOREEsV0FNQztBQUFBLE1BTERDLGFBS0MsUUFMREEsYUFLQztBQUFBLE1BSkRDLFlBSUMsUUFKREEsWUFJQztBQUFBLE1BSERDLGFBR0MsUUFIREEsYUFHQztBQUFBLE1BRkRDLEtBRUMsUUFGREEsS0FFQztBQUFBLE1BRERDLE9BQ0MsUUFEREEsT0FDQztBQUNELE1BQU1DLE9BQU8sR0FBR0MsU0FBUyxFQUF6QjtBQUVBLE1BQU1DLGFBQWEsR0FBRyxvQkFBUTtBQUFBLHdCQUM1Qiw2QkFBQyxzQkFBRDtBQUNFLE1BQUEsUUFBUSxFQUFFVCxRQURaO0FBRUUsTUFBQSxZQUFZLEVBQUVHLFlBRmhCO0FBR0UsTUFBQSxhQUFhLEVBQUVDLGFBSGpCO0FBSUUsTUFBQSxPQUFPLEVBQUVFLE9BSlg7QUFLRSxNQUFBLFFBQVEsRUFBRTtBQUxaLE1BRDRCO0FBQUEsR0FBUixFQVFuQixDQUFDTixRQUFELEVBQVdHLFlBQVgsRUFBeUJDLGFBQXpCLEVBQXdDRSxPQUF4QyxDQVJtQixDQUF0QjtBQVVBLE1BQU1JLGdCQUFnQixHQUFHLG9CQUFRO0FBQUEsd0JBQy9CLDZCQUFDLHNCQUFEO0FBQ0UsTUFBQSxRQUFRLEVBQUVULFdBRFo7QUFFRSxNQUFBLE1BQU0sRUFBRUMsYUFGVjtBQUdFLE1BQUEsWUFBWSxFQUFFQyxZQUhoQjtBQUlFLE1BQUEsYUFBYSxFQUFFQyxhQUpqQjtBQUtFLE1BQUEsT0FBTyxFQUFFRSxPQUxYO0FBTUUsTUFBQSxRQUFRLEVBQUU7QUFOWixNQUQrQjtBQUFBLEdBQVIsRUFTdEIsQ0FBQ0wsV0FBRCxFQUFjQyxhQUFkLEVBQTZCQyxZQUE3QixFQUEyQ0MsYUFBM0MsRUFBMERFLE9BQTFELENBVHNCLENBQXpCO0FBV0Esc0JBQ0UsNkJBQUMsVUFBRDtBQUNFLElBQUEsU0FBUyxNQURYO0FBRUUsSUFBQSxJQUFJLEVBQUMsUUFGUDtBQUdFLElBQUEsT0FBTyxFQUFFLENBSFg7QUFJRSxJQUFBLFNBQVMsRUFBRUMsT0FBTyxDQUFDSSxJQUpyQjtBQUtFLElBQUEsS0FBSyxFQUFFTjtBQUxULGtCQU9FLDZCQUFDLFVBQUQ7QUFBTSxJQUFBLElBQUksTUFBVjtBQUFXLElBQUEsRUFBRSxFQUFFLEVBQWY7QUFBbUIsSUFBQSxTQUFTLEVBQUVFLE9BQU8sQ0FBQ1A7QUFBdEMsS0FDR1MsYUFESCxDQVBGLGVBVUUsNkJBQUMsVUFBRDtBQUFNLElBQUEsSUFBSSxNQUFWO0FBQVcsSUFBQSxFQUFFLEVBQUUsRUFBZjtBQUFtQixJQUFBLFNBQVMsRUFBRUYsT0FBTyxDQUFDTjtBQUF0QyxLQUNHUyxnQkFESCxDQVZGLENBREY7QUFnQkQ7O0FBQUE7QUFFRFgsaUJBQWlCLENBQUNhLFNBQWxCLEdBQThCO0FBQzVCO0FBQ0FaLEVBQUFBLFFBQVEsRUFBRWEsbUJBQVVDLE1BQVYsQ0FBaUJDLFVBRkM7O0FBRzVCO0FBQ0FkLEVBQUFBLFdBQVcsRUFBRVksbUJBQVVDLE1BQVYsQ0FBaUJDLFVBSkY7O0FBSzVCO0FBQ0FiLEVBQUFBLGFBQWEsRUFBRVcsbUJBQVVHLElBQVYsQ0FBZUQsVUFORjs7QUFPNUI7QUFDQVosRUFBQUEsWUFBWSxFQUFFVSxtQkFBVUksS0FSSTs7QUFTNUI7QUFDQWIsRUFBQUEsYUFBYSxFQUFFUyxtQkFBVUksS0FWRzs7QUFXNUI7QUFDQVosRUFBQUEsS0FBSyxFQUFFUSxtQkFBVUssTUFaVzs7QUFhNUI7QUFDQVosRUFBQUEsT0FBTyxFQUFFTyxtQkFBVU07QUFkUyxDQUE5QjtBQWlCQXBCLGlCQUFpQixDQUFDcUIsWUFBbEIsR0FBaUM7QUFDL0JwQixFQUFBQSxRQUFRLEVBQUUsRUFEcUI7QUFFL0JDLEVBQUFBLFdBQVcsRUFBRSxFQUZrQjtBQUcvQkUsRUFBQUEsWUFBWSxFQUFFLEVBSGlCO0FBSS9CQyxFQUFBQSxhQUFhLEVBQUUsRUFKZ0I7QUFLL0JDLEVBQUFBLEtBQUssRUFBRSxFQUx3QjtBQU0vQkMsRUFBQUEsT0FBTyxFQUFFO0FBTnNCLENBQWpDO0FBU0EsSUFBTUUsU0FBUyxHQUFHLHdCQUFXLFVBQUFhLEtBQUs7QUFBQSxTQUFLO0FBQ3JDVixJQUFBQSxJQUFJLEVBQUUsRUFEK0I7QUFHckNYLElBQUFBLFFBQVEsRUFBRTtBQUNSc0IsTUFBQUEsVUFBVSxFQUFFO0FBREosS0FIMkI7QUFNckNyQixJQUFBQSxXQUFXLEVBQUU7QUFOd0IsR0FBTDtBQUFBLENBQWhCLENBQWxCO2VBVWVGLGlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZU1lbW99IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IHttYWtlU3R5bGVzfSBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9zdHlsZXMnO1xyXG5pbXBvcnQge0dyaWR9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlJztcclxuaW1wb3J0IEJsb2NrRWRpdGFibGUgZnJvbSAnLi4vYmxvY2stZWRpdGFibGUnO1xyXG5cclxuZnVuY3Rpb24gQmxvY2tUcmFuc2xhdGFibGUoe1xyXG4gIG9yaWdpbmFsLFxyXG4gIHRyYW5zbGF0aW9uLFxyXG4gIG9uVHJhbnNsYXRpb24sXHJcbiAgaW5wdXRGaWx0ZXJzLFxyXG4gIG91dHB1dEZpbHRlcnMsXHJcbiAgc3R5bGUsXHJcbiAgcHJldmlldyxcclxufSkge1xyXG4gIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoKTtcclxuXHJcbiAgY29uc3Qgb3JpZ2luYWxCbG9jayA9IHVzZU1lbW8oKCkgPT4gKFxyXG4gICAgPEJsb2NrRWRpdGFibGVcclxuICAgICAgbWFya2Rvd249e29yaWdpbmFsfVxyXG4gICAgICBpbnB1dEZpbHRlcnM9e2lucHV0RmlsdGVyc31cclxuICAgICAgb3V0cHV0RmlsdGVycz17b3V0cHV0RmlsdGVyc31cclxuICAgICAgcHJldmlldz17cHJldmlld31cclxuICAgICAgZWRpdGFibGU9e2ZhbHNlfVxyXG4gICAgLz5cclxuICApLCBbb3JpZ2luYWwsIGlucHV0RmlsdGVycywgb3V0cHV0RmlsdGVycywgcHJldmlld10pO1xyXG5cclxuICBjb25zdCB0cmFuc2xhdGlvbkJsb2NrID0gdXNlTWVtbygoKSA9PiAoXHJcbiAgICA8QmxvY2tFZGl0YWJsZVxyXG4gICAgICBtYXJrZG93bj17dHJhbnNsYXRpb259XHJcbiAgICAgIG9uRWRpdD17b25UcmFuc2xhdGlvbn1cclxuICAgICAgaW5wdXRGaWx0ZXJzPXtpbnB1dEZpbHRlcnN9XHJcbiAgICAgIG91dHB1dEZpbHRlcnM9e291dHB1dEZpbHRlcnN9XHJcbiAgICAgIHByZXZpZXc9e3ByZXZpZXd9XHJcbiAgICAgIGVkaXRhYmxlPXt0cnVlfVxyXG4gICAgLz5cclxuICApLCBbdHJhbnNsYXRpb24sIG9uVHJhbnNsYXRpb24sIGlucHV0RmlsdGVycywgb3V0cHV0RmlsdGVycywgcHJldmlld10pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEdyaWRcclxuICAgICAgY29udGFpbmVyXHJcbiAgICAgIHdyYXA9XCJub3dyYXBcIlxyXG4gICAgICBzcGFjaW5nPXswfVxyXG4gICAgICBjbGFzc05hbWU9e2NsYXNzZXMucm9vdH1cclxuICAgICAgc3R5bGU9e3N0eWxlfVxyXG4gICAgPlxyXG4gICAgICA8R3JpZCBpdGVtIHhzPXsxMn0gY2xhc3NOYW1lPXtjbGFzc2VzLm9yaWdpbmFsfT5cclxuICAgICAgICB7b3JpZ2luYWxCbG9ja31cclxuICAgICAgPC9HcmlkPlxyXG4gICAgICA8R3JpZCBpdGVtIHhzPXsxMn0gY2xhc3NOYW1lPXtjbGFzc2VzLnRyYW5zbGF0aW9ufT5cclxuICAgICAgICB7dHJhbnNsYXRpb25CbG9ja31cclxuICAgICAgPC9HcmlkPlxyXG4gICAgPC9HcmlkPlxyXG4gICk7XHJcbn07XHJcblxyXG5CbG9ja1RyYW5zbGF0YWJsZS5wcm9wVHlwZXMgPSB7XHJcbiAgLyoqIE9yaWdpbmFsIG1hcmtkb3duIGZvciB0aGUgZWRpdG9yLiAqL1xyXG4gIG9yaWdpbmFsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgLyoqIFRyYW5zbGF0aW9uIG1hcmtkb3duIGZvciB0aGUgZWRpdG9yLiAqL1xyXG4gIHRyYW5zbGF0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgLyoqIEZ1bmN0aW9uIHRvIHByb3BvZ2F0ZSBjaGFuZ2VzIHRvIHRoZSB0cmFuc2xhdGlvbi4gKi9cclxuICBvblRyYW5zbGF0aW9uOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIC8qKiBSZXBsYWNlIHN0cmluZ3MgYmVmb3JlIHJlbmRlcmluZy4gKi9cclxuICBpbnB1dEZpbHRlcnM6IFByb3BUeXBlcy5hcnJheSxcclxuICAvKiogUmVwbGFjZSBzdHJpbmdzIGFmdGVyIGVkaXRpbmcuICovXHJcbiAgb3V0cHV0RmlsdGVyczogUHJvcFR5cGVzLmFycmF5LFxyXG4gIC8qKiBDU1MgZm9yIHRoZSBjb21wb25lbnQuICovXHJcbiAgc3R5bGU6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgLyoqIERpc3BsYXkgUmF3IE1hcmtkb3duIG9yIEhUTUwuICovXHJcbiAgcHJldmlldzogUHJvcFR5cGVzLmJvb2wsXHJcbn07XHJcblxyXG5CbG9ja1RyYW5zbGF0YWJsZS5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgb3JpZ2luYWw6ICcnLFxyXG4gIHRyYW5zbGF0aW9uOiAnJyxcclxuICBpbnB1dEZpbHRlcnM6IFtdLFxyXG4gIG91dHB1dEZpbHRlcnM6IFtdLFxyXG4gIHN0eWxlOiB7fSxcclxuICBwcmV2aWV3OiB0cnVlLFxyXG59O1xyXG5cclxuY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyh0aGVtZSA9PiAoe1xyXG4gIHJvb3Q6IHtcclxuICB9LFxyXG4gIG9yaWdpbmFsOiB7XHJcbiAgICBiYWNrZ3JvdW5kOiAnI2VlZTQnLFxyXG4gIH0sXHJcbiAgdHJhbnNsYXRpb246IHtcclxuICB9LFxyXG59KSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCbG9ja1RyYW5zbGF0YWJsZTtcclxuIl19